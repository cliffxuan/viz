/*! For license information please see 2.71296018.chunk.js.LICENSE.txt */
(this.webpackJsonphierarchy=this.webpackJsonphierarchy||[]).push([[2],[function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"h",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"w",(function(){return d})),n.d(e,"x",(function(){return p})),n.d(e,"kb",(function(){return g})),n.d(e,"O",(function(){return v})),n.d(e,"gb",(function(){return m})),n.d(e,"r",(function(){return y})),n.d(e,"K",(function(){return S})),n.d(e,"d",(function(){return w})),n.d(e,"b",(function(){return x})),n.d(e,"e",(function(){return _})),n.d(e,"c",(function(){return O})),n.d(e,"a",(function(){return k})),n.d(e,"N",(function(){return j})),n.d(e,"jb",(function(){return T})),n.d(e,"Q",(function(){return z})),n.d(e,"R",(function(){return B})),n.d(e,"S",(function(){return U})),n.d(e,"T",(function(){return W})),n.d(e,"lb",(function(){return V})),n.d(e,"mb",(function(){return q})),n.d(e,"nb",(function(){return G})),n.d(e,"ob",(function(){return K})),n.d(e,"V",(function(){return Y})),n.d(e,"hb",(function(){return Q})),n.d(e,"i",(function(){return X})),n.d(e,"j",(function(){return Z})),n.d(e,"k",(function(){return tt})),n.d(e,"l",(function(){return ot})),n.d(e,"m",(function(){return at})),n.d(e,"n",(function(){return c})),n.d(e,"o",(function(){return st})),n.d(e,"p",(function(){return ut})),n.d(e,"q",(function(){return ct})),n.d(e,"s",(function(){return dt})),n.d(e,"t",(function(){return f})),n.d(e,"u",(function(){return pt})),n.d(e,"v",(function(){return ft})),n.d(e,"y",(function(){return gt})),n.d(e,"z",(function(){return vt})),n.d(e,"A",(function(){return E})),n.d(e,"B",(function(){return mt})),n.d(e,"C",(function(){return yt})),n.d(e,"D",(function(){return J})),n.d(e,"E",(function(){return bt})),n.d(e,"F",(function(){return A})),n.d(e,"G",(function(){return wt})),n.d(e,"H",(function(){return xt})),n.d(e,"I",(function(){return _t})),n.d(e,"J",(function(){return Ot})),n.d(e,"L",(function(){return kt})),n.d(e,"M",(function(){return St})),n.d(e,"P",(function(){return At})),n.d(e,"U",(function(){return R})),n.d(e,"W",(function(){return Et})),n.d(e,"X",(function(){return Ct})),n.d(e,"Y",(function(){return l})),n.d(e,"Z",(function(){return jt})),n.d(e,"ab",(function(){return Tt})),n.d(e,"bb",(function(){return Rt})),n.d(e,"cb",(function(){return D})),n.d(e,"eb",(function(){return Dt})),n.d(e,"db",(function(){return Lt})),n.d(e,"fb",(function(){return Nt})),n.d(e,"ib",(function(){return It}));var r=function(t,e,n){return t.fields=e||[],t.fname=n,t};function i(t){return null==t?null:t.fname}function o(t){return null==t?null:t.fields}var a=function(t){return 1===t.length?s(t[0]):u(t)},s=function(t){return function(e){return e[t]}},u=function(t){var e=t.length;return function(n){for(var r=0;r<e;++r)n=n[t[r]];return n}},c=function(t){throw Error(t)},l=function(t){var e,n,r,i=[],o=null,a=0,s=t.length,u="";function l(){i.push(u+t.substring(e,n)),u="",e=n+1}for(t+="",e=n=0;n<s;++n)if("\\"===(r=t[n]))u+=t.substring(e,n),u+=t.substring(++n,++n),e=n;else if(r===o)l(),o=null,a=-1;else{if(o)continue;e===a&&'"'===r||e===a&&"'"===r?(e=n+1,o=r):"."!==r||a?"["===r?(n>e&&l(),a=e=n+1):"]"===r&&(a||c("Access path missing open bracket: "+t),a>0&&l(),a=0,e=n+1):n>e?l():e=n+1}return a&&c("Access path missing closing bracket: "+t),o&&c("Access path missing closing quote: "+t),n>e&&(n++,l()),i},f=function(t,e,n){var i=l(t);return t=1===i.length?i[0]:t,r((n&&n.get||a)(i),[t],e||t)},h=[],d=f("id"),p=r((function(t){return t}),h,"identity"),g=r((function(){return 0}),h,"zero"),v=r((function(){return 1}),h,"one"),m=r((function(){return!0}),h,"true"),y=r((function(){return!1}),h,"false");function b(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}var w=0,x=1,_=2,O=3,k=4,S=function(t,e){var n=t||w;return{level:function(t){return arguments.length?(n=+t,this):n},error:function(){return n>=x&&b(e||"error","ERROR",arguments),this},warn:function(){return n>=_&&b(e||"warn","WARN",arguments),this},info:function(){return n>=O&&b(e||"log","INFO",arguments),this},debug:function(){return n>=k&&b(e||"log","DEBUG",arguments),this}}},E=Array.isArray,A=function(t){return t===Object(t)},C=function(t){return"__proto__"!==t};function j(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){for(var n in e)if("signals"===n)t.signals=M(t.signals,e.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;T(t,n,e[n],r)}return t}),{})}function T(t,e,n,r){var i,o;if(C(e))if(A(n)&&!E(n))for(i in o=A(t[e])?t[e]:t[e]={},n)r&&(!0===r||r[i])?T(o,i,n[i]):C(i)&&(o[i]=n[i]);else t[e]=n}function M(t,e){if(null==t)return e;var n={},r=[];function i(t){n[t.name]||(n[t.name]=1,r.push(t))}return e.forEach(i),t.forEach(i),r}var R=function(t){return t[t.length-1]},D=function(t){return null==t||""===t?null:+t};function L(t){return function(e){return t*Math.exp(e)}}function N(t){return function(e){return Math.log(t*e)}}function I(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function F(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function P(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function $(t,e,n,r){var i=n(t[0]),o=n(R(t)),a=(o-i)*e;return[r(i-a),r(o-a)]}function z(t,e){return $(t,e,D,p)}function B(t,e){var n=Math.sign(t[0]);return $(t,e,N(n),L(n))}function U(t,e,n){return $(t,e,P(n),P(1/n))}function W(t,e,n){return $(t,e,I(n),F(n))}function H(t,e,n,r,i){var o=r(t[0]),a=r(R(t)),s=null!=e?r(e):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function V(t,e,n){return H(t,e,n,D,p)}function q(t,e,n){var r=Math.sign(t[0]);return H(t,e,n,N(r),L(r))}function G(t,e,n,r){return H(t,e,n,P(r),P(1/r))}function K(t,e,n,r){return H(t,e,n,I(r),F(r))}function Y(t){return 1+~~(new Date(t).getMonth()/3)}function Q(t){return 1+~~(new Date(t).getUTCMonth()/3)}var X=function(t){return null!=t?E(t)?t:[t]:[]},Z=function(t,e,n){var r,i=t[0],o=t[1];return o<i&&(r=o,o=i,i=r),(r=o-i)>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]},J=function(t){return"function"===typeof t},tt=function(t,e,n){n=n||{},e=X(e)||[];var i=[],a=[],s={},u=n.comparator||nt;return X(t).forEach((function(t,r){null!=t&&(i.push("descending"===e[r]?-1:1),a.push(t=J(t)?t:f(t,null,n)),(o(t)||[]).forEach((function(t){return s[t]=1})))})),0===a.length?null:r(u(a,i),Object.keys(s))},et=function(t,e){return(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0)},nt=function(t,e){return 1===t.length?rt(t[0],e[0]):it(t,e,t.length)},rt=function(t,e){return function(n,r){return et(t(n),t(r))*e}},it=function(t,e,n){return e.push(0),function(r,i){for(var o,a=0,s=-1;0===a&&++s<n;)o=t[s],a=et(o(r),o(i));return a*e[s]}},ot=function(t){return J(t)?t:function(){return t}},at=function(t,e){var n,r;function i(){e(r),n=r=null}return function(e){r=e,n&&clearTimeout(n),n=setTimeout(i,t)}},st=function(t){for(var e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r])t[n]=e[n];return t},ut=function(t,e){var n,r,i,o,a=0;if(t&&(n=t.length))if(null==e){for(r=t[a];a<n&&(null==r||r!==r);r=t[++a]);for(i=o=r;a<n;++a)null!=(r=t[a])&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=e(t[a]);a<n&&(null==r||r!==r);r=e(t[++a]));for(i=o=r;a<n;++a)null!=(r=e(t[a]))&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]},ct=function(t,e){var n,r,i,o,a,s=-1,u=t.length;if(null==e){for(;++s<u;)if(null!=(r=t[s])&&r>=r){n=i=r;break}if(s===u)return[-1,-1];for(o=a=s;++s<u;)null!=(r=t[s])&&(n>r&&(n=r,o=s),i<r&&(i=r,a=s))}else{for(;++s<u;)if(null!=(r=e(t[s],s,t))&&r>=r){n=i=r;break}if(s===u)return[-1,-1];for(o=a=s;++s<u;)null!=(r=e(t[s],s,t))&&(n>r&&(n=r,o=s),i<r&&(i=r,a=s))}return[o,a]},lt=Object.prototype.hasOwnProperty,ft=function(t,e){return lt.call(t,e)},ht={},dt=function(t){var e,n,r={};function i(t){return ft(r,t)&&r[t]!==ht}return e={size:0,empty:0,object:r,has:i,get:function(t){return i(t)?r[t]:void 0},set:function(t,n){return i(t)||(++e.size,r[t]===ht&&--e.empty),r[t]=n,this},delete:function(t){return i(t)&&(--e.size,++e.empty,r[t]=ht),this},clear:function(){e.size=e.empty=0,e.object=r={}},test:function(t){return arguments.length?(n=t,e):n},clean:function(){var t,i,o={},a=0;for(t in r)(i=r[t])===ht||n&&n(i)||(o[t]=i,++a);e.size=a,e.empty=0,e.object=r=o}},t&&Object.keys(t).forEach((function(n){e.set(n,t[n])})),e},pt=function(t,e,n,r,i,o){if(!n&&0!==n)return o;var a,s,u=t[0],c=R(t),l=+n;return c<u&&(a=u,u=c,c=a),(a=Math.abs(e-u))<(s=Math.abs(c-e))&&a<=l?r:s<=l?i:o},gt=function(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n},vt=function(t,e,n,r){var i,o=e[0],a=e[e.length-1];return o>a&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=t:o<t)&&(r?t<=a:t<a)},mt=function(t){return"boolean"===typeof t},yt=function(t){return"[object Date]"===Object.prototype.toString.call(t)},bt=function(t){return"number"===typeof t},wt=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},xt=function(t){return"string"===typeof t},_t=function(t,e,n){t&&(t=e?X(t).map((function(t){return t.replace(/\\(.)/g,"$1")})):X(t));var i,o=t&&t.length,s=n&&n.get||a,u=function(t){return s(e?[t]:l(t))};if(o)if(1===o){var c=u(t[0]);i=function(t){return""+c(t)}}else{var f=t.map(u);i=function(t){for(var e=""+f[0](t),n=0;++n<o;)e+="|"+f[n](t);return e}}else i=function(){return""};return r(i,t,"key")},Ot=function(t,e){var n=t[0],r=R(t),i=+e;return i?1===i?r:n+i*(r-n):n},kt=function(t){var e,n,r;t=+t||1e4;var i=function(){e={},n={},r=0},o=function(i,o){return++r>t&&(n=e,e={},r=1),e[i]=o};return i(),{clear:i,has:function(t){return ft(e,t)||ft(n,t)},get:function(t){return ft(e,t)?e[t]:ft(n,t)?o(t,n[t]):void 0},set:function(t,n){return ft(e,t)?e[t]=n:o(t,n)}}},St=function(t,e,n,r){var i=e.length,o=n.length;if(!o)return e;if(!i)return n;for(var a=r||new e.constructor(i+o),s=0,u=0,c=0;s<i&&u<o;++c)a[c]=t(e[s],n[u])>0?n[u++]:e[s++];for(;s<i;++s,++c)a[c]=e[s];for(;u<o;++u,++c)a[c]=n[u];return a},Et=function(t,e){for(var n="";--e>=0;)n+=t;return n},At=function(t,e,n,r){var i=n||" ",o=t+"",a=e-o.length;return a<=0?o:"left"===r?Et(i,a)+o:"center"===r?Et(i,~~(a/2))+o+Et(i,Math.ceil(a/2)):o+Et(i,a)},Ct=function(t){return t&&R(t)-t[0]||0};function jt(t){return E(t)?"["+t.map(jt)+"]":A(t)||xt(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var Tt=function(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t};function Mt(t){return bt(t)||yt(t)?t:Date.parse(t)}var Rt=function(t,e){return e=e||Mt,null==t||""===t?null:e(t)},Dt=function(t){return null==t||""===t?null:t+""},Lt=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e},Nt=function(t,e,n,r){var i=null!=r?r:"\u2026",o=t+"",a=o.length,s=Math.max(0,e-i.length);return a<=e?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i},It=function(t,e,n){if(t)if(e)for(var r,i=0,o=t.length;i<o;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(38);function i(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(r.a)(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}},function(t,e,n){"use strict";t.exports=n(140)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(53);var i=n(72),o=n(38);function a(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||Object(i.a)(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(69);function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(r.a)(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(24),i=n(68);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=n(21);function s(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?Object(a.a)(t):e}function u(t){return function(){var e,n=Object(r.a)(t);if(Object(i.a)()){var o=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return s(this,e)}}},function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return r}))},function(t,e,n){t.exports=n(145)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(64);var i=n(38),o=n(65);function a(t,e){return Object(r.a)(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||Object(i.a)(t,e)||Object(o.a)()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(48);function i(t,e){if(null==t)return{};var n,i,o=Object(r.a)(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}},,function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},function(t,e,n){t.exports=n(147)()},function(t,e,n){"use strict";function r(t){return null!=t&&"object"===typeof t&&!0===t["@@functional/placeholder"]}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){var e,n,i="";if("string"===typeof t||"number"===typeof t)i+=t;else if("object"===typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}e.a=function(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(20),i=n(16);function o(t){return function e(n,o){switch(arguments.length){case 0:return e;case 1:return Object(i.a)(n)?e:Object(r.a)((function(e){return t(n,e)}));default:return Object(i.a)(n)&&Object(i.a)(o)?e:Object(i.a)(n)?Object(r.a)((function(e){return t(e,o)})):Object(i.a)(o)?Object(r.a)((function(e){return t(n,e)})):t(n,o)}}}},function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return T})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return O}));var i=n(2),o=n.n(i),a=(n(15),n(31)),s=n(91),u=n(28);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var l=n(92),f=n.n(l);n(107);function h(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n(67);var d=function(t){var e=Object(s.a)();return e.displayName=t,e}("Router-History"),p=function(t){var e=Object(s.a)();return e.displayName=t,e}("Router"),g=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen((function(t){n._isMounted?n.setState({location:t}):n._pendingLocation=t}))),n}r(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return o.a.createElement(p.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.a.createElement(d.Provider,{children:this.props.children||null,value:this.props.history}))},e}(o.a.Component);o.a.Component;var v=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(t){this.props.onUpdate&&this.props.onUpdate.call(this,this,t)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},e}(o.a.Component);var m={},y=0;function b(t,e){return void 0===t&&(t="/"),void 0===e&&(e={}),"/"===t?t:function(t){if(m[t])return m[t];var e=f.a.compile(t);return y<1e4&&(m[t]=e,y++),e}(t)(e,{pretty:!0})}function w(t){var e=t.computedMatch,n=t.to,r=t.push,i=void 0!==r&&r;return o.a.createElement(p.Consumer,null,(function(t){t||Object(u.a)(!1);var r=t.history,s=t.staticContext,l=i?r.push:r.replace,f=Object(a.c)(e?"string"===typeof n?b(n,e.params):c({},n,{pathname:b(n.pathname,e.params)}):n);return s?(l(f),null):o.a.createElement(v,{onMount:function(){l(f)},onUpdate:function(t,e){var n=Object(a.c)(e.to);Object(a.f)(n,c({},f,{key:n.key}))||l(f)},to:n})}))}var x={},_=0;function O(t,e){void 0===e&&(e={}),("string"===typeof e||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(e,n){if(!n&&""!==n)return null;if(e)return e;var r=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=x[n]||(x[n]={});if(r[t])return r[t];var i=[],o={regexp:f()(t,i,e),keys:i};return _<1e4&&(r[t]=o,_++),o}(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(t);if(!u)return null;var l=u[0],h=u.slice(1),d=t===l;return o&&!d?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:d,params:a.reduce((function(t,e,n){return t[e.name]=h[n],t}),{})}}),null)}var k=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var t=this;return o.a.createElement(p.Consumer,null,(function(e){e||Object(u.a)(!1);var n=t.props.location||e.location,r=c({},e,{location:n,match:t.props.computedMatch?t.props.computedMatch:t.props.path?O(n.pathname,t.props):e.match}),i=t.props,a=i.children,s=i.component,l=i.render;return Array.isArray(a)&&0===a.length&&(a=null),o.a.createElement(p.Provider,{value:r},r.match?a?"function"===typeof a?a(r):a:s?o.a.createElement(s,r):l?l(r):null:"function"===typeof a?a(r):null)}))},e}(o.a.Component);function S(t){return"/"===t.charAt(0)?t:"/"+t}function E(t,e){if(!t)return e;var n=S(t);return 0!==e.pathname.indexOf(n)?e:c({},e,{pathname:e.pathname.substr(n.length)})}function A(t){return"string"===typeof t?t:Object(a.e)(t)}function C(t){return function(){Object(u.a)(!1)}}function j(){}o.a.Component;var T=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var t=this;return o.a.createElement(p.Consumer,null,(function(e){e||Object(u.a)(!1);var n,r,i=t.props.location||e.location;return o.a.Children.forEach(t.props.children,(function(t){if(null==r&&o.a.isValidElement(t)){n=t;var a=t.props.path||t.props.from;r=a?O(i.pathname,c({},t.props,{path:a})):e.match}})),r?o.a.cloneElement(n,{location:i,computedMatch:r}):null}))},e}(o.a.Component);o.a.useContext},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(16);function i(t){return function e(n){return 0===arguments.length||Object(r.a)(n)?e:t.apply(this,arguments)}}},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(9),i=n(12),o=n(2),a=n.n(o),s=(n(15),n(67)),u=n.n(s),c=n(196);function l(t){var e=t.theme,n=t.name,r=t.props;if(!e||!e.props||!e.props[n])return r;var i,o=e.props[n];for(i in o)void 0===r[i]&&(r[i]=o[i]);return r}var f=n(232),h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var o=e.defaultTheme,s=e.withTheme,h=void 0!==s&&s,d=e.name,p=Object(i.a)(e,["defaultTheme","withTheme","name"]);var g=d,v=Object(c.a)(t,Object(r.a)({defaultTheme:o,Component:n,name:d||n.displayName,classNamePrefix:g},p)),m=a.a.forwardRef((function(t,e){t.classes;var s,u=t.innerRef,c=Object(i.a)(t,["classes","innerRef"]),p=v(Object(r.a)(Object(r.a)({},n.defaultProps),t)),g=c;return("string"===typeof d||h)&&(s=Object(f.a)()||o,d&&(g=l({theme:s,name:d,props:c})),h&&!g.theme&&(g.theme=s)),a.a.createElement(n,Object(r.a)({ref:u||e,classes:p},g))}));return u()(m,n),m}},d=n(74);e.a=function(t,e){return h(t,Object(r.a)({defaultTheme:d.a},e))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"f",(function(){return ot})),n.d(e,"c",(function(){return ct})),n.d(e,"e",(function(){return ut})),n.d(e,"d",(function(){return at}));var r,i,o,a,s,u="Literal",c="CallExpression";function l(t){this.type=t}l.prototype.visit=function(t){var e,n,r;if(t(this))return 1;for(n=0,r=(e=function(t){switch(t.type){case"ArrayExpression":return t.elements;case"BinaryExpression":case"LogicalExpression":return[t.left,t.right];case c:var e=t.arguments.slice();return e.unshift(t.callee),e;case"ConditionalExpression":return[t.test,t.consequent,t.alternate];case"MemberExpression":return[t.object,t.property];case"ObjectExpression":return t.properties;case"Property":return[t.key,t.value];case"UnaryExpression":return[t.argument];case"Identifier":case u:case"RawCode":default:return[]}}(this)).length;n<r;++n)if(e[n].visit(t))return 1};(r={})[1]="Boolean",r[2]="<end>",r[3]="Identifier",r[4]="Keyword",r[5]="Null",r[6]="Numeric",r[7]="Punctuator",r[8]="String",r[9]="RegularExpression";var f="ILLEGAL",h=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),d=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function p(t,e){if(!t)throw new Error("ASSERT: "+e)}function g(t){return t>=48&&t<=57}function v(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function m(t){return"01234567".indexOf(t)>=0}function y(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function b(t){return 10===t||13===t||8232===t||8233===t}function w(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&h.test(String.fromCharCode(t))}function x(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&d.test(String.fromCharCode(t))}var _={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function O(){for(var t;o<a&&(y(t=i.charCodeAt(o))||b(t));)++o}function k(t){var e,n,r,s=0;for(n="u"===t?4:2,e=0;e<n;++e)o<a&&v(i[o])?(r=i[o++],s=16*s+"0123456789abcdef".indexOf(r.toLowerCase())):z({},"Unexpected token %0",f);return String.fromCharCode(s)}function S(){var t,e,n,r;for(e=0,"}"===(t=i[o])&&z({},"Unexpected token %0",f);o<a&&v(t=i[o++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&z({},"Unexpected token %0",f),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function E(){var t,e;for(t=i.charCodeAt(o++),e=String.fromCharCode(t),92===t&&(117!==i.charCodeAt(o)&&z({},"Unexpected token %0",f),++o,(t=k("u"))&&"\\"!==t&&w(t.charCodeAt(0))||z({},"Unexpected token %0",f),e=t);o<a&&x(t=i.charCodeAt(o));)++o,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==i.charCodeAt(o)&&z({},"Unexpected token %0",f),++o,(t=k("u"))&&"\\"!==t&&x(t.charCodeAt(0))||z({},"Unexpected token %0",f),e+=t);return e}function A(){var t,e;return t=o,{type:1===(e=92===i.charCodeAt(o)?E():function(){var t,e;for(t=o++;o<a;){if(92===(e=i.charCodeAt(o)))return o=t,E();if(!x(e))break;++o}return i.slice(t,o)}()).length?3:_.hasOwnProperty(e)?4:"null"===e?5:"true"===e||"false"===e?1:3,value:e,start:t,end:o}}function C(){var t,e,n,r,a=o,s=i.charCodeAt(o),u=i[o];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++o,{type:7,value:String.fromCharCode(s),start:a,end:o};default:if(61===(t=i.charCodeAt(o+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return o+=2,{type:7,value:String.fromCharCode(s)+String.fromCharCode(t),start:a,end:o};case 33:case 61:return o+=2,61===i.charCodeAt(o)&&++o,{type:7,value:i.slice(a,o),start:a,end:o}}}return">>>="===(r=i.substr(o,4))?{type:7,value:r,start:a,end:o+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:a,end:o+=3}:u===(e=n.substr(0,2))[1]&&"+-<>&|".indexOf(u)>=0||"=>"===e?{type:7,value:e,start:a,end:o+=2}:"<>=!+-*%&|^/".indexOf(u)>=0?{type:7,value:u,start:a,end:++o}:void z({},"Unexpected token %0",f)}function j(){var t,e,n;if(p(g((n=i[o]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=o,t="","."!==n){if(t=i[o++],n=i[o],"0"===t){if("x"===n||"X"===n)return++o,function(t){for(var e="";o<a&&v(i[o]);)e+=i[o++];return 0===e.length&&z({},"Unexpected token %0",f),w(i.charCodeAt(o))&&z({},"Unexpected token %0",f),{type:6,value:parseInt("0x"+e,16),start:t,end:o}}(e);if(m(n))return function(t){for(var e="0"+i[o++];o<a&&m(i[o]);)e+=i[o++];return(w(i.charCodeAt(o))||g(i.charCodeAt(o)))&&z({},"Unexpected token %0",f),{type:6,value:parseInt(e,8),octal:!0,start:t,end:o}}(e);n&&g(n.charCodeAt(0))&&z({},"Unexpected token %0",f)}for(;g(i.charCodeAt(o));)t+=i[o++];n=i[o]}if("."===n){for(t+=i[o++];g(i.charCodeAt(o));)t+=i[o++];n=i[o]}if("e"===n||"E"===n)if(t+=i[o++],"+"!==(n=i[o])&&"-"!==n||(t+=i[o++]),g(i.charCodeAt(o)))for(;g(i.charCodeAt(o));)t+=i[o++];else z({},"Unexpected token %0",f);return w(i.charCodeAt(o))&&z({},"Unexpected token %0",f),{type:6,value:parseFloat(t),start:e,end:o}}function T(){var t,e,n,r;return s=null,O(),t=o,e=function(){var t,e,n,r;for(p("/"===(t=i[o]),"Regular expression literal must start with a slash"),e=i[o++],n=!1,r=!1;o<a;)if(e+=t=i[o++],"\\"===t)b((t=i[o++]).charCodeAt(0))&&z({},"Invalid regular expression: missing /"),e+=t;else if(b(t.charCodeAt(0)))z({},"Invalid regular expression: missing /");else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||z({},"Invalid regular expression: missing /"),{value:e.substr(1,e.length-2),literal:e}}(),n=function(){var t,e,n;for(e="",n="";o<a&&x((t=i[o]).charCodeAt(0));)++o,"\\"===t&&o<a?z({},"Unexpected token %0",f):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&z({},"Invalid regular expression",n),{value:n,literal:e}}(),r=function(t,e){var n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(t,e){if(parseInt(e,16)<=1114111)return"x";z({},"Invalid regular expression")})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){z({},"Invalid regular expression")}try{return new RegExp(t,e)}catch(i){return null}}(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:o}}function M(){var t;return O(),o>=a?{type:2,start:o,end:o}:w(t=i.charCodeAt(o))?A():40===t||41===t||59===t?C():39===t||34===t?function(){var t,e,n,r,s="",u=!1;for(p("'"===(t=i[o])||'"'===t,"String literal must starts with a quote"),e=o,++o;o<a;){if((n=i[o++])===t){t="";break}if("\\"===n)if((n=i[o++])&&b(n.charCodeAt(0)))"\r"===n&&"\n"===i[o]&&++o;else switch(n){case"u":case"x":"{"===i[o]?(++o,s+=S()):s+=k(n);break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="\v";break;default:m(n)?(0!==(r="01234567".indexOf(n))&&(u=!0),o<a&&m(i[o])&&(u=!0,r=8*r+"01234567".indexOf(i[o++]),"0123".indexOf(n)>=0&&o<a&&m(i[o])&&(r=8*r+"01234567".indexOf(i[o++]))),s+=String.fromCharCode(r)):s+=n}else{if(b(n.charCodeAt(0)))break;s+=n}}return""!==t&&z({},"Unexpected token %0",f),{type:8,value:s,octal:u,start:e,end:o}}():46===t?g(i.charCodeAt(o+1))?j():C():g(t)?j():C()}function R(){var t;return o=(t=s).end,s=M(),o=t.end,t}function D(){var t;t=o,s=M(),o=t}function L(t,e,n){var r=new l("||"===t||"&&"===t?"LogicalExpression":"BinaryExpression");return r.operator=t,r.left=e,r.right=n,r}function N(t,e){var n=new l("CallExpression");return n.callee=t,n.arguments=e,n}function I(t){var e=new l("Identifier");return e.name=t,e}function F(t){var e=new l("Literal");return e.value=t.value,e.raw=i.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function P(t,e,n){var r=new l("MemberExpression");return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function $(t,e,n){var r=new l("Property");return r.key=e,r.value=n,r.kind=t,r}function z(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(function(t,e){return p(e<r.length,"Message reference must be in range"),r[e]}));throw(n=new Error(i)).index=o,n.description=i,n}function B(t){2===t.type&&z(t,"Unexpected end of input"),6===t.type&&z(t,"Unexpected number"),8===t.type&&z(t,"Unexpected string"),3===t.type&&z(t,"Unexpected identifier"),4===t.type&&z(t,"Unexpected reserved word"),z(t,"Unexpected token %0",t.value)}function U(t){var e=R();7===e.type&&e.value===t||B(e)}function W(t){return 7===s.type&&s.value===t}function H(t){return 4===s.type&&s.value===t}function V(){var t=[];for(o=s.start,U("[");!W("]");)W(",")?(R(),t.push(null)):(t.push(rt()),W("]")||U(","));return R(),function(t){var e=new l("ArrayExpression");return e.elements=t,e}(t)}function q(){var t;return o=s.start,8===(t=R()).type||6===t.type?(t.octal&&z(t,"Octal literals are not allowed in strict mode."),F(t)):I(t.value)}function G(){var t,e,n;return o=s.start,3===(t=s).type?(n=q(),U(":"),$("init",n,rt())):2!==t.type&&7!==t.type?(e=q(),U(":"),$("init",e,rt())):void B(t)}function K(){var t,e,n=[],r={},i=String;for(o=s.start,U("{");!W("}");)e="$"+("Identifier"===(t=G()).key.type?t.key.name:i(t.key.value)),Object.prototype.hasOwnProperty.call(r,e)?z({},"Duplicate data property in object literal not allowed in strict mode"):r[e]=!0,n.push(t),W("}")||U(",");return U("}"),function(t){var e=new l("ObjectExpression");return e.properties=t,e}(n)}var Y={if:1};function Q(){var t,e,n;if(W("("))return function(){var t;return U("("),t=it(),U(")"),t}();if(W("["))return V();if(W("{"))return K();if(t=s.type,o=s.start,3===t||Y[s.value])n=I(R().value);else if(8===t||6===t)s.octal&&z(s,"Octal literals are not allowed in strict mode."),n=F(R());else{if(4===t)throw new Error("Disabled.");1===t?((e=R()).value="true"===e.value,n=F(e)):5===t?((e=R()).value=null,n=F(e)):W("/")||W("/=")?(n=F(T()),D()):B(R())}return n}function X(){var t=[];if(U("("),!W(")"))for(;o<a&&(t.push(rt()),!W(")"));)U(",");return U(")"),t}function Z(){return U("."),function(){var t;return o=s.start,function(t){return 3===t.type||4===t.type||1===t.type||5===t.type}(t=R())||B(t),I(t.value)}()}function J(){var t;return U("["),t=it(),U("]"),t}function tt(){var t=function(){var t;for(t=Q();;)if(W("."))t=P(".",t,Z());else if(W("("))t=N(t,X());else{if(!W("["))break;t=P("[",t,J())}return t}();if(7===s.type&&(W("++")||W("--")))throw new Error("Disabled.");return t}function et(){var t,e;if(7!==s.type&&4!==s.type)e=tt();else{if(W("++")||W("--"))throw new Error("Disabled.");if(W("+")||W("-")||W("~")||W("!"))t=R(),e=et(),e=function(t,e){var n=new l("UnaryExpression");return n.operator=t,n.argument=e,n.prefix=!0,n}(t.value,e);else{if(H("delete")||H("void")||H("typeof"))throw new Error("Disabled.");e=tt()}}return e}function nt(t){var e=0;if(7!==t.type&&4!==t.type)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function rt(){var t,e;return t=function(){var t,e,n,r,i,o,a,u,c,l;if(t=s,c=et(),0===(i=nt(r=s)))return c;for(r.prec=i,R(),e=[t,s],o=[c,r,a=et()];(i=nt(s))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),u=o.pop().value,c=o.pop(),e.pop(),n=L(u,c,a),o.push(n);(r=R()).prec=i,o.push(r),e.push(s),n=et(),o.push(n)}for(n=o[l=o.length-1],e.pop();l>1;)e.pop(),n=L(o[l-1].value,o[l-2],n),l-=2;return n}(),W("?")&&(R(),e=rt(),U(":"),t=function(t,e,n){var r=new l("ConditionalExpression");return r.test=t,r.consequent=e,r.alternate=n,r}(t,e,rt())),t}function it(){var t=rt();if(W(","))throw new Error("Disabled.");return t}var ot=function(t){o=0,a=(i=t).length,s=null,D();var e=it();if(2!==s.type)throw new Error("Unexpect token after expression.");return e},at={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},st=n(0),ut=function(t){function e(e,n,r){return function(i){return function(e,n,r,i){var o=t(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}(e,i,n,r)}}var n="new Date";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&Object(st.n)("Missing arguments to clamp function."),e.length>3&&Object(st.n)("Too many arguments to clamp function.");var n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:e("getDate",n,0),day:e("getDay",n,0),year:e("getFullYear",n,0),month:e("getMonth",n,0),hours:e("getHours",n,0),minutes:e("getMinutes",n,0),seconds:e("getSeconds",n,0),milliseconds:e("getMilliseconds",n,0),time:e("getTime",n,0),timezoneoffset:e("getTimezoneOffset",n,0),utcdate:e("getUTCDate",n,0),utcday:e("getUTCDay",n,0),utcyear:e("getUTCFullYear",n,0),utcmonth:e("getUTCMonth",n,0),utchours:e("getUTCHours",n,0),utcminutes:e("getUTCMinutes",n,0),utcseconds:e("getUTCSeconds",n,0),utcmilliseconds:e("getUTCMilliseconds",n,0),length:e("length",null,-1),join:e("join",null),indexof:e("indexOf",null),lastindexof:e("lastIndexOf",null),slice:e("slice",null),reverse:function(e){return"("+t(e[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:e("toUpperCase","String",0),lower:e("toLowerCase","String",0),substring:e("substring","String"),split:e("split","String"),replace:e("replace","String"),trim:e("trim","String",0),regexp:"RegExp",test:e("test","RegExp"),if:function(e){e.length<3&&Object(st.n)("Missing arguments to if function."),e.length>3&&Object(st.n)("Too many arguments to if function.");var n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};var ct=function(t){var e=(t=t||{}).whitelist?Object(st.db)(t.whitelist):{},n=t.blacklist?Object(st.db)(t.blacklist):{},r=t.constants||at,i=(t.functions||ut)(f),o=t.globalvar,a=t.fieldvar,s={},u={},c=0,l=Object(st.D)(o)?o:function(t){return o+'["'+t+'"]'};function f(t){if(Object(st.H)(t))return t;var e=h[t.type];return null==e&&Object(st.n)("Unsupported type: "+t.type),e(t)}var h={Literal:function(t){return t.raw},Identifier:function(t){var i=t.name;return c>0?i:Object(st.v)(n,i)?Object(st.n)("Illegal identifier: "+i):Object(st.v)(r,i)?r[i]:Object(st.v)(e,i)?i:(s[i]=1,l(i))},MemberExpression:function(t){var e=!t.computed,n=f(t.object);e&&(c+=1);var r=f(t.property);return n===a&&(u[function(t){var e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}(r)]=1),e&&(c-=1),n+(e?"."+r:"["+r+"]")},CallExpression:function(t){"Identifier"!==t.callee.type&&Object(st.n)("Illegal callee type: "+t.callee.type);var e=t.callee.name,n=t.arguments,r=Object(st.v)(i,e)&&i[e];return r||Object(st.n)("Unrecognized function: "+e),Object(st.D)(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(t){return"["+t.elements.map(f).join(",")+"]"},BinaryExpression:function(t){return"("+f(t.left)+t.operator+f(t.right)+")"},UnaryExpression:function(t){return"("+t.operator+f(t.argument)+")"},ConditionalExpression:function(t){return"("+f(t.test)+"?"+f(t.consequent)+":"+f(t.alternate)+")"},LogicalExpression:function(t){return"("+f(t.left)+t.operator+f(t.right)+")"},ObjectExpression:function(t){return"{"+t.properties.map(f).join(",")+"}"},Property:function(t){c+=1;var e=f(t.key);return c-=1,e+":"+f(t.value)}};function d(t){var e={code:f(t),globals:Object.keys(s),fields:Object.keys(u)};return s={},u={},e}return d.functions=i,d.constants=r,d}},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(134);function i(t){if("string"!==typeof t)throw new Error(Object(r.a)(7));return t.charAt(0).toUpperCase()+t.slice(1)}},function(t,e,n){var r=n(81),i=n(82),o=n(60),a=n(59),s=a.MAX_LENGTH,u=a.MAX_SAFE_INTEGER,c=n(45),l=c.re,f=c.t,h=n(83).compareIdentifiers,d=function(){"use strict";function t(e,n){if(r(this,t),n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1}),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if("string"!==typeof e)throw new TypeError("Invalid Version: ".concat(e));if(e.length>s)throw new TypeError("version is longer than ".concat(s," characters"));o("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var i=e.trim().match(n.loose?l[f.LOOSE]:l[f.FULL]);if(!i)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>u||this.major<0)throw new TypeError("Invalid major version");if(this.minor>u||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>u||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<u)return e}return t})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}return i(t,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(e){if(o("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if("string"===typeof e&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}},{key:"compareMain",value:function(e){return e instanceof t||(e=new t(e,this.options)),h(this.major,e.major)||h(this.minor,e.minor)||h(this.patch,e.patch)}},{key:"comparePre",value:function(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],i=e.prerelease[n];if(o("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return h(r,i)}while(++n)}},{key:"compareBuild",value:function(e){e instanceof t||(e=new t(e,this.options));var n=0;do{var r=this.build[n],i=e.build[n];if(o("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return h(r,i)}while(++n)}},{key:"inc",value:function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"===typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: ".concat(t))}return this.format(),this.raw=this.version,this}}]),t}();t.exports=d},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r,i,o=function(t,e,n){return r=e||a,i=n||u,l(t.trim()).map(f)},a="view",s=/[[\]{}]/,u={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function c(t,e,n,r,i){for(var o,a=0,s=t.length;e<s;++e){if(o=t[e],!a&&o===n)return e;i&&i.indexOf(o)>=0?--a:r&&r.indexOf(o)>=0&&++a}return e}function l(t){for(var e=[],n=0,r=t.length,i=0;i<r;)i=c(t,i,",","[{","]}"),e.push(t.substring(n,i).trim()),n=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function f(t){return"["===t[0]?function(t){var e,n,r=t.length,i=1;if((i=c(t,i,"]","[","]"))===r)throw"Empty between selector: "+t;if(2!==(e=l(t.substring(1,i))).length)throw"Between selector must have two elements: "+t;if(">"!==(t=t.slice(i+1).trim())[0])throw"Expected '>' after between selector: "+t;if(e=e.map(f),(n=f(t.slice(1).trim())).between)return{between:e,stream:n};n.between=e;return n}(t):function(t){var e,n,o={source:r},a=[],u=[0,0],l=0,f=0,h=t.length,d=0;if("}"===t[h-1]){if(!((d=t.lastIndexOf("{"))>=0))throw"Unmatched right brace: "+t;try{u=function(t){var e=t.split(",");if(!t.length||e.length>2)throw t;return e.map((function(e){var n=+e;if(n!==n)throw t;return n}))}(t.substring(d+1,h-1))}catch(g){throw"Invalid throttle specification: "+t}t=t.slice(0,d).trim(),h=t.length,d=0}if(!h)throw t;"@"===t[0]&&(l=++d);(e=c(t,d,":"))<h&&(a.push(t.substring(f,e).trim()),f=d=++e);if((d=c(t,d,"["))===h)a.push(t.substring(f,h).trim());else if(a.push(t.substring(f,d).trim()),n=[],(f=++d)===h)throw"Unmatched left bracket: "+t;for(;d<h;){if((d=c(t,d,"]"))===h)throw"Unmatched left bracket: "+t;if(n.push(t.substring(f,d).trim()),d<h-1&&"["!==t[++d])throw"Expected left bracket: "+t;f=++d}if(!(h=a.length)||s.test(a[h-1]))throw"Invalid event selector: "+t;h>1?(o.type=a[1],l?o.markname=a[0].slice(1):(p=a[0],i[p]?o.marktype=a[0]:o.source=a[0])):o.type=a[0];var p;"!"===o.type.slice(-1)&&(o.consume=!0,o.type=o.type.slice(0,-1));null!=n&&(o.filter=n);u[0]&&(o.throttle=u[0]);u[1]&&(o.debounce=u[1]);return o}(t)}},function(t,e,n){"use strict";e.a=function(t,e){if(!t)throw new Error("Invariant failed")}},,function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return f}));var r=n(134);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)}function o(t){if(t.type)return t;if("#"===t.charAt(0))return o(function(t){t=t.substr(1);var e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),n=t.match(e);return n&&1===n[0].length&&(n=n.map((function(t){return t+t}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(t,e){return e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3})).join(", "),")"):""}(t));var e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(Object(r.a)(3,t));var i=t.substring(e+1,t.length-1).split(",");return{type:n,values:i=i.map((function(t){return parseFloat(t)}))}}function a(t){var e=t.type,n=t.values;return-1!==e.indexOf("rgb")?n=n.map((function(t,e){return e<3?parseInt(t,10):t})):-1!==e.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(e,"(").concat(n.join(", "),")")}function s(t,e){var n=u(t),r=u(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(t){var e="hsl"===(t=o(t)).type?o(function(t){var e=(t=o(t)).values,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return i-s*Math.max(Math.min(e-3,9-e,1),-1)},c="rgb",l=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===t.type&&(c+="a",l.push(e[3])),a({type:c,values:l})}(t)).values:t.values;return e=e.map((function(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function c(t,e){return t=o(t),e=i(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),t.values[3]=e,a(t)}function l(t,e){if(t=o(t),e=i(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb"))for(var n=0;n<3;n+=1)t.values[n]*=1-e;return a(t)}function f(t,e){if(t=o(t),e=i(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(var n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;return a(t)}},function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function i(t){return"/"===t.charAt(0)}function o(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return E})),n.d(e,"d",(function(){return C})),n.d(e,"c",(function(){return g})),n.d(e,"f",(function(){return v})),n.d(e,"e",(function(){return p}));var a=function(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],a=e&&e.split("/")||[],s=t&&i(t),u=e&&i(e),c=s||u;if(t&&i(t)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var l=a[a.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=a.length;h>=0;h--){var d=a[h];"."===d?o(a,h):".."===d?(o(a,h),f++):f&&(o(a,h),f--)}if(!c)for(;f--;f)a.unshift("..");!c||""===a[0]||a[0]&&i(a[0])||a.unshift("");var p=a.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function s(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}var u=function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every((function(e,r){return t(e,n[r])}));if("object"===typeof e||"object"===typeof n){var r=s(e),i=s(n);return r!==e||i!==n?t(r,i):Object.keys(Object.assign({},e,n)).every((function(r){return t(e[r],n[r])}))}return!1},c=n(28);function l(t){return"/"===t.charAt(0)?t:"/"+t}function f(t){return"/"===t.charAt(0)?t.substr(1):t}function h(t,e){return function(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}(t,e)?t.substr(e.length):t}function d(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function p(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function g(t,e,n,i){var o;"string"===typeof t?(o=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t)).state=e:(void 0===(o=r({},t)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function v(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&u(t.state,e.state)}function m(){var t=null;var e=[];return{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,i){if(null!=t){var o="function"===typeof t?t(e,n):t;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(t){var n=!0;function r(){n&&t.apply(void 0,arguments)}return e.push(r),function(){n=!1,e=e.filter((function(t){return t!==r}))}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach((function(t){return t.apply(void 0,n)}))}}}var y=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(t,e){e(window.confirm(t))}function w(){try{return window.history.state||{}}catch(t){return{}}}function x(t){void 0===t&&(t={}),y||Object(c.a)(!1);var e=window.history,n=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=t,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,f=void 0===u?b:u,v=o.keyLength,x=void 0===v?6:v,_=t.basename?d(l(t.basename)):"";function O(t){var e=t||{},n=e.key,r=e.state,i=window.location,o=i.pathname+i.search+i.hash;return _&&(o=h(o,_)),g(o,r,n)}function k(){return Math.random().toString(36).substr(2,x)}var S=m();function E(t){r(P,t),P.length=e.length,S.notifyListeners(P.location,P.action)}function A(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||T(O(t.state))}function C(){T(O(w()))}var j=!1;function T(t){if(j)j=!1,E();else{S.confirmTransitionTo(t,"POP",f,(function(e){e?E({action:"POP",location:t}):function(t){var e=P.location,n=R.indexOf(e.key);-1===n&&(n=0);var r=R.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(j=!0,L(i))}(t)}))}}var M=O(w()),R=[M.key];function D(t){return _+p(t)}function L(t){e.go(t)}var N=0;function I(t){1===(N+=t)&&1===t?(window.addEventListener("popstate",A),i&&window.addEventListener("hashchange",C)):0===N&&(window.removeEventListener("popstate",A),i&&window.removeEventListener("hashchange",C))}var F=!1;var P={length:e.length,action:"POP",location:M,createHref:D,push:function(t,r){var i=g(t,r,k(),P.location);S.confirmTransitionTo(i,"PUSH",f,(function(t){if(t){var r=D(i),o=i.key,a=i.state;if(n)if(e.pushState({key:o,state:a},null,r),s)window.location.href=r;else{var u=R.indexOf(P.location.key),c=R.slice(0,u+1);c.push(i.key),R=c,E({action:"PUSH",location:i})}else window.location.href=r}}))},replace:function(t,r){var i=g(t,r,k(),P.location);S.confirmTransitionTo(i,"REPLACE",f,(function(t){if(t){var r=D(i),o=i.key,a=i.state;if(n)if(e.replaceState({key:o,state:a},null,r),s)window.location.replace(r);else{var u=R.indexOf(P.location.key);-1!==u&&(R[u]=i.key),E({action:"REPLACE",location:i})}else window.location.replace(r)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(t){void 0===t&&(t=!1);var e=S.setPrompt(t);return F||(I(1),F=!0),function(){return F&&(F=!1,I(-1)),e()}},listen:function(t){var e=S.appendListener(t);return I(1),function(){I(-1),e()}}};return P}var _={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+f(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:f,decodePath:l},slash:{encodePath:l,decodePath:l}};function O(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function k(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function S(t){window.location.replace(O(window.location.href)+"#"+t)}function E(t){void 0===t&&(t={}),y||Object(c.a)(!1);var e=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),t),i=n.getUserConfirmation,o=void 0===i?b:i,a=n.hashType,s=void 0===a?"slash":a,u=t.basename?d(l(t.basename)):"",f=_[s],v=f.encodePath,w=f.decodePath;function x(){var t=w(k());return u&&(t=h(t,u)),g(t)}var E=m();function A(t){r($,t),$.length=e.length,E.notifyListeners($.location,$.action)}var C=!1,j=null;function T(){var t,e,n=k(),r=v(n);if(n!==r)S(r);else{var i=x(),a=$.location;if(!C&&(e=i,(t=a).pathname===e.pathname&&t.search===e.search&&t.hash===e.hash))return;if(j===p(i))return;j=null,function(t){if(C)C=!1,A();else{E.confirmTransitionTo(t,"POP",o,(function(e){e?A({action:"POP",location:t}):function(t){var e=$.location,n=L.lastIndexOf(p(e));-1===n&&(n=0);var r=L.lastIndexOf(p(t));-1===r&&(r=0);var i=n-r;i&&(C=!0,N(i))}(t)}))}}(i)}}var M=k(),R=v(M);M!==R&&S(R);var D=x(),L=[p(D)];function N(t){e.go(t)}var I=0;function F(t){1===(I+=t)&&1===t?window.addEventListener("hashchange",T):0===I&&window.removeEventListener("hashchange",T)}var P=!1;var $={length:e.length,action:"POP",location:D,createHref:function(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=O(window.location.href)),n+"#"+v(u+p(t))},push:function(t,e){var n=g(t,void 0,void 0,$.location);E.confirmTransitionTo(n,"PUSH",o,(function(t){if(t){var e=p(n),r=v(u+e);if(k()!==r){j=e,function(t){window.location.hash=t}(r);var i=L.lastIndexOf(p($.location)),o=L.slice(0,i+1);o.push(e),L=o,A({action:"PUSH",location:n})}else A()}}))},replace:function(t,e){var n=g(t,void 0,void 0,$.location);E.confirmTransitionTo(n,"REPLACE",o,(function(t){if(t){var e=p(n),r=v(u+e);k()!==r&&(j=e,S(r));var i=L.indexOf(p($.location));-1!==i&&(L[i]=e),A({action:"REPLACE",location:n})}}))},go:N,goBack:function(){N(-1)},goForward:function(){N(1)},block:function(t){void 0===t&&(t=!1);var e=E.setPrompt(t);return P||(F(1),P=!0),function(){return P&&(P=!1,F(-1)),e()}},listen:function(t){var e=E.appendListener(t);return F(1),function(){F(-1),e()}}};return $}function A(t,e,n){return Math.min(Math.max(t,e),n)}function C(t){void 0===t&&(t={});var e=t,n=e.getUserConfirmation,i=e.initialEntries,o=void 0===i?["/"]:i,a=e.initialIndex,s=void 0===a?0:a,u=e.keyLength,c=void 0===u?6:u,l=m();function f(t){r(w,t),w.length=w.entries.length,l.notifyListeners(w.location,w.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=A(s,0,o.length-1),v=o.map((function(t){return g(t,void 0,"string"===typeof t?h():t.key||h())})),y=p;function b(t){var e=A(w.index+t,0,w.entries.length-1),r=w.entries[e];l.confirmTransitionTo(r,"POP",n,(function(t){t?f({action:"POP",location:r,index:e}):f()}))}var w={length:v.length,action:"POP",location:v[d],index:d,entries:v,createHref:y,push:function(t,e){var r=g(t,e,h(),w.location);l.confirmTransitionTo(r,"PUSH",n,(function(t){if(t){var e=w.index+1,n=w.entries.slice(0);n.length>e?n.splice(e,n.length-e,r):n.push(r),f({action:"PUSH",location:r,index:e,entries:n})}}))},replace:function(t,e){var r=g(t,e,h(),w.location);l.confirmTransitionTo(r,"REPLACE",n,(function(t){t&&(w.entries[w.index]=r,f({action:"REPLACE",location:r}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(t){var e=w.index+t;return e>=0&&e<w.entries.length},block:function(t){return void 0===t&&(t=!1),l.setPrompt(t)},listen:function(t){return l.appendListener(t)}};return w}},function(t,e,n){var r=n(26);t.exports=function(t,e,n){return new r(t,n).compare(new r(e,n))}},function(t,e,n){var r=n(81),i=n(82),o=function(){"use strict";function t(e,n){var i=this;if(r(this,t),n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1}),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(t){return i.parseRange(t.trim())})).filter((function(t){return t.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(e));this.format()}return i(t,[{key:"format",value:function(){return this.range=this.set.map((function(t){return t.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(t){var e=this,n=this.options.loose;t=t.trim();var r=n?l[f.HYPHENRANGELOOSE]:l[f.HYPHENRANGE];t=t.replace(r,E(this.options.includePrerelease)),s("hyphen replace",t),t=t.replace(l[f.COMPARATORTRIM],h),s("comparator trim",t,l[f.COMPARATORTRIM]),t=(t=(t=t.replace(l[f.TILDETRIM],d)).replace(l[f.CARETTRIM],p)).split(/\s+/).join(" ");var i=n?l[f.COMPARATORLOOSE]:l[f.COMPARATOR];return t.split(" ").map((function(t){return v(t,e.options)})).join(" ").split(/\s+/).map((function(t){return S(t,e.options)})).filter(this.options.loose?function(t){return!!t.match(i)}:function(){return!0}).map((function(t){return new a(t,e.options)}))}},{key:"intersects",value:function(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((function(t){return g(t,n)&&e.set.some((function(e){return g(e,n)&&t.every((function(t){return e.every((function(e){return t.intersects(e,n)}))}))}))}))}},{key:"test",value:function(t){if(!t)return!1;if("string"===typeof t)try{t=new u(t,this.options)}catch(n){return!1}for(var e=0;e<this.set.length;e++)if(A(this.set[e],t,this.options))return!0;return!1}}]),t}();t.exports=o;var a=n(62),s=n(60),u=n(26),c=n(45),l=c.re,f=c.t,h=c.comparatorTrimReplace,d=c.tildeTrimReplace,p=c.caretTrimReplace,g=function(t,e){for(var n=!0,r=t.slice(),i=r.pop();n&&r.length;)n=r.every((function(t){return i.intersects(t,e)})),i=r.pop();return n},v=function(t,e){return s("comp",t,e),t=w(t,e),s("caret",t),t=y(t,e),s("tildes",t),t=_(t,e),s("xrange",t),t=k(t,e),s("stars",t),t},m=function(t){return!t||"x"===t.toLowerCase()||"*"===t},y=function(t,e){return t.trim().split(/\s+/).map((function(t){return b(t,e)})).join(" ")},b=function(t,e){var n=e.loose?l[f.TILDELOOSE]:l[f.TILDE];return t.replace(n,(function(e,n,r,i,o){var a;return s("tilde",t,e,n,r,i,o),m(n)?a="":m(r)?a=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):m(i)?a=">=".concat(n,".").concat(r,".0 <").concat(n,".").concat(+r+1,".0-0"):o?(s("replaceTilde pr",o),a=">=".concat(n,".").concat(r,".").concat(i,"-").concat(o," <").concat(n,".").concat(+r+1,".0-0")):a=">=".concat(n,".").concat(r,".").concat(i," <").concat(n,".").concat(+r+1,".0-0"),s("tilde return",a),a}))},w=function(t,e){return t.trim().split(/\s+/).map((function(t){return x(t,e)})).join(" ")},x=function(t,e){s("caret",t,e);var n=e.loose?l[f.CARETLOOSE]:l[f.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(function(e,n,i,o,a){var u;return s("caret",t,e,n,i,o,a),m(n)?u="":m(i)?u=">=".concat(n,".0.0").concat(r," <").concat(+n+1,".0.0-0"):m(o)?u="0"===n?">=".concat(n,".").concat(i,".0").concat(r," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".0").concat(r," <").concat(+n+1,".0.0-0"):a?(s("replaceCaret pr",a),u="0"===n?"0"===i?">=".concat(n,".").concat(i,".").concat(o,"-").concat(a," <").concat(n,".").concat(i,".").concat(+o+1,"-0"):">=".concat(n,".").concat(i,".").concat(o,"-").concat(a," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".").concat(o,"-").concat(a," <").concat(+n+1,".0.0-0")):(s("no pr"),u="0"===n?"0"===i?">=".concat(n,".").concat(i,".").concat(o).concat(r," <").concat(n,".").concat(i,".").concat(+o+1,"-0"):">=".concat(n,".").concat(i,".").concat(o).concat(r," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".").concat(o," <").concat(+n+1,".0.0-0")),s("caret return",u),u}))},_=function(t,e){return s("replaceXRanges",t,e),t.split(/\s+/).map((function(t){return O(t,e)})).join(" ")},O=function(t,e){t=t.trim();var n=e.loose?l[f.XRANGELOOSE]:l[f.XRANGE];return t.replace(n,(function(n,r,i,o,a,u){s("xRange",t,n,r,i,o,a,u);var c=m(i),l=c||m(o),f=l||m(a),h=f;return"="===r&&h&&(r=""),u=e.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(l&&(o=0),a=0,">"===r?(r=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(u="-0"),n="".concat(r+i,".").concat(o,".").concat(a).concat(u)):l?n=">=".concat(i,".0.0").concat(u," <").concat(+i+1,".0.0-0"):f&&(n=">=".concat(i,".").concat(o,".0").concat(u," <").concat(i,".").concat(+o+1,".0-0")),s("xRange return",n),n}))},k=function(t,e){return s("replaceStars",t,e),t.trim().replace(l[f.STAR],"")},S=function(t,e){return s("replaceGTE0",t,e),t.trim().replace(l[e.includePrerelease?f.GTE0PRE:f.GTE0],"")},E=function(t){return function(e,n,r,i,o,a,s,u,c,l,f,h,d){return n=m(r)?"":m(i)?">=".concat(r,".0.0").concat(t?"-0":""):m(o)?">=".concat(r,".").concat(i,".0").concat(t?"-0":""):a?">=".concat(n):">=".concat(n).concat(t?"-0":""),u=m(c)?"":m(l)?"<".concat(+c+1,".0.0-0"):m(f)?"<".concat(c,".").concat(+l+1,".0-0"):h?"<=".concat(c,".").concat(l,".").concat(f,"-").concat(h):t?"<".concat(c,".").concat(l,".").concat(+f+1,"-0"):"<=".concat(u),"".concat(n," ").concat(u).trim()}},A=function(t,e,n){for(var r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(var i=0;i<t.length;i++)if(s(t[i].semver),t[i].semver!==a.ANY&&t[i].semver.prerelease.length>0){var o=t[i].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}},function(t,e,n){"use strict";e.a=function(t,e){}},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return f})),n.d(e,"__createBinding",(function(){return h})),n.d(e,"__exportStar",(function(){return d})),n.d(e,"__values",(function(){return p})),n.d(e,"__read",(function(){return g})),n.d(e,"__spread",(function(){return v})),n.d(e,"__spreadArrays",(function(){return m})),n.d(e,"__await",(function(){return y})),n.d(e,"__asyncGenerator",(function(){return b})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return x})),n.d(e,"__makeTemplateObject",(function(){return _})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return k})),n.d(e,"__classPrivateFieldGet",(function(){return S})),n.d(e,"__classPrivateFieldSet",(function(){return E}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function f(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function d(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:y(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function x(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function E(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},function(t,e,n){"use strict";e.a=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(53);function i(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(20),i=n(42),o=Object.prototype.toString,a=function(){return"[object Arguments]"===o.call(arguments)?function(t){return"[object Arguments]"===o.call(t)}:function(t){return Object(i.a)("callee",t)}}(),s=!{toString:null}.propertyIsEnumerable("toString"),u=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],c=function(){return arguments.propertyIsEnumerable("length")}(),l=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},f="function"!==typeof Object.keys||c?Object(r.a)((function(t){if(Object(t)!==t)return[];var e,n,r=[],o=c&&a(t);for(e in t)!Object(i.a)(e,t)||o&&"length"===e||(r[r.length]=e);if(s)for(n=u.length-1;n>=0;)e=u[n],Object(i.a)(e,t)&&!l(r,e)&&(r[r.length]=e),n-=1;return r})):Object(r.a)((function(t){return Object(t)!==t?[]:Object.keys(t)}));e.a=f},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(e,t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";t.exports=function(t,e){e||(e={}),"function"===typeof e&&(e={cmp:e});var n,r="boolean"===typeof e.cycles&&e.cycles,i=e.cmp&&(n=e.cmp,function(t){return function(e,r){var i={key:e,value:t[e]},o={key:r,value:t[r]};return n(i,o)}}),o=[];return function t(e){if(e&&e.toJSON&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var n,a;if(Array.isArray(e)){for(a="[",n=0;n<e.length;n++)n&&(a+=","),a+=t(e[n])||"null";return a+"]"}if(null===e)return"null";if(-1!==o.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(e)-1,u=Object.keys(e).sort(i&&i(e));for(a="",n=0;n<u.length;n++){var c=u[n],l=t(e[c]);l&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l)}return o.splice(s,1),"{"+a+"}"}}(t)}},function(t,e,n){var r=n(59).MAX_SAFE_COMPONENT_LENGTH,i=n(60),o=(e=t.exports={}).re=[],a=e.src=[],s=e.t={},u=0,c=function(t,e,n){var r=u++;i(r,e),s[t]=r,a[r]=e,o[r]=new RegExp(e,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION","(".concat(a[s.NUMERICIDENTIFIER],")\\.")+"(".concat(a[s.NUMERICIDENTIFIER],")\\.")+"(".concat(a[s.NUMERICIDENTIFIER],")")),c("MAINVERSIONLOOSE","(".concat(a[s.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(a[s.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(a[s.NUMERICIDENTIFIERLOOSE],")")),c("PRERELEASEIDENTIFIER","(?:".concat(a[s.NUMERICIDENTIFIER],"|").concat(a[s.NONNUMERICIDENTIFIER],")")),c("PRERELEASEIDENTIFIERLOOSE","(?:".concat(a[s.NUMERICIDENTIFIERLOOSE],"|").concat(a[s.NONNUMERICIDENTIFIER],")")),c("PRERELEASE","(?:-(".concat(a[s.PRERELEASEIDENTIFIER],"(?:\\.").concat(a[s.PRERELEASEIDENTIFIER],")*))")),c("PRERELEASELOOSE","(?:-?(".concat(a[s.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(a[s.PRERELEASEIDENTIFIERLOOSE],")*))")),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD","(?:\\+(".concat(a[s.BUILDIDENTIFIER],"(?:\\.").concat(a[s.BUILDIDENTIFIER],")*))")),c("FULLPLAIN","v?".concat(a[s.MAINVERSION]).concat(a[s.PRERELEASE],"?").concat(a[s.BUILD],"?")),c("FULL","^".concat(a[s.FULLPLAIN],"$")),c("LOOSEPLAIN","[v=\\s]*".concat(a[s.MAINVERSIONLOOSE]).concat(a[s.PRERELEASELOOSE],"?").concat(a[s.BUILD],"?")),c("LOOSE","^".concat(a[s.LOOSEPLAIN],"$")),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE","".concat(a[s.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),c("XRANGEIDENTIFIER","".concat(a[s.NUMERICIDENTIFIER],"|x|X|\\*")),c("XRANGEPLAIN","[v=\\s]*(".concat(a[s.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(a[s.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(a[s.XRANGEIDENTIFIER],")")+"(?:".concat(a[s.PRERELEASE],")?").concat(a[s.BUILD],"?")+")?)?"),c("XRANGEPLAINLOOSE","[v=\\s]*(".concat(a[s.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(a[s.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(a[s.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(a[s.PRERELEASELOOSE],")?").concat(a[s.BUILD],"?")+")?)?"),c("XRANGE","^".concat(a[s.GTLT],"\\s*").concat(a[s.XRANGEPLAIN],"$")),c("XRANGELOOSE","^".concat(a[s.GTLT],"\\s*").concat(a[s.XRANGEPLAINLOOSE],"$")),c("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(r,"})")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:$|[^\\d])"),c("COERCERTL",a[s.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM","(\\s*)".concat(a[s.LONETILDE],"\\s+"),!0),e.tildeTrimReplace="$1~",c("TILDE","^".concat(a[s.LONETILDE]).concat(a[s.XRANGEPLAIN],"$")),c("TILDELOOSE","^".concat(a[s.LONETILDE]).concat(a[s.XRANGEPLAINLOOSE],"$")),c("LONECARET","(?:\\^)"),c("CARETTRIM","(\\s*)".concat(a[s.LONECARET],"\\s+"),!0),e.caretTrimReplace="$1^",c("CARET","^".concat(a[s.LONECARET]).concat(a[s.XRANGEPLAIN],"$")),c("CARETLOOSE","^".concat(a[s.LONECARET]).concat(a[s.XRANGEPLAINLOOSE],"$")),c("COMPARATORLOOSE","^".concat(a[s.GTLT],"\\s*(").concat(a[s.LOOSEPLAIN],")$|^$")),c("COMPARATOR","^".concat(a[s.GTLT],"\\s*(").concat(a[s.FULLPLAIN],")$|^$")),c("COMPARATORTRIM","(\\s*)".concat(a[s.GTLT],"\\s*(").concat(a[s.LOOSEPLAIN],"|").concat(a[s.XRANGEPLAIN],")"),!0),e.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE","^\\s*(".concat(a[s.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(a[s.XRANGEPLAIN],")")+"\\s*$"),c("HYPHENRANGELOOSE","^\\s*(".concat(a[s.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(a[s.XRANGEPLAINLOOSE],")")+"\\s*$"),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},function(t,e,n){var r=n(59).MAX_LENGTH,i=n(45),o=i.re,a=i.t,s=n(26);t.exports=function(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof s)return t;if("string"!==typeof t)return null;if(t.length>r)return null;if(!(e.loose?o[a.LOOSE]:o[a.FULL]).test(t))return null;try{return new s(t,e)}catch(n){return null}}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=n(141)},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(55);var i=n(118),o=n(66);function a(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||Object(i.a)(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},,,function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(18);function i(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function o(t,e,n){for(var r=0,i=n.length;r<i;){if(t(e,n[r]))return!0;r+=1}return!1}var a=n(42);var s="function"===typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e},u=n(40),c=n(20),l=Object(c.a)((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function f(t,e,n,r){var a=i(t);function s(t,e){return h(t,e,n.slice(),r.slice())}return!o((function(t,e){return!o(s,e,t)}),i(e),a)}function h(t,e,n,r){if(s(t,e))return!0;var i=l(t);if(i!==l(e))return!1;if(null==t||null==e)return!1;if("function"===typeof t["fantasy-land/equals"]||"function"===typeof e["fantasy-land/equals"])return"function"===typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"===typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"===typeof t.equals||"function"===typeof e.equals)return"function"===typeof t.equals&&t.equals(e)&&"function"===typeof e.equals&&e.equals(t);switch(i){case"Arguments":case"Array":case"Object":if("function"===typeof t.constructor&&"Promise"===function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!==typeof e||!s(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!s(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var o=n.length-1;o>=0;){if(n[o]===t)return r[o]===e;o-=1}switch(i){case"Map":return t.size===e.size&&f(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&f(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=Object(u.a)(t);if(c.length!==Object(u.a)(e).length)return!1;var d=n.concat([t]),p=r.concat([e]);for(o=c.length-1;o>=0;){var g=c[o];if(!Object(a.a)(g,e)||!h(e[g],t[g],d,p))return!1;o-=1}return!0}var d=Object(r.a)((function(t,e){return h(t,e,[],[])}));function p(t,e){return function(t,e,n){var r,i;if("function"===typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(i=t[n])&&1/i===r)return n;n+=1}return-1}if(e!==e){for(;n<t.length;){if("number"===typeof(i=t[n])&&i!==i)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(d(t[n],e))return n;n+=1}return-1}(e,t,0)>=0}},,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:n,MAX_SAFE_COMPONENT_LENGTH:16}},function(t,e,n){(function(e){var n="object"===typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"/viz",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_PATH:"/viz"})&&Object({NODE_ENV:"production",PUBLIC_URL:"/viz",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_PATH:"/viz"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:"/viz",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_PATH:"/viz"}).NODE_DEBUG)?function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=console).error.apply(t,["SEMVER"].concat(n))}:function(){};t.exports=n}).call(this,n(161))},function(t,e,n){var r=n(32);t.exports=function(t,e,n){return r(t,e,n)>0}},function(t,e,n){var r=n(81),i=n(82),o=Symbol("SemVer ANY"),a=function(){"use strict";function t(e,n){if(r(this,t),n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1}),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}f("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===o?this.value="":this.value=this.operator+this.semver.version,f("comp",this)}return i(t,null,[{key:"ANY",get:function(){return o}}]),i(t,[{key:"parse",value:function(t){var e=this.options.loose?u[c.COMPARATORLOOSE]:u[c.COMPARATOR],n=t.match(e);if(!n)throw new TypeError("Invalid comparator: ".concat(t));this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new h(n[2],this.options.loose):this.semver=o}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(t){if(f("Comparator.test",t,this.options.loose),this.semver===o||t===o)return!0;if("string"===typeof t)try{t=new h(t,this.options)}catch(e){return!1}return l(t,this.operator,this.semver,this.options)}},{key:"intersects",value:function(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");if(n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1}),""===this.operator)return""===this.value||new d(e.value,n).test(this.value);if(""===e.operator)return""===e.value||new d(this.value,n).test(e.semver);var r=(">="===this.operator||">"===this.operator)&&(">="===e.operator||">"===e.operator),i=("<="===this.operator||"<"===this.operator)&&("<="===e.operator||"<"===e.operator),o=this.semver.version===e.semver.version,a=(">="===this.operator||"<="===this.operator)&&(">="===e.operator||"<="===e.operator),s=l(this.semver,"<",e.semver,n)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=l(this.semver,">",e.semver,n)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&a||s||u}}]),t}();t.exports=a;var s=n(45),u=s.re,c=s.t,l=n(110),f=n(60),h=n(26),d=n(33)},function(t,e,n){var r=n(33);t.exports=function(t,e,n){try{e=new r(e,n)}catch(i){return!1}return e.test(t)}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(55);function i(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},function(t,e,n){"use strict";var r=n(107),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&t(e,i,r)}var a=l(n);f&&(a=a.concat(f(n)));for(var s=u(e),g=u(n),v=0;v<a.length;++v){var m=a[v];if(!o[m]&&(!r||!r[m])&&(!g||!g[m])&&(!s||!s[m])){var y=h(n,m);try{c(e,m,y)}catch(b){}}}}return e}},function(t,e,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"vega",(function(){return x})),n.d(e,"default",(function(){return L}));var r,i=n(10),o=n.n(i),a=n(35),s=n(133),u=n(75),c=n.n(u),l=n(93),f=n(73),h=n(129),d=n(94),p=n.n(d),g=n(130),v=n(131),m=n(0),y=n(127),b=n(76),w=n(95),x=(n(115),f),_=h,O="undefined"!==typeof window?window:void 0;void 0===_&&(null===(r=null===O||void 0===O?void 0:O.vl)||void 0===r?void 0:r.compile)&&(_=O.vl);var k={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},S={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},E={vega:"Vega","vega-lite":"Vega-Lite"},A={vega:x.version,"vega-lite":_?_.version:"not available"},C={vega:function(t){return t},"vega-lite":function(t,e){return _.compile(t,{config:e}).spec}},j='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function T(t){return"function"===typeof t}function M(t,e,n,r){var i="<html><head>".concat(e,'</head><body><pre><code class="json">'),o="</code></pre>".concat(n,"</body></html>"),a=window.open("");a.document.write(i+t+o),a.document.title="".concat(E[r]," JSON Source")}function R(t,e){var n;if(t.$schema){var r=p()(t.$schema);e&&e!==r.library&&console.warn("The given visualization spec is written in ".concat(E[r.library],", but mode argument sets ").concat(null!==(n=E[e])&&void 0!==n?n:e,"."));var i=r.library;return Object(l.satisfies)(A[i],"^".concat(r.version.slice(1)))||console.warn("The input spec uses ".concat(E[i]," ").concat(r.version,", but the current version of ").concat(E[i]," is v").concat(A[i],".")),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":null!==e&&void 0!==e?e:"vega"}function D(t){return!(!t||!("load"in t))}function L(t,e){var n,r,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(a.__awaiter)(this,void 0,void 0,o.a.mark((function a(){var u,c,l,f,h;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(u=D(s.loader)?s.loader:x.loader(s.loader),!Object(m.H)(e)){o.next=9;break}return o.t1=JSON,o.next=5,u.load(e);case 5:o.t2=o.sent,o.t0=o.t1.parse.call(o.t1,o.t2),o.next=10;break;case 9:o.t0=e;case 10:return c=o.t0,o.next=13,N(null!==(n=c.usermeta&&c.usermeta.embedOptions)&&void 0!==n?n:{},u);case 13:return l=o.sent,o.next=16,N(s,u);case 16:return f=o.sent,h=Object.assign(Object.assign({},Object(w.a)(f,l)),{config:Object(m.N)(null!==(r=f.config)&&void 0!==r?r:{},null!==(i=l.config)&&void 0!==i?i:{})}),o.next=20,I(t,c,h,u);case 20:return o.abrupt("return",o.sent);case 21:case"end":return o.stop()}}),a)})))}function N(t,e){var n;return Object(a.__awaiter)(this,void 0,void 0,o.a.mark((function r(){var i,a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Object(m.H)(t.config)){r.next=8;break}return r.t1=JSON,r.next=4,e.load(t.config);case 4:r.t2=r.sent,r.t0=r.t1.parse.call(r.t1,r.t2),r.next=9;break;case 8:r.t0=null!==(n=t.config)&&void 0!==n?n:{};case 9:if(i=r.t0,!Object(m.H)(t.patch)){r.next=18;break}return r.t4=JSON,r.next=14,e.load(t.patch);case 14:r.t5=r.sent,r.t3=r.t4.parse.call(r.t4,r.t5),r.next=19;break;case 18:r.t3=t.patch;case 19:return a=r.t3,r.abrupt("return",Object.assign(Object.assign(Object.assign({},t),a?{patch:a}:{}),i?{config:i}:{}));case 21:case"end":return r.stop()}}),r)})))}function I(t,e){var n,r,i,u,f,h,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_=arguments.length>3?arguments[3]:void 0;return Object(a.__awaiter)(this,void 0,void 0,o.a.mark((function O(){var E,D,L,N,I,F,P,$,z,B,U,W,H,V,q,G,K,Y,Q,X,Z,J,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ft;return o.a.wrap((function(O){for(;;)switch(O.prev=O.next){case 0:if(ft=function(){J&&document.removeEventListener("click",J),G.finalize()},E=d.theme?Object(m.N)(g[d.theme],null!==(n=d.config)&&void 0!==n?n:{}):d.config,D=Object(m.B)(d.actions)?d.actions:Object(w.a)({},k,null!==(r=d.actions)&&void 0!==r?r:{}),L=Object.assign(Object.assign({},S),d.i18n),N=null!==(i=d.renderer)&&void 0!==i?i:"canvas",I=null!==(u=d.logLevel)&&void 0!==u?u:x.Warn,F=null!==(f=d.downloadFileName)&&void 0!==f?f:"visualization",!1!==d.defaultStyle&&(P="vega-embed-style",document.getElementById(P)||(($=document.createElement("style")).id=P,$.innerText=void 0===d.defaultStyle||!0===d.defaultStyle?(null!==b.a&&void 0!==b.a?b.a:"").toString():d.defaultStyle,document.head.appendChild($))),z=R(e,d.mode),B=C[z](e,E),"vega-lite"===z&&B.$schema&&(U=p()(B.$schema),Object(l.satisfies)(A.vega,"^".concat(U.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(U.version,", but current version is v").concat(A.vega,"."))),W="string"===typeof t?document.querySelector(t):t){O.next=14;break}throw Error("".concat(t," does not exist"));case 14:return W.classList.add("vega-embed"),D&&W.classList.add("has-actions"),W.innerHTML="",(H=d.patch)&&(B=H instanceof Function?H(B):Object(s.a)(B,H,!0,!1).newDocument),d.formatLocale&&x.formatLocale(d.formatLocale),d.timeFormatLocale&&x.timeFormatLocale(d.timeFormatLocale),V=d.ast,q=x.parse(B,"vega-lite"===z?{}:E,{ast:V}),G=new x.View(q,Object.assign({loader:_,logLevel:I,renderer:N},V?{expr:x.expressionInterpreter}:{})),!1!==d.tooltip&&(K=T(d.tooltip)?d.tooltip:new v.a(!0===d.tooltip?{}:d.tooltip).call,G.tooltip(K)),void 0===(Y=d.hover)&&(Y="vega"===z),Y&&(X=(Q="boolean"===typeof Y?{}:Y).hoverSet,Z=Q.updateSet,G.hover(X,Z)),d&&(null!=d.width&&G.width(d.width),null!=d.height&&G.height(d.height),null!=d.padding&&G.padding(d.padding)),O.next=31,G.initialize(t).runAsync();case 31:if(!1!==D){if(tt=W,!1!==d.defaultStyle&&((et=document.createElement("details")).title=L.CLICK_TO_VIEW_ACTIONS,W.append(et),tt=et,(nt=document.createElement("summary")).innerHTML=j,et.append(nt),J=function(t){et.contains(t.target)||et.removeAttribute("open")},document.addEventListener("click",J)),rt=document.createElement("div"),tt.append(rt),rt.classList.add("vega-actions"),!0===D||!1!==D.export)for(it=function(){var t=at[ot];if(!0===D||!0===D.export||D.export[t]){var e=L["".concat(t.toUpperCase(),"_ACTION")],n=document.createElement("a");n.text=e,n.href="#",n.target="_blank",n.download="".concat(F,".").concat(t),n.addEventListener("mousedown",(function(e){return Object(a.__awaiter)(this,void 0,void 0,o.a.mark((function n(){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,G.toImageURL(t,d.scaleFactor);case 3:r=n.sent,this.href=r;case 5:case"end":return n.stop()}}),n,this)})))})),rt.append(n)}},ot=0,at=["svg","png"];ot<at.length;ot++)it();!0!==D&&!1===D.source||((st=document.createElement("a")).text=L.SOURCE_ACTION,st.href="#",st.addEventListener("click",(function(t){var n,r;M(c()(e),null!==(n=d.sourceHeader)&&void 0!==n?n:"",null!==(r=d.sourceFooter)&&void 0!==r?r:"",z),t.preventDefault()})),rt.append(st)),"vega-lite"!==z||!0!==D&&!1===D.compiled||((ut=document.createElement("a")).text=L.COMPILED_ACTION,ut.href="#",ut.addEventListener("click",(function(t){var e,n;M(c()(B),null!==(e=d.sourceHeader)&&void 0!==e?e:"",null!==(n=d.sourceFooter)&&void 0!==n?n:"","vega"),t.preventDefault()})),rt.append(ut)),!0!==D&&!1===D.editor||(ct=null!==(h=d.editorUrl)&&void 0!==h?h:"https://vega.github.io/editor/",(lt=document.createElement("a")).text=L.EDITOR_ACTION,lt.href="#",lt.addEventListener("click",(function(t){Object(y.a)(window,ct,{config:E,mode:z,renderer:N,spec:c()(e)}),t.preventDefault()})),rt.append(lt))}return O.abrupt("return",{view:G,spec:e,vgSpec:B,finalize:ft});case 33:case"end":return O.stop()}}),O)})))}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r=n(0);function i(e,n){var i,o=n&&n.property?Object(r.t)(n.property):r.x;return!Object(r.F)(e)||(i=e,"function"===typeof t&&Object(r.D)(t.isBuffer)&&t.isBuffer(i))?o(JSON.parse(e)):function(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(o(e))}i.responseType="json"}).call(this,n(113).Buffer)},function(t,e,n){"use strict";function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return NS.a})),n.d(e,"bandwidthNRD",(function(){return qo})),n.d(e,"bin",(function(){return Go})),n.d(e,"bootstrapCI",(function(){return Qo})),n.d(e,"dotbin",(function(){return Xo})),n.d(e,"quantiles",(function(){return Wo})),n.d(e,"quartiles",(function(){return Ho})),n.d(e,"random",(function(){return Ko})),n.d(e,"setRandom",(function(){return Yo})),n.d(e,"randomLCG",(function(){return Zo})),n.d(e,"randomInteger",(function(){return Jo})),n.d(e,"randomKDE",(function(){return ua})),n.d(e,"randomLogNormal",(function(){return da})),n.d(e,"sampleLogNormal",(function(){return ca})),n.d(e,"densityLogNormal",(function(){return la})),n.d(e,"cumulativeLogNormal",(function(){return fa})),n.d(e,"quantileLogNormal",(function(){return ha})),n.d(e,"randomMixture",(function(){return pa})),n.d(e,"randomNormal",(function(){return sa})),n.d(e,"sampleNormal",(function(){return ra})),n.d(e,"densityNormal",(function(){return ia})),n.d(e,"cumulativeNormal",(function(){return oa})),n.d(e,"quantileNormal",(function(){return aa})),n.d(e,"randomUniform",(function(){return ba})),n.d(e,"sampleUniform",(function(){return ga})),n.d(e,"densityUniform",(function(){return va})),n.d(e,"cumulativeUniform",(function(){return ma})),n.d(e,"quantileUniform",(function(){return ya})),n.d(e,"regressionLinear",(function(){return ka})),n.d(e,"regressionLog",(function(){return Sa})),n.d(e,"regressionExp",(function(){return Aa})),n.d(e,"regressionPow",(function(){return Ca})),n.d(e,"regressionQuad",(function(){return ja})),n.d(e,"regressionPoly",(function(){return Ta})),n.d(e,"regressionLoess",(function(){return Da})),n.d(e,"sampleCurve",(function(){return Fa})),n.d(e,"TIME_UNITS",(function(){return Oe})),n.d(e,"YEAR",(function(){return he})),n.d(e,"QUARTER",(function(){return de})),n.d(e,"MONTH",(function(){return pe})),n.d(e,"WEEK",(function(){return ge})),n.d(e,"DATE",(function(){return ve})),n.d(e,"DAY",(function(){return me})),n.d(e,"DAYOFYEAR",(function(){return ye})),n.d(e,"HOURS",(function(){return be})),n.d(e,"MINUTES",(function(){return we})),n.d(e,"SECONDS",(function(){return xe})),n.d(e,"MILLISECONDS",(function(){return _e})),n.d(e,"timeUnitSpecifier",(function(){return Ae})),n.d(e,"timeUnits",(function(){return Se})),n.d(e,"dayofyear",(function(){return rn})),n.d(e,"week",(function(){return on})),n.d(e,"utcdayofyear",(function(){return ln})),n.d(e,"utcweek",(function(){return fn})),n.d(e,"timeFloor",(function(){return wn})),n.d(e,"utcFloor",(function(){return On})),n.d(e,"timeInterval",(function(){return Kn})),n.d(e,"timeOffset",(function(){return Xn})),n.d(e,"timeSequence",(function(){return tr})),n.d(e,"utcInterval",(function(){return Yn})),n.d(e,"utcOffset",(function(){return Zn})),n.d(e,"utcSequence",(function(){return er})),n.d(e,"timeBin",(function(){return hr})),n.d(e,"accessor",(function(){return p.f})),n.d(e,"accessorName",(function(){return p.h})),n.d(e,"accessorFields",(function(){return p.g})),n.d(e,"id",(function(){return p.w})),n.d(e,"identity",(function(){return p.x})),n.d(e,"zero",(function(){return p.kb})),n.d(e,"one",(function(){return p.O})),n.d(e,"truthy",(function(){return p.gb})),n.d(e,"falsy",(function(){return p.r})),n.d(e,"logger",(function(){return p.K})),n.d(e,"None",(function(){return p.d})),n.d(e,"Error",(function(){return p.b})),n.d(e,"Warn",(function(){return p.e})),n.d(e,"Info",(function(){return p.c})),n.d(e,"Debug",(function(){return p.a})),n.d(e,"mergeConfig",(function(){return p.N})),n.d(e,"writeConfig",(function(){return p.jb})),n.d(e,"panLinear",(function(){return p.Q})),n.d(e,"panLog",(function(){return p.R})),n.d(e,"panPow",(function(){return p.S})),n.d(e,"panSymlog",(function(){return p.T})),n.d(e,"zoomLinear",(function(){return p.lb})),n.d(e,"zoomLog",(function(){return p.mb})),n.d(e,"zoomPow",(function(){return p.nb})),n.d(e,"zoomSymlog",(function(){return p.ob})),n.d(e,"quarter",(function(){return p.V})),n.d(e,"utcquarter",(function(){return p.hb})),n.d(e,"array",(function(){return p.i})),n.d(e,"clampRange",(function(){return p.j})),n.d(e,"compare",(function(){return p.k})),n.d(e,"constant",(function(){return p.l})),n.d(e,"debounce",(function(){return p.m})),n.d(e,"error",(function(){return p.n})),n.d(e,"extend",(function(){return p.o})),n.d(e,"extent",(function(){return p.p})),n.d(e,"extentIndex",(function(){return p.q})),n.d(e,"fastmap",(function(){return p.s})),n.d(e,"field",(function(){return p.t})),n.d(e,"flush",(function(){return p.u})),n.d(e,"hasOwnProperty",(function(){return p.v})),n.d(e,"inherits",(function(){return p.y})),n.d(e,"inrange",(function(){return p.z})),n.d(e,"isArray",(function(){return p.A})),n.d(e,"isBoolean",(function(){return p.B})),n.d(e,"isDate",(function(){return p.C})),n.d(e,"isFunction",(function(){return p.D})),n.d(e,"isNumber",(function(){return p.E})),n.d(e,"isObject",(function(){return p.F})),n.d(e,"isRegExp",(function(){return p.G})),n.d(e,"isString",(function(){return p.H})),n.d(e,"key",(function(){return p.I})),n.d(e,"lerp",(function(){return p.J})),n.d(e,"lruCache",(function(){return p.L})),n.d(e,"merge",(function(){return p.M})),n.d(e,"pad",(function(){return p.P})),n.d(e,"peek",(function(){return p.U})),n.d(e,"repeat",(function(){return p.W})),n.d(e,"span",(function(){return p.X})),n.d(e,"splitAccessPath",(function(){return p.Y})),n.d(e,"stringValue",(function(){return p.Z})),n.d(e,"toBoolean",(function(){return p.ab})),n.d(e,"toDate",(function(){return p.bb})),n.d(e,"toNumber",(function(){return p.cb})),n.d(e,"toString",(function(){return p.eb})),n.d(e,"toSet",(function(){return p.db})),n.d(e,"truncate",(function(){return p.fb})),n.d(e,"visitArray",(function(){return p.ib})),n.d(e,"loader",(function(){return Hi})),n.d(e,"read",(function(){return Wi})),n.d(e,"inferType",(function(){return st})),n.d(e,"inferTypes",(function(){return ut})),n.d(e,"typeParsers",(function(){return it})),n.d(e,"format",(function(){return Mt})),n.d(e,"formats",(function(){return Rt})),n.d(e,"responseType",(function(){return Dt})),n.d(e,"Bounds",(function(){return xl})),n.d(e,"Gradient",(function(){return vu})),n.d(e,"GroupItem",(function(){return kl})),n.d(e,"ResourceLoader",(function(){return Al})),n.d(e,"Item",(function(){return Ol})),n.d(e,"Scenegraph",(function(){return yh})),n.d(e,"Handler",(function(){return Ah})),n.d(e,"Renderer",(function(){return Th})),n.d(e,"CanvasHandler",(function(){return Bh})),n.d(e,"CanvasRenderer",(function(){return Gh})),n.d(e,"SVGHandler",(function(){return Qh})),n.d(e,"SVGRenderer",(function(){return Hv})),n.d(e,"SVGStringRenderer",(function(){return im})),n.d(e,"RenderType",(function(){return um})),n.d(e,"renderModule",(function(){return lm})),n.d(e,"intersect",(function(){return fm})),n.d(e,"Marks",(function(){return fh})),n.d(e,"boundClip",(function(){return vm})),n.d(e,"boundContext",(function(){return Il})),n.d(e,"boundStroke",(function(){return Ml})),n.d(e,"boundItem",(function(){return hh})),n.d(e,"boundMark",(function(){return ph})),n.d(e,"pathCurves",(function(){return lc})),n.d(e,"pathSymbols",(function(){return Cc})),n.d(e,"pathRectangle",(function(){return Wc})),n.d(e,"pathTrail",(function(){return Hc})),n.d(e,"pathParse",(function(){return dc})),n.d(e,"pathRender",(function(){return kc})),n.d(e,"point",(function(){return Eh})),n.d(e,"domCreate",(function(){return xh})),n.d(e,"domFind",(function(){return _h})),n.d(e,"domChild",(function(){return Oh})),n.d(e,"domClear",(function(){return kh})),n.d(e,"openTag",(function(){return $v})),n.d(e,"closeTag",(function(){return zv})),n.d(e,"font",(function(){return oh})),n.d(e,"fontFamily",(function(){return ih})),n.d(e,"fontSize",(function(){return Jf})),n.d(e,"lineHeight",(function(){return th})),n.d(e,"multiLineOffset",(function(){return nh})),n.d(e,"textMetrics",(function(){return Gf})),n.d(e,"sceneEqual",(function(){return mm})),n.d(e,"pathEqual",(function(){return ym})),n.d(e,"sceneToJSON",(function(){return vh})),n.d(e,"sceneFromJSON",(function(){return mh})),n.d(e,"intersectPath",(function(){return Gl})),n.d(e,"intersectPoint",(function(){return Kl})),n.d(e,"intersectRule",(function(){return Ql})),n.d(e,"intersectBoxLine",(function(){return Xl})),n.d(e,"sceneZOrder",(function(){return sf})),n.d(e,"sceneVisit",(function(){return uf})),n.d(e,"scenePickVisit",(function(){return cf})),n.d(e,"resetSVGClipId",(function(){return bl})),n.d(e,"resetSVGDefIds",(function(){return bm})),n.d(e,"Dataflow",(function(){return fo})),n.d(e,"EventStream",(function(){return U})),n.d(e,"Parameters",(function(){return L})),n.d(e,"Pulse",(function(){return Zi})),n.d(e,"MultiPulse",(function(){return ro})),n.d(e,"Operator",(function(){return P})),n.d(e,"Transform",(function(){return go})),n.d(e,"changeset",(function(){return R})),n.d(e,"ingest",(function(){return E})),n.d(e,"isTuple",(function(){return O})),n.d(e,"definition",(function(){return yo})),n.d(e,"transform",(function(){return bo})),n.d(e,"transforms",(function(){return mo})),n.d(e,"tupleid",(function(){return k})),n.d(e,"scale",(function(){return eg})),n.d(e,"scheme",(function(){return fv})),n.d(e,"interpolate",(function(){return sv})),n.d(e,"interpolateColors",(function(){return iv})),n.d(e,"interpolateRange",(function(){return rv})),n.d(e,"quantizeInterpolator",(function(){return ov})),n.d(e,"projection",(function(){return a_})),n.d(e,"View",(function(){return kC})),n.d(e,"formatLocale",(function(){return ce})),n.d(e,"timeFormatLocale",(function(){return Pi})),n.d(e,"locale",(function(){return zi})),n.d(e,"defaultLocale",(function(){return Bi})),n.d(e,"resetDefaultLocale",(function(){return Ui})),n.d(e,"expressionFunction",(function(){return eC})),n.d(e,"parse",(function(){return UM})),n.d(e,"runtimeContext",(function(){return dC}));var r={};n.r(r),n.d(r,"aggregate",(function(){return Ba})),n.d(r,"bin",(function(){return Wa})),n.d(r,"collect",(function(){return qa})),n.d(r,"compare",(function(){return Ga})),n.d(r,"countpattern",(function(){return Ya})),n.d(r,"cross",(function(){return Xa})),n.d(r,"density",(function(){return Ja})),n.d(r,"dotbin",(function(){return is})),n.d(r,"expression",(function(){return os})),n.d(r,"extent",(function(){return ss})),n.d(r,"facet",(function(){return ls})),n.d(r,"field",(function(){return hs})),n.d(r,"filter",(function(){return ps})),n.d(r,"flatten",(function(){return gs})),n.d(r,"fold",(function(){return vs})),n.d(r,"formula",(function(){return ms})),n.d(r,"generate",(function(){return ys})),n.d(r,"impute",(function(){return xs})),n.d(r,"joinaggregate",(function(){return _s})),n.d(r,"kde",(function(){return ks})),n.d(r,"key",(function(){return Ss})),n.d(r,"load",(function(){return As})),n.d(r,"lookup",(function(){return js})),n.d(r,"multiextent",(function(){return Ts})),n.d(r,"multivalues",(function(){return Rs})),n.d(r,"params",(function(){return Ls})),n.d(r,"pivot",(function(){return Ns})),n.d(r,"prefacet",(function(){return Fs})),n.d(r,"project",(function(){return Ps})),n.d(r,"proxy",(function(){return $s})),n.d(r,"quantile",(function(){return Bs})),n.d(r,"relay",(function(){return Ws})),n.d(r,"sample",(function(){return Hs})),n.d(r,"sequence",(function(){return Vs})),n.d(r,"sieve",(function(){return qs})),n.d(r,"subflow",(function(){return us})),n.d(r,"timeunit",(function(){return Gs})),n.d(r,"tupleindex",(function(){return Qs})),n.d(r,"values",(function(){return Xs})),n.d(r,"window",(function(){return nu}));var i={};n.r(i),n.d(i,"interpolate",(function(){return gp})),n.d(i,"interpolateArray",(function(){return sp})),n.d(i,"interpolateBasis",(function(){return Kd})),n.d(i,"interpolateBasisClosed",(function(){return Yd})),n.d(i,"interpolateDate",(function(){return cp})),n.d(i,"interpolateDiscrete",(function(){return pg})),n.d(i,"interpolateHue",(function(){return gg})),n.d(i,"interpolateNumber",(function(){return lp})),n.d(i,"interpolateNumberArray",(function(){return op})),n.d(i,"interpolateObject",(function(){return fp})),n.d(i,"interpolateRound",(function(){return vp})),n.d(i,"interpolateString",(function(){return pp})),n.d(i,"interpolateTransformCss",(function(){return wg})),n.d(i,"interpolateTransformSvg",(function(){return xg})),n.d(i,"interpolateZoom",(function(){return kg})),n.d(i,"interpolateRgb",(function(){return ep})),n.d(i,"interpolateRgbBasis",(function(){return rp})),n.d(i,"interpolateRgbBasisClosed",(function(){return ip})),n.d(i,"interpolateHsl",(function(){return Eg})),n.d(i,"interpolateHslLong",(function(){return Ag})),n.d(i,"interpolateLab",(function(){return Bg})),n.d(i,"interpolateHcl",(function(){return Wg})),n.d(i,"interpolateHclLong",(function(){return Hg})),n.d(i,"interpolateCubehelix",(function(){return Jg})),n.d(i,"interpolateCubehelixLong",(function(){return tv})),n.d(i,"piecewise",(function(){return Qp})),n.d(i,"quantize",(function(){return ev}));var o={};n.r(o),n.d(o,"bound",(function(){return wm})),n.d(o,"identifier",(function(){return _m})),n.d(o,"mark",(function(){return Om})),n.d(o,"overlap",(function(){return km})),n.d(o,"render",(function(){return Rm})),n.d(o,"viewlayout",(function(){return ey}));var a={};n.r(a),n.d(a,"axisticks",(function(){return ny})),n.d(a,"datajoin",(function(){return ry})),n.d(a,"encode",(function(){return oy})),n.d(a,"legendentries",(function(){return ay})),n.d(a,"linkpath",(function(){return hy})),n.d(a,"pie",(function(){return my})),n.d(a,"scale",(function(){return wy})),n.d(a,"sortitems",(function(){return ky})),n.d(a,"stack",(function(){return Ey}));var s={};n.r(s),n.d(s,"contour",(function(){return Ky})),n.d(s,"geojson",(function(){return Yy})),n.d(s,"geopath",(function(){return l_})),n.d(s,"geopoint",(function(){return f_})),n.d(s,"geoshape",(function(){return h_})),n.d(s,"graticule",(function(){return v_})),n.d(s,"heatmap",(function(){return m_})),n.d(s,"isocontour",(function(){return Fy})),n.d(s,"kde2d",(function(){return Hy})),n.d(s,"projection",(function(){return b_}));var u={};n.r(u),n.d(u,"force",(function(){return hO}));var c={};n.r(c),n.d(c,"nest",(function(){return SO})),n.d(c,"pack",(function(){return JO})),n.d(c,"partition",(function(){return ik})),n.d(c,"stratify",(function(){return fk})),n.d(c,"tree",(function(){return Ok})),n.d(c,"treelinks",(function(){return Sk})),n.d(c,"treemap",(function(){return Dk}));var l={};n.r(l),n.d(l,"loess",(function(){return Ik})),n.d(l,"regression",(function(){return Pk}));var f={};n.r(f),n.d(f,"voronoi",(function(){return fS}));var h={};n.r(h),n.d(h,"wordcloud",(function(){return SS}));var d={};n.r(d),n.d(d,"crossfilter",(function(){return RS})),n.d(d,"resolvefilter",(function(){return LS}));var p=n(0);function g(t){var e=t||p.x,n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i,o=e(t);return r[o]&&(r[o]=0,(i=n.indexOf(t))>=0&&n.splice(i,1)),n},n}var v=n(10),m=n.n(v),y=n(14),b=function(t,e){return w.apply(this,arguments)};function w(){return(w=Object(y.a)(m.a.mark((function t(e,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}var x=Symbol("vega_id"),_=1;function O(t){return!(!t||!k(t))}function k(t){return t[x]}function S(t,e){return t[x]=e,t}function E(t){var e=t===Object(t)?t:{data:t};return k(e)?e:S(e,_++)}function A(t){return C(t,E({}))}function C(t,e){for(var n in t)e[n]=t[n];return e}function j(t,e){return S(e,k(t))}function T(t,e){return t?e?function(n,r){return t(n,r)||k(e(n))-k(e(r))}:function(e,n){return t(e,n)||k(e)-k(n)}:null}function M(t){return t&&t.constructor===R}function R(){var t=[],e=[],n=[],r=[],i=[],o=null,a=!1;return{constructor:R,insert:function(e){for(var n=Object(p.i)(e),r=0,i=n.length;r<i;++r)t.push(n[r]);return this},remove:function(t){for(var n=Object(p.D)(t)?r:e,i=Object(p.i)(t),o=0,a=i.length;o<a;++o)n.push(i[o]);return this},modify:function(t,e,r){var o={field:e,value:Object(p.l)(r)};return Object(p.D)(t)?(o.filter=t,i.push(o)):(o.tuple=t,n.push(o)),this},encode:function(t,e){return Object(p.D)(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},clean:function(t){return o=t,this},reflow:function(){return a=!0,this},pulse:function(s,u){var c,l,f,h,d,p,g={},v={};for(c=0,l=u.length;c<l;++c)g[k(u[c])]=1;for(c=0,l=e.length;c<l;++c)g[k(d=e[c])]=-1;for(c=0,l=r.length;c<l;++c)h=r[c],u.forEach((function(t){h(t)&&(g[k(t)]=-1)}));for(c=0,l=t.length;c<l;++c)p=k(d=t[c]),g[p]?g[p]=1:s.add.push(E(t[c]));for(c=0,l=u.length;c<l;++c)d=u[c],g[k(d)]<0&&s.rem.push(d);function m(t,e,n){n?t[e]=n(t):s.encode=e,a||(v[k(t)]=t)}for(c=0,l=n.length;c<l;++c)d=(f=n[c]).tuple,h=f.field,(p=g[k(d)])>0&&(m(d,h,f.value),s.modifies(h));for(c=0,l=i.length;c<l;++c)f=i[c],h=f.filter,u.forEach((function(t){h(t)&&g[k(t)]>0&&m(t,f.field,f.value)})),s.modifies(f.field);if(a)s.mod=e.length||r.length?u.filter((function(t){return g[k(t)]>0})):u.slice();else for(p in v)s.mod.push(v[p]);return(o||null==o&&(e.length||r.length))&&s.clean(!0),s}}}var D="_:mod:_";function L(){Object.defineProperty(this,D,{writable:!0,value:{}})}var N=L.prototype;N.set=function(t,e,n,r){var i=this,o=i[t],a=i[D];return null!=e&&e>=0?(o[e]!==n||r)&&(o[e]=n,a[e+":"+t]=-1,a[t]=-1):(o!==n||r)&&(i[t]=n,a[t]=Object(p.A)(n)?1+n.length:-1),i},N.modified=function(t,e){var n,r=this[D];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Object(p.A)(t)){for(n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}return null!=e&&e>=0?e+1<r[t]||!!r[e+":"+t]:!!r[t]},N.clear=function(){return this[D]={},this};var I=0,F=new L;function P(t,e,n,r){this.id=++I,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}var $=P.prototype;function z(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}$.targets=function(){return this._targets||(this._targets=g(p.w))},$.set=function(t){return this.value!==t?(this.value=t,1):0},$.skip=z(1),$.modified=z(2),$.parameters=function(t,e,n){e=!1!==e;var r,i,o,a,s=this,u=s._argval=s._argval||new L,c=s._argops=s._argops||[],l=[];function f(t,n,r){r instanceof P?(r!==s&&(e&&r.targets().add(s),l.push(r)),c.push({op:r,name:t,index:n})):u.set(t,n,r)}for(r in t)if(i=t[r],"pulse"===r)Object(p.i)(i).forEach((function(t){t instanceof P?t!==s&&(t.targets().add(s),l.push(t)):Object(p.n)("Pulse parameters must be operator instances.")})),s.source=i;else if(Object(p.A)(i))for(u.set(r,-1,Array(o=i.length)),a=0;a<o;++a)f(r,a,i[a]);else f(r,-1,i);return this.marshall().clear(),n&&(c.initonly=!0),l},$.marshall=function(t){var e,n,r,i,o,a=this._argval||F,s=this._argops;if(s){for(n=0,r=s.length;n<r;++n)o=(i=(e=s[n]).op).modified()&&i.stamp===t,a.set(e.name,e.index,i.value,o);if(s.initonly){for(n=0;n<r;++n)(e=s[n]).op.targets().remove(this);this._argops=null,this._update=null}}return a},$.detach=function(){var t,e,n,r=this._argops;if(r)for(t=0,e=r.length;t<e;++t)(n=r[t].op)._targets&&n._targets.remove(this)},$.evaluate=function(t){var e=this._update;if(e){var n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},$.run=function(t){return t.stamp<this.stamp?t.StopPropagation:(this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t);var e};var B=0;function U(t,e,n){this.id=++B,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function W(t,e,n){return new U(t,e,n)}var H=U.prototype;H._filter=p.gb,H._apply=p.x,H.targets=function(){return this._targets||(this._targets=g(p.w))},H.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},H.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},H.filter=function(t){var e=W(t);return this.targets().add(e),e},H.apply=function(t){var e=W(null,t);return this.targets().add(e),e},H.merge=function(){var t=W();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},H.throttle=function(t){var e=-1;return this.filter((function(){var n=Date.now();return n-e>t?(e=n,1):0}))},H.debounce=function(t){var e=W();return this.targets().add(W(null,null,Object(p.m)(t,(function(t){var n=t.dataflow;e.receive(t),n&&n.run&&n.run()})))),e},H.between=function(t,e){var n=!1;return t.targets().add(W(null,null,(function(){n=!0}))),e.targets().add(W(null,null,(function(){n=!1}))),this.filter((function(){return n}))};var V=/^([A-Za-z]+:)?\/\//,q=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,G=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g;function K(t,e){return Y.apply(this,arguments)}function Y(){return(Y=Object(y.a)(m.a.mark((function t(e,n){var r,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(e,n);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Q(t,e){return X.apply(this,arguments)}function X(){return(X=Object(y.a)(m.a.mark((function t(e,n){var r,i,o,a,s,u,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(p.o)({},this.options,n),r=this.fileAccess,i={href:null},u=q.test(e.replace(G,"")),null!=e&&"string"===typeof e&&u||Object(p.n)("Sanitize failure, invalid URI: "+Object(p.Z)(e)),c=V.test(e),(s=n.baseURL)&&!c&&(e.startsWith("/")||"/"===s[s.length-1]||(e="/"+e),e=s+e),a=(o=e.startsWith("file://"))||"file"===n.mode||"http"!==n.mode&&!c&&r,o?e=e.slice("file://".length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),a=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(i.crossOrigin=n.crossOrigin+""),t.abrupt("return",i);case 14:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Z(t){return t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){t?r(t):n(e)}))}))}:J}function J(){return tt.apply(this,arguments)}function tt(){return(tt=Object(y.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(p.n)("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t){return t?function(){var e=Object(y.a)(m.a.mark((function e(n,r){var i,o,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.o)({},this.options.http,r),o=r&&r.response,e.next=4,t(n,i);case 4:return a=e.sent,e.abrupt("return",a.ok?Object(p.D)(a[o])?a[o]():a.text():Object(p.n)(a.status+""+a.statusText));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}():nt}function nt(){return rt.apply(this,arguments)}function rt(){return(rt=Object(y.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(p.n)("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var it={boolean:p.ab,integer:p.cb,number:p.cb,date:p.bb,string:p.eb,unknown:p.x},ot=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return ct(t)&&Number.isInteger(+t)},ct,function(t){return!Number.isNaN(Date.parse(t))}],at=["boolean","integer","number","date"];function st(t,e){if(!t||!t.length)return"unknown";for(var n,r,i,o=t.length,a=ot.length,s=ot.map((function(t,e){return e+1})),u=0,c=0;u<o;++u)for(r=e?t[u][e]:t[u],n=0;n<a;++n)if(s[n]&&(null!=(i=r)&&i===i)&&!ot[n](r)&&(s[n]=0,++c===ot.length))return"string";return at[s.reduce((function(t,e){return 0===t?e:t}),0)-1]}function ut(t,e){return e.reduce((function(e,n){return e[n]=st(t,n),e}),{})}function ct(t){return!Number.isNaN(+t)&&!(t instanceof Date)}var lt={},ft={};function ht(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function dt(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function pt(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function gt(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+pt(-e,6):e>9999?"+"+pt(e,6):pt(e,4))+"-"+pt(t.getUTCMonth()+1,2)+"-"+pt(t.getUTCDate(),2)+(o?"T"+pt(n,2)+":"+pt(r,2)+":"+pt(i,2)+"."+pt(o,3)+"Z":i?"T"+pt(n,2)+":"+pt(r,2)+":"+pt(i,2)+"Z":r||n?"T"+pt(n,2)+":"+pt(r,2)+"Z":"")}var vt=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return ft;if(c)return c=!1,lt;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?u=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=l())!==ft;){for(var f=[];r!==lt&&r!==ft;)f.push(r),r=l();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?gt(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=ht(t);return function(r,i){return e(n(r),i,t)}}(t,e):ht(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=dt(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=dt(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}};function mt(t){var e=function(e,n){var r={delimiter:t};return yt(e,n?Object(p.o)(n,r):r)};return e.responseType="text",e}function yt(t,e){return e.header&&(t=e.header.map(p.Z).join(e.delimiter)+"\n"+t),vt(e.delimiter).parse(t+"")}yt.responseType="text";var bt=n(71),wt=function(t){return t},xt=function(t){if(null==t)return wt;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+a;u<c;)l[u]=t[u],++u;return l}},_t=function(t,e){return"string"===typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return Ot(t,e)}))}:Ot(t,e)};function Ot(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=kt(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function kt(t,e){var n=xt(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}var St=function(t,e){var n={},r={},i={},o=[],a=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)})),e.forEach((function(e){var n,o,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var c=o===n?n:n.concat(o);r[c.start=n.start]=i[c.end=o.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=s,o=i[s]){delete i[o.end];var l=o===n?n:o.concat(n);r[l.start=o.start]=i[l.end=n.end]=l}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o},Et=function(t){return kt(t,At.apply(this,arguments))};function At(t,e,n){var r,i,o;if(arguments.length>1)r=Ct(t,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:St(t,r)}}function Ct(t,e,n){var r,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function s(t){t.forEach(a)}function u(t){t.forEach(s)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":u(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(u)}(e.arcs)}}(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}var jt={interior:function(t,e){return t!==e},exterior:function(t,e){return t===e}};function Tt(t,e){var n,r,i,o;return t=Object(bt.a)(t,e),e&&e.feature?(n=_t,i=e.feature):e&&e.mesh?(n=Et,i=e.mesh,o=jt[e.filter]):Object(p.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r,o):Object(p.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}Tt.responseType="json";var Mt={dsv:yt,csv:mt(","),tsv:mt("\t"),json:bt.a,topojson:Tt};function Rt(t,e){return arguments.length>1?(Mt[t]=e,this):Object(p.v)(Mt,t)?Mt[t]:null}function Dt(t){var e=Rt(t);return e&&e.responseType||"text"}var Lt=function(t){var e={};return function(n){return e[n]||(e[n]=t(n))}},Nt=Math.sqrt(50),It=Math.sqrt(10),Ft=Math.sqrt(2),Pt=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=$t(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function $t(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Nt?10:o>=It?5:o>=Ft?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Nt?10:o>=It?5:o>=Ft?2:1)}function zt(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Nt?i*=10:o>=It?i*=5:o>=Ft&&(i*=2),e<t?-i:i}var Bt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ut(t){if(!(e=Bt.exec(t)))throw new Error("invalid format: "+t);var e;return new Wt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Wt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Ut.prototype=Wt.prototype,Wt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ht,Vt,qt,Gt,Kt,Yt=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},Qt=function(t){return(t=Yt(Math.abs(t)))?t[1]:NaN},Xt=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qt(e)/3)))-Qt(Math.abs(t)))},Zt=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Qt(e)-Qt(t))+1},Jt=function(t){return Math.max(0,-Qt(Math.abs(t)))},te=function(t,e){var n=Yt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},ee={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return te(100*t,e)},r:te,s:function(t,e){var n=Yt(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Ht=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Yt(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},ne=function(t){return t},re=Array.prototype.map,ie=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],oe=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?ne:(e=re.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?ne:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(re.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Ut(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,v=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):ee[y]||(void 0===v&&(v=12),m=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===h?o:/[%p]/.test(y)?u:"",x=ee[y],_=/[defgprs%]/.test(y);function O(t){var i,o,u,h=b,O=w;if("c"===y)O=x(t)+O,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:x(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0===+t&&"+"!==f&&(k=!1),h=(k?"("===f?f:c:"-"===f||"("===f?"":f)+h,O=("s"===y?ie[8+Ht/3]:"")+O+(k&&"("===f?")":""),_)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){O=(46===u?a+t.slice(i+1):t.slice(i))+O,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var S=h.length+t.length+O.length,E=S<p?new Array(p-S+1).join(e):"";switch(g&&d&&(t=r(E+t,E.length?p-O.length:1/0),E=""),n){case"<":t=h+t+O+E;break;case"=":t=h+E+t+O;break;case"^":t=E.slice(0,S=E.length>>1)+h+t+O+E.slice(S);break;default:t=E+h+t+O}return s(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),O.toString=function(){return t+""},O}return{format:f,formatPrefix:function(t,e){var n=f(((t=Ut(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Qt(e)/3))),i=Math.pow(10,-r),o=ie[8+r/3];return function(t){return n(i*t)+o}}}};function ae(t){var e=Lt(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat:function(t){var n,r,i=Ut(t||",");if(null==i.precision){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1}return n=e(i),r=e(".1f")(1)[1],function(t){var e,i,o=n(t),a=o.indexOf(r);if(a<0)return o;for(i=(e=function(t,e){var n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if((n=t.charCodeAt(r))>=48&&n<=57)return r+1}(o,a))<o.length?o.slice(e):"";--e>a;)if("0"!==o[e]){++e;break}return o.slice(0,e)+i}}return e(i)},formatSpan:function(t,r,i,o){o=Ut(null==o?",f":o);var a,s=zt(t,r,i),u=Math.max(Math.abs(t),Math.abs(r));if(null==o.precision)switch(o.type){case"s":return isNaN(a=Xt(s,u))||(o.precision=a),n(o,u);case"":case"e":case"g":case"p":case"r":isNaN(a=Zt(s,u))||(o.precision=a-("e"===o.type));break;case"f":case"%":isNaN(a=Jt(s))||(o.precision=a-2*("%"===o.type))}return e(o)}}}function se(){return Kt=ae({format:qt,formatPrefix:Gt})}function ue(t){return ae(oe(t))}function ce(t){return arguments.length?Kt=ue(t):Kt}Vt=oe({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),qt=Vt.format,Gt=Vt.formatPrefix,se();var le,fe=n(4),he="year",de="quarter",pe="month",ge="week",ve="date",me="day",ye="dayofyear",be="hours",we="minutes",xe="seconds",_e="milliseconds",Oe=[he,de,pe,ge,ve,me,ye,be,we,xe,_e],ke=Oe.reduce((function(t,e,n){return t[e]=1+n,t}),{});function Se(t){var e=Object(p.i)(t).slice(),n={};return e.length||Object(p.n)("Missing time unit."),e.forEach((function(t){Object(p.v)(ke,t)?n[t]=1:Object(p.n)("Invalid time unit: ".concat(t,"."))})),(n[ge]||n[me]?1:0)+(n[de]||n[pe]||n[ve]?1:0)+(n[ye]?1:0)>1&&Object(p.n)("Incompatible time units: ".concat(t)),e.sort((function(t,e){return ke[t]-ke[e]})),e}var Ee=(le={},Object(fe.a)(le,he,"%Y "),Object(fe.a)(le,de,"Q%q "),Object(fe.a)(le,pe,"%b "),Object(fe.a)(le,ve,"%d "),Object(fe.a)(le,ge,"W%U "),Object(fe.a)(le,me,"%a "),Object(fe.a)(le,ye,"%j "),Object(fe.a)(le,be,"%H:00"),Object(fe.a)(le,we,"00:%M"),Object(fe.a)(le,xe,":%S"),Object(fe.a)(le,_e,".%L"),Object(fe.a)(le,"".concat(he,"-").concat(pe),"%Y-%m "),Object(fe.a)(le,"".concat(he,"-").concat(pe,"-").concat(ve),"%Y-%m-%d "),Object(fe.a)(le,"".concat(be,"-").concat(we),"%H:%M"),le);function Ae(t,e){var n,r,i=Object(p.o)({},Ee,e),o=Se(t),a=o.length,s="",u=0;for(u=0;u<a;)for(n=o.length;n>u;--n)if(null!=i[r=o.slice(u,n).join("-")]){s+=i[r],u=n;break}return s.trim()}var Ce=new Date,je=new Date;function Te(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Te((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Ce.setTime(+e),je.setTime(+r),t(Ce),t(je),Math.floor(n(Ce,je))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}var Me=Te((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1})),Re=Me;Me.range;function De(t){return Te((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Le=De(0),Ne=De(1),Ie=De(2),Fe=De(3),Pe=De(4),$e=De(5),ze=De(6),Be=(Le.range,Ne.range,Ie.range,Fe.range,Pe.range,$e.range,ze.range,Te((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),Ue=Be;Be.range;function We(t){return Te((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var He,Ve,qe,Ge,Ke=We(0),Ye=We(1),Qe=We(2),Xe=We(3),Ze=We(4),Je=We(5),tn=We(6),en=(Ke.range,Ye.range,Qe.range,Xe.range,Ze.range,Je.range,tn.range,new Date);function nn(t){return en.setFullYear(t),en.setMonth(0),en.setDate(1),en.setHours(0,0,0,0),en}function rn(t){return an(new Date(t))}function on(t){return sn(new Date(t))}function an(t){return Re.count(nn(t.getFullYear())-1,t)}function sn(t){return Le.count(nn(t.getFullYear())-1,t)}function un(t){return nn(t).getDay()}function cn(t,e,n,r,i,o,a){if(0<=t&&t<100){var s=new Date(-1,e,n,r,i,o,a);return s.setFullYear(t),s}return new Date(t,e,n,r,i,o,a)}function ln(t){return hn(new Date(t))}function fn(t){return dn(new Date(t))}function hn(t){var e=Date.UTC(t.getUTCFullYear(),0,1);return Ue.count(e-1,t)}function dn(t){var e=Date.UTC(t.getUTCFullYear(),0,1);return Ke.count(e-1,t)}function pn(t){return en.setTime(Date.UTC(t,0,1)),en.getUTCDay()}function gn(t,e,n,r,i,o,a){if(0<=t&&t<100){var s=new Date(Date.UTC(-1,e,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(t,e,n,r,i,o,a))}function vn(t,e,n,r,i){var o=e||1,a=Object(p.U)(t),s=function(t,e,i){return function(t,e,n,r){var i=n<=1?t:r?function(e,i){return r+n*Math.floor((t(e,i)-r)/n)}:function(e,r){return n*Math.floor(t(e,r)/n)};return e?function(t,n){return e(i(t,n),n)}:i}(n[i=i||t],r[i],t===a&&o,e)},u=new Date,c=Object(p.db)(t),l=c[he]?s(he):Object(p.l)(2012),f=c[pe]?s(pe):c[de]?s(de):p.kb,h=c[ge]&&c[me]?s(me,1,ge+me):c[ge]?s(ge,1):c[me]?s(me,1):c[ve]?s(ve,1):c[ye]?s(ye,1):p.O,d=c[be]?s(be):p.kb,g=c[we]?s(we):p.kb,v=c[xe]?s(xe):p.kb,m=c[_e]?s(_e):p.kb;return function(t){u.setTime(+t);var e=l(u);return i(e,f(u),h(u,e),d(u),g(u),v(u),m(u))}}function mn(t,e,n){return e+7*t-(n+6)%7}var yn=(He={},Object(fe.a)(He,he,(function(t){return t.getFullYear()})),Object(fe.a)(He,de,(function(t){return Math.floor(t.getMonth()/3)})),Object(fe.a)(He,pe,(function(t){return t.getMonth()})),Object(fe.a)(He,ve,(function(t){return t.getDate()})),Object(fe.a)(He,be,(function(t){return t.getHours()})),Object(fe.a)(He,we,(function(t){return t.getMinutes()})),Object(fe.a)(He,xe,(function(t){return t.getSeconds()})),Object(fe.a)(He,_e,(function(t){return t.getMilliseconds()})),Object(fe.a)(He,ye,(function(t){return an(t)})),Object(fe.a)(He,ge,(function(t){return sn(t)})),Object(fe.a)(He,ge+me,(function(t,e){return mn(sn(t),t.getDay(),un(e))})),Object(fe.a)(He,me,(function(t,e){return mn(1,t.getDay(),un(e))})),He),bn=(Ve={},Object(fe.a)(Ve,de,(function(t){return 3*t})),Object(fe.a)(Ve,ge,(function(t,e){return mn(t,0,un(e))})),Ve);function wn(t,e){return vn(t,e||1,yn,bn,cn)}var xn=(qe={},Object(fe.a)(qe,he,(function(t){return t.getUTCFullYear()})),Object(fe.a)(qe,de,(function(t){return Math.floor(t.getUTCMonth()/3)})),Object(fe.a)(qe,pe,(function(t){return t.getUTCMonth()})),Object(fe.a)(qe,ve,(function(t){return t.getUTCDate()})),Object(fe.a)(qe,be,(function(t){return t.getUTCHours()})),Object(fe.a)(qe,we,(function(t){return t.getUTCMinutes()})),Object(fe.a)(qe,xe,(function(t){return t.getUTCSeconds()})),Object(fe.a)(qe,_e,(function(t){return t.getUTCMilliseconds()})),Object(fe.a)(qe,ye,(function(t){return hn(t)})),Object(fe.a)(qe,ge,(function(t){return dn(t)})),Object(fe.a)(qe,me,(function(t,e){return mn(1,t.getUTCDay(),pn(e))})),Object(fe.a)(qe,ge+me,(function(t,e){return mn(dn(t),t.getUTCDay(),pn(e))})),qe),_n=(Ge={},Object(fe.a)(Ge,de,(function(t){return 3*t})),Object(fe.a)(Ge,ge,(function(t,e){return mn(t,0,pn(e))})),Ge);function On(t,e){return vn(t,e||1,xn,_n,gn)}var kn=Te((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));kn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Te((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Sn=kn,En=(kn.range,Te((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),An=En,Cn=(En.range,Te((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),jn=Cn,Tn=(Cn.range,Te((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()}))),Mn=Tn,Rn=(Tn.range,Te((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}))),Dn=Rn,Ln=(Rn.range,Te((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));Ln.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Te((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Ln:null};var Nn=Ln,In=(Ln.range,Te((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));In.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Te((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Fn,Pn,$n=In,zn=(In.range,Te((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),Bn=zn,Un=(zn.range,Te((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))),Wn=Un,Hn=(Un.range,Te((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()}))),Vn=Hn,qn=(Hn.range,Fn={},Object(fe.a)(Fn,he,Sn),Object(fe.a)(Fn,de,An.every(3)),Object(fe.a)(Fn,pe,An),Object(fe.a)(Fn,ge,Le),Object(fe.a)(Fn,ve,Re),Object(fe.a)(Fn,me,Re),Object(fe.a)(Fn,ye,Re),Object(fe.a)(Fn,be,jn),Object(fe.a)(Fn,we,Mn),Object(fe.a)(Fn,xe,Dn),Object(fe.a)(Fn,_e,Nn),Fn),Gn=(Pn={},Object(fe.a)(Pn,he,$n),Object(fe.a)(Pn,de,Bn.every(3)),Object(fe.a)(Pn,pe,Bn),Object(fe.a)(Pn,ge,Ke),Object(fe.a)(Pn,ve,Ue),Object(fe.a)(Pn,me,Ue),Object(fe.a)(Pn,ye,Ue),Object(fe.a)(Pn,be,Wn),Object(fe.a)(Pn,we,Vn),Object(fe.a)(Pn,xe,Dn),Object(fe.a)(Pn,_e,Nn),Pn);function Kn(t){return qn[t]}function Yn(t){return Gn[t]}function Qn(t,e,n){return t?t.offset(e,n):void 0}function Xn(t,e,n){return Qn(Kn(t),e,n)}function Zn(t,e,n){return Qn(Yn(t),e,n)}function Jn(t,e,n,r){return t?t.range(e,n,r):void 0}function tr(t,e,n,r){return Jn(Kn(t),e,n,r)}function er(t,e,n,r){return Jn(Yn(t),e,n,r)}var nr=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},rr=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return nr(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var ir=[he,pe,ve,be,we,xe,_e],or=ir.slice(0,-1),ar=or.slice(0,-1),sr=ar.slice(0,-1),ur=sr.slice(0,-1),cr=[he,pe],lr=[he],fr=[[or,1,1e3],[or,5,5e3],[or,15,15e3],[or,30,3e4],[ar,1,6e4],[ar,5,3e5],[ar,15,9e5],[ar,30,18e5],[sr,1,36e5],[sr,3,108e5],[sr,6,216e5],[sr,12,432e5],[ur,1,864e5],[[he,ge],1,6048e5],[cr,1,2592e6],[cr,3,7776e6],[lr,1,31536e6]],hr=function(t){var e,n,r=t.extent,i=t.maxbins||40,o=Math.abs(Object(p.X)(r))/i,a=rr((function(t){return t[2]})).right(fr,o);return a===fr.length?(e=lr,n=zt(r[0]/31536e6,r[1]/31536e6,i)):a?(e=(a=fr[o/fr[a-1][2]<fr[a][2]/o?a-1:a])[0],n=a[1]):(e=ir,n=Math.max(zt(r[0],r[1],i),1)),{units:e,step:n}};function dr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function pr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function gr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function vr(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=jr(i),l=Tr(i),f=jr(o),h=Tr(o),d=jr(a),p=Tr(a),g=jr(s),v=Tr(s),m=jr(u),y=Tr(u),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Xr,e:Xr,f:ni,H:Zr,I:Jr,j:ti,L:ei,m:ri,M:ii,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ri,s:Di,S:oi,u:ai,U:si,V:ui,w:ci,W:li,x:null,X:null,y:fi,Y:hi,Z:di,"%":Mi},w={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:pi,e:pi,f:bi,H:gi,I:vi,j:mi,L:yi,m:wi,M:xi,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ri,s:Di,S:_i,u:Oi,U:ki,V:Si,w:Ei,W:Ai,x:null,X:null,y:Ci,Y:ji,Z:Ti,"%":Mi},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return k(t,e,n,r)},d:Br,e:Br,f:Gr,H:Wr,I:Wr,j:Ur,L:qr,m:zr,M:Hr,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},q:$r,Q:Yr,s:Qr,S:Vr,u:Rr,U:Dr,V:Lr,w:Mr,W:Nr,x:function(t,e,r){return k(t,n,e,r)},X:function(t,e,n){return k(t,r,e,n)},y:Fr,Y:Ir,Z:Pr,"%":Kr};function _(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Or[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function O(t,e){return function(n){var r,i,o=gr(1900,void 0,1);if(k(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=pr(gr(o.y,0,1))).getUTCDay(),r=i>4||0===i?Ye.ceil(r):Ye(r),r=Ue.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=dr(gr(o.y,0,1))).getDay(),r=i>4||0===i?Ne.ceil(r):Ne(r),r=Re.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?pr(gr(o.y,0,1)).getUTCDay():dr(gr(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,pr(o)):dr(o)}}function k(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=x[i in Or?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=_(n,b),b.X=_(r,b),b.c=_(e,b),w.x=_(n,w),w.X=_(r,w),w.c=_(e,w),{format:function(t){var e=_(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=O(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=_(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=O(t+="",!0);return e.toString=function(){return t},e}}}var mr,yr,br,wr,xr,_r,Or={"-":"",_:" ",0:"0"},kr=/^\s*\d+/,Sr=/^%/,Er=/[\\^$*+?|[\]().{}]/g;function Ar(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Cr(t){return t.replace(Er,"\\$&")}function jr(t){return new RegExp("^(?:"+t.map(Cr).join("|")+")","i")}function Tr(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Mr(t,e,n){var r=kr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Rr(t,e,n){var r=kr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Dr(t,e,n){var r=kr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Lr(t,e,n){var r=kr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Nr(t,e,n){var r=kr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Ir(t,e,n){var r=kr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Fr(t,e,n){var r=kr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Pr(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function $r(t,e,n){var r=kr.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function zr(t,e,n){var r=kr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Br(t,e,n){var r=kr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ur(t,e,n){var r=kr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Wr(t,e,n){var r=kr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Hr(t,e,n){var r=kr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Vr(t,e,n){var r=kr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function qr(t,e,n){var r=kr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Gr(t,e,n){var r=kr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Kr(t,e,n){var r=Sr.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Yr(t,e,n){var r=kr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Qr(t,e,n){var r=kr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Xr(t,e){return Ar(t.getDate(),e,2)}function Zr(t,e){return Ar(t.getHours(),e,2)}function Jr(t,e){return Ar(t.getHours()%12||12,e,2)}function ti(t,e){return Ar(1+Re.count(Sn(t),t),e,3)}function ei(t,e){return Ar(t.getMilliseconds(),e,3)}function ni(t,e){return ei(t,e)+"000"}function ri(t,e){return Ar(t.getMonth()+1,e,2)}function ii(t,e){return Ar(t.getMinutes(),e,2)}function oi(t,e){return Ar(t.getSeconds(),e,2)}function ai(t){var e=t.getDay();return 0===e?7:e}function si(t,e){return Ar(Le.count(Sn(t)-1,t),e,2)}function ui(t,e){var n=t.getDay();return t=n>=4||0===n?Pe(t):Pe.ceil(t),Ar(Pe.count(Sn(t),t)+(4===Sn(t).getDay()),e,2)}function ci(t){return t.getDay()}function li(t,e){return Ar(Ne.count(Sn(t)-1,t),e,2)}function fi(t,e){return Ar(t.getFullYear()%100,e,2)}function hi(t,e){return Ar(t.getFullYear()%1e4,e,4)}function di(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ar(e/60|0,"0",2)+Ar(e%60,"0",2)}function pi(t,e){return Ar(t.getUTCDate(),e,2)}function gi(t,e){return Ar(t.getUTCHours(),e,2)}function vi(t,e){return Ar(t.getUTCHours()%12||12,e,2)}function mi(t,e){return Ar(1+Ue.count($n(t),t),e,3)}function yi(t,e){return Ar(t.getUTCMilliseconds(),e,3)}function bi(t,e){return yi(t,e)+"000"}function wi(t,e){return Ar(t.getUTCMonth()+1,e,2)}function xi(t,e){return Ar(t.getUTCMinutes(),e,2)}function _i(t,e){return Ar(t.getUTCSeconds(),e,2)}function Oi(t){var e=t.getUTCDay();return 0===e?7:e}function ki(t,e){return Ar(Ke.count($n(t)-1,t),e,2)}function Si(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Ze(t):Ze.ceil(t),Ar(Ze.count($n(t),t)+(4===$n(t).getUTCDay()),e,2)}function Ei(t){return t.getUTCDay()}function Ai(t,e){return Ar(Ye.count($n(t)-1,t),e,2)}function Ci(t,e){return Ar(t.getUTCFullYear()%100,e,2)}function ji(t,e){return Ar(t.getUTCFullYear()%1e4,e,4)}function Ti(){return"+0000"}function Mi(){return"%"}function Ri(t){return+t}function Di(t){return Math.floor(+t/1e3)}function Li(t,e,n){n=n||{},Object(p.F)(n)||Object(p.n)("Invalid time multi-format specifier: ".concat(n));var r=e(xe),i=e(we),o=e(be),a=e(ve),s=e(ge),u=e(pe),c=e(de),l=e(he),f=t(n[_e]||".%L"),h=t(n[xe]||":%S"),d=t(n[we]||"%I:%M"),g=t(n[be]||"%I %p"),v=t(n[ve]||n[me]||"%a %d"),m=t(n[ge]||"%b %d"),y=t(n[pe]||"%B"),b=t(n[de]||"%B"),w=t(n[he]||"%Y");return function(t){return(r(t)<t?f:i(t)<t?h:o(t)<t?d:a(t)<t?g:u(t)<t?s(t)<t?v:m:l(t)<t?c(t)<t?y:b:w)(t)}}function Ni(t){var e=Lt(t.format),n=Lt(t.utcFormat);return{timeFormat:function(t){return Object(p.H)(t)?e(t):Li(e,Kn,t)},utcFormat:function(t){return Object(p.H)(t)?n(t):Li(n,Yn,t)},timeParse:Lt(t.parse),utcParse:Lt(t.utcParse)}}function Ii(){return _r=Ni({format:yr,parse:br,utcFormat:wr,utcParse:xr})}function Fi(t){return Ni(vr(t))}function Pi(t){return arguments.length?_r=Fi(t):_r}!function(t){mr=vr(t),yr=mr.format,br=mr.parse,wr=mr.utcFormat,xr=mr.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Ii();var $i=function(t,e){return Object(p.o)({},t,e)};function zi(t,e){var n=t?ue(t):ce(),r=e?Fi(e):Pi();return $i(n,r)}function Bi(t,e){var n=arguments.length;return n&&2!==n&&Object(p.n)("defaultLocale expects either zero or two arguments."),n?$i(ce(t),Pi(e)):$i(ce(),Pi())}function Ui(){return se(),Ii(),Bi()}var Wi=function(t,e,n,r){var i=Rt((e=e||{}).type||"json");return i||Object(p.n)("Unknown data format type: "+e.type),t=i(t,e),e.parse&&function(t,e,n,r){if(!t.length)return;var i=Pi();n=n||i.timeParse,r=r||i.utcParse;var o,a,s,u,c,l,f,h=t.columns||Object.keys(t[0]);"auto"===e&&(e=ut(t,h));for(h=Object.keys(e),o=h.map((function(t){var i,o,a=e[t];if(a&&(a.startsWith("date:")||a.startsWith("utc:")))return("'"===(o=(i=a.split(/:(.+)?/,2))[1])[0]&&"'"===o[o.length-1]||'"'===o[0]&&'"'===o[o.length-1])&&(o=o.slice(1,-1)),("utc"===i[0]?r:n)(o);if(!it[a])throw Error("Illegal format pattern: "+t+":"+a);return it[a]})),u=0,l=t.length,f=h.length;u<l;++u)for(a=t[u],c=0;c<f;++c)s=h[c],a[s]=o[c](a[s])}(t,e.parse,n,r),Object(p.v)(t,"columns")&&delete t.columns,t};var Hi=function(t,e){return function(n){return{options:n||{},sanitize:Q,load:K,fileAccess:!!e,file:Z(e),http:et(t)}}}("undefined"!==typeof fetch&&fetch,null);function Vi(){return(Vi=Object(y.a)(m.a.mark((function t(e,n){var r,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,i=0,t.prev=2,t.next=5,r.loader().load(e,{context:"dataflow",response:Dt(n&&n.type)});case 5:o=t.sent;try{o=r.parse(o,n)}catch(a){i=-2,r.warn("Data ingestion failed",e,a)}t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),i=-1,r.warn("Loading failed",e,t.t0);case 13:return t.abrupt("return",{data:o,status:i});case 14:case"end":return t.stop()}}),t,this,[[2,9]])})))).apply(this,arguments)}function qi(){return(qi=Object(y.a)(m.a.mark((function t(e,n,r){var i,o,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=(i=this)._pending||Gi(i)).requests+=1,t.next=4,i.request(n,r);case 4:return a=t.sent,i.pulse(e,i.changeset().remove(p.gb).insert(a.data||[])),o.done(),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Gi(t){var e,n=new Promise((function(t){e=t}));return n.requests=0,n.done=function(){0===--n.requests&&(t._pending=null,e(t))},t._pending=n}var Ki={skip:!0};function Yi(t,e,n,r,i,o){var a,s,u=Object(p.o)({},o,Ki);Object(p.D)(n)||(n=Object(p.l)(n)),void 0===r?a=function(e){return t.touch(n(e))}:Object(p.D)(r)?(s=new P(null,r,i,!1),a=function(e){s.evaluate(e);var r=n(e),i=s.value;M(i)?t.pulse(r,i,o):t.update(r,i,u)}):a=function(e){return t.update(n(e),r,u)},e.apply(a)}function Qi(t,e,n,r,i,o){if(void 0===r)e.targets().add(n);else{var a=o||{},s=new P(null,function(t,e){return e=Object(p.D)(e)?e:Object(p.l)(e),t?function(n,r){var i=e(n,r);return t.skip()||(t.skip(i!==this.value).value=i),i}:e}(n,r),i,!1);s.modified(a.force),s.rank=e.rank,e.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),t.connect(n,[s]))}}var Xi={};function Zi(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var Ji=Zi.prototype;function to(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}function eo(t,e){var n=[];return Object(p.ib)(t,e,(function(t){return n.push(t)})),n}function no(t,e){var n={};return t.visit(e,(function(t){n[k(t)]=1})),function(t){return n[k(t)]?null:t}}function ro(t,e,n,r){var i,o,a,s,u,c=this,l=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n,a=0,s=n.length;a<s;++a)if((i=n[a]).stamp===e){if(i.fields)for(u in o=c.fields||(c.fields={}),i.fields)o[u]=1;i.changed(c.ADD)&&(l|=c.ADD),i.changed(c.REM)&&(l|=c.REM),i.changed(c.MOD)&&(l|=c.MOD)}this.changes=l}Ji.StopPropagation=Xi,Ji.ADD=1,Ji.REM=2,Ji.MOD=4,Ji.ADD_REM=3,Ji.ADD_MOD=5,Ji.ALL=7,Ji.REFLOW=8,Ji.SOURCE=16,Ji.NO_SOURCE=32,Ji.NO_FIELDS=64,Ji.fork=function(t){return new Zi(this.dataflow).init(this,t)},Ji.clone=function(){var t=this.fork(7);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(23)},Ji.addAll=function(){var t=this;return t.source&&t.source.length!==t.add.length?((t=new Zi(this.dataflow).init(this)).add=t.source,t):t},Ji.init=function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},Ji.runAfter=function(t){this.dataflow.runAfter(t)},Ji.changed=function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},Ji.reflow=function(t){if(t)return this.fork(7).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,no(this,1))),this},Ji.clean=function(t){return arguments.length?(this.cleans=!!t,this):this.cleans},Ji.modifies=function(t){var e=this.fields||(this.fields={});return Object(p.A)(t)?t.forEach((function(t){return e[t]=!0})):e[t]=!0,this},Ji.modified=function(t,e){var n=this.fields;return!(!e&&!this.mod.length||!n)&&(arguments.length?Object(p.A)(t)?t.some((function(t){return n[t]})):n[t]:!!n)},Ji.filter=function(t,e){var n=this;return 1&t&&(n.addF=to(n.addF,e)),2&t&&(n.remF=to(n.remF,e)),4&t&&(n.modF=to(n.modF,e)),16&t&&(n.srcF=to(n.srcF,e)),n},Ji.materialize=function(t){var e=this;return 1&(t=t||7)&&e.addF&&(e.add=eo(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=eo(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=eo(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},Ji.visit=function(t,e){var n,r,i=this,o=e;return 16&t?(Object(p.ib)(i.source,i.srcF,o),i):(1&t&&Object(p.ib)(i.add,i.addF,o),2&t&&Object(p.ib)(i.rem,i.remF,o),4&t&&Object(p.ib)(i.mod,i.modF,o),8&t&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||(r?Object(p.ib)(n,no(i,5),o):Object(p.ib)(n,i.srcF,o))),i)};var io=Object(p.y)(ro,Zi);function oo(){return(oo=Object(y.a)(m.a.mark((function t(e,n,r){var i,o,a,s,u,c,l,f,h;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=[],!(i=this)._pulse){t.next=3;break}return t.abrupt("return",so(i));case 3:if(!i._pending){t.next=6;break}return t.next=6,i._pending;case 6:if(!n){t.next=9;break}return t.next=9,b(i,n);case 9:if(i._touched.length){t.next=12;break}return i.debug("Dataflow invoked, but nothing to do."),t.abrupt("return",i);case 12:a=++i._clock,i._pulse=new Zi(i,a,e),i._touched.forEach((function(t){return i._enqueue(t,!0)})),i._touched=g(p.w),s=0,t.prev=17;case 18:if(!(i._heap.size()>0)){t.next=35;break}if((u=i._heap.pop()).rank===u.qrank){t.next=23;break}return i._enqueue(u,!0),t.abrupt("continue",18);case 23:if(!(c=u.run(i._getPulse(u,e))).then){t.next=30;break}return t.next=27,c;case 27:c=t.sent,t.next=31;break;case 30:c.async&&(o.push(c.async),c=Xi);case 31:c!==Xi&&u._targets&&u._targets.forEach((function(t){return i._enqueue(t)})),++s,t.next=18;break;case 35:t.next=41;break;case 37:t.prev=37,t.t0=t.catch(17),i._heap.clear(),l=t.t0;case 41:if(i._input={},i._pulse=null,i.debug("Pulse ".concat(a,": ").concat(s," operators")),l&&(i._postrun=[],i.error(l)),!i._postrun.length){t.next=55;break}f=i._postrun.sort((function(t,e){return e.priority-t.priority})),i._postrun=[],h=0;case 49:if(!(h<f.length)){t.next=55;break}return t.next=52,b(i,f[h].callback);case 52:++h,t.next=49;break;case 55:if(!r){t.next=58;break}return t.next=58,b(i,r);case 58:return o.length&&Promise.all(o).then((function(t){return i.runAsync(null,(function(){t.forEach((function(t){try{t(i)}catch(e){i.error(e)}}))}))})),t.abrupt("return",i);case 60:case"end":return t.stop()}}),t,this,[[17,37]])})))).apply(this,arguments)}function ao(){return(ao=Object(y.a)(m.a.mark((function t(e,n,r){var i,o=this;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._running){t.next=5;break}return t.next=3,this._running;case 3:t.next=0;break;case 5:return i=function(){return o._running=null},(this._running=this.evaluate(e,n,r)).then(i,i),t.abrupt("return",this._running);case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function so(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}io.fork=function(t){var e=new Zi(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,(function(t){return e.add.push(t)})),t&e.REM&&this.visit(e.REM,(function(t){return e.rem.push(t)})),t&e.MOD&&this.visit(e.MOD,(function(t){return e.mod.push(t)}))),e},io.changed=function(t){return this.changes&t},io.modified=function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?Object(p.A)(t)?t.some((function(t){return n[t]})):n[t]:0},io.filter=function(){Object(p.n)("MultiPulse does not support filtering.")},io.materialize=function(){Object(p.n)("MultiPulse does not support materialization.")},io.visit=function(t,e){var n=this,r=n.pulses,i=r.length,o=0;if(t&n.SOURCE)for(;o<i;++o)r[o].visit(t,e);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(t,e);return n};var uo={skip:!1,force:!1};function co(t){var e=[];return{clear:function(){return e=[]},size:function(){return e.length},peek:function(){return e[0]},push:function(n){return e.push(n),lo(e,0,e.length-1,t)},pop:function(){var n,r=e.pop();return e.length?(n=e[0],e[0]=r,function(t,e,n){var r,i=e,o=t.length,a=t[e],s=1+(e<<1);for(;s<o;)(r=s+1)<o&&n(t[s],t[r])>=0&&(s=r),t[e]=t[s],s=1+((e=s)<<1);t[e]=a,lo(t,i,e,n)}(e,0,t)):n=r,n}}}function lo(t,e,n,r){var i,o,a;for(i=t[n];n>e&&r(i,o=t[a=n-1>>1])<0;)t[n]=o,n=a;return t[n]=i}function fo(){this.logger(Object(p.K)()),this.logLevel(p.b),this._clock=0,this._rank=0,this._locale=Bi();try{this._loader=Hi()}catch(t){}this._touched=g(p.w),this._input={},this._pulse=null,this._heap=co((function(t,e){return t.qrank-e.qrank})),this._postrun=[]}var ho=fo.prototype;function po(t){return function(){return this._log[t].apply(this,arguments)}}function go(t,e){P.call(this,t,null,e)}ho.stamp=function(){return this._clock},ho.loader=function(t){return arguments.length?(this._loader=t,this):this._loader},ho.locale=function(t){return arguments.length?(this._locale=t,this):this._locale},ho.cleanThreshold=1e4,ho.add=function(t,e,n,r){var i,o=1;return t instanceof P?i=t:t&&t.prototype instanceof P?i=new t:Object(p.D)(t)?i=new P(null,t):(o=0,i=new P(t,e)),this.rank(i),o&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},ho.connect=function(t,e){var n,r,i=t.rank;for(n=0,r=e.length;n<r;++n)if(i<e[n].rank)return void this.rerank(t)},ho.rank=function(t){t.rank=++this._rank},ho.rerank=function(t){for(var e,n,r,i=[t];i.length;)if(this.rank(e=i.pop()),n=e._targets)for(r=n.length;--r>=0;)i.push(e=n[r]),e===t&&Object(p.n)("Cycle detected in dataflow graph.")},ho.pulse=function(t,e,n){this.touch(t,n||uo);var r=new Zi(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._input[t.id]=e.pulse(r,i),this},ho.touch=function(t,e){var n=e||uo;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this},ho.update=function(t,e,n){var r=n||uo;return(t.set(e)||r.force)&&this.touch(t,r),this},ho.changeset=R,ho.ingest=function(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))},ho.parse=function(t,e){var n=this.locale();return Wi(t,e,n.timeParse,n.utcParse)},ho.preload=function(t,e,n){return qi.apply(this,arguments)},ho.request=function(t,e){return Vi.apply(this,arguments)},ho.events=function(t,e,n,r){for(var i,o=this,a=W(n,r),s=function(t){t.dataflow=o;try{a.receive(t)}catch(e){o.error(e)}finally{o.run()}},u=0,c=(i="string"===typeof t&&"undefined"!==typeof document?document.querySelectorAll(t):Object(p.i)(t)).length;u<c;++u)i[u].addEventListener(e,s);return a},ho.on=function(t,e,n,r,i){return(t instanceof P?Qi:Yi)(this,t,e,n,r,i),this},ho.evaluate=function(t,e,n){return oo.apply(this,arguments)},ho.run=function(t,e,n){return this._pulse?so(this):(this.evaluate(t,e,n),this)},ho.runAsync=function(t,e,n){return ao.apply(this,arguments)},ho.runAfter=function(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(r){this.error(r)}},ho._enqueue=function(t,e){var n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))},ho._getPulse=function(t,e){var n=t.source,r=this._clock;return n&&Object(p.A)(n)?new ro(this,r,n.map((function(t){return t.pulse})),e):this._input[t.id]||function(t,e){if(e&&e.stamp===t.stamp)return e;t=t.fork(),e&&e!==Xi&&(t.source=e.source);return t}(this._pulse,n&&n.pulse)},ho.logger=function(t){return arguments.length?(this._log=t,this):this._log},ho.error=po("error"),ho.warn=po("warn"),ho.info=po("info"),ho.debug=po("debug"),ho.logLevel=po("level");var vo=Object(p.y)(go,P);vo.run=function(t){var e,n=this;return t.stamp<this.stamp?t.StopPropagation:(this.skip()?this.skip(!1):e=this.evaluate(t),(e=e||t).then?e=e.then((function(t){return n.pulse=t})):e!==t.StopPropagation&&(this.pulse=e),e)},vo.evaluate=function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},vo.transform=function(){};var mo={};function yo(t){var e=bo(t);return e&&e.Definition||null}function bo(t){return t=t&&t.toLowerCase(),Object(p.v)(mo,t)?mo[t]:null}function wo(t){return t&&t.length?1===t.length?t[0]:(e=t,function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}):function(){return""};var e}function xo(t,e,n){return n||t+(e?"_"+e:"")}var _o=function(){},Oo={init:_o,add:_o,rem:_o,idx:0},ko={values:{init:function(t){return t.cell.store=!0},value:function(t){return t.cell.data.values()},idx:-1},count:{value:function(t){return t.cell.num}},__count__:{value:function(t){return t.missing+t.valid}},missing:{value:function(t){return t.missing}},valid:{value:function(t){return t.valid}},sum:{init:function(t){return t.sum=0},value:function(t){return t.sum},add:function(t,e){return t.sum+=+e},rem:function(t,e){return t.sum-=e}},product:{init:function(t){return t.product=1},value:function(t){return t.valid?t.product:void 0},add:function(t,e){return t.product*=e},rem:function(t,e){return t.product/=e}},mean:{init:function(t){return t.mean=0},value:function(t){return t.valid?t.mean:void 0},add:function(t,e){return t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:function(t,e){return t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}},average:{value:function(t){return t.valid?t.mean:void 0},req:["mean"],idx:1},variance:{init:function(t){return t.dev=0},value:function(t){return t.valid>1?t.dev/(t.valid-1):void 0},add:function(t,e){return t.dev+=t.mean_d*(e-t.mean)},rem:function(t,e){return t.dev-=t.mean_d*(e-t.mean)},req:["mean"],idx:1},variancep:{value:function(t){return t.valid>1?t.dev/t.valid:void 0},req:["variance"],idx:2},stdev:{value:function(t){return t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0},req:["variance"],idx:2},stdevp:{value:function(t){return t.valid>1?Math.sqrt(t.dev/t.valid):void 0},req:["variance"],idx:2},stderr:{value:function(t){return t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0},req:["variance"],idx:2},distinct:{value:function(t){return t.cell.data.distinct(t.get)},req:["values"],idx:3},ci0:{value:function(t){return t.cell.data.ci0(t.get)},req:["values"],idx:3},ci1:{value:function(t){return t.cell.data.ci1(t.get)},req:["values"],idx:3},median:{value:function(t){return t.cell.data.q2(t.get)},req:["values"],idx:3},q1:{value:function(t){return t.cell.data.q1(t.get)},req:["values"],idx:3},q3:{value:function(t){return t.cell.data.q3(t.get)},req:["values"],idx:3},min:{init:function(t){return t.min=void 0},value:function(t){return t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min},add:function(t,e){(e<t.min||void 0===t.min)&&(t.min=e)},rem:function(t,e){e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:function(t){return t.max=void 0},value:function(t){return t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max},add:function(t,e){(e>t.max||void 0===t.max)&&(t.max=e)},rem:function(t,e){e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:function(t){return t.argmin=void 0},value:function(t){return t.argmin||t.cell.data.argmin(t.get)},add:function(t,e,n){e<t.min&&(t.argmin=n)},rem:function(t,e){e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:function(t){return t.argmax=void 0},value:function(t){return t.argmax||t.cell.data.argmax(t.get)},add:function(t,e,n){e>t.max&&(t.argmax=n)},rem:function(t,e){e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},So=Object.keys(ko);function Eo(t,e){return ko[t](e)}function Ao(t,e){return t.idx-e.idx}function Co(){var t=this;this.valid=0,this.missing=0,this._ops.forEach((function(e){return e.init(t)}))}function jo(t,e){var n=this;null!=t&&""!==t?t===t&&(++this.valid,this._ops.forEach((function(r){return r.add(n,t,e)}))):++this.missing}function To(t,e){var n=this;null!=t&&""!==t?t===t&&(--this.valid,this._ops.forEach((function(r){return r.rem(n,t,e)}))):--this.missing}function Mo(t){var e=this;return this._out.forEach((function(n){return t[n.out]=n.value(e)})),t}function Ro(t,e){var n=e||p.x,r=function(t){var e={};return t.forEach((function(t){return e[t.name]=t})),t.forEach((function t(n){n.req&&n.req.forEach((function(n){e[n]||t(e[n]=ko[n]())}))})),Object.values(e).sort(Ao)}(t),i=t.slice().sort(Ao);function o(t){this._ops=r,this._out=i,this.cell=t,this.init()}return o.prototype.init=Co,o.prototype.add=jo,o.prototype.rem=To,o.prototype.set=Mo,o.prototype.get=n,o.fields=t.map((function(t){return t.out})),o}So.forEach((function(t){ko[t]=function(t,e){return function(n){return Object(p.o)({name:t,out:n||t},Oo,e)}}(t,ko[t])}));var Do=n(1),Lo=m.a.mark(No);function No(t,e){var n,r,i,o,a,s,u;return m.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(null!=e){c.next=21;break}n=Object(Do.a)(t),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(i=r.value)&&""!==i&&(i=+i)>=i)){c.next=9;break}return c.next=9,i;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=41;break;case 21:o=-1,a=Object(Do.a)(t),c.prev=23,a.s();case 25:if((s=a.n()).done){c.next=33;break}if(u=s.value,!(null!=(u=e(u,++o,t))&&""!==u&&(u=+u)>=u)){c.next=31;break}return c.next=31,u;case 31:c.next=25;break;case 33:c.next=38;break;case 35:c.prev=35,c.t1=c.catch(23),a.e(c.t1);case 38:return c.prev=38,a.f(),c.finish(38);case 41:case"end":return c.stop()}}),Lo,null,[[2,13,16,19],[23,35,38,41]])}function Io(t,e){var n;if(void 0===e){var r,i=Object(Do.a)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(n<o||void 0===n&&o>=o)&&(n=o)}}catch(l){i.e(l)}finally{i.f()}}else{var a,s=-1,u=Object(Do.a)(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;null!=(c=e(c,++s,t))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(l){u.e(l)}finally{u.f()}}return n}function Fo(t,e){var n;if(void 0===e){var r,i=Object(Do.a)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(n>o||void 0===n&&o>=o)&&(n=o)}}catch(l){i.e(l)}finally{i.f()}}else{var a,s=-1,u=Object(Do.a)(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;null!=(c=e(c,++s,t))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(l){u.e(l)}finally{u.f()}}return n}function Po(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}var $o=m.a.mark(Bo),zo=function(t){return null===t?NaN:+t};function Bo(t,e){var n,r,i,o,a,s,u;return m.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==e){c.next=21;break}n=Object(Do.a)(t),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(i=r.value)&&(i=+i)>=i)){c.next=9;break}return c.next=9,i;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=40;break;case 21:o=-1,a=Object(Do.a)(t),c.prev=23,a.s();case 25:if((s=a.n()).done){c.next=32;break}if(u=s.value,!(null!=(u=e(u,++o,t))&&(u=+u)>=u)){c.next=30;break}return c.next=30,u;case 30:c.next=25;break;case 32:c.next=37;break;case 34:c.prev=34,c.t1=c.catch(23),a.e(c.t1);case 37:return c.prev=37,a.f(),c.finish(37);case 40:case"end":return c.stop()}}),$o,null,[[2,13,16,19],[23,34,37,40]])}function Uo(t,e,n){if(r=(t=Float64Array.from(Bo(t,n))).length){if((e=+e)<=0||r<2)return Fo(t);if(e>=1)return Io(t);var r,i=(r-1)*e,o=Math.floor(i),a=Io(function t(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nr;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(s-a/2<0?-1:1),f=Math.max(r,Math.floor(n-s*c/a+l)),h=Math.min(i,Math.floor(n+(a-s)*c/a+l));t(e,n,f,h,o)}var d=e[n],p=r,g=i;for(Po(e,r,n),o(e[i],d)>0&&Po(e,r,i);p<g;){for(Po(e,p,g),++p,--g;o(e[p],d)<0;)++p;for(;o(e[g],d)>0;)--g}0===o(e[r],d)?Po(e,r,g):Po(e,++g,i),g<=n&&(r=g+1),n<=g&&(i=g-1)}return e}(t,o).subarray(0,o+1));return a+(Fo(t.subarray(o+1))-a)*(i-o)}}var Wo=function(t,e,n){var r=Float64Array.from(No(t,n));return r.sort(nr),e.map((function(t){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zo;if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}(r,t)}))},Ho=function(t,e){return Wo(t,[.25,.5,.75],e)};function Vo(t,e){var n=function(t,e){var n,r=0,i=0,o=0;if(void 0===e){var a,s=Object(Do.a)(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;null!=u&&(u=+u)>=u&&(o+=(n=u-i)*(u-(i+=n/++r)))}}catch(d){s.e(d)}finally{s.f()}}else{var c,l=-1,f=Object(Do.a)(t);try{for(f.s();!(c=f.n()).done;){var h=c.value;null!=(h=e(h,++l,t))&&(h=+h)>=h&&(o+=(n=h-i)*(h-(i+=n/++r)))}}catch(d){f.e(d)}finally{f.f()}}if(r>1)return o/(r-1)}(t,e);return n?Math.sqrt(n):n}var qo=function(t,e){var n=t.length,r=Vo(t,e),i=Ho(t,e),o=(i[2]-i[0])/1.34;return 1.06*(r=Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)},Go=function(t){var e,n,r,i,o,a,s,u,c=t.maxbins||20,l=t.base||10,f=Math.log(l),h=t.divide||[5,2],d=t.extent[0],p=t.extent[1],g=t.span||p-d||Math.abs(d)||1;if(t.step)e=t.step;else if(t.steps){for(o=g/c,a=0,s=t.steps.length;a<s&&t.steps[a]<o;++a);e=t.steps[Math.max(0,a-1)]}else{for(n=Math.ceil(Math.log(c)/f),r=t.minstep||0,e=Math.max(r,Math.pow(l,Math.round(Math.log(g)/f)-n));Math.ceil(g/e)>c;)e*=l;for(a=0,s=h.length;a<s;++a)(o=e/h[a])>=r&&g/o<=c&&(e=o)}return i=(o=Math.log(e))>=0?0:1+~~(-o/f),u=Math.pow(l,-i-1),(t.nice||void 0===t.nice)&&(d=d<(o=Math.floor(d/e+u)*e)?o-e:o,p=Math.ceil(p/e)*e),{start:d,stop:p===d?d+e:p,step:e}},Ko=Math.random;function Yo(t){Ko=t}var Qo=function(t,e,n,r){if(!t.length)return[void 0,void 0];var i,o,a,s,u=Float64Array.from(No(t,r)),c=u.length,l=e;for(a=0,s=Array(l);a<l;++a){for(i=0,o=0;o<c;++o)i+=u[~~(Ko()*c)];s[a]=i/c}return s.sort(nr),[Uo(s,n/2),Uo(s,1-n/2)]},Xo=function(t,e,n,r){r=r||function(t){return t};for(var i,o=0,a=1,s=t.length,u=new Float64Array(s),c=r(t[0]),l=c,f=c+e;a<s;++a){if((i=r(t[a]))>=f){for(l=(c+l)/2;o<a;++o)u[o]=l;f=i+e,c=i}l=i}for(l=(c+l)/2;o<a;++o)u[o]=l;return n?function(t,e){var n,r,i=t.length,o=0,a=1;for(;t[o]===t[a];)++a;for(;a<i;){for(n=a+1;t[a]===t[n];)++n;if(t[a]-t[a-1]<e){for(r=a+(o+n-a-a>>1);r<a;)t[r++]=t[a];for(;r>a;)t[r--]=t[o]}o=a,a=n}return t}(u,e+e/4):u};var Zo=function(t){return function(){return(t=(1103515245*t+12345)%2147483647)/2147483647}},Jo=function(t,e){null==e&&(e=t,t=0);var n,r,i,o={};return o.min=function(t){return arguments.length?(i=r-(n=t||0),o):n},o.max=function(t){return arguments.length?(i=(r=t||0)-n,o):r},o.sample=function(){return n+Math.floor(i*Ko())},o.pdf=function(t){return t===Math.floor(t)&&t>=n&&t<r?1/i:0},o.cdf=function(t){var e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},o.icdf=function(t){return t>=0&&t<=1?n-1+Math.floor(t*i):NaN},o.min(t).max(e)},ta=Math.sqrt(2*Math.PI),ea=Math.SQRT2,na=NaN;function ra(t,e){t=t||0,e=null==e?1:e;var n,r,i=0,o=0;if(na===na)i=na,na=NaN;else{do{n=(i=2*Ko()-1)*i+(o=2*Ko()-1)*o}while(0===n||n>1);i*=r=Math.sqrt(-2*Math.log(n)/n),na=o*r}return t+i*e}function ia(t,e,n){var r=(t-(e||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*ta)}function oa(t,e,n){var r,i=(t-(e=e||0))/(n=null==n?1:n),o=Math.abs(i);if(o>37)r=0;else{var a=Math.exp(-o*o/2);o<7.07106781186547?(r=a*((((((.0352624965998911*o+.700383064443688)*o+6.37396220353165)*o+33.912866078383)*o+112.079291497871)*o+221.213596169931)*o+220.206867912376),r/=((((((.0883883476483184*o+1.75566716318264)*o+16.064177579207)*o+86.7807322029461)*o+296.564248779674)*o+637.333633378831)*o+793.826512519948)*o+440.413735824752):r=a/(o+1/(o+2/(o+3/(o+4/(o+.65)))))/2.506628274631}return i>0?1-r:r}function aa(t,e,n){return t<0||t>1?NaN:(e||0)+(null==n?1:n)*ea*function(t){var e,n=-Math.log((1-t)*(1+t));n<6.25?e=1.6536545626831027+(e=.24015818242558962+(e=(e=(e=.00018673420803405714+(e=(e=(e=4.2347877827932404e-7+(e=(e=(e=1.0512122733215323e-9+(e=(e=(e=26335093153082323e-28+(e=(e=(e=6637638134358324e-30+(e=20972767875968562e-33+(e=(e=11157877678025181e-33+(e=128584807152564e-32+(e=(e=-364441206401782e-35)*(n-=3.125)-16850591381820166e-35)*n)*n)*n-1333171662854621e-31)*n)*n)*n-4054566272975207e-29)*n-8151934197605472e-29)*n)*n-12975133253453532e-27)*n-5415412054294628e-26)*n)*n-4.112633980346984e-9)*n-2.9070369957882005e-8)*n)*n-13654692000834679e-22)*n-13882523362786469e-21)*n)*n-.000740702534166267)*n-.006033670871430149)*n)*n:n<16?(n=Math.sqrt(n)-3.25,e=3.0838856104922208+(e=1.0052589676941592+(e=.005370914553590064+(e=(e=.002491442096107851+(e=(e=.0009532893797373805+(e=(e=24031110387097894e-21+(e=6828485145957318e-20+(e=(e=12475304481671779e-21+(e=29234449089955446e-22+(e=(e=15027403968909828e-22+(e=1.8239629214389228e-8+(e=(e=9.075656193888539e-8+(e=2.2137376921775787e-9)*n)*n-2.7517406297064545e-7)*n)*n)*n-4013867526981546e-21)*n)*n)*n-47318229009055734e-21)*n)*n)*n-.0003550375203628475)*n)*n-.0016882755560235047)*n)*n-.003751208507569241)*n)*n)*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,e=4.849906401408584+(e=1.0103004648645344+(e=(e=(e=7599527703001776e-20+(e=(e=4526062597223154e-21+(e=(e=2.2900482228026655e-7+(e=(e=2.914795345090108e-8+(e=(e=7.61570120807834e-9+(e=(e=1.5076572693500548e-9+(e=(e=-27109920616438573e-27)*n-2.555641816996525e-10)*n)*n-3.789465440126737e-9)*n)*n-1.496002662714924e-8)*n)*n-6.771199775845234e-8)*n)*n-9.9298272942317e-7)*n)*n-1968177810553167e-20)*n)*n-.00021503011930044477)*n-.00013871931833623122)*n)*n):e=1/0;return e*t}(2*t-1)}var sa=function(t,e){var n,r,i={mean:function(t){return arguments.length?(n=t||0,i):n},stdev:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return ra(n,r)},pdf:function(t){return ia(t,n,r)},cdf:function(t){return oa(t,n,r)},icdf:function(t){return aa(t,n,r)}};return i.mean(t).stdev(e)},ua=function(t,e){var n=sa(),r={},i=0;return r.data=function(n){return arguments.length?(t=n,i=n?n.length:0,r.bandwidth(e)):t},r.bandwidth=function(n){return arguments.length?(!(e=n)&&t&&(e=qo(t)),r):e},r.sample=function(){return t[~~(Ko()*i)]+e*n.sample()},r.pdf=function(r){for(var o=0,a=0;a<i;++a)o+=n.pdf((r-t[a])/e);return o/e/i},r.cdf=function(r){for(var o=0,a=0;a<i;++a)o+=n.cdf((r-t[a])/e);return o/i},r.icdf=function(){throw Error("KDE icdf not supported.")},r.data(t)};function ca(t,e){return t=t||0,e=null==e?1:e,Math.exp(t+ra()*e)}function la(t,e,n){if(t<=0)return 0;e=e||0,n=null==n?1:n;var r=(Math.log(t)-e)/n;return Math.exp(-.5*r*r)/(n*ta*t)}function fa(t,e,n){return oa(Math.log(t),e,n)}function ha(t,e,n){return Math.exp(aa(t,e,n))}var da=function(t,e){var n,r,i={mean:function(t){return arguments.length?(n=t||0,i):n},stdev:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return ca(n,r)},pdf:function(t){return la(t,n,r)},cdf:function(t){return fa(t,n,r)},icdf:function(t){return ha(t,n,r)}};return i.mean(t).stdev(e)},pa=function(t,e){var n,r={},i=0;function o(t){var e,n=[],r=0;for(e=0;e<i;++e)r+=n[e]=null==t[e]?1:+t[e];for(e=0;e<i;++e)n[e]/=r;return n}return r.weights=function(t){return arguments.length?(n=o(e=t||[]),r):e},r.distributions=function(n){return arguments.length?(n?(i=n.length,t=n):(i=0,t=[]),r.weights(e)):t},r.sample=function(){for(var e=Ko(),r=t[i-1],o=n[0],a=0;a<i-1;o+=n[++a])if(e<o){r=t[a];break}return r.sample()},r.pdf=function(e){for(var r=0,o=0;o<i;++o)r+=n[o]*t[o].pdf(e);return r},r.cdf=function(e){for(var r=0,o=0;o<i;++o)r+=n[o]*t[o].cdf(e);return r},r.icdf=function(){throw Error("Mixture icdf not supported.")},r.distributions(t).weights(e)};function ga(t,e){return null==e&&(e=null==t?1:t,t=0),t+(e-t)*Ko()}function va(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function ma(t,e,n){return null==n&&(n=null==e?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function ya(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}var ba=function(t,e){var n,r,i={min:function(t){return arguments.length?(n=t||0,i):n},max:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:function(){return ga(n,r)},pdf:function(t){return va(t,n,r)},cdf:function(t){return ma(t,n,r)},icdf:function(t){return ya(t,n,r)}};return null==e&&(e=null==t?1:t,t=0),i.min(t).max(e)},wa=function(t,e,n,r){var i=r-t*t,o=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-o*t,o]};function xa(t,e,n,r){t=t.filter((function(t){var r=e(t),i=n(t);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&t.sort((function(t,n){return e(t)-e(n)}));var i,o,a,s,u=t.length,c=new Float64Array(u),l=new Float64Array(u),f=0,h=0,d=0,p=Object(Do.a)(t);try{for(p.s();!(s=p.n()).done;)a=s.value,c[f]=i=+e(a),l[f]=o=+n(a),h+=(i-h)/++f,d+=(o-d)/f}catch(g){p.e(g)}finally{p.f()}for(f=0;f<u;++f)c[f]-=h,l[f]-=d;return[c,l,h,d]}function _a(t,e,n,r){var i,o,a,s=-1,u=Object(Do.a)(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;i=e(c),o=n(c),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++s)}}catch(l){u.e(l)}finally{u.f()}}var Oa=function(t,e,n,r,i){var o=0,a=0;return _a(t,e,n,(function(t,e){var n=e-i(t),s=e-r;o+=n*n,a+=s*s})),1-o/a},ka=function(t,e,n){var r=0,i=0,o=0,a=0,s=0;_a(t,e,n,(function(t,e){++s,r+=(t-r)/s,i+=(e-i)/s,o+=(t*e-o)/s,a+=(t*t-a)/s}));var u=wa(r,i,o,a),c=function(t){return u[0]+u[1]*t};return{coef:u,predict:c,rSquared:Oa(t,e,n,i,c)}},Sa=function(t,e,n){var r=0,i=0,o=0,a=0,s=0;_a(t,e,n,(function(t,e){++s,t=Math.log(t),r+=(t-r)/s,i+=(e-i)/s,o+=(t*e-o)/s,a+=(t*t-a)/s}));var u=wa(r,i,o,a),c=function(t){return u[0]+u[1]*Math.log(t)};return{coef:u,predict:c,rSquared:Oa(t,e,n,i,c)}},Ea=n(11),Aa=function(t,e,n){var r,i,o,a=xa(t,e,n),s=Object(Ea.a)(a,4),u=s[0],c=(s[1],s[2]),l=s[3],f=0,h=0,d=0,p=0,g=0;_a(t,e,n,(function(t,e){r=u[g++],i=Math.log(e),f+=(e*i-f)/g,h+=((o=r*e)-h)/g,d+=(o*i-d)/g,p+=(r*o-p)/g}));var v=wa(h/l,f/l,d/l,p/l),m=Object(Ea.a)(v,2),y=m[0],b=m[1],w=function(t){return Math.exp(y+b*(t-c))};return{coef:[Math.exp(y-b*c),b],predict:w,rSquared:Oa(t,e,n,l,w)}},Ca=function(t,e,n){var r=0,i=0,o=0,a=0,s=0,u=0;_a(t,e,n,(function(t,e){var n=Math.log(t),c=Math.log(e);++u,r+=(n-r)/u,i+=(c-i)/u,o+=(n*c-o)/u,a+=(n*n-a)/u,s+=(e-s)/u}));var c=wa(r,i,o,a),l=function(t){return c[0]*Math.pow(t,c[1])};return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:Oa(t,e,n,s,l)}},ja=function(t,e,n){var r,i,o,a,s=xa(t,e,n),u=Object(Ea.a)(s,4),c=u[0],l=u[1],f=u[2],h=u[3],d=c.length,p=0,g=0,v=0,m=0,y=0;for(r=0;r<d;)i=c[r],o=l[r++],p+=((a=i*i)-p)/r,g+=(a*i-g)/r,v+=(a*a-v)/r,m+=(i*o-m)/r,y+=(a*o-y)/r;var b=v-p*p,w=p*b-g*g,x=(y*p-m*g)/w,_=(m*b-y*g)/w,O=-x*p,k=function(t){return x*(t-=f)*t+_*t+O+h};return{coef:[O-_*f+x*f*f+h,_-2*x*f,x],predict:k,rSquared:Oa(t,e,n,h,k)}},Ta=function(t,e,n,r){if(1===r)return ka(t,e,n);if(2===r)return ja(t,e,n);var i,o,a,s,u,c=xa(t,e,n),l=Object(Ea.a)(c,4),f=l[0],h=l[1],d=l[2],p=l[3],g=f.length,v=[],m=[],y=r+1;for(i=0;i<y;++i){for(a=0,s=0;a<g;++a)s+=Math.pow(f[a],i)*h[a];for(v.push(s),u=new Float64Array(y),o=0;o<y;++o){for(a=0,s=0;a<g;++a)s+=Math.pow(f[a],i+o);u[o]=s}m.push(u)}m.push(v);var b=function(t){var e,n,r,i,o,a=t.length-1,s=[];for(e=0;e<a;++e){for(i=e,n=e+1;n<a;++n)Math.abs(t[e][n])>Math.abs(t[e][i])&&(i=n);for(r=e;r<a+1;++r)o=t[r][e],t[r][e]=t[r][i],t[r][i]=o;for(n=e+1;n<a;++n)for(r=a;r>=e;r--)t[r][n]-=t[r][e]*t[e][n]/t[e][e]}for(n=a-1;n>=0;--n){for(o=0,r=n+1;r<a;++r)o+=t[r][n]*s[r];s[n]=(t[a][n]-o)/t[n][n]}return s}(m),w=function(t){t-=d;var e=p+b[0]+b[1]*t+b[2]*t*t;for(i=3;i<y;++i)e+=b[i]*Math.pow(t,i);return e};return{coef:Ma(y,b,-d,p),predict:w,rSquared:Oa(t,e,n,p,w)}};function Ma(t,e,n,r){var i,o,a,s,u=Array(t);for(i=0;i<t;++i)u[i]=0;for(i=t-1;i>=0;--i)for(a=e[i],s=1,u[i]+=a,o=1;o<=i;++o)s*=(i+1-o)/o,u[i-o]+=a*Math.pow(n,o)*s;return u[0]+=r,u}var Ra=function(t,e){return Uo(t,.5,e)},Da=function(t,e,n,r){for(var i=xa(t,e,n,!0),o=Object(Ea.a)(i,4),a=o[0],s=o[1],u=o[2],c=o[3],l=a.length,f=Math.max(2,~~(r*l)),h=new Float64Array(l),d=new Float64Array(l),p=new Float64Array(l).fill(1),g=-1;++g<=2;){for(var v=[0,f-1],m=0;m<l;++m){for(var y=a[m],b=v[0],w=v[1],x=y-a[b]>a[w]-y?b:w,_=0,O=0,k=0,S=0,E=0,A=1/Math.abs(a[x]-y||1),C=b;C<=w;++C){var j=a[C],T=s[C],M=La(Math.abs(y-j)*A)*p[C],R=j*M;_+=M,O+=R,k+=T*M,S+=T*R,E+=j*R}var D=wa(O/_,k/_,S/_,E/_),L=Object(Ea.a)(D,2),N=L[0],I=L[1];h[m]=N+I*y,d[m]=Math.abs(s[m]-h[m]),Na(a,m+1,v)}if(2===g)break;var F=Ra(d);if(Math.abs(F)<1e-12)break;for(var P,$,z=0;z<l;++z)P=d[z]/(6*F),p[z]=P>=1?1e-12:($=1-P*P)*$}return function(t,e,n,r){for(var i,o=t.length,a=[],s=0,u=0,c=[];s<o;++s)i=t[s]+n,c[0]===i?c[1]+=(e[s]-c[1])/++u:(u=0,c[1]+=r,c=[i,e[s]],a.push(c));return c[1]+=r,a}(a,h,u,c)};function La(t){return(t=1-t*t*t)*t*t}function Na(t,e,n){var r=t[e],i=n[0],o=n[1]+1;if(!(o>=t.length))for(;e>i&&t[o]-r<=r-t[i];)n[0]=++i,n[1]=o,++o}var Ia=.1*Math.PI/180,Fa=function(t,e,n,r){n=n||25,r=Math.max(n,r||200);var i=function(e){return[e,t(e)]},o=e[0],a=e[1],s=a-o,u=s/r,c=[i(o)],l=[];if(n===r){for(var f=1;f<r;++f)c.push(i(o+f/n*s));return c.push(i(a)),c}l.push(i(a));for(var h=n;--h>0;)l.push(i(o+h/n*s));for(var d=c[0],p=l[l.length-1];p;){var g=i((d[0]+p[0])/2);g[0]-d[0]>=u&&Pa(d,g,p)>Ia?l.push(g):(d=p,c.push(p),l.pop()),p=l[l.length-1]}return c};function Pa(t,e,n){var r=Math.atan2(n[1]-t[1],n[0]-t[0]),i=Math.atan2(e[1]-t[1],e[0]-t[0]);return Math.abs(r-i)}function $a(t){this._key=t?Object(p.t)(t):k,this.reset()}var za=$a.prototype;function Ba(t){go.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}za.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},za.add=function(t){this._add.push(t)},za.rem=function(t){this._rem.push(t)},za.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,o=this._key,a=r.length,s=i.length,u=Array(a-s),c={};for(t=0;t<s;++t)c[o(i[t])]=1;for(t=0,e=0;t<a;++t)c[o(n=r[t])]?c[o(n)]=0:u[e++]=n;return this._rem=[],this._add=u},za.distinct=function(t){for(var e,n=this.values(),r=n.length,i={},o=0;--r>=0;)e=t(n[r])+"",Object(p.v)(i,e)||(i[e]=1,++o);return o},za.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=Object(p.q)(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},za.argmin=function(t){return this.extent(t)[0]||{}},za.argmax=function(t){return this.extent(t)[1]||{}},za.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):void 0},za.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):void 0},za.quartile=function(t){return this._get===t&&this._q||(this._q=Ho(this.values(),t),this._get=t),this._q},za.q1=function(t){return this.quartile(t)[0]},za.q2=function(t){return this.quartile(t)[1]},za.q3=function(t){return this.quartile(t)[2]},za.ci=function(t){return this._get===t&&this._ci||(this._ci=Qo(this.values(),1e3,.05,t),this._get=t),this._ci},za.ci0=function(t){return this.ci(t)[0]},za.ci1=function(t){return this.ci(t)[1]},Ba.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:So},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Ua=Object(p.y)(Ba,go);Ua.transform=function(t,e){var n=this,r=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),o=t.modified();return r.stamp=i.stamp,r.value&&(o||e.modified(r._inputs,!0))?(r._prev=r.value,r.value=o?r.init(t):{},e.visit(e.SOURCE,(function(t){return r.add(t)}))):(r.value=r.value||r.init(t),e.visit(e.REM,(function(t){return r.rem(t)})),e.visit(e.ADD,(function(t){return r.add(t)}))),i.modifies(r._outputs),r._drop=!1!==t.drop,t.cross&&r._dims.length>1&&(r._drop=!1,r.cross()),e.clean()&&r._drop&&i.clean(!0).runAfter((function(){return n.clean()})),r.changes(i)},Ua.cross=function(){var t=this,e=t.value,n=t._dnames,r=n.map((function(){return{}})),i=n.length;function o(t){var e,o,a,s;for(e in t)for(a=t[e].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}o(t._prev),o(e),function o(a,s,u){var c,l,f=n[u],h=r[u++];for(c in h)s[f]=h[c],l=a?a+"|"+c:c,u<i?o(l,s,u):e[l]||t.cell(l,s)}("",{},0)},Ua.init=function(t){var e=this._inputs=[],n=this._outputs=[],r={};function i(t){for(var n,i=Object(p.i)(Object(p.g)(t)),o=0,a=i.length;o<a;++o)r[n=i[o]]||(r[n]=1,e.push(n))}this._dims=Object(p.i)(t.groupby),this._dnames=this._dims.map((function(t){var e=Object(p.h)(t);return i(t),n.push(e),e})),this.cellkey=t.key?t.key:wo(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var o,a,s,u,c,l,f=t.fields||[null],h=t.ops||["count"],d=t.as||[],g=f.length,v={};for(g!==h.length&&Object(p.n)("Unmatched number of fields and aggregate ops."),l=0;l<g;++l)o=f[l],a=h[l],null==o&&"count"!==a&&Object(p.n)("Null aggregate field specified."),c=xo(a,u=Object(p.h)(o),d[l]),n.push(c),"count"!==a?((s=v[u])||(i(o),(s=v[u]=[]).field=o,this._measures.push(s)),"count"!==a&&(this._countOnly=!1),s.push(Eo(a,c))):this._counts.push(c);return this._measures=this._measures.map((function(t){return Ro(t,t.field)})),{}},Ua.cellkey=wo(),Ua.cell=function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},Ua.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,o=i.length;for(n.agg=Array(o),r=0;r<o;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new $a),n},Ua.newtuple=function(t,e){var n,r,i=this._dnames,o=this._dims,a={};for(n=0,r=o.length;n<r;++n)a[i[n]]=o[n](t);return e?j(e.tuple,a):E(a)},Ua.clean=function(){var t=this.value;for(var e in t)0===t[e].num&&delete t[e]},Ua.add=function(t){var e,n,r,i=this.cellkey(t),o=this.cell(i,t);if(o.num+=1,!this._countOnly)for(o.store&&o.data.add(t),n=0,r=(e=o.agg).length;n<r;++n)e[n].add(e[n].get(t),t)},Ua.rem=function(t){var e,n,r,i=this.cellkey(t),o=this.cell(i,t);if(o.num-=1,!this._countOnly)for(o.store&&o.data.rem(t),n=0,r=(e=o.agg).length;n<r;++n)e[n].rem(e[n].get(t),t)},Ua.celltuple=function(t){var e,n,r,i=t.tuple,o=this._counts;for(t.store&&t.data.values(),n=0,r=o.length;n<r;++n)i[o[n]]=t.num;if(!this._countOnly)for(n=0,r=(e=t.agg).length;n<r;++n)e[n].set(i);return i},Ua.changes=function(t){var e,n,r,i,o=this._adds,a=this._mods,s=this._prev,u=this._drop,c=t.add,l=t.rem,f=t.mod;if(s)for(n in s)e=s[n],u&&!e.num||l.push(e.tuple);for(r=0,i=this._alen;r<i;++r)c.push(this.celltuple(o[r])),o[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(e=a[r]).num&&u?l:f).push(this.celltuple(e)),a[r]=null;return this._alen=this._mlen=0,this._prev=null,t};function Wa(t){go.call(this,null,t)}Wa.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Ha=Object(p.y)(Wa,go);Ha.transform=function(t,e){var n,r=!1!==t.interval,i=this._bins(t),o=i.start,a=i.step,s=t.as||["bin0","bin1"],u=s[0],c=s[1];return n=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified(Object(p.g)(t.field))?e.ADD_MOD:e.ADD,e.visit(n,r?function(t){var e=i(t);t[u]=e,t[c]=null==e?null:o+a*(1+(e-o)/a)}:function(t){t[u]=i(t)}),e.modifies(r?s:u)},Ha._bins=function(t){if(this.value&&!t.modified())return this.value;var e,n,r=t.field,i=Go(t),o=i.step,a=i.start,s=a+Math.ceil((i.stop-a)/o)*o;null!=(e=t.anchor)&&(n=e-(a+o*Math.floor((e-a)/o)),a+=n,s+=n);var u=function(t){var e=Object(p.cb)(r(t));return null==e?null:e<a?-1/0:e>s?1/0:(e=Math.max(a,Math.min(e,s-o)),a+o*Math.floor(1e-14+(e-a)/o))};return u.start=a,u.stop=i.stop,u.step=o,this.value=Object(p.f)(u,Object(p.g)(r),t.name||"bin_"+Object(p.h)(r))};var Va=function(t,e,n){var r=t,i=e||[],o=n||[],a={},s=0;return{add:function(t){o.push(t)},remove:function(t){a[r(t)]=++s},size:function(){return i.length},data:function(t,e){return s&&(i=i.filter((function(t){return!a[r(t)]})),a={},s=0),e&&t&&i.sort(t),o.length&&(i=t?Object(p.M)(t,i,o.sort(t)):i.concat(o),o=[]),i}}};function qa(t){go.call(this,[],t)}function Ga(t){P.call(this,null,Ka,t)}function Ka(t){return this.value&&!t.modified()?this.value:Object(p.k)(t.fields,t.orders)}function Ya(t){go.call(this,null,t)}qa.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(p.y)(qa,go).transform=function(t,e){var n=e.fork(e.ALL),r=Va(k,this.value,n.materialize(n.ADD).add),i=t.sort,o=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(T(i),o),e.source&&e.source.root&&(this.value.root=e.source.root),n},Object(p.y)(Ga,P),Ya.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Qa=Object(p.y)(Ya,go);function Xa(t){go.call(this,null,t)}Qa.transform=function(t,e){function n(e){return function(n){for(var r,i=function(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t.match(n)}(s(n),t.case,o)||[],u=0,c=i.length;u<c;++u)a.test(r=i[u])||e(r)}}var r=this._parameterCheck(t,e),i=this._counts,o=this._match,a=this._stop,s=t.field,u=t.as||["text","count"],c=n((function(t){i[t]=1+(i[t]||0)})),l=n((function(t){i[t]-=1}));return r?e.visit(e.SOURCE,c):(e.visit(e.ADD,c),e.visit(e.REM,l)),this._finish(e,u)},Qa._parameterCheck=function(t,e){var n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},Qa._finish=function(t,e){var n,r,i,o=this._counts,a=this._tuples||(this._tuples={}),s=e[0],u=e[1],c=t.fork(t.NO_SOURCE|t.NO_FIELDS);for(n in o)r=a[n],i=o[n]||0,!r&&i?(a[n]=r=E({}),r[s]=n,r[u]=i,c.add.push(r)):0===i?(r&&c.rem.push(r),o[n]=null,a[n]=null):r[u]!==i&&(r[u]=i,c.mod.push(r));return c.modifies(e)},Xa.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(p.y)(Xa,go).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=this.value,i=t.as||["a","b"],o=i[0],a=i[1];return!r||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter")?(r&&(n.rem=r),r=e.materialize(e.SOURCE).source,n.add=this.value=function(t,e,n,r){for(var i,o,a=[],s={},u=t.length,c=0;c<u;++c)for(s[e]=o=t[c],i=0;i<u;++i)s[n]=t[i],r(s)&&(a.push(E(s)),(s={})[e]=o);return a}(r,o,a,t.filter||p.gb)):n.mod=r,n.source=this.value,n.modifies(i)};var Za={kde:ua,mixture:pa,normal:sa,lognormal:da,uniform:ba};function Ja(t){go.call(this,null,t)}var ts=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],es={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:ts},{name:"weights",type:"number",array:!0}]};function ns(t,e){return t?t.map((function(t,n){return e[n]||Object(p.h)(t)})):null}function rs(t,e,n){var r,i,o,a,s,u,c=[],l=function(t){return t(a)};if(null==e)c.push(t.map(n));else for(r={},i=0,o=t.length;i<o;++i)a=t[i],(u=r[s=e.map(l)])||(r[s]=u=[],u.dims=s,c.push(u)),u.push(n(a));return c}Ja.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:ts.concat(es)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(p.y)(Ja,go).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=function t(e,n){var r=e.function;Object(p.v)(Za,r)||Object(p.n)("Unknown distribution function: "+r);var i=Za[r]();for(var o in e)"field"===o?i.data((e.from||n()).map(e[o])):"distributions"===o?i[o](e[o].map((function(e){return t(e,n)}))):"function"===typeof i[o]&&i[o](e[o]);return i}(t.distribution,function(t){return function(){return t.materialize(t.SOURCE).source}}(e)),i=t.steps||t.minsteps||25,o=t.steps||t.maxsteps||200,a=t.method||"pdf";"pdf"!==a&&"cdf"!==a&&Object(p.n)("Invalid density method: "+a),t.extent||r.data||Object(p.n)("Missing density extent parameter."),a=r[a];var s=t.as||["value","density"],u=t.extent||Object(p.p)(r.data()),c=Fa(a,u,i,o).map((function(t){var e={};return e[s[0]]=t[0],e[s[1]]=t[1],E(e)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n};function is(t){go.call(this,null,t)}function os(t){P.call(this,null,as,t),this.modified(!0)}function as(t){var e=t.expr;return this.value&&!t.modified("expr")?this.value:Object(p.f)((function(n){return e(n,t)}),Object(p.g)(e),Object(p.h)(e))}function ss(t){go.call(this,[void 0,void 0],t)}function us(t,e){P.call(this,t),this.parent=e,this.count=0}is.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},Object(p.y)(is,go).transform=function(t,e){if(this.value&&!t.modified()&&!e.changed())return e;for(var n,r=e.materialize(e.SOURCE).source,i=rs(e.source,t.groupby,p.x),o=t.smooth||!1,a=t.field,s=t.step||function(t,e){return Object(p.X)(Object(p.p)(t,e))/30}(r,a),u=T((function(t,e){return a(t)-a(e)})),c=t.as||"bin",l=i.length,f=1/0,h=-1/0,d=0;d<l;++d){var g=i[d].sort(u);n=-1;var v,m=Object(Do.a)(Xo(g,s,o,a));try{for(m.s();!(v=m.n()).done;){var y=v.value;y<f&&(f=y),y>h&&(h=y),g[++n][c]=y}}catch(b){m.e(b)}finally{m.f()}}return this.value={start:f,stop:h,step:s},e.reflow(!0).modifies(c)},Object(p.y)(os,P),ss.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(p.y)(ss,go).transform=function(t,e){var n,r=this.value,i=t.field,o=r[0],a=r[1];if(((n=e.changed()||e.modified(i.fields)||t.modified("field"))||null==o)&&(o=1/0,a=-1/0),e.visit(n?e.SOURCE:e.ADD,(function(t){var e=Object(p.cb)(i(t));null!=e&&(e<o&&(o=e),e>a&&(a=e))})),!Number.isFinite(o)||!Number.isFinite(a)){var s=Object(p.h)(i);s&&(s=' for field "'.concat(s,'"')),e.dataflow.warn("Infinite extent".concat(s,": [").concat(o,", ").concat(a,"]")),o=a=void 0}this.value=[o,a]};var cs=Object(p.y)(us,P);function ls(t){go.call(this,{},t),this._keys=Object(p.s)();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var n=0,r=e.active;n<r;++n)t(e[n],n,e)}}cs.connect=function(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},cs.add=function(t){this.count+=1,this.value.add.push(t)},cs.rem=function(t){this.count-=1,this.value.rem.push(t)},cs.mod=function(t){this.value.mod.push(t)},cs.init=function(t){this.value.init(t,t.NO_SOURCE)},cs.evaluate=function(){return this.value};var fs=Object(p.y)(ls,go);function hs(t){P.call(this,null,ds,t)}function ds(t){return this.value&&!t.modified()?this.value:Object(p.A)(t.name)?Object(p.i)(t.name).map((function(t){return Object(p.t)(t)})):Object(p.t)(t.name,t.as)}function ps(t){go.call(this,Object(p.s)(),t)}function gs(t){go.call(this,[],t)}function vs(t){go.call(this,[],t)}function ms(t){go.call(this,null,t)}function ys(t){go.call(this,[],t)}fs.activate=function(t){this._targets[this._targets.active++]=t},fs.subflow=function(t,e,n,r){var i,o,a=this.value,s=Object(p.v)(a,t)&&a[t];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=r||(o=this._group[t])&&o.tuple,i=n.dataflow,s=new us(n.fork(n.NO_SOURCE),this),i.add(s).connect(e(i,t,o)),a[t]=s,this.activate(s)),s},fs.clean=function(){var t=this.value;for(var e in t)if(0===t[e].count){var n=t[e].detachSubflow;n&&n(),delete t[e]}},fs.initTargets=function(){for(var t=this._targets,e=t.length,n=0;n<e&&null!=t[n];++n)t[n]=null;t.active=0},fs.transform=function(t,e){var n=this,r=e.dataflow,i=t.key,o=t.subflow,a=this._keys,s=t.modified("key"),u=function(t){return n.subflow(t,o,e)};return this._group=t.group||{},this.initTargets(),e.visit(e.REM,(function(t){var e=k(t),n=a.get(e);void 0!==n&&(a.delete(e),u(n).rem(t))})),e.visit(e.ADD,(function(t){var e=i(t);a.set(k(t),e),u(e).add(t)})),s||e.modified(i.fields)?e.visit(e.MOD,(function(t){var e=k(t),n=a.get(e),r=i(t);n===r?u(r).mod(t):(a.set(e,r),u(n).rem(t),u(r).add(t))})):e.changed(e.MOD)&&e.visit(e.MOD,(function(t){u(a.get(k(t))).mod(t)})),s&&e.visit(e.REFLOW,(function(t){var e=k(t),n=a.get(e),r=i(t);n!==r&&(a.set(e,r),u(n).rem(t),u(r).add(t))})),e.clean()?r.runAfter((function(){n.clean(),a.clean()})):a.empty>r.cleanThreshold&&r.runAfter(a.clean),e},Object(p.y)(hs,P),ps.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(p.y)(ps,go).transform=function(t,e){var n=e.dataflow,r=this.value,i=e.fork(),o=i.add,a=i.rem,s=i.mod,u=t.expr,c=!0;function l(e){var n=k(e),i=u(e,t),l=r.get(n);i&&l?(r.delete(n),o.push(e)):i||l?c&&i&&!l&&s.push(e):(r.set(n,1),a.push(e))}return e.visit(e.REM,(function(t){var e=k(t);r.has(e)?r.delete(e):a.push(t)})),e.visit(e.ADD,(function(e){u(e,t)?o.push(e):r.set(k(e),1)})),e.visit(e.MOD,l),t.modified()&&(c=!1,e.visit(e.REFLOW,l)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i},gs.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Object(p.y)(gs,go).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=ns(r,t.as||[]),o=t.index||null,a=i.length;return n.rem=this.value,e.visit(e.SOURCE,(function(t){for(var e,s,u,c=r.map((function(e){return e(t)})),l=c.reduce((function(t,e){return Math.max(t,e.length)}),0),f=0;f<l;++f){for(s=A(t),e=0;e<a;++e)s[i[e]]=null==(u=c[e][f])?null:u;o&&(s[o]=f),n.add.push(s)}})),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)},vs.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(p.y)(vs,go).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map(p.h),o=t.as||["key","value"],a=o[0],s=o[1],u=r.length;return n.rem=this.value,e.visit(e.SOURCE,(function(t){for(var e,o=0;o<u;++o)(e=A(t))[a]=i[o],e[s]=r[o](t),n.add.push(e)})),this.value=n.source=n.add,n.modifies(o)},ms.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(p.y)(ms,go).transform=function(t,e){var n=t.expr,r=t.as,i=t.modified(),o=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)||e.modified(r)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(o,(function(e){return e[r]=n(e,t)}))},Object(p.y)(ys,go).transform=function(t,e){var n,r,i,o=this.value,a=e.fork(e.ALL),s=t.size-o.length,u=t.generator;if(s>0){for(n=[];--s>=0;)n.push(i=E(u(t))),o.push(i);a.add=a.add.length?a.materialize(a.ADD).add.concat(n):n}else r=o.slice(0,-s),a.rem=a.rem.length?a.materialize(a.REM).rem.concat(r):r,o=o.slice(-s);return a.source=this.value=o,a};var bs={value:"value",median:Ra,mean:function(t,e){var n=0,r=0;if(void 0===e){var i,o=Object(Do.a)(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;null!=a&&(a=+a)>=a&&(++n,r+=a)}}catch(f){o.e(f)}finally{o.f()}}else{var s,u=-1,c=Object(Do.a)(t);try{for(c.s();!(s=c.n()).done;){var l=s.value;null!=(l=e(l,++u,t))&&(l=+l)>=l&&(++n,r+=l)}}catch(f){c.e(f)}finally{c.f()}}if(n)return r/n},min:Fo,max:Io},ws=[];function xs(t){go.call(this,[],t)}function _s(t){Ba.call(this,t)}xs.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(p.y)(xs,go).transform=function(t,e){var n,r,i,o,a,s,u,c,l,f,h=e.fork(e.ALL),d=function(t){var e,n=t.method||bs.value;if(null!=bs[n])return n===bs.value?(e=void 0!==t.value?t.value:0,function(){return e}):bs[n];Object(p.n)("Unrecognized imputation method: "+n)}(t),g=function(t){var e=t.field;return function(t){return t?e(t):NaN}}(t),v=Object(p.h)(t.field),m=Object(p.h)(t.key),y=(t.groupby||[]).map(p.h),b=function(t,e,n,r){var i,o,a,s,u,c,l,f,h=function(t){return t(f)},d=[],p=r?r.slice():[],g={},v={};for(p.forEach((function(t,e){g[t]=e+1})),s=0,l=t.length;s<l;++s)f=t[s],c=n(f),u=g[c]||(g[c]=p.push(c)),o=(i=e?e.map(h):ws)+"",(a=v[o])||(a=v[o]=[],d.push(a),a.values=i),a[u-1]=f;return d.domain=p,d}(e.source,t.groupby,t.key,t.keyvals),w=[],x=this.value,_=b.domain.length;for(a=0,c=b.length;a<c;++a)for(i=(n=b[a]).values,r=NaN,u=0;u<_;++u)if(null==n[u]){for(o=b.domain[u],f={_impute:!0},s=0,l=i.length;s<l;++s)f[y[s]]=i[s];f[m]=o,f[v]=Number.isNaN(r)?r=d(n,g):r,w.push(E(f))}return w.length&&(h.add=h.materialize(h.ADD).add.concat(w)),x.length&&(h.rem=h.materialize(h.REM).rem.concat(x)),this.value=w,h},_s.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:So},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var Os=Object(p.y)(_s,Ba);function ks(t){go.call(this,null,t)}function Ss(t){P.call(this,null,Es,t)}function Es(t){return this.value&&!t.modified()?this.value:Object(p.I)(t.fields,t.flat)}function As(t){go.call(this,[],t),this._pending=null}function Cs(t,e,n){n.forEach(E);var r=e.fork(e.NO_FIELDS&e.NO_SOURCE);return r.rem=t.value,t.value=r.source=r.add=n,t._pending=null,r.rem.length&&r.clean(!0),r}function js(t){go.call(this,{},t)}function Ts(t){P.call(this,null,Ms,t)}function Ms(t){if(this.value&&!t.modified())return this.value;var e,n,r,i=1/0,o=-1/0,a=t.extents;for(e=0,n=a.length;e<n;++e)(r=a[e])[0]<i&&(i=r[0]),r[1]>o&&(o=r[1]);return[i,o]}function Rs(t){P.call(this,null,Ds,t)}function Ds(t){return this.value&&!t.modified()?this.value:t.values.reduce((function(t,e){return t.concat(e)}),[])}function Ls(t){go.call(this,null,t)}function Ns(t){Ba.call(this,t)}Os.transform=function(t,e){var n,r=this,i=t.modified();return r.value&&(i||e.modified(r._inputs,!0))?(n=r.value=i?r.init(t):{},e.visit(e.SOURCE,(function(t){r.add(t)}))):(n=r.value=r.value||this.init(t),e.visit(e.REM,(function(t){r.rem(t)})),e.visit(e.ADD,(function(t){r.add(t)}))),r.changes(),e.visit(e.SOURCE,(function(t){Object(p.o)(t,n[r.cellkey(t)].tuple)})),e.reflow(i).modifies(this._outputs)},Os.changes=function(){var t,e,n=this._adds,r=this._mods;for(t=0,e=this._alen;t<e;++t)this.celltuple(n[t]),n[t]=null;for(t=0,e=this._mlen;t<e;++t)this.celltuple(r[t]),r[t]=null;this._alen=this._mlen=0},ks.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(p.y)(ks,go).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=e.materialize(e.SOURCE).source,i=rs(r,t.groupby,t.field),o=(t.groupby||[]).map(p.h),a=t.bandwidth,s=t.cumulative?"cdf":"pdf",u=t.as||["value","density"],c=[],l=t.extent,f=t.steps||t.minsteps||25,h=t.steps||t.maxsteps||200;"pdf"!==s&&"cdf"!==s&&Object(p.n)("Invalid density method: "+s),"shared"===t.resolve&&(l||(l=Object(p.p)(r,t.field)),f=h=t.steps||h),i.forEach((function(e){var n=ua(e,a)[s],r=t.counts?e.length:1,i=l||Object(p.p)(e);Fa(n,i,f,h).forEach((function(t){for(var n={},i=0;i<o.length;++i)n[o[i]]=e.dims[i];n[u[0]]=t[0],n[u[1]]=t[1]*r,c.push(E(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n},Object(p.y)(Ss,P),Object(p.y)(As,go).transform=function(t,e){var n=this,r=e.dataflow;return this._pending?Cs(this,e,this._pending):function(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}(t)?e.StopPropagation:t.values?Cs(this,e,r.parse(t.values,t.format)):t.async?{async:r.request(t.url,t.format).then((function(t){return n._pending=Object(p.i)(t.data),function(t){return t.touch(n)}}))}:r.request(t.url,t.format).then((function(t){return Cs(n,e,Object(p.i)(t.data))}))},js.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(p.y)(js,go).transform=function(t,e){var n,r,i=e,o=t.as,a=t.fields,s=t.index,u=t.values,c=null==t.default?null:t.default,l=t.modified(),f=l?e.SOURCE:e.ADD,h=a.length;return u?(r=u.length,h>1&&!o&&Object(p.n)('Multi-field lookup requires explicit "as" parameter.'),o&&o.length!==h*r&&Object(p.n)('The "as" parameter has too few output field names.'),o=o||u.map(p.h),n=function(t){for(var e,n,i=0,l=0;i<h;++i)if(null==(n=s.get(a[i](t))))for(e=0;e<r;++e,++l)t[o[l]]=c;else for(e=0;e<r;++e,++l)t[o[l]]=u[e](n)}):(o||Object(p.n)("Missing output field names."),n=function(t){for(var e,n=0;n<h;++n)e=s.get(a[n](t)),t[o[n]]=null==e?c:e}),l?i=e.reflow(!0):f|=a.some((function(t){return e.modified(t.fields)}))?e.MOD:0,e.visit(f,n),i.modifies(o)},Object(p.y)(Ts,P),Object(p.y)(Rs,P),Object(p.y)(Ls,go),Ls.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)},Ns.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:So,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var Is=Object(p.y)(Ns,Ba);function Fs(t){ls.call(this,t)}function Ps(t){go.call(this,null,t)}function $s(t){go.call(this,null,t)}Is._transform=Is.transform,Is.transform=function(t,e){return this._transform(function(t,e){var n=t.field,r=t.value,i=("count"===t.op?"__count__":t.op)||"sum",o=Object(p.g)(n).concat(Object(p.g)(r)),a=function(t,e,n){var r={},i=[];return n.visit(n.SOURCE,(function(e){var n=t(e);r[n]||(r[n]=1,i.push(n))})),i.sort((function(t,e){return(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0)})),e?i.slice(0,e):i}(n,t.limit||0,e);e.changed()&&t.set("__pivot__",null,null,!0);return{key:t.key,groupby:t.groupby,ops:a.map((function(){return i})),fields:a.map((function(t){return function(t,e,n,r){return Object(p.f)((function(r){return e(r)===t?n(r):NaN}),r,t+"")}(t,n,r,o)})),as:a.map((function(t){return t+""})),modified:t.modified.bind(t)}}(t,e),e)},Object(p.y)(Fs,ls).transform=function(t,e){var n=this,r=t.subflow,i=t.field,o=function(t){return n.subflow(k(t),r,e,t)};return(t.modified("field")||i&&e.modified(Object(p.g)(i)))&&Object(p.n)("PreFacet does not support field modification."),this.initTargets(),i?(e.visit(e.MOD,(function(t){var e=o(t);i(t).forEach((function(t){return e.mod(t)}))})),e.visit(e.ADD,(function(t){var e=o(t);i(t).forEach((function(t){return e.add(E(t))}))})),e.visit(e.REM,(function(t){var e=o(t);i(t).forEach((function(t){return e.rem(t)}))}))):(e.visit(e.MOD,(function(t){return o(t).mod(t)})),e.visit(e.ADD,(function(t){return o(t).add(t)})),e.visit(e.REM,(function(t){return o(t).rem(t)}))),e.clean()&&e.runAfter((function(){return n.clean()})),e},Ps.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(p.y)(Ps,go).transform=function(t,e){var n,r,i=t.fields,o=ns(t.fields,t.as||[]),a=i?function(t,e){return function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e[r[i]]=n[i](t);return e}(t,e,i,o)}:C;return this.value?r=this.value:(e=e.addAll(),r=this.value={}),n=e.fork(e.NO_SOURCE),e.visit(e.REM,(function(t){var e=k(t);n.rem.push(r[e]),r[e]=null})),e.visit(e.ADD,(function(t){var e=a(t,E({}));r[k(t)]=e,n.add.push(e)})),e.visit(e.MOD,(function(t){n.mod.push(a(t,r[k(t)]))})),n},Object(p.y)($s,go).transform=function(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation};var zs=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o};function Bs(t){go.call(this,null,t)}Bs.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var Us=Object(p.y)(Bs,go);function Ws(t){go.call(this,null,t)}function Hs(t){go.call(this,[],t),this.count=0}function Vs(t){go.call(this,null,t)}function qs(t){go.call(this,null,t),this.modified(!0)}function Gs(t){go.call(this,null,t)}Us.transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;var i=rs(e.materialize(e.SOURCE).source,t.groupby,t.field),o=(t.groupby||[]).map(p.h),a=[],s=t.step||.01,u=t.probs||zs(s/2,1-1e-14,s),c=u.length;return i.forEach((function(t){for(var e=Wo(t,u),n=0;n<c;++n){for(var i={},s=0;s<o.length;++s)i[o[s]]=t.dims[s];i[r[0]]=u[n],i[r[1]]=e[n],a.push(E(i))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n},Object(p.y)(Ws,go).transform=function(t,e){var n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,(function(t){var e=k(t);n.rem.push(r[e]),r[e]=null})),e.visit(e.ADD,(function(t){var e=A(t);r[k(t)]=e,n.add.push(e)})),e.visit(e.MOD,(function(t){var e,i=r[k(t)];for(e in t)i[e]=t[e],n.modifies(e);n.mod.push(i)}))),n},Hs.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(p.y)(Hs,go).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,o=this.value,a=this.count,s=0,u=o.reduce((function(t,e){return t[k(e)]=1,t}),{});function c(t){var e,r;o.length<i?o.push(t):(r=~~((a+1)*Ko()))<o.length&&r>=s&&(e=o[r],u[k(e)]&&n.rem.push(e),o[r]=t),++a}if(e.rem.length&&(e.visit(e.REM,(function(t){var e=k(t);u[e]&&(u[e]=-1,n.rem.push(t)),--a})),o=o.filter((function(t){return-1!==u[k(t)]}))),(e.rem.length||r)&&o.length<i&&e.source&&(s=a=o.length,e.visit(e.SOURCE,(function(t){u[k(t)]||c(t)})),s=-1),r&&o.length>i){for(var l=0,f=o.length-i;l<f;++l)u[k(o[l])]=-1,n.rem.push(o[l]);o=o.slice(f)}return e.mod.length&&e.visit(e.MOD,(function(t){u[k(t)]&&n.mod.push(t)})),e.add.length&&e.visit(e.ADD,c),(e.add.length||s<0)&&(n.add=o.filter((function(t){return!u[k(t)]}))),this.count=a,this.value=n.source=o,n},Vs.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(p.y)(Vs,go).transform=function(t,e){if(!this.value||t.modified()){var n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=zs(t.start,t.stop,t.step||1).map((function(t){var e={};return e[r]=t,E(e)})),n.add=e.add.concat(this.value),n}},Object(p.y)(qs,go).transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation};var Ks=["unit0","unit1"];Gs.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Oe,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Ks}]};var Ys=Object(p.y)(Gs,go);function Qs(t){go.call(this,Object(p.s)(),t)}function Xs(t){go.call(this,null,t)}Ys.transform=function(t,e){var n=t.field,r=!1!==t.interval,i="utc"===t.timezone,o=this._floor(t,e),a=(i?Yn:Kn)(o.unit).offset,s=t.as||Ks,u=s[0],c=s[1],l=o.start||1/0,f=o.stop||-1/0,h=o.step,d=e.ADD;return(t.modified()||e.modified(Object(p.g)(n)))&&(d=(e=e.reflow(!0)).SOURCE,l=1/0,f=-1/0),e.visit(d,(function(t){var e,i,s=n(t);null==s?(t[u]=null,r&&(t[c]=null)):(t[u]=e=i=o(s),r&&(t[c]=i=a(e,h)),e<l&&(l=e),i>f&&(f=i))})),o.start=l,o.stop=f,e.modifies(r?s:u)},Ys._floor=function(t,e){var n="utc"===t.timezone,r=t.units?{units:t.units,step:t.step||1}:hr({extent:t.extent||Object(p.p)(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),i=r.units,o=r.step;i=Se(i);var a=this.value||{},s=(n?On:wn)(i,o);return s.unit=Object(p.U)(i),s.units=i,s.step=o,s.start=a.start,s.stop=a.stop,this.value=s},Object(p.y)(Qs,go).transform=function(t,e){var n=e.dataflow,r=t.field,i=this.value,o=!0;function a(t){i.set(r(t),t)}return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,a)):e.changed()?(e.visit(e.REM,(function(t){i.delete(r(t))})),e.visit(e.ADD,a)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()},Object(p.y)(Xs,go).transform=function(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(T(t.sort)):e.source).map(t.field))};var Zs={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){return t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){var t;return{init:function(){return t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){var t=Zs.rank(),e=t.next;return{init:t.init,next:function(t){return(e(t)-1)/(t.data.length-1)}}},cume_dist:function(){var t;return{init:function(){return t=0},next:function(e){var n=e.index,r=e.data,i=e.compare;if(t<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;t=n}return(1+t)/r.length}}},ntile:function(t,e){(e=+e)>0||Object(p.n)("ntile num must be greater than zero.");var n=Zs.cume_dist(),r=n.next;return{init:n.init,next:function(t){return Math.ceil(e*r(t))}}},lag:function(t,e){return e=+e||1,{next:function(n){var r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:function(n){var r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:function(e){return t(e.data[e.i0])}}},last_value:function(t){return{next:function(e){return t(e.data[e.i1-1])}}},nth_value:function(t,e){return(e=+e)>0||Object(p.n)("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}},prev_value:function(t){var e;return{init:function(){return e=null},next:function(n){var r=t(n.data[n.index]);return null!=r?e=r:e}}},next_value:function(t){var e,n;return{init:function(){return e=null,n=-1},next:function(r){var i=r.data;return r.index<=n?e:(n=function(t,e,n){for(var r=e.length;n<r;++n){if(null!=t(e[n]))return n}return-1}(t,i,r.index))<0?(n=i.length,e=null):e=t(i[n])}}}};var Js=Object.keys(Zs);function tu(t){var e=Object(p.i)(t.ops),n=Object(p.i)(t.fields),r=Object(p.i)(t.params),i=Object(p.i)(t.as),o=this.outputs=[],a=this.windows=[],s={},u={},c=!0,l=[],f=[];function h(t){Object(p.i)(Object(p.g)(t)).forEach((function(t){return s[t]=1}))}h(t.sort),e.forEach((function(t,e){var s=n[e],d=Object(p.h)(s),g=xo(t,d,i[e]);if(h(s),o.push(g),Object(p.v)(Zs,t))a.push(function(t,e,n,r){var i=Zs[t](e,n);return{init:i.init||p.kb,update:function(t,e){e[r]=i.next(t)}}}(t,n[e],r[e],g));else{if(null==s&&"count"!==t&&Object(p.n)("Null aggregate field specified."),"count"===t)return void l.push(g);c=!1;var v=u[d];v||((v=u[d]=[]).field=s,f.push(v)),v.push(Eo(t,g))}})),(l.length||f.length)&&(this.cell=function(t,e,n){t=t.map((function(t){return Ro(t,t.field)}));var r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new t[a](r);if(r.store)var s=r.data=new $a;return r.add=function(t){if(r.num+=1,!n){s&&s.add(t);for(var e=0;e<i;++e)o[e].add(o[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){s&&s.rem(t);for(var e=0;e<i;++e)o[e].rem(o[e].get(t),t)}},r.set=function(t){var i,a;for(s&&s.values(),i=0,a=e.length;i<a;++i)t[e[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(t)},r.init=function(){r.num=0,s&&s.reset();for(var t=0;t<i;++t)o[t].init()},r}(f,l,c)),this.inputs=Object.keys(s)}var eu=tu.prototype;function nu(t){go.call(this,{},t),this._mlen=0,this._mods=[]}eu.init=function(){this.windows.forEach((function(t){return t.init()})),this.cell&&this.cell.init()},eu.update=function(t,e){var n,r=this.cell,i=this.windows,o=t.data,a=i&&i.length;if(r){for(n=t.p0;n<t.i0;++n)r.rem(o[n]);for(n=t.p1;n<t.i1;++n)r.add(o[n]);r.set(e)}for(n=0;n<a;++n)i[n].update(t,e)},nu.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Js.concat(So)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var ru=Object(p.y)(nu,go);function iu(t,e,n,r){var i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=t.data(n),u=s.length,c=0,l=o?rr(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||Object(p.l)(-1)};for(e.init();c<u;++c)ou(f,a,c,u),o&&au(f,l),e.update(f,s[c])}function ou(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function au(t,e){var n=t.i0,r=t.i1-1,i=t.compare,o=t.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(t.i0=e.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(t.i1=e.right(o,o[r]))}ru.transform=function(t,e){var n,r,i=this,o=i.state,a=t.modified(),s=T(t.sort);this.stamp=e.stamp,o&&!a||(o=i.state=new tu(t));var u=wo(t.groupby);function c(t){return i.group(u(t))}for(a||e.modified(o.inputs)?(i.value={},e.visit(e.SOURCE,(function(t){c(t).add(t)}))):(e.visit(e.REM,(function(t){c(t).remove(t)})),e.visit(e.ADD,(function(t){c(t).add(t)}))),n=0,r=i._mlen;n<r;++n)iu(i._mods[n],o,s,t);return i._mlen=0,i._mods=[],e.reflow(a).modifies(o.outputs)},ru.group=function(t){var e=this.value[t];return e||((e=this.value[t]=Va(k)).stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e};var su="top",uu="left",cu="right",lu="end",fu="row",hu=0;function du(t){return t&&t.gradient}function pu(t,e,n){var r=t.id,i=t.gradient,o="radial"===i?"p_":"";return r||(r=t.id="gradient_"+hu++,"radial"===i?(t.x1=gu(t.x1,.5),t.y1=gu(t.y1,.5),t.r1=gu(t.r1,0),t.x2=gu(t.x2,.5),t.y2=gu(t.y2,.5),t.r2=gu(t.r2,.5),o="p_"):(t.x1=gu(t.x1,0),t.y1=gu(t.y1,0),t.x2=gu(t.x2,1),t.y2=gu(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+o+r+")"}function gu(t,e){return null!=t?t:e}var vu=function(t,e){var n,r=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}};function mu(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function yu(t){this._context=t}yu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var bu=function(){};function wu(t){this._context=t}wu.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:mu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xu(t){this._context=t}xu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:mu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _u(t,e){this._basis=new yu(t),this._beta=e}_u.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Ou=function t(e){function n(t){return 1===e?new yu(t):new _u(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function ku(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Su(t,e){this._context=t,this._k=(1-e)/6}Su.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ku(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ku(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Eu=function t(e){function n(t){return new Su(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Au(t,e){this._context=t,this._k=(1-e)/6}Au.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ku(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Cu=function t(e){function n(t){return new Au(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ju(t,e){this._context=t,this._k=(1-e)/6}ju.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ku(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Tu=function t(e){function n(t){return new ju(t,e)}return n.tension=function(e){return t(+e)},n}(0),Mu=Math.abs,Ru=Math.atan2,Du=Math.cos,Lu=Math.max,Nu=Math.min,Iu=Math.sin,Fu=Math.sqrt,Pu=Math.PI,$u=Pu/2,zu=2*Pu;function Bu(t){return t>1?0:t<-1?Pu:Math.acos(t)}function Uu(t){return t>=1?$u:t<=-1?-$u:Math.asin(t)}function Wu(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Hu(t,e){this._context=t,this._alpha=e}Hu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Wu(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Vu=function t(e){function n(t){return e?new Hu(t,e):new Su(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function qu(t,e){this._context=t,this._alpha=e}qu.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Wu(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Gu=function t(e){function n(t){return e?new qu(t,e):new ju(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ku(t,e){this._context=t,this._alpha=e}Ku.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wu(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Yu=function t(e){function n(t){return e?new Ku(t,e):new Au(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Qu(t){this._context=t}Qu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Xu=function(t){return new Qu(t)};function Zu(t){this._context=t}Zu.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Ju(t){return t<0?-1:1}function tc(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Ju(o)+Ju(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function ec(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function nc(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function rc(t){this._context=t}function ic(t){this._context=new oc(t)}function oc(t){this._context=t}function ac(t){this._context=t}function sc(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}rc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:nc(this,this._t0,ec(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,nc(this,ec(this,n=tc(this,t,e)),n);break;default:nc(this,this._t0,n=tc(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(ic.prototype=Object.create(rc.prototype)).point=function(t,e){rc.prototype.point.call(this,e,t)},oc.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},ac.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=sc(t),i=sc(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function uc(t,e){this._context=t,this._t=e}uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var cc={basis:{curve:function(t){return new yu(t)}},"basis-closed":{curve:function(t){return new wu(t)}},"basis-open":{curve:function(t){return new xu(t)}},bundle:{curve:Ou,tension:"beta",value:.85},cardinal:{curve:Eu,tension:"tension",value:0},"cardinal-open":{curve:Cu,tension:"tension",value:0},"cardinal-closed":{curve:Tu,tension:"tension",value:0},"catmull-rom":{curve:Vu,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Gu,tension:"alpha",value:.5},"catmull-rom-open":{curve:Yu,tension:"alpha",value:.5},linear:{curve:Xu},"linear-closed":{curve:function(t){return new Zu(t)}},monotone:{horizontal:function(t){return new ic(t)},vertical:function(t){return new rc(t)}},natural:{curve:function(t){return new ac(t)}},step:{curve:function(t){return new uc(t,.5)}},"step-after":{curve:function(t){return new uc(t,1)}},"step-before":{curve:function(t){return new uc(t,0)}}};function lc(t,e,n){var r=Object(p.v)(cc,t)&&cc[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var fc={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},hc=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],dc=function(t){var e,n,r,i,o,a,s,u,c,l,f,h=[];for(u=0,l=(e=t.slice().replace(hc[0],"###$1").split(hc[1]).slice(1)).length;u<l;++u){for(r=(n=e[u]).slice(1).trim().replace(hc[2],"$1###$2").split(hc[3]),i=[a=n.charAt(0)],c=0,f=r.length;c<f;++c)(o=+r[c])===o&&i.push(o);if(s=fc[a.toLowerCase()],i.length-1>s)for(c=1,f=i.length;c<f;c+=s)h.push([a].concat(i.slice(c,c+s)));else h.push(i)}return h},pc=Math.PI/180,gc=Math.PI/2,vc=2*Math.PI,mc=Math.sqrt(3)/2,yc={},bc={},wc=[].join;function xc(t){var e=wc.call(t);if(bc[e])return bc[e];var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=c*a,f=-u*s,h=u*a,d=c*s,p=Math.cos(i),g=Math.sin(i),v=Math.cos(o),m=Math.sin(o),y=.5*(o-i),b=Math.sin(.5*y),w=8/3*b*b/Math.sin(y),x=n+p-w*g,_=r+g+w*p,O=n+v,k=r+m,S=O+w*m,E=k-w*v;return bc[e]=[l*x+f*_,h*x+d*_,l*S+f*E,h*S+d*E,l*O+f*k,h*O+d*k]}var _c=["l",0,0,0,0,0,0,0];function Oc(t,e,n){var r=_c[0]=t[0];if("a"===r||"A"===r)_c[1]=e*t[1],_c[2]=n*t[2],_c[3]=t[3],_c[4]=t[4],_c[5]=t[5],_c[6]=e*t[6],_c[7]=n*t[7];else if("h"===r||"H"===r)_c[1]=e*t[1];else if("v"===r||"V"===r)_c[1]=n*t[1];else for(var i=1,o=t.length;i<o;++i)_c[i]=(i%2==1?e:n)*t[i];return _c}var kc=function(t,e,n,r,i,o){var a,s,u,c,l,f=null,h=0,d=0,p=0,g=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),t.beginPath&&t.beginPath();for(var v=0,m=e.length;v<m;++v){switch(a=e[v],1===i&&1===o||(a=Oc(a,i,o)),a[0]){case"l":h+=a[1],d+=a[2],t.lineTo(h+n,d+r);break;case"L":h=a[1],d=a[2],t.lineTo(h+n,d+r);break;case"h":h+=a[1],t.lineTo(h+n,d+r);break;case"H":h=a[1],t.lineTo(h+n,d+r);break;case"v":d+=a[1],t.lineTo(h+n,d+r);break;case"V":d=a[1],t.lineTo(h+n,d+r);break;case"m":h+=a[1],d+=a[2],t.moveTo(h+n,d+r);break;case"M":h=a[1],d=a[2],t.moveTo(h+n,d+r);break;case"c":s=h+a[5],u=d+a[6],p=h+a[3],g=d+a[4],t.bezierCurveTo(h+a[1]+n,d+a[2]+r,p+n,g+r,s+n,u+r),h=s,d=u;break;case"C":h=a[5],d=a[6],p=a[3],g=a[4],t.bezierCurveTo(a[1]+n,a[2]+r,p+n,g+r,h+n,d+r);break;case"s":s=h+a[3],u=d+a[4],p=2*h-p,g=2*d-g,t.bezierCurveTo(p+n,g+r,h+a[1]+n,d+a[2]+r,s+n,u+r),p=h+a[1],g=d+a[2],h=s,d=u;break;case"S":s=a[3],u=a[4],p=2*h-p,g=2*d-g,t.bezierCurveTo(p+n,g+r,a[1]+n,a[2]+r,s+n,u+r),h=s,d=u,p=a[1],g=a[2];break;case"q":s=h+a[3],u=d+a[4],p=h+a[1],g=d+a[2],t.quadraticCurveTo(p+n,g+r,s+n,u+r),h=s,d=u;break;case"Q":s=a[3],u=a[4],t.quadraticCurveTo(a[1]+n,a[2]+r,s+n,u+r),h=s,d=u,p=a[1],g=a[2];break;case"t":s=h+a[1],u=d+a[2],null===f[0].match(/[QqTt]/)?(p=h,g=d):"t"===f[0]?(p=2*h-c,g=2*d-l):"q"===f[0]&&(p=2*h-p,g=2*d-g),c=p,l=g,t.quadraticCurveTo(p+n,g+r,s+n,u+r),d=u,p=(h=s)+a[1],g=d+a[2];break;case"T":s=a[1],u=a[2],p=2*h-p,g=2*d-g,t.quadraticCurveTo(p+n,g+r,s+n,u+r),h=s,d=u;break;case"a":Sc(t,h+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+h+n,a[7]+d+r]),h+=a[6],d+=a[7];break;case"A":Sc(t,h+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),h=a[6],d=a[7];break;case"z":case"Z":t.closePath()}f=a}};function Sc(t,e,n,r){for(var i=function(t,e,n,r,i,o,a,s,u){var c=wc.call(arguments);if(yc[c])return yc[c];var l=a*pc,f=Math.sin(l),h=Math.cos(l),d=h*(s-t)*.5+f*(u-e)*.5,p=h*(u-e)*.5-f*(s-t)*.5,g=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);g>1&&(n*=g=Math.sqrt(g),r*=g);var v=h/n,m=f/n,y=-f/r,b=h/r,w=v*s+m*u,x=y*s+b*u,_=v*t+m*e,O=y*t+b*e,k=(_-w)*(_-w)+(O-x)*(O-x),S=1/k-.25;S<0&&(S=0);var E=Math.sqrt(S);o==i&&(E=-E);var A=.5*(w+_)-E*(O-x),C=.5*(x+O)+E*(_-w),j=Math.atan2(x-C,w-A),T=Math.atan2(O-C,_-A),M=T-j;M<0&&1===o?M+=vc:M>0&&0===o&&(M-=vc);for(var R=Math.ceil(Math.abs(M/(gc+.001))),D=[],L=0;L<R;++L){var N=j+L*M/R,I=j+(L+1)*M/R;D[L]=[A,C,N,I,n,r,f,h]}return yc[c]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),o=0;o<i.length;++o){var a=xc(i[o]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var Ec=.5773502691896257,Ac={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,vc)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,o=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-o),t.lineTo(i,-o),t.lineTo(0,-n),t.lineTo(-i,-o),t.lineTo(-r,-o),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=mc*n,i=r-n*Ec,o=n/4;t.moveTo(0,-r-i),t.lineTo(-o,r-i),t.lineTo(o,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=mc*n,i=r-n*Ec;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=mc*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=mc*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=mc*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=mc*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function Cc(t){return Object(p.v)(Ac,t)?Ac[t]:function(t){if(!Object(p.v)(jc,t)){var e=dc(t);jc[t]={draw:function(t,n){kc(t,e,0,0,Math.sqrt(n)/2)}}}return jc[t]}(t)}var jc={};var Tc=Math.PI,Mc=2*Tc,Rc=Mc-1e-6;function Dc(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Lc(){return new Dc}Dc.prototype=Lc.prototype={constructor:Dc,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*s-u*c)>1e-6&&i){var h=n-o,d=r-a,p=s*s+u*u,g=h*h+d*d,v=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((Tc-Math.acos((p+f-g)/(2*v*m)))/2),b=y/m,w=y/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*c)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>c*d)+","+(this._x1=t+w*s)+","+(this._y1=e+w*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%Mc+Mc),f>Rc?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=Tc)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Nc=Lc,Ic=.448084975506;function Fc(t){return t.x}function Pc(t){return t.y}function $c(t){return t.width}function zc(t){return t.height}function Bc(t){return"function"===typeof t?t:function(){return+t}}function Uc(t,e,n){return Math.max(e,Math.min(t,n))}var Wc=function(){var t=Fc,e=Pc,n=$c,r=zc,i=Bc(0),o=i,a=i,s=i,u=null;function c(c,l,f){var h,d=null!=l?l:+t.call(this,c),p=null!=f?f:+e.call(this,c),g=+n.call(this,c),v=+r.call(this,c),m=Math.min(g,v)/2,y=Uc(+i.call(this,c),0,m),b=Uc(+o.call(this,c),0,m),w=Uc(+a.call(this,c),0,m),x=Uc(+s.call(this,c),0,m);if(u||(u=h=Nc()),y<=0&&b<=0&&w<=0&&x<=0)u.rect(d,p,g,v);else{var _=d+g,O=p+v;u.moveTo(d+y,p),u.lineTo(_-b,p),u.bezierCurveTo(_-Ic*b,p,_,p+Ic*b,_,p+b),u.lineTo(_,O-x),u.bezierCurveTo(_,O-Ic*x,_-Ic*x,O,_-x,O),u.lineTo(d+w,O),u.bezierCurveTo(d+Ic*w,O,d,O-Ic*w,d,O-w),u.lineTo(d,p+y),u.bezierCurveTo(d,p+Ic*y,d+Ic*y,p,d+y,p),u.closePath()}if(h)return u=null,h+""||null}return c.x=function(e){return arguments.length?(t=Bc(e),c):t},c.y=function(t){return arguments.length?(e=Bc(t),c):e},c.width=function(t){return arguments.length?(n=Bc(t),c):n},c.height=function(t){return arguments.length?(r=Bc(t),c):r},c.cornerRadius=function(t,e,n,r){return arguments.length?(i=Bc(t),o=null!=e?Bc(e):i,s=null!=n?Bc(n):i,a=null!=r?Bc(r):o,c):i},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c},Hc=function(){var t,e,n,r,i,o,a,s,u=null;function c(t,e,n){var r=n/2;if(i){var c=a-e,l=t-o;if(c||l){var f=Math.sqrt(c*c+l*l),h=(c/=f)*s,d=(l/=f)*s,p=Math.atan2(l,c);u.moveTo(o-h,a-d),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Math.PI,p),u.lineTo(o+h,a+d),u.arc(o,a,s,p,p+Math.PI)}else u.arc(t,e,r,0,vc);u.closePath()}else i=1;o=t,a=e,s=r}function l(o){var a,s,l,f=o.length,h=!1;for(null==u&&(u=l=Nc()),a=0;a<=f;++a)!(a<f&&r(s=o[a],a,o))===h&&(h=!h)&&(i=0),h&&c(+t(s,a,o),+e(s,a,o),+n(s,a,o));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l},Vc=function(t){return function(){return t}};function qc(t){return t.innerRadius}function Gc(t){return t.outerRadius}function Kc(t){return t.startAngle}function Yc(t){return t.endAngle}function Qc(t){return t&&t.padAngle}function Xc(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,f=s-o,h=f*u-l*c;if(!(h*h<1e-12))return[t+(h=(l*(e-o)-f*(t-i))/h)*u,e+h*c]}function Zc(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/Fu(s*s+u*u),l=c*u,f=-c*s,h=t+l,d=e+f,p=n+l,g=r+f,v=(h+p)/2,m=(d+g)/2,y=p-h,b=g-d,w=y*y+b*b,x=i-o,_=h*g-p*d,O=(b<0?-1:1)*Fu(Lu(0,x*x*w-_*_)),k=(_*b-y*O)/w,S=(-_*y-b*O)/w,E=(_*b+y*O)/w,A=(-_*y+b*O)/w,C=k-v,j=S-m,T=E-v,M=A-m;return C*C+j*j>T*T+M*M&&(k=E,S=A),{cx:k,cy:S,x01:-l,y01:-f,x11:k*(i/x-1),y11:S*(i/x-1)}}function Jc(t){return t[0]}function tl(t){return t[1]}var el=function(){var t=Jc,e=tl,n=Vc(!0),r=null,i=Xu,o=null;function a(a){var s,u,c,l=a.length,f=!1;for(null==r&&(o=i(c=Nc())),s=0;s<=l;++s)!(s<l&&n(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(u,s,a),+e(u,s,a));if(c)return o=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"===typeof e?e:Vc(+e),a):t},a.y=function(t){return arguments.length?(e="function"===typeof t?t:Vc(+t),a):e},a.defined=function(t){return arguments.length?(n="function"===typeof t?t:Vc(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},nl=function(){var t=Jc,e=null,n=Vc(0),r=tl,i=Vc(!0),o=null,a=Xu,s=null;function u(u){var c,l,f,h,d,p=u.length,g=!1,v=new Array(p),m=new Array(p);for(null==o&&(s=a(d=Nc())),c=0;c<=p;++c){if(!(c<p&&i(h=u[c],c,u))===g)if(g=!g)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=l;--f)s.point(v[f],m[f]);s.lineEnd(),s.areaEnd()}g&&(v[c]=+t(h,c,u),m[c]=+n(h,c,u),s.point(e?+e(h,c,u):v[c],r?+r(h,c,u):m[c]))}if(d)return s=null,d+""||null}function c(){return el().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(t="function"===typeof n?n:Vc(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"===typeof e?e:Vc(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"===typeof t?t:Vc(+t),u):e},u.y=function(t){return arguments.length?(n="function"===typeof t?t:Vc(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"===typeof t?t:Vc(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Vc(+t),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(n)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"===typeof t?t:Vc(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u},rl={draw:function(t,e){var n=Math.sqrt(e/Pu);t.moveTo(n,0),t.arc(0,0,n,0,zu)}},il=(Math.sqrt(1/3),Math.sin(Pu/10)/Math.sin(7*Pu/10));Math.sin(zu/10),Math.cos(zu/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);function ol(t,e){return null!=t?t:e}var al=function(t){return t.x||0},sl=function(t){return t.y||0},ul=function(t){return!(!1===t.defined)},cl=function(){var t=qc,e=Gc,n=Vc(0),r=null,i=Kc,o=Yc,a=Qc,s=null;function u(){var u,c,l=+t.apply(this,arguments),f=+e.apply(this,arguments),h=i.apply(this,arguments)-$u,d=o.apply(this,arguments)-$u,p=Mu(d-h),g=d>h;if(s||(s=u=Nc()),f<l&&(c=f,f=l,l=c),f>1e-12)if(p>zu-1e-12)s.moveTo(f*Du(h),f*Iu(h)),s.arc(0,0,f,h,d,!g),l>1e-12&&(s.moveTo(l*Du(d),l*Iu(d)),s.arc(0,0,l,d,h,g));else{var v,m,y=h,b=d,w=h,x=d,_=p,O=p,k=a.apply(this,arguments)/2,S=k>1e-12&&(r?+r.apply(this,arguments):Fu(l*l+f*f)),E=Nu(Mu(f-l)/2,+n.apply(this,arguments)),A=E,C=E;if(S>1e-12){var j=Uu(S/l*Iu(k)),T=Uu(S/f*Iu(k));(_-=2*j)>1e-12?(w+=j*=g?1:-1,x-=j):(_=0,w=x=(h+d)/2),(O-=2*T)>1e-12?(y+=T*=g?1:-1,b-=T):(O=0,y=b=(h+d)/2)}var M=f*Du(y),R=f*Iu(y),D=l*Du(x),L=l*Iu(x);if(E>1e-12){var N,I=f*Du(b),F=f*Iu(b),P=l*Du(w),$=l*Iu(w);if(p<Pu&&(N=Xc(M,R,P,$,I,F,D,L))){var z=M-N[0],B=R-N[1],U=I-N[0],W=F-N[1],H=1/Iu(Bu((z*U+B*W)/(Fu(z*z+B*B)*Fu(U*U+W*W)))/2),V=Fu(N[0]*N[0]+N[1]*N[1]);A=Nu(E,(l-V)/(H-1)),C=Nu(E,(f-V)/(H+1))}}O>1e-12?C>1e-12?(v=Zc(P,$,M,R,f,C,g),m=Zc(I,F,D,L,f,C,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),C<E?s.arc(v.cx,v.cy,C,Ru(v.y01,v.x01),Ru(m.y01,m.x01),!g):(s.arc(v.cx,v.cy,C,Ru(v.y01,v.x01),Ru(v.y11,v.x11),!g),s.arc(0,0,f,Ru(v.cy+v.y11,v.cx+v.x11),Ru(m.cy+m.y11,m.cx+m.x11),!g),s.arc(m.cx,m.cy,C,Ru(m.y11,m.x11),Ru(m.y01,m.x01),!g))):(s.moveTo(M,R),s.arc(0,0,f,y,b,!g)):s.moveTo(M,R),l>1e-12&&_>1e-12?A>1e-12?(v=Zc(D,L,I,F,l,-A,g),m=Zc(M,R,P,$,l,-A,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),A<E?s.arc(v.cx,v.cy,A,Ru(v.y01,v.x01),Ru(m.y01,m.x01),!g):(s.arc(v.cx,v.cy,A,Ru(v.y01,v.x01),Ru(v.y11,v.x11),!g),s.arc(0,0,l,Ru(v.cy+v.y11,v.cx+v.x11),Ru(m.cy+m.y11,m.cx+m.x11),g),s.arc(m.cx,m.cy,A,Ru(m.y11,m.x11),Ru(m.y01,m.x01),!g))):s.arc(0,0,l,x,w,g):s.lineTo(D,L)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Pu/2;return[Du(r)*n,Iu(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:Vc(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:Vc(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"===typeof t?t:Vc(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Vc(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:Vc(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"===typeof t?t:Vc(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"===typeof t?t:Vc(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u}().startAngle((function(t){return t.startAngle||0})).endAngle((function(t){return t.endAngle||0})).padAngle((function(t){return t.padAngle||0})).innerRadius((function(t){return t.innerRadius||0})).outerRadius((function(t){return t.outerRadius||0})).cornerRadius((function(t){return t.cornerRadius||0})),ll=nl().x(al).y1(sl).y0((function(t){return(t.y||0)+(t.height||0)})).defined(ul),fl=nl().y(sl).x1(al).x0((function(t){return(t.x||0)+(t.width||0)})).defined(ul),hl=el().x(al).y(sl).defined(ul),dl=Wc().x(al).y(sl).width((function(t){return t.width||0})).height((function(t){return t.height||0})).cornerRadius((function(t){return ol(t.cornerRadiusTopLeft,t.cornerRadius)||0}),(function(t){return ol(t.cornerRadiusTopRight,t.cornerRadius)||0}),(function(t){return ol(t.cornerRadiusBottomRight,t.cornerRadius)||0}),(function(t){return ol(t.cornerRadiusBottomLeft,t.cornerRadius)||0})),pl=function(){var t=Vc(rl),e=Vc(64),n=null;function r(){var r;if(n||(n=r=Nc()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"===typeof e?e:Vc(e),r):t},r.size=function(t){return arguments.length?(e="function"===typeof t?t:Vc(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}().type((function(t){return Cc(t.shape||"circle")})).size((function(t){return ol(t.size,64)})),gl=Hc().x(al).y(sl).defined(ul).size((function(t){return t.size||1}));function vl(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function ml(t,e,n,r){return dl.context(t)(e,n,r)}var yl=1;function bl(){yl=1}var wl=function(t,e,n){var r=e.clip,i=t._defs,o=e.clip_id||(e.clip_id="clip"+yl++),a=i.clipping[o]||(i.clipping[o]={id:o});return Object(p.D)(r)?a.path=r(null):vl(n)?a.path=ml(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"};function xl(t){this.clear(),t&&this.union(t)}var _l=xl.prototype;function Ol(t){this.mark=t,this.bounds=this.bounds||new xl}function kl(t){Ol.call(this,t),this.items=this.items||[]}function Sl(t,e){if("undefined"!==typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}function El(){return"undefined"!==typeof Image?Image:null}function Al(t){this._pending=0,this._loader=t||Hi()}_l.clone=function(){return new xl(this)},_l.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},_l.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},_l.equals=function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},_l.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},_l.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},_l.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},_l.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},_l.scale=function(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},_l.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},_l.rotate=function(t,e,n){var r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},_l.rotatedPoints=function(t,e,n){var r=this.x1,i=this.y1,o=this.x2,a=this.y2,s=Math.cos(t),u=Math.sin(t),c=e-e*s+n*u,l=n-e*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*a+c,u*r+s*a+l,s*o-u*i+c,u*o+s*i+l,s*o-u*a+c,u*o+s*a+l]},_l.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},_l.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},_l.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},_l.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},_l.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},_l.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},_l.width=function(){return this.x2-this.x1},_l.height=function(){return this.y2-this.y1},Object(p.y)(kl,Ol);var Cl=Al.prototype;function jl(t){t._pending+=1}function Tl(t){t._pending-=1}Cl.pending=function(){return this._pending},Cl.sanitizeURL=function(t){var e=this;return jl(e),e._loader.sanitize(t,{context:"href"}).then((function(t){return Tl(e),t})).catch((function(){return Tl(e),null}))},Cl.loadImage=function(t){var e=this,n=El();return jl(e),e._loader.sanitize(t,{context:"image"}).then((function(t){var r=t.href;if(!r||!n)throw{url:r};var i=new n,o=Object(p.v)(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=o&&(i.crossOrigin=o),i.onload=function(){return Tl(e)},i.onerror=function(){return Tl(e)},i.src=r,i})).catch((function(t){return Tl(e),{complete:!1,width:0,height:0,src:t&&t.url||""}}))},Cl.ready=function(){var t=this;return new Promise((function(e){!function n(r){t.pending()?setTimeout((function(){n(!0)}),10):e(r)}(!1)}))};var Ml=function(t,e,n){if(e.stroke&&0!==e.opacity&&0!==e.strokeOpacity){var r=null!=e.strokeWidth?+e.strokeWidth:1;t.expand(r+(n?function(t,e){return t.strokeJoin&&"miter"!==t.strokeJoin?0:e}(e,r):0))}return t};var Rl,Dl,Ll,Nl=vc-1e-8;function Il(t){return Rl=t,Il}function Fl(){}function Pl(t,e){Rl.add(t,e)}function $l(t,e){Pl(Dl=t,Ll=e)}function zl(t){Pl(t,Rl.y1)}function Bl(t){Pl(Rl.x1,t)}function Ul(t,e,n,r){var i=(t-e)/(t+n-2*e);0<i&&i<1&&r(t+(e-t)*i)}function Wl(t,e,n,r,i){var o,a=r-t+3*e-3*n,s=t+n-2*e,u=t-e,c=0,l=0;Math.abs(a)>1e-14?(o=s*s+u*a)>=0&&(c=(-s+(o=Math.sqrt(o)))/a,l=(-s-o)/a):c=.5*u/s,0<c&&c<1&&i(Hl(c,t,e,n,r)),0<l&&l<1&&i(Hl(l,t,e,n,r))}function Hl(t,e,n,r,i){var o=1-t,a=o*o,s=t*t;return a*o*e+3*a*t*n+3*o*s*r+s*t*i}Il.beginPath=Fl,Il.closePath=Fl,Il.moveTo=$l,Il.lineTo=$l,Il.rect=function(t,e,n,r){Pl(t+n,e+r),$l(t,e)},Il.quadraticCurveTo=function(t,e,n,r){Ul(Dl,t,n,zl),Ul(Ll,e,r,Bl),$l(n,r)},Il.bezierCurveTo=function(t,e,n,r,i,o){Wl(Dl,t,n,i,zl),Wl(Ll,e,r,o,Bl),$l(i,o)},Il.arc=function(t,e,n,r,i,o){if(Dl=n*Math.cos(i)+t,Ll=n*Math.sin(i)+e,Math.abs(i-r)>Nl)Pl(t-n,e-n),Pl(t+n,e+n);else{var a,s,u=function(r){return Pl(n*Math.cos(r)+t,n*Math.sin(r)+e)};if(u(r),u(i),i!==r)if((r%=vc)<0&&(r+=vc),(i%=vc)<0&&(i+=vc),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=vc,a=r-r%gc,s=0;s<4&&a>i;++s,a-=gc)u(a);else for(a=r-r%gc+gc,s=0;s<4&&a<i;++s,a+=gc)u(a)}};var Vl=(Vl=Sl(1,1))?Vl.getContext("2d"):null,ql=new xl;function Gl(t){return function(e,n){if(!Vl)return!0;t(Vl,e),ql.clear().union(e.bounds).intersect(n).round();for(var r=ql.x1,i=ql.y1,o=ql.x2,a=ql.y2,s=i;s<=a;++s)for(var u=r;u<=o;++u)if(Vl.isPointInPath(u,s))return!0;return!1}}function Kl(t,e){return e.contains(t.x||0,t.y||0)}function Yl(t,e){var n=t.x||0,r=t.y||0,i=t.width||0,o=t.height||0;return e.intersects(ql.set(n,r,n+i,r+o))}function Ql(t,e){var n=t.x||0,r=t.y||0;return Xl(e,n,r,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r)}function Xl(t,e,n,r,i){var o,a,s,u,c=t.x1,l=t.y1,f=t.x2,h=t.y2,d=r-e,p=i-n,g=0,v=1;for(u=0;u<4;++u){if(0===u&&(o=-d,a=-(c-e)),1===u&&(o=d,a=f-e),2===u&&(o=-p,a=-(l-n)),3===u&&(o=p,a=h-n),Math.abs(o)<1e-10&&a<0)return!1;if(s=a/o,o<0){if(s>v)return!1;s>g&&(g=s)}else if(o>0){if(s<g)return!1;s<v&&(v=s)}}return!0}var Zl=function(t,e){t.globalCompositeOperation=e.blend||"source-over"},Jl=function(t,e){return null==t?e:t};function tf(t,e){for(var n=e.length,r=0;r<n;++r)t.addColorStop(e[r].offset,e[r].color);return t}var ef=function(t,e,n){return du(n)?function(t,e,n){var r,i=n.width(),o=n.height();if("radial"===e.gradient)r=t.createRadialGradient(n.x1+Jl(e.x1,.5)*i,n.y1+Jl(e.y1,.5)*o,Math.max(i,o)*Jl(e.r1,0),n.x1+Jl(e.x2,.5)*i,n.y1+Jl(e.y2,.5)*o,Math.max(i,o)*Jl(e.r2,.5));else{var a=Jl(e.x1,0),s=Jl(e.y1,0),u=Jl(e.x2,1),c=Jl(e.y2,0);if(a!==u&&s!==c&&i!==o){var l=Sl(Math.ceil(i),Math.ceil(o)),f=l.getContext("2d");return f.scale(i,o),f.fillStyle=tf(f.createLinearGradient(a,s,u,c),e.stops),f.fillRect(0,0,i,o),t.createPattern(l,"no-repeat")}r=t.createLinearGradient(n.x1+a*i,n.y1+s*o,n.x1+u*i,n.y1+c*o)}return tf(r,e.stops)}(t,n,e.bounds):n},nf=function(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=ef(t,e,e.fill),!0)},rf=[],of=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&((n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=ef(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||rf),t.lineDashOffset=e.strokeDashOffset||0),!0))};function af(t,e){return t.zindex-e.zindex||t.index-e.index}function sf(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,o=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&o.push(e);return t.zdirty=!1,t.zitems=o.sort(af)}function uf(t,e){var n,r,i=t.items;if(i&&i.length){var o=sf(t);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=o}for(n=0,r=i.length;n<r;++n)e(i[n])}}function cf(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var o=sf(t);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===o)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function lf(t){return function(e,n,r){uf(n,(function(n){r&&!r.intersects(n.bounds)||ff(t,e,n,n)}))}}function ff(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(Zl(e,n),n.fill&&nf(e,n,i)&&e.fill(),n.stroke&&of(e,n,i)&&e.stroke()))}function hf(t){return t=t||p.gb,function(e,n,r,i,o,a){return r*=e.pixelRatio,i*=e.pixelRatio,cf(n,(function(n){var s=n.bounds;if((!s||s.contains(o,a))&&s)return t(e,n,r,i,o,a)?n:void 0}))}}function df(t,e){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(a=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o))}}function pf(t){return hf(df(t))}function gf(t,e){return"translate("+t+","+e+")"}function vf(t){return"rotate("+t+")"}function mf(t){return gf(t.x||0,t.y||0)}function yf(t){return gf(t.x||0,t.y||0)+(t.angle?" "+vf(t.angle):"")+(t.scaleX||t.scaleY?" "+(e=t.scaleX||1,n=t.scaleY||1,"scale("+e+","+n+")"):"");var e,n}var bf=function(t,e,n){function r(t,n){var r=n.x||0,i=n.y||0,o=n.angle||0;t.translate(r,i),o&&t.rotate(o*=pc),t.beginPath(),e(t,n),o&&t.rotate(-o),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",yf(n)),t("d",e(null,n))},bound:function(t,n){var r=n.x||0,i=n.y||0;return e(Il(t),n),Ml(t,n).translate(r,i),n.angle&&t.rotate(n.angle*pc,r,i),t},draw:lf(r),pick:pf(r),isect:n||Gl(r)}},wf=bf("arc",(function(t,e){return cl.context(t)(e)}));var xf=function(t,e,n){function r(t,n){t.beginPath(),e(t,n)}var i,o=df(r);return{type:t,tag:"path",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(Il(t),r),Ml(t,r[0]))},draw:(i=r,function(t,e,n){!e.items.length||n&&!n.intersects(e.bounds)||ff(i,t,e.items[0],e.items)}),pick:function(t,e,n,r,i,a){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,a)?null:(n*=t.pixelRatio,r*=t.pixelRatio,o(t,s,n,r)?s[0]:null)},isect:Kl,tip:n}},_f=xf("area",(function(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?fl:ll).curve(lc(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i="horizontal"===t[0].orient?e[1]:e[0],o="horizontal"===t[0].orient?"y":"x",a=t.length,s=1/0;--a>=0;)!1!==t[a].defined&&(r=Math.abs(t[a][o]-i))<s&&(s=r,n=t[a]);return n}));function Of(t,e){t.beginPath(),vl(e)?ml(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function kf(t){var e=Jl(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function Sf(t,e){var n=kf(e);t("d",ml(null,e,n,n))}function Ef(t,e,n,r){var i=kf(e);t.beginPath(),ml(t,e,(n||0)+i,(r||0)+i)}var Af=df(Ef),Cf=df(Ef,!1);var jf={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",mf(e))},bound:function(t,e){if(!e.clip&&e.items)for(var n=e.items,r=n.length,i=0;i<r;++i)t.union(n[i].bounds);return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),Ml(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){var r=this;uf(e,(function(e){var i=e.x||0,o=e.y||0,a=e.strokeForeground,s=null==e.opacity?1:e.opacity;(e.stroke||e.fill)&&s&&(Ef(t,e,i,o),Zl(t,e),e.fill&&nf(t,e,s)&&t.fill(),e.stroke&&!a&&of(t,e,s)&&t.stroke()),t.save(),t.translate(i,o),e.clip&&Of(t,e),n&&n.translate(-i,-o),uf(e,(function(e){r.draw(t,e,n)})),n&&n.translate(i,o),t.restore(),a&&e.stroke&&s&&(Ef(t,e,i,o),Zl(t,e),of(t,e,s)&&t.stroke())}))},pick:function(t,e,n,r,i,o){var a=this;if(e.bounds&&!e.bounds.contains(i,o)||!e.items)return null;var s=n*t.pixelRatio,u=r*t.pixelRatio;return cf(e,(function(c){var l,f,h,d,p,g,v,m,y;if((!(m=c.bounds)||m.contains(i,o))&&(d=c.x||0,p=c.y||0,g=d+(c.width||0),v=p+(c.height||0),!(y=c.clip)||!(i<d||i>g||o<p||o>v)))return t.save(),t.translate(d,p),d=i-d,p=o-p,y&&vl(c)&&!Af(t,c,s,u)?(t.restore(),null):(f=c.strokeForeground,(h=!1!==e.interactive)&&f&&c.stroke&&Cf(t,c,s,u)?(t.restore(),c):(!(l=cf(c,(function(t){return function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,d,p)?a.pick(t,n,r,d,p):null})))&&h&&(c.fill||!f&&c.stroke)&&Af(t,c,s,u)&&(l=c),t.restore(),l||null))}))},isect:Yl,content:function(t,e,n){t("clip-path",e.clip?wl(n,e,e):null)},background:function(t,e){t("class","background"),t("aria-hidden",!0),Sf(t,e)},foreground:function(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?Sf(t,e):t("d","")}},Tf={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function Mf(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then((function(e){t.image=e,t.image.url=t.url}))),n}function Rf(t,e){return null!=t.width?t.width:e&&e.width?!1!==t.aspect&&t.height?t.height*e.width/e.height:e.width:0}function Df(t,e){return null!=t.height?t.height:e&&e.height?!1!==t.aspect&&t.width?t.width*e.height/e.width:e.height:0}function Lf(t,e){return"center"===t?e/2:"right"===t?e:0}function Nf(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var If={type:"image",tag:"image",nested:!1,attr:function(t,e,n){var r=Mf(e,n),i=Rf(e,r),o=Df(e,r),a=(e.x||0)-Lf(e.align,i),s=(e.y||0)-Nf(e.baseline,o);t("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",Tf["xmlns:xlink"],"xlink:href"),t("transform",gf(a,s)),t("width",i),t("height",o),t("preserveAspectRatio",!1===e.aspect?"none":"xMidYMid")},bound:function(t,e){var n=e.image,r=Rf(e,n),i=Df(e,n),o=(e.x||0)-Lf(e.align,r),a=(e.y||0)-Nf(e.baseline,i);return t.set(o,a,o+r,a+i)},draw:function(t,e,n){var r=this;uf(e,(function(e){if(!n||n.intersects(e.bounds)){var i,o,a,s,u=Mf(e,r),c=Rf(e,u),l=Df(e,u),f=(e.x||0)-Lf(e.align,c),h=(e.y||0)-Nf(e.baseline,l);!1!==e.aspect&&(o=u.width/u.height,a=e.width/e.height,o===o&&a===a&&o!==a&&(a<o?(h+=(l-(s=c/o))/2,l=s):(f+=(c-(s=l*o))/2,c=s))),(u.complete||u.toDataURL)&&(Zl(t,e),t.globalAlpha=null!=(i=e.opacity)?i:1,t.imageSmoothingEnabled=!1!==e.smooth,t.drawImage(u,f,h,c,l))}}))},pick:hf(),isect:p.gb,get:Mf,xOffset:Lf,yOffset:Nf},Ff=xf("line",(function(t,e){var n=e[0],r=n.interpolate||"linear";return hl.curve(lc(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i=Math.pow(t[0].strokeWidth||1,2),o=t.length;--o>=0;)if(!1!==t[o].defined&&(n=t[o].x-e[0])*n+(r=t[o].y-e[1])*r<i)return t[o];return null}));function Pf(t,e){var n=e.path;if(null==n)return!0;var r=e.x||0,i=e.y||0,o=e.scaleX||1,a=e.scaleY||1,s=(e.angle||0)*pc,u=e.pathCache;u&&u.path===n||((e.pathCache=u=dc(n)).path=n),s&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(s),kc(t,u,0,0,o,a),t.rotate(-s),t.translate(-r,-i)):kc(t,u,r,i,o,a)}var $f={type:"path",tag:"path",nested:!1,attr:function(t,e){var n=e.scaleX||1,r=e.scaleY||1;1===n&&1===r||t("vector-effect","non-scaling-stroke"),t("transform",yf(e)),t("d",e.path)},bound:function(t,e){return Pf(Il(t),e)?t.set(0,0,0,0):Ml(t,e,!0),e.angle&&t.rotate(e.angle*pc,e.x||0,e.y||0),t},draw:lf(Pf),pick:pf(Pf),isect:Gl(Pf)};function zf(t,e){t.beginPath(),ml(t,e)}var Bf={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",ml(null,e))},bound:function(t,e){var n,r;return Ml(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:lf(zf),pick:pf(zf),isect:Yl};function Uf(t,e,n){var r,i,o,a;return!(!e.stroke||!of(t,e,n))&&(r=e.x||0,i=e.y||0,o=null!=e.x2?e.x2:r,a=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(o,a),!0)}var Wf={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",mf(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return Ml(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){uf(e,(function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&Uf(t,e,r)&&(Zl(t,e),t.stroke())}}))},pick:hf((function(t,e,n,r){return!!t.isPointInStroke&&(Uf(t,e,1)&&t.isPointInStroke(n,r))})),isect:Ql},Hf=bf("shape",(function(t,e){return(e.mark.shape||e.shape).context(t)(e)})),Vf=bf("symbol",(function(t,e){return pl.context(t)(e)}),Kl),qf=Object(p.L)(),Gf={height:Jf,measureWidth:Xf,estimateWidth:Yf,width:Yf,canvas:Kf};function Kf(t){Gf.width=t&&Vl?Xf:Yf}function Yf(t,e){return Qf(rh(t,e),Jf(t))}function Qf(t,e){return~~(.8*t.length*e)}function Xf(t,e){return Jf(t)<=0||!(e=rh(t,e))?0:Zf(e,oh(t))}function Zf(t,e){var n="(".concat(e,") ").concat(t),r=qf.get(n);return void 0===r&&(Vl.font=e,r=Vl.measureText(t).width,qf.set(n,r)),r}function Jf(t){return null!=t.fontSize?+t.fontSize||0:11}function th(t){return null!=t.lineHeight?t.lineHeight:Jf(t)+2}function eh(t){return e=t.lineBreak&&t.text&&!Object(p.A)(t.text)?t.text.split(t.lineBreak):t.text,Object(p.A)(e)?e.length>1?e:e[0]:e;var e}function nh(t){var e=eh(t);return(Object(p.A)(e)?e.length-1:0)*th(t)}function rh(t,e){var n=null==e?"":(e+"").trim();return t.limit>0&&n.length?function(t,e){var n=+t.limit,r=function(t){if(Gf.width===Xf){var e=oh(t);return function(t){return Zf(t,e)}}var n=Jf(t);return function(t){return Qf(t,n)}}(t);if(r(e)<n)return e;var i,o=t.ellipsis||"\u2026",a="rtl"===t.dir,s=0,u=e.length;if(n-=r(o),a){for(;s<u;)i=s+u>>>1,r(e.slice(i))>n?s=i+1:u=i;return o+e.slice(s)}for(;s<u;)i=1+(s+u>>>1),r(e.slice(0,i))<n?s=i:u=i-1;return e.slice(0,s)+o}(t,n):n}function ih(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function oh(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Jf(t)+"px "+ih(t,e)}function ah(t){var e=t.baseline,n=Jf(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:"line-top"===e?.29*n+.5*th(t):"line-bottom"===e?.29*n-.5*th(t):0)}Kf(!0);var sh={left:"start",center:"middle",right:"end"},uh=new xl;function ch(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-gc,n+=i*Math.cos(e),r+=i*Math.sin(e)),uh.x1=n,uh.y1=r,uh}function lh(t,e,n){var r,i=Gf.height(e),o=e.align,a=ch(e),s=a.x1,u=a.y1,c=e.dx||0,l=(e.dy||0)+ah(e)-Math.round(.8*i),f=eh(e);if(Object(p.A)(f)?(i+=th(e)*(f.length-1),r=f.reduce((function(t,n){return Math.max(t,Gf.width(e,n))}),0)):r=Gf.width(e,f),"center"===o?c-=r/2:"right"===o&&(c-=r),t.set(c+=s,l+=u,c+r,l+i),e.angle&&!n)t.rotate(e.angle*pc,s,u);else if(2===n)return t.rotatedPoints(e.angle*pc,s,u);return t}var fh={arc:wf,area:_f,group:jf,image:If,line:Ff,path:$f,rect:Bf,rule:Wf,shape:Hf,symbol:Vf,text:{type:"text",tag:"text",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+ah(e),o=ch(e),a=o.x1,s=o.y1,u=e.angle||0;t("text-anchor",sh[e.align]||"start"),u?(n=gf(a,s)+" "+vf(u),(r||i)&&(n+=" "+gf(r,i))):n=gf(a+r,s+i),t("transform",n)},bound:lh,draw:function(t,e,n){uf(e,(function(e){var r,i,o,a,s,u,c,l=null==e.opacity?1:e.opacity;if(!(n&&!n.intersects(e.bounds)||0===l||e.fontSize<=0||null==e.text||0===e.text.length)){if(t.font=oh(e),t.textAlign=e.align||"left",i=(r=ch(e)).x1,o=r.y1,e.angle&&(t.save(),t.translate(i,o),t.rotate(e.angle*pc),i=o=0),i+=e.dx||0,o+=(e.dy||0)+ah(e),u=eh(e),Zl(t,e),Object(p.A)(u))for(s=th(e),a=0;a<u.length;++a)c=rh(e,u[a]),e.fill&&nf(t,e,l)&&t.fillText(c,i,o),e.stroke&&of(t,e,l)&&t.strokeText(c,i,o),o+=s;else c=rh(e,u),e.fill&&nf(t,e,l)&&t.fillText(c,i,o),e.stroke&&of(t,e,l)&&t.strokeText(c,i,o);e.angle&&t.restore()}}))},pick:hf((function(t,e,n,r,i,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var a=ch(e),s=a.x1,u=a.y1,c=lh(uh,e,1),l=-e.angle*pc,f=Math.cos(l),h=Math.sin(l),d=f*i-h*o+(s-f*s+h*u),p=h*i+f*o+(u-h*s-f*u);return c.contains(d,p)})),isect:function(t,e){var n=lh(uh,t,2);return Xl(e,n[0],n[1],n[2],n[3])||Xl(e,n[0],n[1],n[4],n[5])||Xl(e,n[4],n[5],n[6],n[7])||Xl(e,n[2],n[3],n[6],n[7])}},trail:xf("trail",(function(t,e){return gl.context(t)(e)}),(function(t,e){for(var n,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(n=t[i].x-e[0])*n+(r=t[i].y-e[1])*r<(n=t[i].size||1)*n)return t[i];return null}))},hh=function(t,e,n){var r=fh[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new xl),t,n)},dh={mark:null},ph=function(t,e,n){var r,i,o,a,s=fh[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?o=c[0]:(dh.mark=t,o=dh),a=hh(o,u,n),e=e&&e.union(a)||a;if(e=e||t.bounds&&t.bounds.clear()||new xl,l)for(r=0,i=c.length;r<i;++r)e.union(hh(c[r],u,n));return t.bounds=e},gh=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function vh(t,e){return JSON.stringify(t,gh,e)}function mh(t){return function t(e){var n,r,i,o=e.marktype,a=e.items;if(a)for(r=0,i=a.length;r<i;++r)n=o?"mark":"group",a[r][n]=e,a[r].zindex&&(a[r][n].zdirty=!0),"group"===(o||n)&&t(a[r]);o&&ph(e);return e}("string"===typeof t?JSON.parse(t):t)}function yh(t){arguments.length?this.root=mh(t):(this.root=wh({marktype:"group",name:"root",role:"frame"}),this.root.items=[new kl(this.root)])}var bh=yh.prototype;function wh(t,e){var n={bounds:new xl,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function xh(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function _h(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function Oh(t,e,n,r){var i,o=t.childNodes[e];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=xh(t.ownerDocument,n,r),t.insertBefore(o,i)),o}function kh(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function Sh(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}bh.toJSON=function(t){return vh(this.root,t||0)},bh.mark=function(t,e,n){var r=wh(t,e=e||this.root.items[0]);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var Eh=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]};function Ah(t,e){this._active=null,this._handlers={},this._loader=t||Hi(),this._tooltip=e||Ch}function Ch(t,e,n,r){t.element().setAttribute("title",r||"")}var jh=Ah.prototype;function Th(t){this._el=null,this._bgcolor=null,this._loader=new Al(t)}jh.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},jh.element=function(){return this._el},jh.canvas=function(){return this._el&&this._el.firstChild},jh.origin=function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},jh.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},jh.on=function(){},jh.off=function(){},jh._handlerIndex=function(t,e,n){for(var r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},jh.handlers=function(t){var e=this._handlers,n=[];if(t)n.push.apply(n,e[this.eventName(t)]);else for(var r in e)n.push.apply(n,e[r]);return n},jh.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},jh.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then((function(e){var n=new MouseEvent(t.type,t),r=xh(null,"a");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)})).catch((function(){}))},jh.handleTooltip=function(t,e,n){if(e&&null!=e.tooltip){e=function(t,e,n,r){var i,o,a=t&&t.mark;if(a&&(i=fh[a.marktype]).tip){for((o=Eh(e,n))[0]-=r[0],o[1]-=r[1];t=t.mark.group;)o[0]-=t.x||0,o[1]-=t.y||0;t=i.tip(a.items,o)}return t}(e,t,this.canvas(),this._origin);var r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},jh.getItemBoundingClientRect=function(t){var e=this.canvas();if(e){for(var n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,o=i.width(),a=i.height(),s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;t.mark&&(t=t.mark.group);)s+=t.x||0,u+=t.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}}};var Mh=Th.prototype;Mh.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},Mh.element=function(){return this._el},Mh.canvas=function(){return this._el&&this._el.firstChild},Mh.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},Mh.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},Mh.dirty=function(){},Mh.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},Mh._render=function(){},Mh.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then((function(){return e})):Promise.resolve(e)},Mh._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(t){t&&i(),n._ready=null}))}return r},Mh.sanitizeURL=function(t){return this._load("sanitizeURL",t)},Mh.loadImage=function(t){return this._load("loadImage",t)};var Rh="dragleave",Dh="mousedown",Lh="mousemove",Nh="mouseout",Ih="click",Fh=["keydown","keypress","keyup","dragenter",Rh,"dragover",Dh,"mouseup",Lh,Nh,"mouseover",Ih,"dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],Ph=Lh,$h=Nh,zh=Ih;function Bh(t,e){Ah.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}var Uh=Object(p.y)(Bh,Ah);Uh.initialize=function(t,e,n){var r=this;return this._canvas=t&&_h(t,"canvas"),[Ih,Dh,Lh,Nh,Rh].forEach((function(t){return Wh(r,t)})),Ah.prototype.initialize.call(this,t,e,n)};function Wh(t,e){(function(t){return"touchstart"===t||"touchmove"===t||"touchend"===t?["touchstart","touchmove","touchend"]:[t]})(e).forEach((function(e){return function(t,e){var n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?function(n){return t[e](n)}:function(n){return t.fire(e,n)}))}(t,e)}))}function Hh(t,e,n){return function(r){var i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(e,r)),this.fire(t,r)}}function Vh(t){return function(e){this.fire(t,e),this._active=null}}Uh.canvas=function(){return this._canvas},Uh.context=function(){return this._canvas.getContext("2d")},Uh.events=Fh,Uh.DOMMouseScroll=function(t){this.fire("mousewheel",t)},Uh.mousemove=Hh(Lh,"mouseover",Nh),Uh.dragover=Hh("dragover","dragenter",Rh),Uh.mouseout=Vh(Nh),Uh.dragleave=Vh(Rh),Uh.mousedown=function(t){this._down=this._active,this.fire(Dh,t)},Uh.click=function(t){this._down===this._active&&(this.fire(Ih,t),this._down=null)},Uh.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},Uh.touchmove=function(t){this.fire("touchmove",t,!0)},Uh.touchend=function(t){this.fire("touchend",t,!0),this._touch=null},Uh.fire=function(t,e,n){var r=n?this._touch:this._active,i=this._handlers[t];if(e.vegaType=t,t===zh&&r&&r.href?this.handleHref(e,r,r.href):t!==Ph&&t!==$h||this.handleTooltip(e,r,t!==$h),i)for(var o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,e,r)},Uh.on=function(t,e){var n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(Wh(this,t),(r[n]||(r[n]=[])).push({type:t,handler:e})),this},Uh.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},Uh.pickEvent=function(t){var e=Eh(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},Uh.pick=function(t,e,n,r,i){var o=this.context();return fh[t.marktype].pick.call(this,o,t,e,n,r,i)};var qh="undefined"!==typeof window&&window.devicePixelRatio||1;function Gh(t){Th.call(this,t),this._options={},this._redraw=!1,this._dirty=new xl,this._tempb=new xl}var Kh=Object(p.y)(Gh,Th),Yh=Th.prototype;Kh.initialize=function(t,e,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Sl(1,1,this._options.type),t&&this._canvas&&(kh(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Yh.initialize.call(this,t,e,n,r,i)},Kh.resize=function(t,e,n,r){if(Yh.resize.call(this,t,e,n,r),this._canvas)!function(t,e,n,r,i,o){var a="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,s=t.getContext("2d"),u=a?qh:i;for(var c in t.width=e*u,t.height=n*u,o)s[c]=o[c];a&&1!==u&&(t.style.width=e+"px",t.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var i=this._options.externalContext;i||Object(p.n)("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},Kh.canvas=function(){return this._canvas},Kh.context=function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},Kh.dirty=function(t){for(var e=this._tempb.clear().union(t.bounds),n=t.mark.group;n;)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)};function Qh(t,e){Ah.call(this,t,e);var n=this;n._hrefHandler=Zh(n,(function(t,e){e&&e.href&&n.handleHref(t,e,e.href)})),n._tooltipHandler=Zh(n,(function(t,e){n.handleTooltip(t,e,t.type!==$h)}))}Kh._render=function(t){var e,n,r,i=this.context(),o=this._origin,a=this._width,s=this._height,u=this._dirty,c=(e=o,n=a,r=s,(new xl).set(0,0,n,r).translate(-e[0],-e[1]));i.save();var l=this._redraw||u.empty()?(this._redraw=!1,c.expand(1)):function(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(i,c.intersect(u),o);return this.clear(-o[0],-o[1],a,s),this.draw(i,t,l),i.restore(),u.clear(),this},Kh.draw=function(t,e,n){var r=fh[e.marktype];e.clip&&function(t,e){var n=e.clip;t.save(),Object(p.D)(n)?(t.beginPath(),n(t),t.clip()):Of(t,e.group)}(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},Kh.clear=function(t,e,n,r){var i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(t,e,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(t,e,n,r))};var Xh=Object(p.y)(Qh,Ah);Xh.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener(zh,this._hrefHandler),r.removeEventListener(Ph,this._tooltipHandler),r.removeEventListener($h,this._tooltipHandler)),this._svg=r=t&&_h(t,"svg"),r&&(r.addEventListener(zh,this._hrefHandler),r.addEventListener(Ph,this._tooltipHandler),r.addEventListener($h,this._tooltipHandler)),Ah.prototype.initialize.call(this,t,e,n)},Xh.canvas=function(){return this._svg};var Zh=function(t,e){return function(n){var r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,e.call(t._obj,n,r)}};Xh.on=function(t,e){var n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){var i={type:t,handler:e,listener:Zh(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},Xh.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var Jh=function(t,e,n){var r=t-e+2*n;return t?r>0?r:1:0},td="log",ed="time",nd="utc",rd="continuous",id=rr(nr),od=id.right,ad=id.left,sd=od;function ud(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function cd(t,e){switch(arguments.length){case 0:break;case 1:"function"===typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"===typeof e?this.interpolator(e):this.range(e)}return this}var ld=Symbol("implicit");function fd(){var t=new Map,e=[],n=[],r=ld;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==ld)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;var r,o=Object(Do.a)(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a+"";t.has(s)||t.set(s,e.push(a))}}catch(u){o.e(u)}finally{o.f()}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return fd(e,n).unknown(r)},ud.apply(i,arguments),i}function hd(){var t,e,n=fd().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,u=0,c=.5;function l(){var n=r().length,l=o[1]<o[0],f=o[l-0],h=o[1-l],d=Jh(n,s,u);t=(h-f)/(d||1),a&&(t=Math.floor(t)),f+=(h-f-t*(n-s))*c,e=t*(1-s),a&&(f=Math.round(f),e=Math.round(e));var p=zs(n).map((function(e){return f+t*e}));return i(l?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],l()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,l()):a},n.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s=u,l()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var n,a,s,u=+t[0],c=+t[1],l=o[1]<o[0],f=l?i().reverse():i(),h=f.length-1;if(u===u&&c===c&&(c<u&&(s=u,u=c,c=s),!(c<f[0]||u>o[1-l])))return n=Math.max(0,od(f,u)-1),a=u===c?n:od(f,c)-1,u-f[n]>e+1e-10&&++n,l&&(s=n,n=h-a,a=h-s),n>a?void 0:r().slice(n,a+1)}},n.invert=function(t){var e=n.invertRange([t,t]);return e?e[0]:e},n.copy=function(){return hd().domain(r()).range(o).round(a).paddingInner(s).paddingOuter(u).align(c)},l()}var dd=function(t,e,n,r){var i,o=zt(t,e,n);switch((r=Ut(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Xt(o,a))||(r.precision=i),Gt(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Zt(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Jt(o))||(r.precision=i-2*("%"===r.type))}return qt(r)},pd=Array.prototype.map;function gd(t){return pd.call(t,(function(t){return+t}))}var vd=Array.prototype.slice;var md=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function yd(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function bd(){}var wd="\\s*([+-]?\\d+)\\s*",xd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_d="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Od=/^#([0-9a-f]{3,8})$/,kd=new RegExp("^rgb\\("+[wd,wd,wd]+"\\)$"),Sd=new RegExp("^rgb\\("+[_d,_d,_d]+"\\)$"),Ed=new RegExp("^rgba\\("+[wd,wd,wd,xd]+"\\)$"),Ad=new RegExp("^rgba\\("+[_d,_d,_d,xd]+"\\)$"),Cd=new RegExp("^hsl\\("+[xd,_d,_d]+"\\)$"),jd=new RegExp("^hsla\\("+[xd,_d,_d,xd]+"\\)$"),Td={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Md(){return this.rgb().formatHex()}function Rd(){return this.rgb().formatRgb()}function Dd(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Od.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ld(e):3===n?new Pd(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Nd(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Nd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=kd.exec(t))?new Pd(e[1],e[2],e[3],1):(e=Sd.exec(t))?new Pd(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ed.exec(t))?Nd(e[1],e[2],e[3],e[4]):(e=Ad.exec(t))?Nd(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Cd.exec(t))?Ud(e[1],e[2]/100,e[3]/100,1):(e=jd.exec(t))?Ud(e[1],e[2]/100,e[3]/100,e[4]):Td.hasOwnProperty(t)?Ld(Td[t]):"transparent"===t?new Pd(NaN,NaN,NaN,0):null}function Ld(t){return new Pd(t>>16&255,t>>8&255,255&t,1)}function Nd(t,e,n,r){return r<=0&&(t=e=n=NaN),new Pd(t,e,n,r)}function Id(t){return t instanceof bd||(t=Dd(t)),t?new Pd((t=t.rgb()).r,t.g,t.b,t.opacity):new Pd}function Fd(t,e,n,r){return 1===arguments.length?Id(t):new Pd(t,e,n,null==r?1:r)}function Pd(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function $d(){return"#"+Bd(this.r)+Bd(this.g)+Bd(this.b)}function zd(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Bd(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ud(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vd(t,e,n,r)}function Wd(t){if(t instanceof Vd)return new Vd(t.h,t.s,t.l,t.opacity);if(t instanceof bd||(t=Dd(t)),!t)return new Vd;if(t instanceof Vd)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Vd(a,s,u,t.opacity)}function Hd(t,e,n,r){return 1===arguments.length?Wd(t):new Vd(t,e,n,null==r?1:r)}function Vd(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function qd(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Gd(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}md(bd,Dd,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Md,formatHex:Md,formatHsl:function(){return Wd(this).formatHsl()},formatRgb:Rd,toString:Rd}),md(Pd,Fd,yd(bd,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Pd(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Pd(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$d,formatHex:$d,formatRgb:zd,toString:zd})),md(Vd,Hd,yd(bd,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Vd(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Vd(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Pd(qd(t>=240?t-240:t+120,i,r),qd(t,i,r),qd(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Kd=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Gd((n-r/e)*e,a,i,o,s)}},Yd=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Gd((n-r/e)*e,i,o,a,s)}},Qd=function(t){return function(){return t}};function Xd(t,e){return function(n){return t+n*e}}function Zd(t,e){var n=e-t;return n?Xd(t,n>180||n<-180?n-360*Math.round(n/360):n):Qd(isNaN(t)?e:t)}function Jd(t){return 1===(t=+t)?tp:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Qd(isNaN(e)?n:e)}}function tp(t,e){var n=e-t;return n?Xd(t,n):Qd(isNaN(t)?e:t)}var ep=function t(e){var n=Jd(e);function r(t,e){var r=n((t=Fd(t)).r,(e=Fd(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=tp(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function np(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Fd(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var rp=np(Kd),ip=np(Yd),op=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function ap(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var sp=function(t,e){return(ap(e)?op:up)(t,e)};function up(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=gp(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var cp=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},lp=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},fp=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=gp(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},hp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dp=new RegExp(hp.source,"g");var pp=function(t,e){var n,r,i,o=hp.lastIndex=dp.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=hp.exec(t))&&(r=dp.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:lp(n,r)})),o=dp.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},gp=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Qd(e):("number"===r?lp:"string"===r?(n=Dd(e))?(e=n,ep):pp:e instanceof Dd?ep:e instanceof Date?cp:ap(e)?op:Array.isArray(e)?up:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?fp:lp)(t,e)},vp=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},mp=function(t){return+t},yp=[0,1];function bp(t){return t}function wp(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function xp(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=wp(i,r),o=n(a,o)):(r=wp(r,i),o=n(o,a)),function(t){return o(r(t))}}function _p(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=wp(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=sd(t,e,1,r)-1;return o[n](i[n](e))}}function Op(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kp(){var t,e,n,r,i,o,a=yp,s=yp,u=gp,c=bp;function l(){var t=Math.min(a.length,s.length);return c!==bp&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?_p:xp,i=o=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return f.invert=function(n){return c(e((o||(o=r(s,a.map(t),lp)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,mp),l()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=vp,l()},f.clamp=function(t){return arguments.length?(c=!!t||bp,l()):c!==bp},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function Sp(){return kp()(bp,bp)}function Ep(t){var e=t.domain;return t.ticks=function(t){var n=e();return Pt(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return dd(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=$t(s,u,n))>0?r=$t(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=$t(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}var Ap=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function Cp(t){return Math.log(t)}function jp(t){return Math.exp(t)}function Tp(t){return-Math.log(-t)}function Mp(t){return-Math.exp(-t)}function Rp(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Dp(t){return function(e){return-t(-e)}}function Lp(t){var e,n,r=t(Cp,jp),i=r.domain,o=10;function a(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(o),n=function(t){return 10===t?Rp:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),i()[0]<0?(e=Dp(e),n=Dp(n),t(Tp,Mp)):t(Cp,jp),r}return r.base=function(t){return arguments.length?(o=+t,a()):o},r.domain=function(t){return arguments.length?(i(t),a()):i()},r.ticks=function(t){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(h=s,s=u,u=h);var c,l,f,h=e(s),d=e(u),p=null==t?10:+t,g=[];if(!(o%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),s>0){for(;h<=d;++h)for(l=1,c=n(h);l<o;++l)if(!((f=c*l)<s)){if(f>u)break;g.push(f)}}else for(;h<=d;++h)for(l=o-1,c=n(h);l>=1;--l)if(!((f=c*l)<s)){if(f>u)break;g.push(f)}2*g.length<p&&(g=Pt(s,u,p))}else g=Pt(h,d,Math.min(d-h,p)).map(n);return r?g.reverse():g},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!==typeof i&&(i=qt(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=a?i(t):""}},r.nice=function(){return i(Ap(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function Np(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ip(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Fp(t){return t<0?-t*t:t*t}function Pp(t){var e=t(bp,bp),n=1;function r(){return 1===n?t(bp,bp):.5===n?t(Ip,Fp):t(Np(n),Np(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Ep(e)}function $p(){var t=Pp(kp());return t.copy=function(){return Op(t,$p()).exponent(t.exponent())},ud.apply(t,arguments),t}function zp(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Bp(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Up(t){var e=1,n=t(zp(e),Bp(e));return n.constant=function(n){return arguments.length?t(zp(e=+n),Bp(e)):e},Ep(n)}function Wp(t){return new Date(t)}function Hp(t){return t instanceof Date?+t:+new Date(+t)}function Vp(t,e,n,r,i,o,a,s,u){var c=Sp(),l=c.invert,f=c.domain,h=u(".%L"),d=u(":%S"),p=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),m=u("%b %d"),y=u("%B"),b=u("%Y"),w=[[a,1,1e3],[a,5,5e3],[a,15,15e3],[a,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function x(s){return(a(s)<s?h:o(s)<s?d:i(s)<s?p:r(s)<s?g:e(s)<s?n(s)<s?v:m:t(s)<s?y:b)(s)}function _(e,n,r){if(null==e&&(e=10),"number"===typeof e){var i,o=Math.abs(r-n)/e,a=rr((function(t){return t[2]})).right(w,o);return a===w.length?(i=zt(n/31536e6,r/31536e6,e),e=t):a?(i=(a=w[o/w[a-1][2]<w[a][2]/o?a-1:a])[1],e=a[0]):(i=Math.max(zt(n,r,e),1),e=s),e.every(i)}return e}return c.invert=function(t){return new Date(l(t))},c.domain=function(t){return arguments.length?f(Array.from(t,Hp)):f().map(Wp)},c.ticks=function(t){var e,n=f(),r=n[0],i=n[n.length-1],o=i<r;return o&&(e=r,r=i,i=e),e=(e=_(t,r,i))?e.range(r,i+1):[],o?e.reverse():e},c.tickFormat=function(t,e){return null==e?x:u(e)},c.nice=function(t){var e=f();return(t=_(t,e[0],e[e.length-1]))?f(Ap(e,t)):c},c.copy=function(){return Op(c,Vp(t,e,n,r,i,o,a,s,u))},c}function qp(){var t,e,n,r,i,o=0,a=1,s=bp,u=!1;function c(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function l(t){return function(e){var n,r,i,o;return arguments.length?(n=e,i=(r=Object(Ea.a)(n,2))[0],o=r[1],s=t(i,o),c):[s(0),s(1)]}}return c.domain=function(i){var s,u;return arguments.length?(s=i,u=Object(Ea.a)(s,2),o=u[0],a=u[1],t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=l(gp),c.rangeRound=l(vp),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),c}}function Gp(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Kp(){var t=Ep(qp()(bp));return t.copy=function(){return Gp(t,Kp())},cd.apply(t,arguments)}function Yp(){var t=Pp(qp());return t.copy=function(){return Gp(t,Yp()).exponent(t.exponent())},cd.apply(t,arguments)}function Qp(t,e){for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function Xp(){var t,e,n,r,i,o,a,s=0,u=.5,c=1,l=1,f=bp,h=!1;function d(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(l*t<l*e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i,o,a;return arguments.length?(n=e,i=(r=Object(Ea.a)(n,3))[0],o=r[1],a=r[2],f=Qp(t,[i,o,a]),d):[f(0),f(.5),f(1)]}}return d.domain=function(a){var f,h;return arguments.length?(f=a,h=Object(Ea.a)(f,3),s=h[0],u=h[1],c=h[2],t=o(s=+s),e=o(u=+u),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,d):[s,u,c]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(f=t,d):f},d.range=p(gp),d.rangeRound=p(vp),d.unknown=function(t){return arguments.length?(a=t,d):a},function(a){return o=a,t=a(s),e=a(u),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,d}}function Zp(){var t=Pp(Xp());return t.copy=function(){return Gp(t,Zp()).exponent(t.exponent())},cd.apply(t,arguments)}var Jp={};function tg(t,e,n){var r=function(){var n=e();return n.invertRange||(n.invertRange=n.invert?function(t){return function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}}(n):n.invertExtent?function(t){return function(e){var n,r,i,o,a=t.range(),s=e[0],u=e[1],c=-1;for(u<s&&(r=s,s=u,u=r),i=0,o=a.length;i<o;++i)a[i]>=s&&a[i]<=u&&(c<0&&(c=i),n=i);if(!(c<0))return s=t.invertExtent(a[c]),u=t.invertExtent(a[n]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}(n):void 0),n.type=t,n};return r.metadata=Object(p.db)(Object(p.i)(n)),r}function eg(t,e,n){return arguments.length>1?(Jp[t]=tg(t,e,n),this):ng(t)?Jp[t]:void 0}function ng(t){return Object(p.v)(Jp,t)}function rg(t,e){var n=Jp[t];return n&&n.metadata[e]}function ig(t){return rg(t,rd)}function og(t){return rg(t,"discrete")}function ag(t){return rg(t,"discretizing")}function sg(t){return rg(t,td)}function ug(t){return rg(t,"interpolating")}function cg(t){return rg(t,"quantile")}eg("identity",(function t(e){var n;function r(t){return isNaN(t=+t)?n:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,mp),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,mp):[0,1],Ep(r)})),eg("linear",(function t(){var e=Sp();return e.copy=function(){return Op(e,t())},ud.apply(e,arguments),Ep(e)}),rd),eg(td,(function t(){var e=Lp(kp()).domain([1,10]);return e.copy=function(){return Op(e,t()).base(e.base())},ud.apply(e,arguments),e}),[rd,td]),eg("pow",$p,rd),eg("sqrt",(function(){return $p.apply(null,arguments).exponent(.5)}),rd),eg("symlog",(function t(){var e=Up(kp());return e.copy=function(){return Op(e,t()).constant(e.constant())},ud.apply(e,arguments)}),rd),eg(ed,(function(){return ud.apply(Vp(Sn,An,Le,Re,jn,Mn,Dn,Nn,yr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[rd,"temporal"]),eg(nd,(function(){return ud.apply(Vp($n,Bn,Ke,Ue,Wn,Vn,Dn,Nn,wr).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[rd,"temporal"]),eg("sequential",Kp,[rd,"interpolating"]),eg("".concat("sequential","-").concat("linear"),Kp,[rd,"interpolating"]),eg("".concat("sequential","-").concat(td),(function t(){var e=Lp(qp()).domain([1,10]);return e.copy=function(){return Gp(e,t()).base(e.base())},cd.apply(e,arguments)}),[rd,"interpolating",td]),eg("".concat("sequential","-").concat("pow"),Yp,[rd,"interpolating"]),eg("".concat("sequential","-").concat("sqrt"),(function(){return Yp.apply(null,arguments).exponent(.5)}),[rd,"interpolating"]),eg("".concat("sequential","-").concat("symlog"),(function t(){var e=Up(qp());return e.copy=function(){return Gp(e,t()).constant(e.constant())},cd.apply(e,arguments)}),[rd,"interpolating"]),eg("".concat("diverging","-").concat("linear"),(function t(){var e=Ep(Xp()(bp));return e.copy=function(){return Gp(e,t())},cd.apply(e,arguments)}),[rd,"interpolating"]),eg("".concat("diverging","-").concat(td),(function t(){var e=Lp(Xp()).domain([.1,1,10]);return e.copy=function(){return Gp(e,t()).base(e.base())},cd.apply(e,arguments)}),[rd,"interpolating",td]),eg("".concat("diverging","-").concat("pow"),Zp,[rd,"interpolating"]),eg("".concat("diverging","-").concat("sqrt"),(function(){return Zp.apply(null,arguments).exponent(.5)}),[rd,"interpolating"]),eg("".concat("diverging","-").concat("symlog"),(function t(){var e=Up(Xp());return e.copy=function(){return Gp(e,t()).constant(e.constant())},cd.apply(e,arguments)}),[rd,"interpolating"]),eg("quantile",(function t(){var e,n=[],r=[],i=[];function o(){var t=0,e=Math.max(1,r.length);for(i=new Array(e-1);++t<e;)i[t-1]=Uo(n,t/e);return a}function a(t){return isNaN(t=+t)?e:r[sd(i,t)]}return a.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},a.domain=function(t){if(!arguments.length)return n.slice();n=[];var e,r=Object(Do.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;null==i||isNaN(i=+i)||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n.sort(nr),o()},a.range=function(t){return arguments.length?(r=Array.from(t),o()):r.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return i.slice()},a.copy=function(){return t().domain(n).range(r).unknown(e)},ud.apply(a,arguments)}),["discretizing","quantile"]),eg("quantize",(function t(){var e,n=0,r=1,i=1,o=[.5],a=[0,1];function s(t){return t<=t?a[sd(o,t,0,i)]:e}function u(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*r-(t-i)*n)/(i+1);return s}return s.domain=function(t){var e,i;return arguments.length?(e=t,i=Object(Ea.a)(e,2),n=i[0],r=i[1],n=+n,r=+r,u()):[n,r]},s.range=function(t){return arguments.length?(i=(a=Array.from(t)).length-1,u()):a.slice()},s.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=i?[o[i-1],r]:[o[e-1],o[e]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return t().domain([n,r]).range(a).unknown(e)},ud.apply(Ep(s),arguments)}),"discretizing"),eg("threshold",(function t(){var e,n=[.5],r=[0,1],i=1;function o(t){return t<=t?r[sd(n,t,0,i)]:e}return o.domain=function(t){return arguments.length?(n=Array.from(t),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t().domain(n).range(r).unknown(e)},ud.apply(o,arguments)}),"discretizing"),eg("bin-ordinal",(function t(){var e=[],n=[];function r(t){return null==t||t!==t?void 0:n[(sd(e,t)-1)%n.length]}return r.domain=function(t){return arguments.length?(e=gd(t),r):e.slice()},r.range=function(t){return arguments.length?(n=vd.call(t),r):n.slice()},r.tickFormat=function(t,n){return dd(e[0],Object(p.U)(e),null==t?10:t,n)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r}),["discrete","discretizing"]),eg("ordinal",fd,"discrete"),eg("band",hd,"discrete"),eg("point",(function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return t(n())},e}(hd().paddingInner(1))}),"discrete");var lg,fg,hg,dg,pg=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},gg=function(t,e){var n=Zd(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},vg=180/Math.PI,mg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},yg=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*vg,skewX:Math.atan(u)*vg,scaleX:a,scaleY:s}};function bg(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:lp(t,i)},{i:u-2,x:lp(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:lp(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:lp(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:lp(t,n)},{i:s-2,x:lp(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var wg=bg((function(t){return"none"===t?mg:(lg||(lg=document.createElement("DIV"),fg=document.documentElement,hg=document.defaultView),lg.style.transform=t,t=hg.getComputedStyle(fg.appendChild(lg),null).getPropertyValue("transform"),fg.removeChild(lg),t=t.slice(7,-1).split(","),yg(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),xg=bg((function(t){return null==t?mg:(dg||(dg=document.createElementNS("http://www.w3.org/2000/svg","g")),dg.setAttribute("transform",t),(t=dg.transform.baseVal.consolidate())?(t=t.matrix,yg(t.a,t.b,t.c,t.d,t.e,t.f)):mg)}),", ",")",")"),_g=Math.SQRT2;function Og(t){return((t=Math.exp(t))+1/t)/2}var kg=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,f=u-o,h=l*l+f*f;if(h<1e-12)r=Math.log(c/a)/_g,n=function(t){return[i+t*l,o+t*f,a*Math.exp(_g*t*r)]};else{var d=Math.sqrt(h),p=(c*c-a*a+4*h)/(2*a*2*d),g=(c*c-a*a-4*h)/(2*c*2*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/_g,n=function(t){var e,n=t*r,s=Og(v),u=a/(2*d)*(s*(e=_g*n+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[i+u*l,o+u*f,a*s/Og(_g*n+v)]}}return n.duration=1e3*r,n};function Sg(t){return function(e,n){var r=t((e=Hd(e)).h,(n=Hd(n)).h),i=tp(e.s,n.s),o=tp(e.l,n.l),a=tp(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Eg=Sg(Zd),Ag=Sg(tp),Cg=Math.PI/180,jg=180/Math.PI;function Tg(t){if(t instanceof Rg)return new Rg(t.l,t.a,t.b,t.opacity);if(t instanceof $g)return zg(t);t instanceof Pd||(t=Id(t));var e,n,r=Ig(t.r),i=Ig(t.g),o=Ig(t.b),a=Dg((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?e=n=a:(e=Dg((.4360747*r+.3850649*i+.1430804*o)/.96422),n=Dg((.0139322*r+.0971045*i+.7141733*o)/.82521)),new Rg(116*a-16,500*(e-a),200*(a-n),t.opacity)}function Mg(t,e,n,r){return 1===arguments.length?Tg(t):new Rg(t,e,n,null==r?1:r)}function Rg(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Dg(t){return t>6/29*(6/29)*(6/29)?Math.pow(t,1/3):t/(6/29*3*(6/29))+4/29}function Lg(t){return t>6/29?t*t*t:6/29*3*(6/29)*(t-4/29)}function Ng(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ig(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Fg(t){if(t instanceof $g)return new $g(t.h,t.c,t.l,t.opacity);if(t instanceof Rg||(t=Tg(t)),0===t.a&&0===t.b)return new $g(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*jg;return new $g(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Pg(t,e,n,r){return 1===arguments.length?Fg(t):new $g(t,e,n,null==r?1:r)}function $g(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function zg(t){if(isNaN(t.h))return new Rg(t.l,0,0,t.opacity);var e=t.h*Cg;return new Rg(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function Bg(t,e){var n=tp((t=Mg(t)).l,(e=Mg(e)).l),r=tp(t.a,e.a),i=tp(t.b,e.b),o=tp(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function Ug(t){return function(e,n){var r=t((e=Pg(e)).h,(n=Pg(n)).h),i=tp(e.c,n.c),o=tp(e.l,n.l),a=tp(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}md(Rg,Mg,yd(bd,{brighter:function(t){return new Rg(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Rg(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Pd(Ng(3.1338561*(e=.96422*Lg(e))-1.6168667*(t=1*Lg(t))-.4906146*(n=.82521*Lg(n))),Ng(-.9787684*e+1.9161415*t+.033454*n),Ng(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),md($g,Pg,yd(bd,{brighter:function(t){return new $g(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new $g(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return zg(this).rgb()}}));var Wg=Ug(Zd),Hg=Ug(tp),Vg=1.97294,qg=-.90649*Vg,Gg=1.78277*Vg,Kg=-.6557636667999999;function Yg(t){if(t instanceof Xg)return new Xg(t.h,t.s,t.l,t.opacity);t instanceof Pd||(t=Id(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Kg*r+qg*e-Gg*n)/(Kg+qg-Gg),o=r-i,a=(Vg*(n-i)- -.29227*o)/-.90649,s=Math.sqrt(a*a+o*o)/(Vg*i*(1-i)),u=s?Math.atan2(a,o)*jg-120:NaN;return new Xg(u<0?u+360:u,s,i,t.opacity)}function Qg(t,e,n,r){return 1===arguments.length?Yg(t):new Xg(t,e,n,null==r?1:r)}function Xg(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Zg(t){return function e(n){function r(e,r){var i=t((e=Qg(e)).h,(r=Qg(r)).h),o=tp(e.s,r.s),a=tp(e.l,r.l),s=tp(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}md(Xg,Qg,yd(bd,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Xg(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Xg(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Cg,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Pd(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(-.29227*r+-.90649*i)),255*(e+n*(Vg*r)),this.opacity)}}));var Jg=Zg(Zd),tv=Zg(tp),ev=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},nv=["clamp","base","constant","exponent"];function rv(t,e){var n=e[0],r=Object(p.U)(e)-n;return function(e){return t(n+e*r)}}function iv(t,e,n){return Qp(sv(e||"rgb",n),t)}function ov(t,e){for(var n=new Array(e),r=e+1,i=0;i<e;)n[i]=t(++i/r);return n}function av(t,e,n){var r,i,o,a=n-e;return a&&Number.isFinite(a)?(r=(i=t.type).indexOf("-"),i=r<0?i:i.slice(r+1),o=eg(i)().domain([e,n]).range([0,1]),nv.forEach((function(e){return t[e]?o[e](t[e]()):0})),o):Object(p.l)(.5)}function sv(t,e){var n=i[function(t){return"interpolate"+t.toLowerCase().split("-").map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("")}(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function uv(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function cv(t,e){for(var n in t)fv(n,e(t[n]))}var lv={};function fv(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(lv[t]=e,this):lv[t]}cv({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},uv),cv({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(t){return iv(uv(t))}));var hv,dv,pv=function(t){return Object(p.A)(t)?t.map((function(t){return String(t)})):String(t)},gv=function(t,e){return t[1]-e[1]},vv=function(t,e){return e[1]-t[1]};function mv(t,e,n){var r;return Object(p.E)(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),null!=n&&(e=Math.min(e,Math.floor(Object(p.X)(t.domain())/n||1)))),Object(p.F)(e)&&(r=e.step,e=e.interval),Object(p.H)(e)&&(e=t.type===ed?Kn(e):t.type==nd?Yn(e):Object(p.n)("Only time and utc scales accept interval strings."),r&&(e=e.every(r))),e}function yv(t,e,n){var r=t.range(),i=r[0],o=Object(p.U)(r),a=gv;if(i>o&&(r=o,o=i,i=r,a=vv),i=Math.floor(i),o=Math.ceil(o),e=e.map((function(e){return[e,t(e)]})).filter((function(t){return i<=t[1]&&t[1]<=o})).sort(a).map((function(t){return t[0]})),n>0&&e.length>1){for(var s=[e[0],Object(p.U)(e)];e.length>n&&e.length>=3;)e=e.filter((function(t,e){return!(e%2)}));e.length<3&&(e=s)}return e}function bv(t,e){return t.bins?yv(t,t.bins):t.ticks?t.ticks(e):t.domain()}function wv(t,e,n,r,i,o){var a=e.type,s=pv;if(a===ed||i===ed)s=t.timeFormat(r);else if(a===nd||i===nd)s=t.utcFormat(r);else if(sg(a)){var u=t.formatFloat(r);if(o||e.bins)s=u;else{var c=xv(e,n,!1);s=function(t){return c(t)?u(t):""}}}else if(e.tickFormat){var l=e.domain();s=t.formatSpan(l[0],l[l.length-1],n,r)}else r&&(s=t.format(r));return s}function xv(t,e,n){var r=bv(t,e),i=t.base(),o=Math.log(i),a=Math.max(1,i*e/r.length),s=function(t){var e=t/Math.pow(i,Math.round(Math.log(t)/o));return e*i<i-.5&&(e*=i),e<=a};return n?r.filter(s):s}var _v=(hv={},Object(fe.a)(hv,"quantile","quantiles"),Object(fe.a)(hv,"quantize","thresholds"),Object(fe.a)(hv,"threshold","domain"),hv),Ov=(dv={},Object(fe.a)(dv,"quantile","quantiles"),Object(fe.a)(dv,"quantize","domain"),dv);function kv(t,e){return t.bins?function(t){var e=t.slice(0,-1);return e.max=Object(p.U)(t),e}(t.bins):t.type===td?xv(t,e,!0):_v[t.type]?function(t){var e=[-1/0].concat(t);return e.max=1/0,e}(t[_v[t.type]]()):bv(t,e)}function Sv(t,e,n,r,i,o,a){var s=Ov[e.type]&&o!==ed&&o!==nd?function(t,e,n){var r,i=e[Ov[e.type]](),o=i.length,a=o>1?i[1]-i[0]:i[0];for(r=1;r<o;++r)a=Math.min(a,i[r]-i[r-1]);return t.formatSpan(0,a,30,n)}(t,e,i):wv(t,e,n,i,o,a);return"symbol"===r&&function(t){return _v[t.type]||t.bins}(e)?function(t){return function(e,n,r){var i=Ev(r[n+1],Ev(r.max,1/0)),o=Av(e,t),a=Av(i,t);return o&&a?o+" \u2013 "+a:a?"< "+a:"\u2265 "+o}}(s):"discrete"===r?function(t){return function(e,n){return n?t(e):null}}(s):function(t){return function(e){return t(e)}}(s)}function Ev(t,e){return null!=t?t:e}function Av(t,e){return Number.isFinite(t)?e(t):null}function Cv(t,e,n,r){var i=r||e.type;return Object(p.H)(n)&&rg(i,"temporal")&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==ed?n||i!==nd?Sv(t,e,5,null,n,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}function jv(t,e,n){n=n||{};var r=Math.max(3,n.maxlen||7),i=Cv(t,e,n.format,n.formatType);if(ag(e.type)){var o=kv(e).slice(1).map(i),a=o.length;return"".concat(a," boundar").concat(1===a?"y":"ies",": ").concat(o.join(", "))}if(og(e.type)){var s=e.domain(),u=s.length,c=u>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return"".concat(u," value").concat(1===u?"":"s",": ").concat(c)}var l=e.domain();return"values from ".concat(i(l[0])," to ").concat(i(Object(p.U)(l)))}var Tv=function(t,e,n){var r;return r={},Object(fe.a)(r,"role",t),Object(fe.a)(r,"aria-roledescription",e),Object(fe.a)(r,"aria-label",n||void 0),r},Mv=Object(p.db)(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Rv={axis:{desc:"axis",caption:function(t){var e=t.datum,n=t.orient,r=e.title?Fv(t):null,i=t.context,o=i.scales[e.scale].value,a=i.dataflow.locale(),s=o.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(og(s)?"discrete":s," scale")+" with ".concat(jv(a,o,t))}},legend:{desc:"legend",caption:function(t){var e=t.datum,n=e.title?Fv(t):null,r="".concat(e.type||""," legend").trim(),i=e.scales,o=Object.keys(i),a=t.context,s=a.scales[i[o[0]]].value,u=a.dataflow.locale();return c=r,(c.length?c[0].toUpperCase()+c.slice(1):c)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(t){return(t=t.map((function(t){return t+("fill"===t||"stroke"===t?" color":"")}))).length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Object(p.U)(t)}(o))+" with ".concat(jv(u,s,t));var c}},"title-text":{desc:"title",caption:function(t){return"Title text '".concat(Iv(t),"'")}},"title-subtitle":{desc:"subtitle",caption:function(t){return"Subtitle text '".concat(Iv(t),"'")}}},Dv={ariaRole:"role",ariaRoleDescription:"aria-roledescription",description:"aria-label"};function Lv(t,e){var n=!1===e.aria;if(t("aria-hidden",n||void 0),n||null==e.description)for(var r in Dv)t(Dv[r],void 0);else{var i=e.mark.marktype;t("aria-label",e.description),t("role",e.ariaRole||("group"===i?"graphics-object":"graphics-symbol")),t("aria-roledescription",e.ariaRoleDescription||"".concat(i," mark"))}}function Nv(t){return!1===t.aria?Object(fe.a)({},"aria-hidden",!0):Mv[t.role]?null:Rv[t.role]?function(t,e){try{var n=t.items[0],r=e.caption||function(){return""};return Tv(e.role||"graphics-symbol",e.desc,n.description||r(n))}catch(i){return null}}(t,Rv[t.role]):function(t){var e=t.marktype,n="group"===e||"text"===e||t.items.some((function(t){return null!=t.description&&!1!==t.aria}));return Tv(n?"graphics-object":"graphics-symbol","".concat(e," mark container"),t.description)}(t)}function Iv(t){return Object(p.i)(t.text).join(" ")}function Fv(t){try{return Object(p.i)(Object(p.U)(t.items).items[0].text).join(" ")}catch(e){return null}}var Pv=function(t){return(t+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")};function $v(t,e,n){var r,i,o="<"+t;if(e)for(r in e)null!=(i=e[r])&&(o+=" "+r+'="'+Pv(i)+'"');return n&&(o+=" "+n),o+">"}function zv(t){return"</"+t+">"}var Bv={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Uv={fill:"none","stroke-miterlimit":10},Wv=Tf.xmlns;function Hv(t){Th.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var Vv=Object(p.y)(Hv,Th),qv=Th.prototype;function Gv(t,e,n){var r,i,o;if("radial"===e.gradient){var a=Oh(t,n++,"pattern",Wv);a.setAttribute("id","p_"+e.id),a.setAttribute("viewBox","0,0,1,1"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("preserveAspectRatio","xMidYMid slice"),(a=Oh(a,0,"rect",Wv)).setAttribute("width","1"),a.setAttribute("height","1"),a.setAttribute("fill","url("+rm()+"#"+e.id+")"),(t=Oh(t,n++,"radialGradient",Wv)).setAttribute("id",e.id),t.setAttribute("fx",e.x1),t.setAttribute("fy",e.y1),t.setAttribute("fr",e.r1),t.setAttribute("cx",e.x2),t.setAttribute("cy",e.y2),t.setAttribute("r",e.r2)}else(t=Oh(t,n++,"linearGradient",Wv)).setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2);for(r=0,i=e.stops.length;r<i;++r)(o=Oh(t,r,"stop",Wv)).setAttribute("offset",e.stops[r].offset),o.setAttribute("stop-color",e.stops[r].color);return kh(t,r),n}function Kv(t,e,n){var r;return(t=Oh(t,n,"clipPath",Wv)).setAttribute("id",e.id),e.path?(r=Oh(t,0,"path",Wv)).setAttribute("d",e.path):((r=Oh(t,0,"rect",Wv)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height)),kh(t,1),n+1}function Yv(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function Qv(t,e,n,r,i){var o,a=t._svg;if(!a&&(a=xh(o=e.ownerDocument,r,Wv),t._svg=a,t.mark&&(a.__data__=t,a.__values__={fill:"default"},"g"===r))){var s=xh(o,"path",Wv);a.appendChild(s),s.__data__=t;var u=xh(o,"g",Wv);a.appendChild(u),u.__data__=t;var c=xh(o,"path",Wv);a.appendChild(c),c.__data__=t,c.__values__={fill:"default"}}return(a.ownerSVGElement!==i||function(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}(a,n))&&e.insertBefore(a,n?n.nextSibling:e.firstChild),a}Vv.initialize=function(t,e,n,r){if(this._defs={gradient:{},clipping:{}},t){for(var i in this._svg=Oh(t,0,"svg",Wv),this._svg.setAttribute("class","marks"),kh(t,1),this._root=Oh(this._svg,0,"g",Wv),Uv)this._root.setAttribute(i,Uv[i]);kh(this._svg,1)}return this.background(this._bgcolor),qv.initialize.call(this,t,e,n,r)},Vv.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),qv.background.apply(this,arguments)},Vv.resize=function(t,e,n,r){return qv.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Vv.canvas=function(){return this._svg},Vv.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in Tf)t[e]=Tf[e];var n=this._bgcolor?$v("rect",{width:this._width,height:this._height,fill:this._bgcolor})+zv("rect"):"";return $v("svg",t)+(this._defs.el?this._defs.el.outerHTML:"")+n+this._root.outerHTML+zv("svg")},Vv._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),kh(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Vv.updateDefs=function(){var t=this._svg,e=this._defs,n=e.el,r=0;for(var i in e.gradient)n||(e.el=n=Oh(t,0,"defs",Wv)),r=Gv(n,e.gradient[i],r);for(var o in e.clipping)n||(e.el=n=Oh(t,0,"defs",Wv)),r=Kv(n,e.clipping[o],r);n&&(0===r?(t.removeChild(n),e.el=null):kh(n,r))},Vv._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},Vv.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},Vv.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},Vv._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length||!this._dirtyID)return!0;var e,n,r,i,o,a,s,u=++this._dirtyID;for(o=0,a=t.length;o<a;++o)(n=(e=t[o]).mark).marktype!==r&&(r=n.marktype,i=fh[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,Yv(e,u),n.items.forEach((function(t){t.dirty=u}))),n.zdirty||(e.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):e._svg&&(s=e._svg.parentNode)&&s.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e)._update!==u&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,Yv(e,u)),e._update=u));return!this._dirtyAll},Vv.draw=function(t,e,n){var r=this;if(!this.isDirty(e))return e._svg;var i,o=this._svg,a=fh[e.marktype],s=!1===e.interactive?"none":null,u="g"===a.tag,c=null,l=0;(i=Qv(e,t,n,"g",o)).setAttribute("class",Sh(e));var f=Nv(e);for(var h in f)nm(i,h,f[h]);u||nm(i,"pointer-events",s),nm(i,"clip-path",e.clip?wl(this,e,e.group):null);var d=function(t){var e=r.isDirty(t),n=Qv(t,i,c,a.tag,o);e&&(r._update(a,n,t),u&&function(t,e,n){e=e.lastChild.previousSibling;var r,i=0;uf(n,(function(n){r=t.draw(e,n,r),++i})),kh(e,1+i)}(r,n,t)),c=n,++l};return a.nested?e.items.length&&d(e.items[0]):uf(e,d),kh(i,l),i};var Xv=null,Zv=null,Jv={group:function(t,e,n){var r=Xv=e.childNodes[2];Zv=r.__values__,t.foreground(em,n,this),Zv=e.__values__,Xv=e.childNodes[1],t.content(em,n,this);var i=Xv=e.childNodes[0];t.background(em,n,this);var o=!1===n.mark.interactive?"none":null;if(o!==Zv.events&&(nm(r,"pointer-events",o),nm(i,"pointer-events",o),Zv.events=o),n.strokeForeground&&n.stroke){var a=n.fill;nm(r,"display",null),this.style(i,n),nm(i,"stroke",null),a&&(n.fill=null),Zv=r.__values__,this.style(r,n),a&&(n.fill=a),Xv=null}else nm(r,"display","none")},image:function(t,e,n){!1===n.smooth?(tm(e,"image-rendering","optimizeSpeed"),tm(e,"image-rendering","pixelated")):tm(e,"image-rendering",null)},text:function(t,e,n){var r,i,o,a,s=eh(n);Object(p.A)(s)?(r=(i=s.map((function(t){return rh(n,t)}))).join("\n"))!==Zv.text&&(kh(e,0),o=e.ownerDocument,a=th(n),i.forEach((function(t,r){var i=xh(o,"tspan",Wv);i.__data__=n,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",a)),e.appendChild(i)})),Zv.text=r):(i=rh(n,s))!==Zv.text&&(e.textContent=i,Zv.text=i),nm(e,"font-family",ih(n)),nm(e,"font-size",Jf(n)+"px"),nm(e,"font-style",n.fontStyle),nm(e,"font-variant",n.fontVariant),nm(e,"font-weight",n.fontWeight)}};function tm(t,e,n){n!==Zv[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),Zv[e]=n)}function em(t,e,n){e!==Zv[t]&&(n?function(t,e,n,r){null!=n?t.setAttributeNS(r,e,n):t.removeAttributeNS(r,e)}(Xv,t,e,n):nm(Xv,t,e),Zv[t]=e)}function nm(t,e,n){null!=n?t.setAttribute(e,n):t.removeAttribute(e)}function rm(){var t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function im(t){Th.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}Vv._update=function(t,e,n){Xv=e,Zv=e.__values__,Lv(em,n),t.attr(em,n,this);var r=Jv[t.type];r&&r.call(this,t,e,n),Xv&&this.style(Xv,n)},Vv.style=function(t,e){if(null!=e)for(var n in Bv){var r="font"===n?ih(e):e[n];if(r!==Zv[n]){var i=Bv[n];null==r?t.removeAttribute(i):(du(r)&&(r=pu(r,this._defs.gradient,rm())),t.setAttribute(i,r+"")),Zv[n]=r}}};var om=Object(p.y)(im,Th),am=Th.prototype;function sm(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}om.resize=function(t,e,n,r){am.resize.call(this,t,e,n,r);var i=this._origin,o=this._text,a={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in Tf)a[s]=Tf[s];o.head=$v("svg",a);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),o.bg=u?$v("rect",{width:this._width,height:this._height,fill:u})+zv("rect"):"",o.root=$v("g",Object(p.o)({},Uv,{transform:"translate("+i+")"})),o.foot=zv("g")+zv("svg"),this},om.background=function(){var t=am.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},om.svg=function(){var t=this._text;return t.head+t.defs+t.bg+t.root+t.body+t.foot},om._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},om.buildDefs=function(){var t,e="";for(var n in this._defs.gradient){var r=this._defs.gradient[n],i=r.stops;"radial"===r.gradient?(e+=$v(t="pattern",{id:"p_"+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e+=$v("rect",{width:"1",height:"1",fill:"url(#"+n+")"})+zv("rect"),e+=zv(t),e+=$v(t="radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e+=$v(t="linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(var o=0;o<i.length;++o)e+=$v("stop",{offset:i[o].offset,"stop-color":i[o].color})+zv("stop");e+=zv(t)}for(var a in this._defs.clipping){var s=this._defs.clipping[a];e+=$v("clipPath",{id:a}),s.path?e+=$v("path",{d:s.path})+zv("path"):e+=$v("rect",{x:0,y:0,width:s.width,height:s.height})+zv("rect"),e+=zv("clipPath")}return e?$v("defs")+e+zv("defs"):""},om.attr=function(t,e,n,r){var i=this,o={},a=function(t,e,n,r){o[r||t]=e};return Array.isArray(n)?n.forEach((function(t){return t(a,e,i)})):n(a,e,this),r&&function(t,e,n,r,i){if(null==e)return t;"bgrect"===r&&!1===n.interactive&&(t["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(t["pointer-events"]="none"),t.display="none",null!==e.fill))return t;"image"===r&&!1===e.smooth&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(t["font-family"]=ih(e),t["font-size"]=Jf(e)+"px",e.fontStyle&&(t["font-style"]=e.fontStyle),e.fontVariant&&(t["font-variant"]=e.fontVariant),e.fontWeight&&(t["font-weight"]=e.fontWeight));for(var o in Bv){var a=e[o],s=Bv[o];("transparent"!==a||"fill"!==s&&"stroke"!==s)&&null!=a&&(du(a)&&(a=pu(a,i.gradient,"")),t[s]=a)}}(o,e,t,r,this._defs),o},om.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then((function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t}))}return null},om.mark=function(t){var e=this,n=fh[t.marktype],r=n.tag,i=[Lv,n.attr],o="";o+=$v("g",Object(p.o)({class:Sh(t),"clip-path":t.clip?wl(this,t,t.group):null},Nv(t),{"pointer-events":"g"!==r&&!1===t.interactive?"none":null}));var a=function(a){var s=e.href(a);if(s&&(o+=$v("a",s)),o+=$v(r,e.attr(t,a,i,"g"!==r?r:null)),"text"===r){var u=eh(a);if(Object(p.A)(u))for(var c={x:0,dy:th(a)},l=0;l<u.length;++l)o+=$v("tspan",l?c:null)+sm(rh(a,u[l]))+zv("tspan");else o+=sm(rh(a,u))}else if("g"===r){var f=a.strokeForeground,h=a.fill,d=a.stroke;f&&d&&(a.stroke=null),o+=$v("path",e.attr(t,a,n.background,"bgrect"))+zv("path"),o+=$v("g",e.attr(t,a,n.content))+e.markGroup(a)+zv("g"),f&&d?(h&&(a.fill=null),a.stroke=d,o+=$v("path",e.attr(t,a,n.foreground,"bgrect"))+zv("path"),h&&(a.fill=h)):o+=$v("path",e.attr(t,a,n.foreground,"bgfore"))+zv("path")}o+=zv(r),s&&(o+=zv("a"))};return n.nested?t.items&&t.items.length&&a(t.items[0]):uf(t,a),o+zv("g")},om.markGroup=function(t){var e=this,n="";return uf(t,(function(t){n+=e.mark(t)})),n};var um={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},cm={};function lm(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(cm[t]=e,this):cm[t]}function fm(t,e,n){var r=[],i=(new xl).union(e),o=t.marktype;return o?hm(t,i,n,r):"group"===o?dm(t,i,n,r):Object(p.n)("Intersect scene must be mark node or group item.")}function hm(t,e,n,r){if(function(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}(t,e,n)){var i=t.items,o=t.marktype,a=i.length,s=0;if("group"===o)for(;s<a;++s)dm(i[s],e,n,r);else for(var u=fh[o].isect;s<a;++s){var c=i[s];pm(c,e,u)&&r.push(c)}}return r}function dm(t,e,n,r){n&&n(t.mark)&&pm(t,e,fh.group.isect)&&r.push(t);var i=t.items,o=i&&i.length;if(o){var a=t.x||0,s=t.y||0;e.translate(-a,-s);for(var u=0;u<o;++u)hm(i[u],e,n,r);e.translate(a,s)}return r}function pm(t,e,n){var r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}cm.canvas=cm.png={renderer:Gh,headless:Gh,handler:Bh},cm.svg={renderer:Hv,headless:im,handler:Qh},cm.none={};var gm=new xl,vm=function(t){var e=t.clip;if(Object(p.D)(e))e(Il(gm.clear()));else{if(!e)return;gm.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(gm)};function mm(t,e,n){return t===e||("path"===n?ym(t,e):t instanceof Date&&e instanceof Date?+t===+e:Object(p.E)(t)&&Object(p.E)(e)?Math.abs(t-e)<=1e-9:t&&e&&(Object(p.F)(t)||Object(p.F)(e))?null!=t&&null!=e&&function(t,e){var n,r,i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!mm(t[n],e[n],n))return!1;return typeof t===typeof e}(t,e):t==e)}function ym(t,e){return mm(dc(t),dc(e))}function bm(){bl(),hu=0}function wm(t){go.call(this,null,t)}function xm(t,e,n){return e(t.bounds.clear(),t,n)}Object(p.y)(wm,go).transform=function(t,e){var n,r=e.dataflow,i=t.mark,o=i.marktype,a=fh[o],s=a.bound,u=i.bounds;if(a.nested)i.items.length&&r.dirty(i.items[0]),u=xm(i,s),i.items.forEach((function(t){t.bounds.clear().union(u)}));else if("group"===o||t.modified())switch(e.visit(e.MOD,(function(t){return r.dirty(t)})),u.clear(),i.items.forEach((function(t){return u.union(xm(t,s))})),i.role){case"axis":case"legend":case"title":e.reflow()}else n=e.changed(e.REM),e.visit(e.ADD,(function(t){u.union(xm(t,s))})),e.visit(e.MOD,(function(t){n=n||u.alignsWith(t.bounds),r.dirty(t),u.union(xm(t,s))})),n&&(u.clear(),i.items.forEach((function(t){return u.union(t.bounds)})));return vm(i),e.modifies("bounds")};function _m(t){go.call(this,0,t)}function Om(t){go.call(this,null,t)}function km(t){go.call(this,null,t)}_m.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(p.y)(_m,go).transform=function(t,e){var n=function(t){var e=t._signals[":vega_identifier:"];e||(t._signals[":vega_identifier:"]=e=t.add(0));return e}(e.dataflow),r=n.value,i=t.as;return e.visit(e.ADD,(function(t){t[i]||(t[i]=++r)})),n.set(this.value=r),e},Object(p.y)(Om,go).transform=function(t,e){var n=this.value;n||((n=e.dataflow.scenegraph().mark(t.markdef,function(t){var e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}(t),t.index)).group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);var r="group"===n.marktype?kl:Ol;return e.visit(e.ADD,(function(t){return r.call(t,n)})),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e};var Sm=Object(p.y)(km,go),Em={parity:function(t){return t.filter((function(t,e){return e%2?t.opacity=0:1}))},greedy:function(t,e){var n;return t.filter((function(t,r){return r&&Am(n.bounds,t.bounds,e)?t.opacity=0:(n=t,1)}))}};function Am(t,e,n){return n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2)}function Cm(t,e){for(var n,r=1,i=t.length,o=t[0].bounds;r<i;o=n,++r)if(Am(o,n=t[r].bounds,e))return!0}function jm(t){var e=t.bounds;return e.width()>1&&e.height()>1}function Tm(t){return t.forEach((function(t){return t.opacity=1})),t}function Mm(t,e){return t.reflow(e.modified()).modifies("opacity")}function Rm(t){go.call(this,null,t)}Sm.transform=function(t,e){var n,r,i,o=Em[t.method]||Em.parity,a=e.materialize(e.SOURCE).source,s=t.separation||0;if(a&&a.length){if(!t.method)return t.modified("method")&&(Tm(a),e=Mm(e,t)),e;if((a=a.filter(jm)).length){if(t.sort&&(a=a.slice().sort(t.sort)),n=Tm(a),e=Mm(e,t),n.length>=3&&Cm(n,s)){do{n=o(n,s)}while(n.length>=3&&Cm(n,s));n.length<3&&!Object(p.U)(a).opacity&&(n.length>1&&(Object(p.U)(n).opacity=0),Object(p.U)(a).opacity=1)}return t.boundScale&&t.boundTolerance>=0&&(r=function(t,e,n){var r=t.range(),i=new xl;return e===su||"bottom"===e?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),function(t){return i.encloses(t.bounds)}}(t.boundScale,t.boundOrient,+t.boundTolerance),a.forEach((function(t){r(t)||(t.opacity=0)}))),i=n[0].mark.bounds.clear(),a.forEach((function(t){t.opacity&&i.union(t.bounds)})),e}}},Object(p.y)(Rm,go).transform=function(t,e){var n=e.dataflow;if(e.visit(e.ALL,(function(t){return n.dirty(t)})),e.fields&&e.fields.zindex){var r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}};var Dm=new xl;function Lm(t,e,n){return t[e]===n?0:(t[e]=n,1)}function Nm(t){var e=t.items[0].orient;return e===uu||e===cu}function Im(t,e,n,r){var i,o,a=e.items[0],s=a.datum,u=null!=a.translate?a.translate:.5,c=a.orient,l=function(t){var e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}(s),f=a.range,h=a.offset,d=a.position,p=a.minExtent,g=a.maxExtent,v=s.title&&a.items[l[2]].items[0],m=a.titlePadding,y=a.bounds,b=v&&nh(v),w=0,x=0;switch(Dm.clear().union(y),y.clear(),(i=l[0])>-1&&y.union(a.items[i].bounds),(i=l[1])>-1&&y.union(a.items[i].bounds),c){case su:w=d||0,x=-h,o=Math.max(p,Math.min(g,-y.y1)),y.add(0,-o).add(f,0),v&&Fm(t,v,o,m,b,0,-1,y);break;case uu:w=-h,x=d||0,o=Math.max(p,Math.min(g,-y.x1)),y.add(-o,0).add(0,f),v&&Fm(t,v,o,m,b,1,-1,y);break;case cu:w=n+h,x=d||0,o=Math.max(p,Math.min(g,y.x2)),y.add(0,0).add(o,f),v&&Fm(t,v,o,m,b,1,1,y);break;case"bottom":w=d||0,x=r+h,o=Math.max(p,Math.min(g,y.y2)),y.add(0,0).add(f,o),v&&Fm(t,v,o,m,0,0,1,y);break;default:w=a.x,x=a.y}return Ml(y.translate(w,x),a),Lm(a,"x",w+u)|Lm(a,"y",x+u)&&(a.bounds=Dm,t.dirty(a),a.bounds=y,t.dirty(a)),a.mark.bounds.clear().union(y)}function Fm(t,e,n,r,i,o,a,s){var u=e.bounds;if(e.auto){var c=a*(n+i+r),l=0,f=0;t.dirty(e),o?l=(e.x||0)-(e.x=c):f=(e.y||0)-(e.y=c),e.mark.bounds.clear().union(u.translate(-l,-f)),t.dirty(e)}s.union(u)}var Pm=n(3),$m=function(t,e){return Math.floor(Math.min(t,e))},zm=function(t,e){return Math.ceil(Math.max(t,e))};function Bm(t){return(new xl).set(0,0,t.width||0,t.height||0)}function Um(t){var e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function Wm(t,e,n){var r=Object(p.F)(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function Hm(t){return t<0?Math.ceil(-t):0}function Vm(t,e,n){var r,i,o,a,s,u,c,l,f,h,d,p=!n.nodirty,g="flush"===n.bounds?Bm:Um,v=Dm.set(0,0,0,0),m=Wm(n.align,"column"),y=Wm(n.align,fu),b=Wm(n.padding,"column"),w=Wm(n.padding,fu),x=n.columns||e.length,_=x<=0?1:Math.ceil(e.length/x),O=e.length,k=Array(O),S=Array(x),E=0,A=Array(O),C=Array(_),j=0,T=Array(O),M=Array(O),R=Array(O);for(i=0;i<x;++i)S[i]=0;for(i=0;i<_;++i)C[i]=0;for(i=0;i<O;++i)u=e[i],s=R[i]=g(u),u.x=u.x||0,T[i]=0,u.y=u.y||0,M[i]=0,o=i%x,a=~~(i/x),E=Math.max(E,c=Math.ceil(s.x2)),j=Math.max(j,l=Math.ceil(s.y2)),S[o]=Math.max(S[o],c),C[a]=Math.max(C[a],l),k[i]=b+Hm(s.x1),A[i]=w+Hm(s.y1),p&&t.dirty(e[i]);for(i=0;i<O;++i)i%x===0&&(k[i]=0),i<x&&(A[i]=0);if("each"===m)for(o=1;o<x;++o){for(d=0,i=o;i<O;i+=x)d<k[i]&&(d=k[i]);for(i=o;i<O;i+=x)k[i]=d+S[o-1]}else if("all"===m){for(d=0,i=0;i<O;++i)i%x&&d<k[i]&&(d=k[i]);for(i=0;i<O;++i)i%x&&(k[i]=d+E)}else for(m=!1,o=1;o<x;++o)for(i=o;i<O;i+=x)k[i]+=S[o-1];if("each"===y)for(a=1;a<_;++a){for(d=0,r=(i=a*x)+x;i<r;++i)d<A[i]&&(d=A[i]);for(i=a*x;i<r;++i)A[i]=d+C[a-1]}else if("all"===y){for(d=0,i=x;i<O;++i)d<A[i]&&(d=A[i]);for(i=x;i<O;++i)A[i]=d+j}else for(y=!1,a=1;a<_;++a)for(r=(i=a*x)+x;i<r;++i)A[i]+=C[a-1];for(f=0,i=0;i<O;++i)f=k[i]+(i%x?f:0),T[i]+=f-e[i].x;for(o=0;o<x;++o)for(h=0,i=o;i<O;i+=x)h+=A[i],M[i]+=h-e[i].y;if(m&&Wm(n.center,"column")&&_>1)for(i=0;i<O;++i)(f=(s="all"===m?E:S[i%x])-R[i].x2-e[i].x-T[i])>0&&(T[i]+=f/2);if(y&&Wm(n.center,fu)&&1!==x)for(i=0;i<O;++i)(h=(s="all"===y?j:C[~~(i/x)])-R[i].y2-e[i].y-M[i])>0&&(M[i]+=h/2);for(i=0;i<O;++i)v.union(R[i].translate(T[i],M[i]));switch(f=Wm(n.anchor,"x"),h=Wm(n.anchor,"y"),Wm(n.anchor,"column")){case lu:f-=v.width();break;case"middle":f-=v.width()/2}switch(Wm(n.anchor,fu)){case lu:h-=v.height();break;case"middle":h-=v.height()/2}for(f=Math.round(f),h=Math.round(h),v.clear(),i=0;i<O;++i)e[i].mark.bounds.clear();for(i=0;i<O;++i)(u=e[i]).x+=T[i]+=f,u.y+=M[i]+=h,v.union(u.mark.bounds.union(u.bounds.translate(T[i],M[i]))),p&&t.dirty(u);return v}function qm(t,e,n){var r,i,o,a,s,u,c,l=function(t){for(var e,n,r,i,o,a,s,u=t.items,c=u.length,l=0,f={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};l<c;++l)if(s=(a=u[l]).items,"group"===a.marktype)switch(a.role){case"axis":case"legend":case"title":break;case"row-header":(e=f.rowheaders).push.apply(e,Object(Pm.a)(s));break;case"row-footer":(n=f.rowfooters).push.apply(n,Object(Pm.a)(s));break;case"column-header":(r=f.colheaders).push.apply(r,Object(Pm.a)(s));break;case"column-footer":(i=f.colfooters).push.apply(i,Object(Pm.a)(s));break;case"row-title":f.rowtitle=s[0];break;case"column-title":f.coltitle=s[0];break;default:(o=f.marks).push.apply(o,Object(Pm.a)(s))}return f}(e),f=l.marks,h="flush"===n.bounds?Gm:Km,d=n.offset,p=n.columns||f.length,g=p<=0?1:Math.ceil(f.length/p),v=g*p,m=Vm(t,f,n);m.empty()&&m.set(0,0,0,0),l.rowheaders&&(u=Wm(n.headerBand,fu,null),r=Ym(t,l.rowheaders,f,p,g,-Wm(d,"rowHeader"),$m,0,h,"x1",0,p,1,u)),l.colheaders&&(u=Wm(n.headerBand,"column",null),i=Ym(t,l.colheaders,f,p,p,-Wm(d,"columnHeader"),$m,1,h,"y1",0,1,p,u)),l.rowfooters&&(u=Wm(n.footerBand,fu,null),o=Ym(t,l.rowfooters,f,p,g,Wm(d,"rowFooter"),zm,0,h,"x2",p-1,p,1,u)),l.colfooters&&(u=Wm(n.footerBand,"column",null),a=Ym(t,l.colfooters,f,p,p,Wm(d,"columnFooter"),zm,1,h,"y2",v-p,1,p,u)),l.rowtitle&&(s=Wm(n.titleAnchor,fu),c=Wm(d,"rowTitle"),c=s===lu?o+c:r-c,u=Wm(n.titleBand,fu,.5),Qm(t,l.rowtitle,c,0,m,u)),l.coltitle&&(s=Wm(n.titleAnchor,"column"),c=Wm(d,"columnTitle"),c=s===lu?a+c:i-c,u=Wm(n.titleBand,"column",.5),Qm(t,l.coltitle,c,1,m,u))}function Gm(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function Km(t,e){return t.bounds[e]}function Ym(t,e,n,r,i,o,a,s,u,c,l,f,h,d){var p,g,v,m,y,b,w,x,_,O=n.length,k=0,S=0;if(!O)return k;for(p=l;p<O;p+=f)n[p]&&(k=a(k,u(n[p],c)));if(!e.length)return k;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),k+=o,g=0,m=e.length;g<m;++g)t.dirty(e[g]),e[g].mark.bounds.clear();for(p=l,g=0,m=e.length;g<m;++g,p+=f){for(y=(b=e[g]).mark.bounds,v=p;v>=0&&null==(w=n[v]);v-=h);s?(x=null==d?w.x:Math.round(w.bounds.x1+d*w.bounds.width()),_=k):(x=k,_=null==d?w.y:Math.round(w.bounds.y1+d*w.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),_-(b.y||0))),b.x=x,b.y=_,t.dirty(b),S=a(S,y[c])}return S}function Qm(t,e,n,r,i,o){if(e){t.dirty(e);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),e.bounds.translate(a-(e.x||0),s-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=a,e.y=s,t.dirty(e)}}function Xm(t,e,n,r,i,o,a){var s=function(t,e){var n=t[e]||{};return function(e,r){return null!=n[e]?n[e]:null!=t[e]?t[e]:r}}(n,e),u=function(t,e){var n=-1/0;return t.forEach((function(t){null!=t.offset&&(n=Math.max(n,t.offset))})),n>-1/0?n:e}(t,s("offset",0)),c=s("anchor","start"),l=c===lu?1:"middle"===c?.5:0,f={align:"each",bounds:s("bounds","flush"),columns:"vertical"===s("direction")?1:t.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(e){case uu:f.anchor={x:Math.floor(r.x1)-u,column:lu,y:l*(a||r.height()+2*r.y1),row:c};break;case cu:f.anchor={x:Math.ceil(r.x2)+u,y:l*(a||r.height()+2*r.y1),row:c};break;case su:f.anchor={y:Math.floor(i.y1)-u,row:lu,x:l*(o||i.width()+2*i.x1),column:c};break;case"bottom":f.anchor={y:Math.ceil(i.y2)+u,x:l*(o||i.width()+2*i.x1),column:c};break;case"top-left":f.anchor={x:u,y:u};break;case"top-right":f.anchor={x:o-u,y:u,column:lu};break;case"bottom-left":f.anchor={x:u,y:a-u,row:lu};break;case"bottom-right":f.anchor={x:o-u,y:a-u,column:lu,row:lu}}return f}function Zm(t,e){var n,r,i=e.items[0],o=i.datum,a=i.orient,s=i.bounds,u=i.x,c=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),function(t,e,n){var r=e.padding,i=r-n.x,o=r-n.y;if(e.datum.title){var a=e.items[1].items[0],s=a.anchor,u=e.titlePadding||0,c=r-a.x,l=r-a.y;switch(a.orient){case uu:i+=Math.ceil(a.bounds.width())+u;break;case cu:case"bottom":break;default:o+=a.bounds.height()+u}switch((i||o)&&ty(t,n,i,o),a.orient){case uu:l+=Jm(e,n,a,s,1,1);break;case cu:c+=Jm(e,n,a,lu,0,0)+u,l+=Jm(e,n,a,s,1,1);break;case"bottom":c+=Jm(e,n,a,s,0,0),l+=Jm(e,n,a,lu,-1,0,1)+u;break;default:c+=Jm(e,n,a,s,0,0)}(c||l)&&ty(t,a,c,l),(c=Math.round(a.bounds.x1-r))<0&&(ty(t,n,-c,0),ty(t,a,-c,0))}else(i||o)&&ty(t,n,i,o)}(t,i,i.items[0].items[0]),s=function(t,e){return t.items.forEach((function(t){return e.union(t.bounds)})),e.x1=t.padding,e.y1=t.padding,e}(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),"symbol"===o.type&&function(t){var e=t.reduce((function(t,e){return t[e.column]=Math.max(e.bounds.x2-e.x,t[e.column]||0),t}),{});t.forEach((function(t){t.width=e[t.column],t.height=t.bounds.y2-t.y}))}(i.items[0].items[0].items[0].items),"none"!==a&&(i.x=u=0,i.y=c=0),i.width=n,i.height=r,Ml(s.set(u,c,u+n,c+r),i),i.mark.bounds.clear().union(s),i}function Jm(t,e,n,r,i,o,a){var s="symbol"!==t.datum.type,u=n.datum.vgrad,c=(!s||!o&&u||a?e:e.items[0]).bounds[i?"y2":"x2"]-t.padding,l=u&&o?c:0,f=u&&o?0:c,h=i<=0?0:nh(n);return Math.round("start"===r?l:r===lu?f-h:.5*(c-h))}function ty(t,e,n,r){e.x+=n,e.y+=r,e.bounds.translate(n,r),e.mark.bounds.translate(n,r),t.dirty(e)}function ey(t){go.call(this,null,t)}function ny(t){go.call(this,null,t)}function ry(t){go.call(this,null,t)}function iy(){return E({})}function oy(t){go.call(this,null,t)}function ay(t){go.call(this,[],t)}Object(p.y)(ey,go).transform=function(t,e){var n,r=e.dataflow;return t.mark.items.forEach((function(e){t.layout&&qm(r,e,t.layout),function(t,e,n){var r,i,o,a,s,u=e.items,c=Math.max(0,e.width||0),l=Math.max(0,e.height||0),f=(new xl).set(0,0,c,l),h=f.clone(),d=f.clone(),p=[];for(a=0,s=u.length;a<s;++a)switch((i=u[a]).role){case"axis":(Nm(i)?h:d).union(Im(t,i,c,l));break;case"title":r=i;break;case"legend":p.push(Zm(t,i));break;case"frame":case"scope":case"row-header":case"row-footer":case"row-title":case"column-header":case"column-footer":case"column-title":h.union(i.bounds),d.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){var g={};for(var v in p.forEach((function(t){"none"!==(o=t.orient||cu)&&(g[o]||(g[o]=[])).push(t)})),g){var m=g[v];Vm(t,m,Xm(m,v,n.legends,h,d,c,l))}p.forEach((function(e){var r=e.bounds;if(r.equals(e._bounds)||(e.bounds=e._bounds,t.dirty(e),e.bounds=r,t.dirty(e)),n.autosize&&"fit"===n.autosize.type)switch(e.orient){case uu:case cu:f.add(r.x1,0).add(r.x2,0);break;case su:case"bottom":f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(h).union(d),r&&f.union(function(t,e,n,r,i){var o,a=e.items[0],s=a.frame,u=a.orient,c=a.anchor,l=a.offset,f=a.padding,h=a.items[0].items[0],d=a.items[1]&&a.items[1].items[0],p=u===uu||u===cu?r:n,g=0,v=0,m=0,y=0,b=0;if("group"!==s?u===uu?(g=i.y2,p=i.y1):u===cu?(g=i.y1,p=i.y2):(g=i.x1,p=i.x2):u===uu&&(g=r,p=0),o="start"===c?g:c===lu?p:(g+p)/2,d&&d.text){switch(u){case su:case"bottom":b=h.bounds.height()+f;break;case uu:y=h.bounds.width()+f;break;case cu:y=-h.bounds.width()-f}Dm.clear().union(d.bounds),Dm.translate(y-(d.x||0),b-(d.y||0)),Lm(d,"x",y)|Lm(d,"y",b)&&(t.dirty(d),d.bounds.clear().union(Dm),d.mark.bounds.clear().union(Dm),t.dirty(d)),Dm.clear().union(d.bounds)}else Dm.clear();switch(Dm.union(h.bounds),u){case su:v=o,m=i.y1-Dm.height()-l;break;case uu:v=i.x1-Dm.width()-l,m=o;break;case cu:v=i.x2+Dm.width()+l,m=o;break;case"bottom":v=o,m=i.y2+l;break;default:v=a.x,m=a.y}return Lm(a,"x",v)|Lm(a,"y",m)&&(Dm.translate(v,m),t.dirty(a),a.bounds.clear().union(Dm),e.bounds.clear().union(Dm),t.dirty(a)),a.bounds}(t,r,c,l,f));e.clip&&f.set(0,0,e.width||0,e.height||0);!function(t,e,n,r){var i=r.autosize||{},o=i.type;if(t._autosize<1||!o)return;var a=t._width,s=t._height,u=Math.max(0,e.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,Math.ceil(n.x2-u)),f=Math.max(0,e.height||0),h=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.y2-f));if("padding"===i.contains){var p=t.padding();a-=p.left+p.right,s-=p.top+p.bottom}"none"===o?(c=0,h=0,u=a,f=s):"fit"===o?(u=Math.max(0,a-c-l),f=Math.max(0,s-h-d)):"fit-x"===o?(u=Math.max(0,a-c-l),s=f+h+d):"fit-y"===o?(a=u+c+l,f=Math.max(0,s-h-d)):"pad"===o&&(a=u+c+l,s=f+h+d);t._resizeView(a,s,u,f,[c,h],i.resize)}(t,e,f,n)}(r,e,t)})),(n=t.mark.group)&&"legend-entry"!==n.mark.role?e.reflow():e},Object(p.y)(ny,go).transform=function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=this.value,o=t.scale,a=mv(o,null==t.count?t.values?t.values.length:10:t.count,t.minstep),s=t.format||wv(n,o,a,t.formatSpecifier,t.formatType,!!t.values),u=t.values?yv(o,t.values,a):bv(o,a);return i&&(r.rem=i),i=u.map((function(t,e){return E({index:e/(u.length-1||1),value:t,label:s(t)})})),t.extra&&i.length&&i.push(E({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r},Object(p.y)(ry,go).transform=function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||iy,o=t.key||k,a=this.value;return Object(p.A)(r.encode)&&(r.encode=null),a&&(t.modified("key")||e.modified(o))&&Object(p.n)("DataJoin does not support modified key function or fields."),a||(e=e.addAll(),this.value=a=function(t){var e=Object(p.s)().test((function(t){return t.exit}));return e.lookup=function(n){return e.get(t(n))},e}(o)),e.visit(e.ADD,(function(t){var e=o(t),n=a.get(e);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(n=i(t),a.set(e,n),r.add.push(n)),n.datum=t,n.exit=!1})),e.visit(e.MOD,(function(t){var e=o(t),n=a.get(e);n&&(n.datum=t,r.mod.push(n))})),e.visit(e.REM,(function(t){var e=o(t),n=a.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)})),e.changed(e.ADD_MOD)&&r.modifies("datum"),(e.clean()||t.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r},Object(p.y)(oy,go).transform=function(t,e){var n=e.fork(e.ADD_REM),r=t.mod||!1,i=t.encoders,o=e.encode;if(Object(p.A)(o)){if(!n.changed()&&!o.every((function(t){return i[t]})))return e.StopPropagation;o=o[0],n.encode=null}var a="enter"===o,s=i.update||p.r,u=i.enter||p.r,c=i.exit||p.r,l=(o&&!a?i[o]:s)||p.r;if(e.changed(e.ADD)&&(e.visit(e.ADD,(function(e){u(e,t),s(e,t)})),n.modifies(u.output),n.modifies(s.output),l!==p.r&&l!==s&&(e.visit(e.ADD,(function(e){l(e,t)})),n.modifies(l.output))),e.changed(e.REM)&&c!==p.r&&(e.visit(e.REM,(function(e){c(e,t)})),n.modifies(c.output)),a||l!==p.r){var f=e.MOD|(t.modified()?e.REFLOW:0);a?(e.visit(f,(function(e){var i=u(e,t)||r;(l(e,t)||i)&&n.mod.push(e)})),n.mod.length&&n.modifies(u.output)):e.visit(f,(function(e){(l(e,t)||r)&&n.mod.push(e)})),n.mod.length&&n.modifies(l.output)}return n.changed()?n:e.StopPropagation},Object(p.y)(ay,go).transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n,r,i,o,a,s=e.dataflow.locale(),u=e.fork(e.NO_SOURCE|e.NO_FIELDS),c=this.value,l=t.type||"symbol",f=t.scale,h=+t.limit,d=mv(f,null==t.count?5:t.count,t.minstep),g=!!t.values||"symbol"===l,v=t.format||Sv(s,f,d,l,t.formatSpecifier,t.formatType,g),m=t.values||kv(f,d);return c&&(u.rem=c),"symbol"===l?(h&&m.length>h?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),c=m.slice(0,h-1),a=!0):c=m,Object(p.D)(i=t.size)?(t.values||0!==f(c[0])||(c=c.slice(1)),o=c.reduce((function(e,n){return Math.max(e,i(n,t))}),0)):i=Object(p.l)(o=i||8),c=c.map((function(e,n){return E({index:n,label:v(e,n,c),value:e,offset:o,size:i(e,t)})})),a&&(a=m[c.length],c.push(E({index:c.length,label:"\u2026".concat(m.length-c.length," entries"),value:a,offset:o,size:i(a,t)})))):"gradient"===l?(n=f.domain(),r=av(f,n[0],Object(p.U)(n)),m.length<3&&!t.values&&n[0]!==Object(p.U)(n)&&(m=[n[0],Object(p.U)(n)]),c=m.map((function(t,e){return E({index:e,label:v(t,e,m),value:t,perc:r(t)})}))):(i=m.length-1,r=function(t){var e=t.domain(),n=e.length-1,r=+e[0],i=+Object(p.U)(e),o=i-r;if("threshold"===t.type){var a=n?o/n:.1;o=(i+=a)-(r-=a)}return function(t){return(t-r)/o}}(f),c=m.map((function(t,e){return E({index:e,label:v(t,e,m),value:t,perc:e?r(t):0,perc2:e===i?1:r(m[e+1])})}))),u.source=c,u.add=c,this.value=c,u};var sy=Object(p.s)({line:dy,"line-radial":function(t,e,n,r){return dy(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},arc:py,"arc-radial":function(t,e,n,r){return py(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},curve:gy,"curve-radial":function(t,e,n,r){return gy(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(t,e,n,r){return"M"+t+","+e+"V"+r+"H"+n},"orthogonal-vertical":function(t,e,n,r){return"M"+t+","+e+"H"+n+"V"+r},"orthogonal-radial":function(t,e,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(n),s=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*i+","+e*o+"A"+e+","+e+" 0 0,"+(u?1:0)+" "+e*a+","+e*s+"L"+r*a+","+r*s},"diagonal-horizontal":function(t,e,n,r){var i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(t,e,n,r){var i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(t,e,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(n),s=Math.sin(n),u=(e+r)/2;return"M"+e*i+","+e*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s}});function uy(t){return t.source.x}function cy(t){return t.source.y}function ly(t){return t.target.x}function fy(t){return t.target.y}function hy(t){go.call(this,{},t)}function dy(t,e,n,r){return"M"+t+","+e+"L"+n+","+r}function py(t,e,n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o)/2;return"M"+t+","+e+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r}function gy(t,e,n,r){var i=n-t,o=r-e,a=.2*(i+o),s=.2*(o-i);return"M"+t+","+e+"C"+(t+a)+","+(e+s)+" "+(n+s)+","+(r-a)+" "+n+","+r}function vy(t,e){var n=0;if(void 0===e){var r,i=Object(Do.a)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;(o=+o)&&(n+=o)}}catch(l){i.e(l)}finally{i.f()}}else{var a,s=-1,u=Object(Do.a)(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;(c=+e(c,++s,t))&&(n+=c)}}catch(l){u.e(l)}finally{u.f()}}return n}function my(t){go.call(this,null,t)}hy.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(p.y)(hy,go).transform=function(t,e){var n=t.sourceX||uy,r=t.sourceY||cy,i=t.targetX||ly,o=t.targetY||fy,a=t.as||"path",s=t.orient||"vertical",u=t.shape||"line",c=sy.get(u+"-"+s)||sy.get(u);return c||Object(p.n)("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,(function(t){t[a]=c(n(t),r(t),i(t),o(t))})),e.reflow(t.modified()).modifies(a)},my.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(p.y)(my,go).transform=function(t,e){var n,r,i,o=t.as||["startAngle","endAngle"],a=o[0],s=o[1],u=t.field||p.O,c=t.startAngle||0,l=null!=t.endAngle?t.endAngle:2*Math.PI,f=e.source,h=f.map(u),d=h.length,g=c,v=(l-c)/vy(h),m=zs(d);for(t.sort&&m.sort((function(t,e){return h[t]-h[e]})),n=0;n<d;++n)i=h[m[n]],(r=f[m[n]])[a]=g,r[s]=g+=i*v;return this.value=h,e.reflow(t.modified()).modifies(o)};function yy(t){return ig(t)&&"sequential"!==t}var by=Object(p.db)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function wy(t){go.call(this,null,t),this.modified(!0)}function xy(t,e,n){sg(t)&&(Math.abs(e.reduce((function(t,e){return t+(e<0?-1:e>0?1:0)}),0))!==e.length&&n.warn("Log scale domain includes zero: "+Object(p.Z)(e)));return e}function _y(t,e,n){return Object(p.D)(t)&&(e||n)?rv(t,Oy(e||[0,1],n)):t}function Oy(t,e){return e?t.slice().reverse():t}function ky(t){go.call(this,null,t)}Object(p.y)(wy,go).transform=function(t,e){var n=e.dataflow,r=this.value,i=function(t){var e,n=t.type,r="";if("sequential"===n)return"sequential-linear";(function(t){var e=t.type;return ig(e)&&e!==ed&&e!==nd&&(t.scheme||t.range&&t.range.length&&t.range.every(p.H))})(t)&&(e=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0,r=2===e?"sequential-":3===e?"diverging-":"");return(r+n||"linear").toLowerCase()}(t);for(i in r&&i===r.type||(this.value=r=eg(i)()),t)if(!by[i]){if("padding"===i&&yy(r.type))continue;Object(p.D)(r[i])?r[i](t[i]):n.warn("Unsupported scale property: "+i)}return function(t,e,n){var r=t.type,i=e.round||!1,o=e.range;if(null!=e.rangeStep)o=function(t,e,n){"band"!==t&&"point"!==t&&Object(p.n)("Only band and point scales support rangeStep.");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i="point"===t?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*Jh(n,i,r)]}(r,e,n);else if(e.scheme&&(o=function(t,e,n){var r,i,o=e.schemeExtent;Object(p.A)(e.scheme)?i=iv(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),(i=fv(r))||Object(p.n)("Unrecognized scheme name: ".concat(e.scheme)));return n="threshold"===t?n+1:"bin-ordinal"===t?n-1:"quantile"===t||"quantize"===t?+e.schemeCount||5:n,ug(t)?_y(i,o,e.reverse):Object(p.D)(i)?ov(_y(i,o),n):"ordinal"===t?i:i.slice(0,n)}(r,e,n),Object(p.D)(o))){if(t.interpolator)return t.interpolator(o);Object(p.n)("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&ug(r))return t.interpolator(iv(Oy(o,e.reverse),e.interpolate,e.interpolateGamma));o&&e.interpolate&&t.interpolate?t.interpolate(sv(e.interpolate,e.interpolateGamma)):Object(p.D)(t.round)?t.round(i):Object(p.D)(t.rangeRound)&&t.interpolate(i?vp:gp);o&&t.range(Oy(o,e.reverse))}(r,t,function(t,e,n){var r=e.bins;if(r&&!Object(p.A)(r)){var i=t.domain(),o=i[0],a=Object(p.U)(i),s=null==r.start?o:r.start,u=null==r.stop?a:r.stop,c=r.step;c||Object(p.n)("Scale bins parameter missing step property."),s<o&&(s=c*Math.ceil(o/c)),u>a&&(u=c*Math.floor(a/c)),r=zs(s,u+c/2,c)}r?t.bins=r:t.bins&&delete t.bins;"bin-ordinal"===t.type&&(r?e.domain||e.domainRaw||(t.domain(r),n=r.length):t.bins=t.domain());return n}(r,t,function(t,e,n){var r=function(t,e,n){return e?(t.domain(xy(t.type,e,n)),e.length):-1}(t,e.domainRaw,n);if(r>-1)return r;var i,o,a=e.domain,s=t.type,u=e.zero||void 0===e.zero&&function(t){var e=t.type;return!t.bins&&("linear"===e||"pow"===e||"sqrt"===e)}(t);if(!a)return 0;yy(s)&&e.padding&&a[0]!==Object(p.U)(a)&&(a=function(t,e,n,r,i,o){var a=Math.abs(Object(p.U)(n)-n[0]),s=a/(a-2*r),u=t===td?Object(p.mb)(e,null,s):"sqrt"===t?Object(p.nb)(e,null,s,.5):"pow"===t?Object(p.nb)(e,null,s,i||1):"symlog"===t?Object(p.ob)(e,null,s,o||1):Object(p.lb)(e,null,s);return(e=e.slice())[0]=u[0],e[e.length-1]=u[1],e}(s,a,e.range,e.padding,e.exponent,e.constant));if((u||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(a=a.slice()).length-1||1,u&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=e.domainMin&&(a[0]=e.domainMin),null!=e.domainMax&&(a[i]=e.domainMax),null!=e.domainMid)){var c=(o=e.domainMid)>a[i]?i+1:o<a[0]?0:i;c!==i&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(c,0,o)}t.domain(xy(s,a,n)),"ordinal"===s&&t.unknown(e.domainImplicit?ld:void 0);e.nice&&t.nice&&t.nice(!0!==e.nice&&mv(t,e.nice)||null);return a.length}(r,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)},Object(p.y)(ky,go).transform=function(t,e){var n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(T(t.sort)),this.modified(n),e};var Sy=["y0","y1"];function Ey(t){go.call(this,null,t)}function Ay(t,e,n,r,i){for(var o,a=(e-t.sum)/2,s=t.length,u=0;u<s;++u)(o=t[u])[r]=a,o[i]=a+=Math.abs(n(o))}function Cy(t,e,n,r,i){for(var o,a=1/t.sum,s=0,u=t.length,c=0,l=0;c<u;++c)(o=t[c])[r]=s,o[i]=s=a*(l+=Math.abs(n(o)))}function jy(t,e,n,r,i){for(var o,a,s=0,u=0,c=t.length,l=0;l<c;++l)(o=+n(a=t[l]))<0?(a[r]=u,a[i]=u+=o):(a[r]=s,a[i]=s+=o)}function Ty(){}Ey.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:Sy}]},Object(p.y)(Ey,go).transform=function(t,e){var n,r,i,o,a=t.as||Sy,s=a[0],u=a[1],c=T(t.sort),l=t.field||p.O,f="center"===t.offset?Ay:"normalize"===t.offset?Cy:jy;for(n=function(t,e,n,r){var i,o,a,s,u,c,l,f,h,d=[],p=function(t){return t(u)};if(null==e)d.push(t.slice());else for(i={},o=0,a=t.length;o<a;++o)u=t[o],c=e.map(p),(l=i[c])||(i[c]=l=[],d.push(l)),l.push(u);for(c=0,h=0,s=d.length;c<s;++c){for(l=d[c],o=0,f=0,a=l.length;o<a;++o)f+=Math.abs(r(l[o]));l.sum=f,f>h&&(h=f),n&&l.sort(n)}return d.max=h,d}(e.source,t.groupby,c,l),r=0,i=n.length,o=n.max;r<i;++r)f(n[r],o,l,s,u);return e.reflow(t.modified()).modifies(a)};var My=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Ry=function(){var t=1,e=1,n=a;function r(t,e){return e.map((function(e){return i(t,e)}))}function i(r,i){var a=[],s=[];return function(n,r,i){var a,s,u,c,l,f,h=new Array,d=new Array;a=s=-1,c=n[0]>=r,My[c<<1].forEach(p);for(;++a<t-1;)u=c,c=n[a+1]>=r,My[u|c<<1].forEach(p);My[c<<0].forEach(p);for(;++s<e-1;){for(a=-1,c=n[s*t+t]>=r,l=n[s*t]>=r,My[c<<1|l<<2].forEach(p);++a<t-1;)u=c,c=n[s*t+t+a+1]>=r,f=l,l=n[s*t+a+1]>=r,My[u|c<<1|l<<2|f<<3].forEach(p);My[c|l<<3].forEach(p)}a=-1,l=n[s*t]>=r,My[l<<2].forEach(p);for(;++a<t-1;)f=l,l=n[s*t+a+1]>=r,My[l<<2|f<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+a,t[0][1]+s],u=[t[1][0]+a,t[1][1]+s],c=o(r),l=o(u);(e=d[c])?(n=h[l])?(delete d[e.end],delete h[n.start],e===n?(e.ring.push(u),i(e.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(u),d[e.end=l]=e):(e=h[l])?(n=d[c])?(delete h[e.start],delete d[n.end],e===n?(e.ring.push(u),i(e.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=c]=e):h[c]=d[l]={start:c,end:l,ring:[r,u]}}My[l<<3].forEach(p)}(r,i,(function(t){n(t,r,i),function(t){var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];for(;++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?a.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,r=a.length;n<r;++n)if(-1!==Dy((e=a[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:a}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function a(n,r,i){n.forEach((function(n){var o,a=n[0],s=n[1],u=0|a,c=0|s,l=r[c*t+u];a>0&&a<t&&u===a&&(o=r[c*t+u-1],n[0]=a+(i-o)/(l-o)-.5),s>0&&s<e&&c===s&&(o=r[(c-1)*t+u],n[1]=s+(i-o)/(l-o)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.floor(n[0]),o=Math.floor(n[1]);return i>=0&&o>=0||Object(p.n)("invalid size"),t=i,e=o,r},r.smooth=function(t){return arguments.length?(n=t?a:Ty,r):n===a},r};function Dy(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=Ly(t,e[r]))return n;return 0}function Ly(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],c=u[0],l=u[1],f=t[s],h=f[0],d=f[1];if(Ny(u,f,e))return 0;l>r!==d>r&&n<(h-c)*(r-l)/(d-l)+c&&(i=-i)}return i}function Ny(t,e,n){var r,i,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=n[r],a=e[r],i<=o&&o<=a||a<=o&&o<=i)}var Iy=function(t,e,n){return function(r){var i=Object(p.p)(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,u=e?zt(o,a,t):s/(t+1);return zs(u,a,u)}};function Fy(t){go.call(this,null,t)}function Py(t,e,n,r,i){var o=t.x1||0,a=t.y1||0,s=e*n<0;function u(t){t.forEach(c)}function c(t){s&&t.reverse(),t.forEach(l)}function l(t){t[0]=(t[0]-o)*e+r,t[1]=(t[1]-a)*n+i}return function(t){return t.coordinates.forEach(u),t}}function $y(t,e,n){var r=t>=0?t:qo(e,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function zy(t){return Object(p.D)(t)?t:Object(p.l)(+t)}Fy.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Object(p.y)(Fy,go).transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=t.field||p.x,o=Ry().smooth(!1!==t.smooth),a=t.thresholds||function(t,e,n){var r=Iy(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(t.map((function(t){return Io(e(t).values)})))}(r,i,t),s=null===t.as?null:t.as||"contour",u=[];return r.forEach((function(e){var n=i(e),r=o.size([n.width,n.height])(n.values,Object(p.A)(a)?a:a(n.values));!function(t,e,n,r){var i=r.scale||e.scale,o=r.translate||e.translate;Object(p.D)(i)&&(i=i(n,r));Object(p.D)(o)&&(o=o(n,r));if((1===i||null==i)&&!o)return;var a=(Object(p.E)(i)?i:i[0])||1,s=(Object(p.E)(i)?i:i[1])||1,u=o&&o[0]||0,c=o&&o[1]||0;t.forEach(Py(e,a,s,u,c))}(r,n,e,t),r.forEach((function(t){u.push(C(e,E(null!=s?Object(fe.a)({},s,t):t)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n};var By=function(){var t=function(t){return t[0]},e=function(t){return t[1]},n=p.O,r=[-1,-1],i=960,o=500,a=2;function s(s,u){var c=$y(r[0],s,t)>>a,l=$y(r[1],s,e)>>a,f=c?c+2:0,h=l?l+2:0,d=2*f+(i>>a),p=2*h+(o>>a),g=new Float32Array(d*p),v=new Float32Array(d*p),m=g;s.forEach((function(r){var i=f+(+t(r)>>a),o=h+(+e(r)>>a);i>=0&&i<d&&o>=0&&o<p&&(g[i+o*d]+=+n(r))})),c>0&&l>0?(Uy(d,p,g,v,c),Wy(d,p,v,g,l),Uy(d,p,g,v,c),Wy(d,p,v,g,l),Uy(d,p,g,v,c),Wy(d,p,v,g,l)):c>0?(Uy(d,p,g,v,c),Uy(d,p,v,g,c),Uy(d,p,g,v,c),m=v):l>0&&(Wy(d,p,g,v,l),Wy(d,p,v,g,l),Wy(d,p,g,v,l),m=v);for(var y=u?Math.pow(2,-2*a):1/vy(m),b=0,w=d*p;b<w;++b)m[b]*=y;return{values:m,scale:1<<a,width:d,height:p,x1:f,y1:h,x2:f+(i>>a),y2:h+(o>>a)}}return s.x=function(e){return arguments.length?(t=zy(e),s):t},s.y=function(t){return arguments.length?(e=zy(t),s):e},s.weight=function(t){return arguments.length?(n=zy(t),s):n},s.size=function(t){if(!arguments.length)return[i,o];var e=+t[0],n=+t[1];return e>=0&&n>=0||Object(p.n)("invalid size"),i=e,o=n,s},s.cellSize=function(t){return arguments.length?((t=+t)>=1||Object(p.n)("invalid cell size"),a=Math.floor(Math.log(t)/Math.LN2),s):1<<a},s.bandwidth=function(t){return arguments.length?(1===(t=Object(p.i)(t)).length&&(t=[+t[0],+t[0]]),2!==t.length&&Object(p.n)("invalid bandwidth"),r=t,s):r},s};function Uy(t,e,n,r,i){for(var o=1+(i<<1),a=0;a<e;++a)for(var s=0,u=0;s<t+i;++s)s<t&&(u+=n[s+a*t]),s>=i&&(s>=o&&(u-=n[s-o+a*t]),r[s-i+a*t]=u/Math.min(s+1,t-1+o-s,o))}function Wy(t,e,n,r,i){for(var o=1+(i<<1),a=0;a<t;++a)for(var s=0,u=0;s<e+i;++s)s<e&&(u+=n[a+s*t]),s>=i&&(s>=o&&(u-=n[a+(s-o)*t]),r[a+(s-i)*t]=u/Math.min(s+1,e-1+o-s,o))}function Hy(t){go.call(this,null,t)}Hy.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var Vy=Object(p.y)(Hy,go),qy=["x","y","weight","size","cellSize","bandwidth"];function Gy(t,e){return qy.forEach((function(n){return null!=e[n]?t[n](e[n]):0})),t}function Ky(t){go.call(this,null,t)}Vy.transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=function(t,e){var n,r,i,o,a,s,u=[],c=function(t){return t(o)};if(null==e)u.push(t);else for(n={},r=0,i=t.length;r<i;++r)o=t[r],a=e.map(c),(s=n[a])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}(e.materialize(e.SOURCE).source,t.groupby),o=(t.groupby||[]).map(p.h),a=Gy(By(),t),s=t.as||"grid";return n=i.map((function(e){return E(function(t,e){for(var n=0;n<o.length;++n)t[o[n]]=e[n];return t}(Object(fe.a)({},s,a(e,t.counts)),e.dims))})),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r},Ky.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Object(p.y)(Ky,go).transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),o=Ry().smooth(!1!==t.smooth),a=t.values,s=t.thresholds||Iy(t.count||10,t.nice,!!a),u=t.size;return a||(a=e.materialize(e.SOURCE).source,r=Py(n=Gy(By(),t)(a,!0),n.scale||1,n.scale||1,0,0),u=[n.width,n.height],a=n.values),s=Object(p.A)(s)?s:s(a),a=o.size(u)(a,s),r&&a.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(a||[]).map(E),i};function Yy(t){go.call(this,null,t)}Yy.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(p.y)(Yy,go).transform=function(t,e){var n,r=this._features,i=this._points,o=t.fields,a=o&&o[0],s=o&&o[1],u=t.geojson||!o&&p.x,c=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified(Object(p.g)(u))||a&&e.modified(Object(p.g)(a))||s&&e.modified(Object(p.g)(s)),this.value&&!n||(c=e.SOURCE,this._features=r=[],this._points=i=[]),u&&e.visit(c,(function(t){r.push(u(t))})),a&&s&&(e.visit(c,(function(t){var e=a(t),n=s(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&i.push([e,n])})),r=r.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:"FeatureCollection",features:r}};var Qy=function(t){return t};function Xy(t,e){t&&Jy.hasOwnProperty(t.type)&&Jy[t.type](t,e)}var Zy={Feature:function(t,e){Xy(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Xy(n[r].geometry,e)}},Jy={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){tb(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)tb(n[r],e,0)},Polygon:function(t,e){eb(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)eb(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Xy(n[r],e)}};function tb(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function eb(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)tb(t[n],e,1);e.polygonEnd()}var nb=function(t,e){t&&Zy.hasOwnProperty(t.type)?Zy[t.type](t,e):Xy(t,e)},rb=function(){return new ib};function ib(){this.reset()}ib.prototype={constructor:ib,reset:function(){this.s=this.t=0},add:function(t){ab(ob,t,this.t),ab(this,ob.s,this.s),this.s?this.t+=ob.t:this.s=ob.t},valueOf:function(){return this.s}};var ob=new ib;function ab(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var sb=Math.PI,ub=sb/2,cb=sb/4,lb=2*sb,fb=180/sb,hb=sb/180,db=Math.abs,pb=Math.atan,gb=Math.atan2,vb=Math.cos,mb=Math.ceil,yb=Math.exp,bb=(Math.floor,Math.log),wb=Math.pow,xb=Math.sin,_b=Math.sign||function(t){return t>0?1:t<0?-1:0},Ob=Math.sqrt,kb=Math.tan;function Sb(t){return t>1?0:t<-1?sb:Math.acos(t)}function Eb(t){return t>1?ub:t<-1?-ub:Math.asin(t)}function Ab(){}var Cb,jb,Tb,Mb,Rb=rb(),Db=rb(),Lb={point:Ab,lineStart:Ab,lineEnd:Ab,polygonStart:function(){Lb.lineStart=Nb,Lb.lineEnd=Pb},polygonEnd:function(){Lb.lineStart=Lb.lineEnd=Lb.point=Ab,Rb.add(db(Db)),Db.reset()},result:function(){var t=Rb/2;return Rb.reset(),t}};function Nb(){Lb.point=Ib}function Ib(t,e){Lb.point=Fb,Cb=Tb=t,jb=Mb=e}function Fb(t,e){Db.add(Mb*t-Tb*e),Tb=t,Mb=e}function Pb(){Fb(Cb,jb)}var $b=Lb,zb=1/0,Bb=zb,Ub=-zb,Wb=Ub;var Hb,Vb,qb,Gb,Kb={point:function(t,e){t<zb&&(zb=t);t>Ub&&(Ub=t);e<Bb&&(Bb=e);e>Wb&&(Wb=e)},lineStart:Ab,lineEnd:Ab,polygonStart:Ab,polygonEnd:Ab,result:function(){var t=[[zb,Bb],[Ub,Wb]];return Ub=Wb=-(Bb=zb=1/0),t}},Yb=0,Qb=0,Xb=0,Zb=0,Jb=0,tw=0,ew=0,nw=0,rw=0,iw={point:ow,lineStart:aw,lineEnd:cw,polygonStart:function(){iw.lineStart=lw,iw.lineEnd=fw},polygonEnd:function(){iw.point=ow,iw.lineStart=aw,iw.lineEnd=cw},result:function(){var t=rw?[ew/rw,nw/rw]:tw?[Zb/tw,Jb/tw]:Xb?[Yb/Xb,Qb/Xb]:[NaN,NaN];return Yb=Qb=Xb=Zb=Jb=tw=ew=nw=rw=0,t}};function ow(t,e){Yb+=t,Qb+=e,++Xb}function aw(){iw.point=sw}function sw(t,e){iw.point=uw,ow(qb=t,Gb=e)}function uw(t,e){var n=t-qb,r=e-Gb,i=Ob(n*n+r*r);Zb+=i*(qb+t)/2,Jb+=i*(Gb+e)/2,tw+=i,ow(qb=t,Gb=e)}function cw(){iw.point=ow}function lw(){iw.point=hw}function fw(){dw(Hb,Vb)}function hw(t,e){iw.point=dw,ow(Hb=qb=t,Vb=Gb=e)}function dw(t,e){var n=t-qb,r=e-Gb,i=Ob(n*n+r*r);Zb+=i*(qb+t)/2,Jb+=i*(Gb+e)/2,tw+=i,ew+=(i=Gb*t-qb*e)*(qb+t),nw+=i*(Gb+e),rw+=3*i,ow(qb=t,Gb=e)}var pw=iw;function gw(t){this._context=t}gw.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,lb)}},result:Ab};var vw,mw,yw,bw,ww,xw=rb(),_w={point:Ab,lineStart:function(){_w.point=Ow},lineEnd:function(){vw&&kw(mw,yw),_w.point=Ab},polygonStart:function(){vw=!0},polygonEnd:function(){vw=null},result:function(){var t=+xw;return xw.reset(),t}};function Ow(t,e){_w.point=kw,mw=bw=t,yw=ww=e}function kw(t,e){bw-=t,ww-=e,xw.add(Ob(bw*bw+ww*ww)),bw=t,ww=e}var Sw=_w;function Ew(){this._string=[]}function Aw(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Ew.prototype={_radius:4.5,_circle:Aw(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Aw(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Cw=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),nb(t,n(r))),r.result()}return o.area=function(t){return nb(t,n($b)),$b.result()},o.measure=function(t){return nb(t,n(Sw)),Sw.result()},o.bounds=function(t){return nb(t,n(Kb)),Kb.result()},o.centroid=function(t){return nb(t,n(pw)),pw.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,Qy):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new Ew):new gw(e=t),"function"!==typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},jw=function(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Ab,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Tw=function(t,e){return db(t[0]-e[0])<1e-6&&db(t[1]-e[1])<1e-6};function Mw(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var Rw=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Tw(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new Mw(r,t,null,!0)),u.push(n.o=new Mw(r,null,n,!1)),s.push(n=new Mw(a,t,null,!1)),u.push(n.o=new Mw(a,null,n,!0))}})),s.length){for(u.sort(e),Dw(s),Dw(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}};function Dw(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Lw(t){return[gb(t[1],t[0]),Eb(t[2])]}function Nw(t){var e=t[0],n=t[1],r=vb(n);return[r*vb(e),r*xb(e),xb(n)]}function Iw(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Fw(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Pw(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function $w(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function zw(t){var e=Ob(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Bw=rb();function Uw(t){return db(t[0])<=sb?t[0]:_b(t[0])*((db(t[0])+sb)%lb-sb)}var Ww=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var Hw=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Ww(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(Ww);Hw.right,Hw.left;var Vw=Array.prototype,qw=(Vw.slice,Vw.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Gw=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var Kw=function(t,e,n,r){return function(i){var o,a,s,u=e(i),c=jw(),l=e(c),f=!1,h={point:d,lineStart:g,lineEnd:v,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=v,a=Gw(a);var t=function(t,e){var n=Uw(e),r=e[1],i=xb(r),o=[xb(n),-vb(n),0],a=0,s=0;Bw.reset(),1===i?r=ub+1e-6:-1===i&&(r=-ub-1e-6);for(var u=0,c=t.length;u<c;++u)if(f=(l=t[u]).length)for(var l,f,h=l[f-1],d=Uw(h),p=h[1]/2+cb,g=xb(p),v=vb(p),m=0;m<f;++m,d=b,g=x,v=_,h=y){var y=l[m],b=Uw(y),w=y[1]/2+cb,x=xb(w),_=vb(w),O=b-d,k=O>=0?1:-1,S=k*O,E=S>sb,A=g*x;if(Bw.add(gb(A*k*xb(S),v*_+A*vb(S))),a+=E?O+k*lb:O,E^d>=n^b>=n){var C=Fw(Nw(h),Nw(y));zw(C);var j=Fw(o,C);zw(j);var T=(E^O>=0?-1:1)*Eb(j[2]);(r>T||r===T&&(C[0]||C[1]))&&(s+=E^O>=0?1:-1)}}return(a<-1e-6||a<1e-6&&Bw<-1e-6)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),Rw(a,Qw,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function g(){h.point=p,u.lineStart()}function v(){h.point=d,u.lineEnd()}function m(t,e){s.push([t,e]),l.point(t,e)}function y(){l.lineStart(),s=[]}function b(){m(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),h=c.result(),d=h.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Yw))}return h}};function Yw(t){return t.length>1}function Qw(t,e){return((t=t.x)[0]<0?t[1]-ub-1e-6:ub-t[1])-((e=e.x)[0]<0?e[1]-ub-1e-6:ub-e[1])}var Xw=Kw((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?sb:-sb,u=db(o-n);db(u-sb)<1e-6?(t.point(n,r=(r+a)/2>0?ub:-ub),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=sb&&(db(n-i)<1e-6&&(n-=1e-6*i),db(o-s)<1e-6&&(o-=1e-6*s),r=function(t,e,n,r){var i,o,a=xb(t-n);return db(a)>1e-6?pb((xb(e)*(o=vb(r))*xb(n)-xb(r)*(i=vb(e))*xb(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*ub,r.point(-sb,i),r.point(0,i),r.point(sb,i),r.point(sb,0),r.point(sb,-i),r.point(0,-i),r.point(-sb,-i),r.point(-sb,0),r.point(-sb,i);else if(db(t[0]-e[0])>1e-6){var o=t[0]<e[0]?sb:-sb;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-sb,-ub]);var Zw=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function Jw(t,e){return[db(t)>sb?t+Math.round(-t/lb)*lb:t,e]}function tx(t,e,n){return(t%=lb)?e||n?Zw(nx(t),rx(e,n)):nx(t):e||n?rx(e,n):Jw}function ex(t){return function(e,n){return[(e+=t)>sb?e-lb:e<-sb?e+lb:e,n]}}function nx(t){var e=ex(t);return e.invert=ex(-t),e}function rx(t,e){var n=vb(t),r=xb(t),i=vb(e),o=xb(e);function a(t,e){var a=vb(e),s=vb(t)*a,u=xb(t)*a,c=xb(e),l=c*n+s*r;return[gb(u*i-l*o,s*n-c*r),Eb(l*i+u*o)]}return a.invert=function(t,e){var a=vb(e),s=vb(t)*a,u=xb(t)*a,c=xb(e),l=c*i-u*o;return[gb(u*i+c*o,s*n+l*r),Eb(l*n-s*r)]},a}Jw.invert=Jw;function ix(t,e,n,r,i,o){if(n){var a=vb(e),s=xb(e),u=r*n;null==i?(i=e+r*lb,o=e-u/2):(i=ox(a,i),o=ox(a,o),(r>0?i<o:i>o)&&(i+=r*lb));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Lw([a,-s*vb(l),-s*xb(l)]),t.point(c[0],c[1])}}function ox(t,e){(e=Nw(e))[0]-=t,zw(e);var n=Sb(-e[1]);return((-e[2]<0?-n:n)+lb-1e-6)%lb}var ax=function(t){var e=vb(t),n=6*hb,r=e>0,i=db(e)>1e-6;function o(t,n){return vb(t)*vb(n)>e}function a(t,n,r){var i=[1,0,0],o=Fw(Nw(t),Nw(n)),a=Iw(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=e*a/u,l=-e*s/u,f=Fw(i,o),h=$w(i,c);Pw(h,$w(o,l));var d=f,p=Iw(h,d),g=Iw(d,d),v=p*p-g*(Iw(h,h)-1);if(!(v<0)){var m=Ob(v),y=$w(d,(-p-m)/g);if(Pw(y,h),y=Lw(y),!r)return y;var b,w=t[0],x=n[0],_=t[1],O=n[1];x<w&&(b=w,w=x,x=b);var k=x-w,S=db(k-sb)<1e-6;if(!S&&O<_&&(b=_,_=O,O=b),S||k<1e-6?S?_+O>0^y[1]<(db(y[0]-w)<1e-6?_:O):_<=y[1]&&y[1]<=O:k>sb^(w<=y[0]&&y[0]<=x)){var E=$w(d,(-p+m)/g);return Pw(E,h),[y,Lw(E)]}}}function s(e,n){var i=r?t:sb-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Kw(o,(function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(f,h){var d,p=[f,h],g=o(f,h),v=r?g?0:s(f,h):g?s(f+(f<0?sb:-sb),h):0;if(!e&&(c=u=g)&&t.lineStart(),g!==u&&(!(d=a(e,p))||Tw(e,d)||Tw(p,d))&&(p[2]=1),g!==u)l=0,g?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^g){var m;v&n||!(m=a(p,e,!0))||(l=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1],3)))}!g||e&&Tw(e,p)||t.point(p[0],p[1]),e=p,u=g,n=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(e,r,i,o){ix(o,t,n,i,e,r)}),r?[0,-t]:[-sb,t-sb])};function sx(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,f=0;if(null==i||(l=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return db(r[0]-t)<1e-6?i>0?0:3:db(r[0]-n)<1e-6?i>0?2:1:db(r[1]-e)<1e-6?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,f,h,d,p,g,v,m,y,b=a,w=jw(),x={point:_,lineStart:function(){x.point=O,c&&c.push(l=[]);m=!0,v=!1,p=g=NaN},lineEnd:function(){u&&(O(f,h),d&&v&&w.rejoin(),u.push(w.result()));x.point=_,v&&b.lineEnd()},polygonStart:function(){b=w,u=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,f=s[0],h=f[0],d=f[1];u<l;++u)o=h,a=d,f=s[u],h=f[0],d=f[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=y&&e,i=(u=Gw(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Rw(u,s,e,o,a),a.polygonEnd());b=a,u=c=l=null}};function _(t,e){i(t,e)&&b.point(t,e)}function O(o,a){var s=i(o,a);if(c&&l.push([o,a]),m)f=o,h=a,d=s,m=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&v)b.point(o,a);else{var u=[p=Math.max(-1e9,Math.min(1e9,p)),g=Math.max(-1e9,Math.min(1e9,g))],w=[o=Math.max(-1e9,Math.min(1e9,o)),a=Math.max(-1e9,Math.min(1e9,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,f=e[0]-s,h=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*f,t[1]=u+c*h),l<1&&(e[0]=s+l*f,e[1]=u+l*h),!0}}}}}(u,w,t,e,n,r)?s&&(b.lineStart(),b.point(o,a),y=!1):(v||(b.lineStart(),b.point(u[0],u[1])),b.point(w[0],w[1]),s||b.lineEnd(),y=!1)}p=o,g=a,v=s}return x}}function ux(t){return function(e){var n=new cx;for(var r in t)n[r]=t[r];return n.stream=e,n}}function cx(){}function lx(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),nb(n,t.stream(Kb)),e(Kb.result()),null!=r&&t.clipExtent(r),t}function fx(t,e,n){return lx(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function hx(t,e,n){return fx(t,[[0,0],e],n)}function dx(t,e,n){return lx(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function px(t,e,n){return lx(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}cx.prototype={constructor:cx,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var gx=vb(30*hb),vx=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,f,h,d,p,g,v){var m=c-r,y=l-i,b=m*m+y*y;if(b>4*e&&g--){var w=a+h,x=s+d,_=u+p,O=Ob(w*w+x*x+_*_),k=Eb(_/=O),S=db(db(_)-1)<1e-6||db(o-f)<1e-6?(o+f)/2:gb(x,w),E=t(S,k),A=E[0],C=E[1],j=A-r,T=C-i,M=y*j-m*T;(M*M/b>e||db((m*j+y*T)/b-.5)>.3||a*h+s*d+u*p<gx)&&(n(r,i,o,a,s,u,A,C,S,w/=O,x/=O,_,g,v),v.point(A,C),n(A,C,S,w,x,_,c,l,f,h,d,p,g,v))}}return function(e){var r,i,o,a,s,u,c,l,f,h,d,p,g={point:v,lineStart:m,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=w},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){l=NaN,g.point=y,e.lineStart()}function y(r,i){var o=Nw([r,i]),a=t(r,i);n(l,f,c,h,d,p,l=a[0],f=a[1],c=r,h=o[0],d=o[1],p=o[2],16,e),e.point(l,f)}function b(){g.point=v,e.lineEnd()}function w(){m(),g.point=x,g.lineEnd=_}function x(t,e){y(r=t,e),i=l,o=f,a=h,s=d,u=p,g.point=y}function _(){n(l,f,c,h,d,p,i,o,r,a,s,u,16,e),g.lineEnd=b,b()}return g}}(t,e):function(t){return ux({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var mx=ux({point:function(t,e){this.stream.point(t*hb,e*hb)}});function yx(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}function bx(t,e,n,r,i,o){var a=vb(o),s=xb(o),u=a*t,c=s*t,l=a/t,f=s/t,h=(s*n-a*e)/t,d=(s*e+a*n)/t;function p(t,o){return[u*(t*=r)-c*(o*=i)+e,n-c*t-u*o]}return p.invert=function(t,e){return[r*(l*t-f*e+h),i*(d-f*t-l*e)]},p}function wx(t){return xx((function(){return t}))()}function xx(t){var e,n,r,i,o,a,s,u,c,l,f=150,h=480,d=250,p=0,g=0,v=0,m=0,y=0,b=0,w=1,x=1,_=null,O=Xw,k=null,S=Qy,E=.5;function A(t){return u(t[0]*hb,t[1]*hb)}function C(t){return(t=u.invert(t[0],t[1]))&&[t[0]*fb,t[1]*fb]}function j(){var t=bx(f,0,0,w,x,b).apply(null,e(p,g)),r=(b?bx:yx)(f,h-t[0],d-t[1],w,x,b);return n=tx(v,m,y),s=Zw(e,r),u=Zw(n,s),a=vx(s,E),T()}function T(){return c=l=null,A}return A.stream=function(t){return c&&l===t?c:c=mx(function(t){return ux({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(O(a(S(l=t)))))},A.preclip=function(t){return arguments.length?(O=t,_=void 0,T()):O},A.postclip=function(t){return arguments.length?(S=t,k=r=i=o=null,T()):S},A.clipAngle=function(t){return arguments.length?(O=+t?ax(_=t*hb):(_=null,Xw),T()):_*fb},A.clipExtent=function(t){return arguments.length?(S=null==t?(k=r=i=o=null,Qy):sx(k=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),T()):null==k?null:[[k,r],[i,o]]},A.scale=function(t){return arguments.length?(f=+t,j()):f},A.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],j()):[h,d]},A.center=function(t){return arguments.length?(p=t[0]%360*hb,g=t[1]%360*hb,j()):[p*fb,g*fb]},A.rotate=function(t){return arguments.length?(v=t[0]%360*hb,m=t[1]%360*hb,y=t.length>2?t[2]%360*hb:0,j()):[v*fb,m*fb,y*fb]},A.angle=function(t){return arguments.length?(b=t%360*hb,j()):b*fb},A.reflectX=function(t){return arguments.length?(w=t?-1:1,j()):w<0},A.reflectY=function(t){return arguments.length?(x=t?-1:1,j()):x<0},A.precision=function(t){return arguments.length?(a=vx(s,E=t*t),T()):Ob(E)},A.fitExtent=function(t,e){return fx(A,t,e)},A.fitSize=function(t,e){return hx(A,t,e)},A.fitWidth=function(t,e){return dx(A,t,e)},A.fitHeight=function(t,e){return px(A,t,e)},function(){return e=t.apply(this,arguments),A.invert=e.invert&&C,j()}}function _x(t){var e=0,n=sb/3,r=xx(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*hb,n=t[1]*hb):[e*fb,n*fb]},i}function Ox(t,e){var n=xb(t),r=(n+xb(e))/2;if(db(r)<1e-6)return function(t){var e=vb(t);function n(t,n){return[t*e,xb(n)/e]}return n.invert=function(t,n){return[t/e,Eb(n*e)]},n}(t);var i=1+n*(2*r-n),o=Ob(i)/r;function a(t,e){var n=Ob(i-2*r*xb(e))/r;return[n*xb(t*=r),o-n*vb(t)]}return a.invert=function(t,e){var n=o-e,a=gb(t,db(n))*_b(n);return n*r<0&&(a-=sb*_b(t)*_b(n)),[a/r,Eb((i-(t*t+n*n)*r*r)/(2*r))]},a}var kx=function(){return _x(Ox).scale(155.424).center([0,33.6442])},Sx=function(){return kx().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Ex(t){return function(e,n){var r=vb(e),i=vb(n),o=t(r*i);return[o*i*xb(e),o*xb(n)]}}function Ax(t){return function(e,n){var r=Ob(e*e+n*n),i=t(r),o=xb(i),a=vb(i);return[gb(e*o,r*a),Eb(r&&n*o/r)]}}var Cx=Ex((function(t){return Ob(2/(1+t))}));Cx.invert=Ax((function(t){return 2*Eb(t/2)}));var jx=Ex((function(t){return(t=Sb(t))&&t/xb(t)}));jx.invert=Ax((function(t){return t}));function Tx(t,e){return[t,bb(kb((ub+e)/2))]}Tx.invert=function(t,e){return[t,2*pb(yb(e))-ub]};function Mx(t){var e,n,r,i=wx(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var o=sb*a(),s=i(function(t){function e(e){return(e=t(e[0]*hb,e[1]*hb))[0]*=fb,e[1]*=fb,e}return t=tx(t[0]*hb,t[1]*hb,t.length>2?t[2]*hb:0),e.invert=function(e){return(e=t.invert(e[0]*hb,e[1]*hb))[0]*=fb,e[1]*=fb,e},e}(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Tx?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),l()):a()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function Rx(t){return kb((ub+t)/2)}function Dx(t,e){var n=vb(t),r=t===e?xb(t):bb(n/vb(e))/bb(Rx(e)/Rx(t)),i=n*wb(Rx(t),r)/r;if(!r)return Tx;function o(t,e){i>0?e<1e-6-ub&&(e=1e-6-ub):e>ub-1e-6&&(e=ub-1e-6);var n=i/wb(Rx(e),r);return[n*xb(r*t),i-n*vb(r*t)]}return o.invert=function(t,e){var n=i-e,o=_b(r)*Ob(t*t+n*n),a=gb(t,db(n))*_b(n);return n*r<0&&(a-=sb*_b(t)*_b(n)),[a/r,2*pb(wb(i/o,1/r))-ub]},o}function Lx(t,e){return[t,e]}Lx.invert=Lx;function Nx(t,e){var n=vb(t),r=t===e?xb(t):(n-vb(e))/(e-t),i=n/r+t;if(db(r)<1e-6)return Lx;function o(t,e){var n=i-e,o=r*t;return[n*xb(o),i-n*vb(o)]}return o.invert=function(t,e){var n=i-e,o=gb(t,db(n))*_b(n);return n*r<0&&(o-=sb*_b(t)*_b(n)),[o/r,i-_b(r)*Ob(t*t+n*n)]},o}var Ix=1.340264,Fx=-.081106,Px=893e-6,$x=.003796,zx=Ob(3)/2;function Bx(t,e){var n=Eb(zx*xb(e)),r=n*n,i=r*r*r;return[t*vb(n)/(zx*(Ix+3*Fx*r+i*(7*Px+9*$x*r))),n*(Ix+Fx*r+i*(Px+$x*r))]}Bx.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(Ix+Fx*i+o*(Px+$x*i))-e)/(Ix+3*Fx*i+o*(7*Px+9*$x*i)))*r)*i*i,!(db(n)<1e-12));++a);return[zx*t*(Ix+3*Fx*i+o*(7*Px+9*$x*i))/vb(r),Eb(xb(r)/zx)]};function Ux(t,e){var n=vb(e),r=vb(t)*n;return[n*xb(t)/r,xb(e)/r]}Ux.invert=Ax(pb);function Wx(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Wx.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(db(n)>1e-6&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function Hx(t,e){return[vb(e)*xb(t),xb(e)]}Hx.invert=Ax(Eb);function Vx(t,e){var n=vb(e),r=1+vb(t)*n;return[n*xb(t)/r,xb(e)/r]}Vx.invert=Ax((function(t){return 2*pb(t)}));function qx(t,e){return[bb(kb((ub+e)/2)),-t]}qx.invert=function(t,e){return[-e,2*pb(yb(t))-ub]};var Gx=Math.abs,Kx=(Math.atan,Math.atan2,Math.ceil,Math.cos),Yx=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),Qx=(Math.tan,Math.PI),Xx=Qx/2,Zx=(Math.SQRT1_2,t_(2));t_(Qx);function Jx(t){return t>1?Xx:t<-1?-Xx:Math.asin(t)}function t_(t){return t>0?Math.sqrt(t):0}function e_(t,e){var n,r=t*Yx(e),i=30;do{e-=n=(e+Yx(e)-r)/(1+Kx(e))}while(Gx(n)>1e-6&&--i>0);return e/2}var n_=function(t,e,n){function r(r,i){return[t*r*Kx(i=e_(n,i)),e*Yx(i)]}return r.invert=function(r,i){return i=Jx(i/e),[r/(t*Kx(i)),Jx((2*i+Yx(2*i))/n)]},r}(Zx/Xx,Zx,Qx),r_=Cw(),i_=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function o_(t,e){return function n(){var r=e();return r.type=t,r.path=Cw().projection(r),r.copy=r.copy||function(){var t=n();return i_.forEach((function(e){r[e]&&t[e](r[e]())})),t.path.pointRadius(r.path.pointRadius()),t},r}}function a_(t,e){if(!t||"string"!==typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(u_[t]=o_(t,e),this):u_[t]||null}function s_(t){return t&&t.path||r_}var u_={albers:Sx,albersusa:function(){var t,e,n,r,i,o,a=Sx(),s=kx().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=kx().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function f(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([a.stream(e=n),s.stream(n),u.stream(n)])},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),f()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),r=s.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+1e-6,l+.12*e+1e-6],[o-.214*e-1e-6,l+.234*e-1e-6]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+1e-6,l+.166*e+1e-6],[o-.115*e-1e-6,l+.234*e-1e-6]]).stream(c),f()},l.fitExtent=function(t,e){return fx(l,t,e)},l.fitSize=function(t,e){return hx(l,t,e)},l.fitWidth=function(t,e){return dx(l,t,e)},l.fitHeight=function(t,e){return px(l,t,e)},l.scale(1070)},azimuthalequalarea:function(){return wx(Cx).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return wx(jx).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return _x(Dx).scale(109.5).parallels([30,30])},conicequalarea:kx,conicequidistant:function(){return _x(Nx).scale(131.154).center([0,13.9389])},equalEarth:function(){return wx(Bx).scale(177.158)},equirectangular:function(){return wx(Lx).scale(152.63)},gnomonic:function(){return wx(Ux).scale(144.049).clipAngle(60)},identity:function(){var t,e,n,r,i,o,a,s=1,u=0,c=0,l=1,f=1,h=0,d=null,p=1,g=1,v=ux({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),m=Qy;function y(){return p=s*l,g=s*f,o=a=null,b}function b(n){var r=n[0]*p,i=n[1]*g;if(h){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+c]}return b.invert=function(n){var r=n[0]-u,i=n[1]-c;if(h){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/p,i/g]},b.stream=function(t){return o&&a===t?o:o=v(m(a=t))},b.postclip=function(t){return arguments.length?(m=t,d=n=r=i=null,y()):m},b.clipExtent=function(t){return arguments.length?(m=null==t?(d=n=r=i=null,Qy):sx(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==d?null:[[d,n],[r,i]]},b.scale=function(t){return arguments.length?(s=+t,y()):s},b.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],y()):[u,c]},b.angle=function(n){return arguments.length?(e=xb(h=n%360*hb),t=vb(h),y()):h*fb},b.reflectX=function(t){return arguments.length?(l=t?-1:1,y()):l<0},b.reflectY=function(t){return arguments.length?(f=t?-1:1,y()):f<0},b.fitExtent=function(t,e){return fx(b,t,e)},b.fitSize=function(t,e){return hx(b,t,e)},b.fitWidth=function(t,e){return dx(b,t,e)},b.fitHeight=function(t,e){return px(b,t,e)},b},mercator:function(){return Mx(Tx).scale(961/lb)},mollweide:function(){return wx(n_).scale(169.529)},naturalEarth1:function(){return wx(Wx).scale(175.295)},orthographic:function(){return wx(Hx).scale(249.5).clipAngle(90.000001)},stereographic:function(){return wx(Vx).scale(250).clipAngle(142)},transversemercator:function(){var t=Mx(qx),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}};for(var c_ in u_)a_(c_,u_[c_]);function l_(t){go.call(this,null,t)}function f_(t){go.call(this,null,t)}function h_(t){go.call(this,null,t)}function d_(t,e,n){var r=qw(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function p_(t,e,n){var r=qw(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function g_(){var t,e,n,r,i,o,a,s,u,c,l,f,h=10,d=h,p=90,g=360,v=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return qw(mb(r/p)*p,n,p).map(l).concat(qw(mb(s/g)*g,a,g).map(f)).concat(qw(mb(e/h)*h,t,h).filter((function(t){return db(t%p)>1e-6})).map(u)).concat(qw(mb(o/d)*d,i,d).filter((function(t){return db(t%g)>1e-6})).map(c))}return m.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},m.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(a).slice(1),l(n).reverse().slice(1),f(s).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),m.precision(v)):[[r,s],[n,a]]},m.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),m.precision(v)):[[e,o],[t,i]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],m):[p,g]},m.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],m):[h,d]},m.precision=function(h){return arguments.length?(v=+h,u=d_(o,i,90),c=p_(e,t,v),l=d_(s,a,90),f=p_(r,n,v),m):v},m.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function v_(t){go.call(this,[],t),this.generator=g_()}function m_(t){go.call(this,null,t)}function y_(t){if(!Object(p.D)(t))return!1;var e=Object(p.db)(Object(p.g)(t));return e.$x||e.$y||e.$value||e.$max}function b_(t){go.call(this,null,t),this.modified(!0)}function w_(t,e,n){Object(p.D)(t[e])&&t[e](n)}l_.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(p.y)(l_,go).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||p.x,o=t.as||"path",a=n.SOURCE;!r||t.modified()?(this.value=r=s_(t.projection),n.materialize().reflow()):a=i===p.x||e.modified(i.fields)?n.ADD_MOD:n.ADD;var s=function(t,e){var n=t.pointRadius();t.context(null),null!=e&&t.pointRadius(e);return n}(r,t.pointRadius);return n.visit(a,(function(t){t[o]=r(i(t))})),r.pointRadius(s),n.modifies(o)},f_.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(p.y)(f_,go).transform=function(t,e){var n,r=t.projection,i=t.fields[0],o=t.fields[1],a=t.as||["x","y"],s=a[0],u=a[1];function c(t){var e=r([i(t),o(t)]);e?(t[s]=e[0],t[u]=e[1]):(t[s]=void 0,t[u]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,c):(n=e.modified(i.fields)||e.modified(o.fields),e.visit(n?e.ADD_MOD:e.ADD,c)),e.modifies(a)},h_.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(p.y)(h_,go).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.as||"shape",o=n.ADD;return r&&!t.modified()||(this.value=r=function(t,e,n){var r=null==n?function(n){return t(e(n))}:function(r){var i=t.pointRadius(),o=t.pointRadius(n)(e(r));return t.pointRadius(i),o};return r.context=function(e){return t.context(e),r},r}(s_(t.projection),t.field||Object(p.t)("datum"),t.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,(function(t){t[i]=r})),n.modifies(i)},v_.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(p.y)(v_,go).transform=function(t,e){var n,r=this.value,i=this.generator;if(!r.length||t.modified())for(var o in t)Object(p.D)(i[o])&&i[o](t[o]);return n=i(),r.length?e.mod.push(j(r[0],n)):e.add.push(E(n)),r[0]=n,e},m_.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Object(p.y)(m_,go).transform=function(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,r="shared"===t.resolve,i=t.field||p.x,o=function(t,e){var n;Object(p.D)(t)?(n=function(n){return t(n,e)}).dep=y_(t):t?n=Object(p.l)(t):(n=function(t){return t.$value/t.$max||0}).dep=!0;return n}(t.opacity,t),a=function(t,e){var n;Object(p.D)(t)?(n=function(n){return Fd(t(n,e))}).dep=y_(t):n=Object(p.l)(Fd(t||"#888"));return n}(t.color,t),s=t.as||"image",u={$x:0,$y:0,$value:0,$max:r?Io(n.map((function(t){return Io(i(t).values)}))):0};return n.forEach((function(t){var e=i(t),n=Object(p.o)({},t,u);r||(n.$max=Io(e.values||[])),t[s]=function(t,e,n,r){for(var i=t.width,o=t.height,a=t.x1||0,s=t.y1||0,u=t.x2||i,c=t.y2||o,l=t.values,f=l?function(t){return l[t]}:p.kb,h=Sl(u-a,c-s),d=h.getContext("2d"),g=d.getImageData(0,0,u-a,c-s),v=g.data,m=s,y=0;m<c;++m){e.$y=m-s;for(var b=a,w=m*i;b<u;++b,y+=4){e.$x=b-a,e.$value=f(b+w);var x=n(e);v[y+0]=x.r,v[y+1]=x.g,v[y+2]=x.b,v[y+3]=~~(255*r(e))}}return d.putImageData(g,0,0),h}(e,n,a.dep?a:Object(p.l)(a(n)),o.dep?o:Object(p.l)(o(n)))})),e.reflow(!0).modifies(s)},Object(p.y)(b_,go).transform=function(t,e){var n=this.value;return!n||t.modified("type")?(this.value=n=function(t){var e=a_((t||"mercator").toLowerCase());e||Object(p.n)("Unrecognized projection type: "+t);return e()}(t.type),i_.forEach((function(e){null!=t[e]&&w_(n,e,t[e])}))):i_.forEach((function(e){t.modified(e)&&w_(n,e,t[e])})),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&function(t,e){var n=function(t){return 1===(t=Object(p.i)(t)).length?t[0]:{type:"FeatureCollection",features:t.reduce((function(t,e){return t.concat(function(t){return"FeatureCollection"===t.type?t.features:Object(p.i)(t).filter((function(t){return null!=t})).map((function(t){return"Feature"===t.type?t:{type:"Feature",geometry:t}}))}(e))}),[])}}(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)};function x_(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,f,h,d=t._root,p={data:r},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(g+m)/2))?g=o:m=o,(l=n>=(a=(v+y)/2))?v=a:y=a,i=d,!(d=d[f=l<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+m)/2))?g=o:m=o,(l=n>=(a=(v+y)/2))?v=a:y=a}while((f=l<<1|c)===(h=(u>=a)<<1|s>=o));return i[h]=d,i[f]=p,t}var __=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function O_(t){return t[0]}function k_(t){return t[1]}function S_(t,e,n){var r=new E_(null==e?O_:e,null==n?k_:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function E_(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function A_(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var C_=S_.prototype=E_.prototype;C_.copy=function(){var t,e,n=new E_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=A_(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=A_(e));return n},C_.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return x_(this.cover(e,n),e,n,t)},C_.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>f&&(f=i));if(u>l||c>f)return this;for(this.cover(u,c).cover(l,f),n=0;n<o;++n)x_(this,a[n],s[n],t[n]);return this},C_.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},C_.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},C_.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},C_.find=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new __(g,l,f,h,d)),null==n?n=1/0:(l=t-n,f=e-n,h=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>h||(o=u.y0)>d||(a=u.x1)<l||(s=u.y1)<f))if(g.length){var v=(i+a)/2,m=(o+s)/2;p.push(new __(g[3],v,m,a,s),new __(g[2],i,m,v,s),new __(g[1],v,o,a,m),new __(g[0],i,o,v,m)),(c=(e>=m)<<1|t>=v)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),w=y*y+b*b;if(w<n){var x=Math.sqrt(n=w);l=t-x,f=e-x,h=t+x,d=e+x,r=g.data}}return r},C_.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,f,h,d=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+v)/2))?p=s:v=s,(l=a>=(u=(g+m)/2))?g=u:m=u,e=d,!(d=d[f=l<<1|c]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},C_.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},C_.root=function(){return this._root},C_.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},C_.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new __(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new __(n,c,l,o,a)),(n=u[2])&&s.push(new __(n,r,l,c,a)),(n=u[1])&&s.push(new __(n,c,i,o,l)),(n=u[0])&&s.push(new __(n,r,i,c,l))}return this},C_.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new __(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,f=(s+c)/2;(o=i[0])&&n.push(new __(o,a,s,l,f)),(o=i[1])&&n.push(new __(o,l,s,u,f)),(o=i[2])&&n.push(new __(o,a,f,l,c)),(o=i[3])&&n.push(new __(o,l,f,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},C_.x=function(t){return arguments.length?(this._x=t,this):this._x},C_.y=function(t){return arguments.length?(this._y=t,this):this._y};var j_=function(t){return function(){return t}},T_=function(){return 1e-6*(Math.random()-.5)};function M_(t){return t.x+t.vx}function R_(t){return t.y+t.vy}function D_(t){return t.index}function L_(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var N_={value:function(){}};function I_(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new F_(r)}function F_(t){this._=t}function P_(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function $_(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function z_(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=N_,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}F_.prototype=I_.prototype={constructor:F_,on:function(t,e){var n,r=this._,i=P_(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=z_(r[n],t.name,e);else if(null==e)for(n in r)r[n]=z_(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=$_(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new F_(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var B_,U_,W_=I_,H_=0,V_=0,q_=0,G_=0,K_=0,Y_=0,Q_="object"===typeof performance&&performance.now?performance:Date,X_="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Z_(){return K_||(X_(J_),K_=Q_.now()+Y_)}function J_(){K_=0}function tO(){this._call=this._time=this._next=null}function eO(t,e,n){var r=new tO;return r.restart(t,e,n),r}function nO(){K_=(G_=Q_.now())+Y_,H_=V_=0;try{!function(){Z_(),++H_;for(var t,e=B_;e;)(t=K_-e._time)>=0&&e._call.call(null,t),e=e._next;--H_}()}finally{H_=0,function(){var t,e,n=B_,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:B_=e);U_=t,iO(r)}(),K_=0}}function rO(){var t=Q_.now(),e=t-G_;e>1e3&&(Y_-=e,G_=t)}function iO(t){H_||(V_&&(V_=clearTimeout(V_)),t-K_>24?(t<1/0&&(V_=setTimeout(nO,t-Q_.now()-Y_)),q_&&(q_=clearInterval(q_))):(q_||(G_=Q_.now(),q_=setInterval(rO,1e3)),H_=1,X_(nO)))}function oO(t){return t.x}function aO(t){return t.y}tO.prototype=eO.prototype={constructor:tO,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?Z_():+n)+(null==e?0:+e),this._next||U_===this||(U_?U_._next=this:B_=this,U_=this),this._call=t,this._time=n,iO()},stop:function(){this._call&&(this._call=null,this._time=1/0,iO())}};var sO=Math.PI*(3-Math.sqrt(5)),uO={center:function(t,e){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)a+=(i=n[r]).x,s+=i.y;for(a=a/o-t,s=s/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},collide:function(t){var e,n,r=1,i=1;function o(){for(var t,o,s,u,c,l,f,h=e.length,d=0;d<i;++d)for(o=S_(e,M_,R_).visitAfter(a),t=0;t<h;++t)s=e[t],l=n[s.index],f=l*l,u=s.x+s.vx,c=s.y+s.vy,o.visit(p);function p(t,e,n,i,o){var a=t.data,h=t.r,d=l+h;if(!a)return e>u+d||i<u-d||n>c+d||o<c-d;if(a.index>s.index){var p=u-a.x-a.vx,g=c-a.y-a.vy,v=p*p+g*g;v<d*d&&(0===p&&(v+=(p=T_())*p),0===g&&(v+=(g=T_())*g),v=(d-(v=Math.sqrt(v)))/v*r,s.vx+=(p*=v)*(d=(h*=h)/(f+h)),s.vy+=(g*=v)*d,a.vx-=p*(d=1-d),a.vy-=g*d)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=j_(null==t?1:+t)),o.initialize=function(t){e=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"===typeof e?e:j_(+e),s(),o):t},o},nbody:function(){var t,e,n,r,i=j_(-30),o=1,a=1/0,s=.81;function u(r){var i,o=t.length,a=S_(t,oO,aO).visitAfter(l);for(n=r,i=0;i<o;++i)e=t[i],a.visit(f)}function c(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)n=t[e],r[n.index]=+i(n,e,t)}}function l(t){var e,n,i,o,a,s=0,u=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,o+=n*e.y);t.x=i/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function f(t,i,u,c){if(!t.value)return!0;var l=t.x-e.x,f=t.y-e.y,h=c-i,d=l*l+f*f;if(h*h/s<d)return d<a&&(0===l&&(d+=(l=T_())*l),0===f&&(d+=(f=T_())*f),d<o&&(d=Math.sqrt(o*d)),e.vx+=l*t.value*n/d,e.vy+=f*t.value*n/d),!0;if(!(t.length||d>=a)){(t.data!==e||t.next)&&(0===l&&(d+=(l=T_())*l),0===f&&(d+=(f=T_())*f),d<o&&(d=Math.sqrt(o*d)));do{t.data!==e&&(h=r[t.data.index]*n/d,e.vx+=l*h,e.vy+=f*h)}while(t=t.next)}}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"===typeof t?t:j_(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},link:function(t){var e,n,r,i,o,a=D_,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=j_(30),c=1;function l(r){for(var i=0,a=t.length;i<c;++i)for(var s,u,l,f,h,d,p,g=0;g<a;++g)u=(s=t[g]).source,f=(l=s.target).x+l.vx-u.x-u.vx||T_(),h=l.y+l.vy-u.y-u.vy||T_(),f*=d=((d=Math.sqrt(f*f+h*h))-n[g])/d*r*e[g],h*=d,l.vx-=f*(p=o[g]),l.vy-=h*p,u.vx+=f*(p=1-p),u.vy+=h*p}function f(){if(r){var s,u,c=r.length,l=t.length,f=new Map(r.map((function(t,e){return[a(t,e,r),t]})));for(s=0,i=new Array(c);s<l;++s)(u=t[s]).index=s,"object"!==typeof u.source&&(u.source=L_(f,u.source)),"object"!==typeof u.target&&(u.target=L_(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(l);s<l;++s)u=t[s],o[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),h(),n=new Array(l),d()}}function h(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t){r=t,f()},l.links=function(e){return arguments.length?(t=e,f(),l):t},l.id=function(t){return arguments.length?(a=t,l):a},l.iterations=function(t){return arguments.length?(c=+t,l):c},l.strength=function(t){return arguments.length?(s="function"===typeof t?t:j_(+t),h(),l):s},l.distance=function(t){return arguments.length?(u="function"===typeof t?t:j_(+t),d(),l):u},l},x:function(t){var e,n,r,i=j_(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=j_(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:j_(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"===typeof e?e:j_(+e),a(),o):t},o},y:function(t){var e,n,r,i=j_(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=j_(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:j_(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"===typeof e?e:j_(+e),a(),o):t},o}},cO=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],lO=["static","iterations"],fO=["x","y","vx","vy"];function hO(t){go.call(this,null,t)}hO.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:fO}]};var dO=Object(p.y)(hO,go);function pO(t,e,n,r){var i,o,a,s,u=Object(p.i)(e.forces);for(i=0,o=cO.length;i<o;++i)"forces"!==(a=cO[i])&&e.modified(a)&&t[a](e[a]);for(i=0,o=u.length;i<o;++i)s="forces"+i,(a=n||e.modified("forces",i)?vO(u[i]):r&&gO(u[i],r)?t.force(s):null)&&t.force(s,a);for(o=t.numForces||0;i<o;++i)t.force("forces"+i,null);return t.numForces=u.length,t}function gO(t,e){var n,r;for(n in t)if(Object(p.D)(r=t[n])&&e.modified(Object(p.g)(r)))return 1;return 0}function vO(t){var e,n;for(n in Object(p.v)(uO,t.force)||Object(p.n)("Unrecognized force: "+t.force),e=uO[t.force](),t)Object(p.D)(e[n])&&mO(e[n],t[n],t);return e}function mO(t,e,n){t(Object(p.D)(e)?function(t){return e(t,n)}:e)}dO.transform=function(t,e){var n,r,i=this.value,o=e.changed(e.ADD_REM),a=t.modified(cO),s=t.iterations||300;if(i?(o&&(e.modifies("index"),i.nodes(e.source)),(a||e.changed(e.MOD))&&pO(i,t,0,e)):(this.value=i=function(t,e){var n=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=eO(l),c=W_("tick","end");function l(){f(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function f(r){var u,c,l=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<l;++u)null==(c=t[u]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),o=n*sO;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),h(),e={tick:f,restart:function(){return u.restart(l),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),s.forEach(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}(t),r=!1,i=n.stop,o=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,o()},n.stop=function(){return r=!0,i()},pO(n,e,!0).on("end",(function(){r=!0}))}(e.source,t),i.on("tick",(n=e.dataflow,r=this,function(){n.touch(r).run()})),t.static||(o=!0,i.tick()),e.modifies("index")),a||o||t.modified(lO)||e.changed()&&t.restart)if(i.alpha(Math.max(i.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),t.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return e.StopPropagation;return this.finish(t,e)},dO.finish=function(t,e){for(var n,r=e.dataflow,i=this._argops,o=0,a=i.length;o<a;++o)if("forces"===(n=i[o]).name&&"link"===n.op._argval.force)for(var s,u=n.op._argops,c=0,l=u.length;c<l;++c)if("links"===u[c].name&&(s=u[c].op.source)){r.pulse(s,r.changeset().reflow());break}return e.reflow(t.modified()).modifies(fO)};var yO=function(t,e,n){var r={};return t.each((function(t){var i=t.data;n(i)&&(r[e(i)]=t)})),t.lookup=r,t};function bO(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function wO(t,e){var n,r,i,o,a,s=new kO(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=xO);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new kO(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(OO)}function xO(t){return t.children}function _O(t){t.data=t.data.data}function OO(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function kO(t){this.data=t,this.depth=this.height=0,this.parent=null}function SO(t){go.call(this,null,t)}function EO(t){return t.values}function AO(){var t,e=[];return t={entries:function(t){return function t(n,r){if(++r>e.length)return n;var i,o=[];for(i in n)o.push({key:i,values:t(n[i],r)});return o}(function t(n,r){if(r>=e.length)return n;for(var i,o,a,s=-1,u=n.length,c=e[r++],l={},f={};++s<u;)(a=l[i=c(o=n[s])+""])?a.push(o):l[i]=[o];for(i in l)f[i]=t(l[i],r);return f}(t,0),0)},key:function(n){return e.push(n),t}}}function CO(t){go.call(this,null,t)}function jO(t,e){return t.parent===e.parent?1:2}kO.prototype=wO.prototype={constructor:kO,count:function(){return this.eachAfter(bO)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return wO(this).eachBefore(_O)}},SO.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},Object(p.y)(SO,go).transform=function(t,e){e.source||Object(p.n)("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),o=this.value;return(!o||r||e.changed())&&(o&&o.each((function(t){t.children&&O(t.data)&&i.rem.push(t.data)})),this.value=o=wO({values:Object(p.i)(t.keys).reduce((function(t,e){return t.key(e),t}),AO()).entries(i.source)},EO),n&&o.each((function(t){t.children&&(t=E(t.data),i.add.push(t),i.source.push(t))})),yO(o,k,k)),i.source.root=o,i},Object(p.y)(CO,go).transform=function(t,e){e.source&&e.source.root||Object(p.n)(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,i=e.source.root,o=t.as||r;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(T(t.sort,(function(t){return t.data}))),function(t,e,n){for(var r,i=0,o=e.length;i<o;++i)(r=e[i])in n&&t[r](n[r])}(n,this.params,t),n.separation&&n.separation(!1!==t.separation?jO:p.O);try{this.value=n(i)}catch(a){Object(p.n)(a)}return i.each((function(t){!function(t,e,n){for(var r=t.data,i=0,o=e.length-1;i<o;++i)r[n[i]]=t[e[i]];r[n[o]]=t.children?t.children.length:0}(t,r,o)})),e.reflow(t.modified()).modifies(o).modifies("leaf")};var TO=Array.prototype.slice;var MO=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(TO.call(t))).length,o=[];r<i;)e=t[r],n&&LO(n,e)?++r:(n=IO(o=RO(o,e)),r=0);return n};function RO(t,e){var n,r;if(NO(e,t))return[e];for(n=0;n<t.length;++n)if(DO(e,t[n])&&NO(FO(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(DO(FO(t[n],t[r]),e)&&DO(FO(t[n],e),t[r])&&DO(FO(t[r],e),t[n])&&NO(PO(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function DO(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function LO(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function NO(t,e){for(var n=0;n<e.length;++n)if(!LO(t,e[n]))return!1;return!0}function IO(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return FO(t[0],t[1]);case 3:return PO(t[0],t[1],t[2])}var e}function FO(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+o+u/f*l)/2,y:(r+a+c/f*l)/2,r:(f+i+s)/2}}function PO(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,f=n.r,h=r-a,d=r-c,p=i-s,g=i-l,v=u-o,m=f-o,y=r*r+i*i-o*o,b=y-a*a-s*s+u*u,w=y-c*c-l*l+f*f,x=d*p-h*g,_=(p*w-g*b)/(2*x)-r,O=(g*v-p*m)/x,k=(d*b-h*w)/(2*x)-i,S=(h*m-d*v)/x,E=O*O+S*S-1,A=2*(o+_*O+k*S),C=_*_+k*k-o*o,j=-(E?(A+Math.sqrt(A*A-4*E*C))/(2*E):C/A);return{x:r+_+O*j,y:i+k+S*j,r:j}}function $O(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function zO(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function BO(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function UO(t){this._=t,this.next=null,this.previous=null}function WO(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,s,u,c,l,f;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;$O(n,e,r=t[2]),e=new UO(e),n=new UO(n),r=new UO(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){$O(e._,n._,r=t[s]),r=new UO(r),u=n.next,c=e.previous,l=n._.r,f=e._.r;do{if(l<=f){if(zO(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}l+=u._.r,u=u.next}else{if(zO(c._,r._)){(e=c).next=n,n.previous=e,--s;continue t}f+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=BO(e);(r=r.next)!==n;)(a=BO(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=MO(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}function HO(t){return null==t?null:VO(t)}function VO(t){if("function"!==typeof t)throw new Error;return t}function qO(){return 0}var GO=function(t){return function(){return t}};function KO(t){return Math.sqrt(t.value)}function YO(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function QO(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=WO(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function XO(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var ZO=["x","y","r","depth","children"];function JO(t){CO.call(this,t)}JO.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:ZO.length,default:ZO}]};var tk=Object(p.y)(JO,CO);tk.layout=function(){var t=null,e=1,n=1,r=qO;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(YO(t)).eachAfter(QO(r,.5)).eachBefore(XO(1)):i.eachBefore(YO(KO)).eachAfter(QO(qO,1)).eachAfter(QO(r,i.r/Math.min(e,n))).eachBefore(XO(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=HO(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:GO(+t),i):r},i},tk.params=["radius","size","padding"],tk.fields=ZO;var ek=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},nk=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},rk=["x0","y0","x1","y1","depth","children"];function ik(t){CO.call(this,t)}ik.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:rk.length,default:rk}]};var ok=Object(p.y)(ik,CO);ok.layout=function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&nk(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(ek),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},ok.params=["size","round","padding"],ok.fields=rk;var ak={depth:-1},sk={};function uk(t){return t.id}function ck(t){return t.parentId}var lk=function(){var t=uk,e=ck;function n(n){var r,i,o,a,s,u,c,l=n.length,f=new Array(l),h={};for(i=0;i<l;++i)r=n[i],s=f[i]=new kO(r),null!=(u=t(r,i,n))&&(u+="")&&(h[c="$"+(s.id=u)]=c in h?sk:s);for(i=0;i<l;++i)if(s=f[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(a=h["$"+u]))throw new Error("missing: "+u);if(a===sk)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=ak,o.eachBefore((function(t){t.depth=t.parent.depth+1,--l})).eachBefore(OO),o.parent=null,l>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=VO(e),n):t},n.parentId=function(t){return arguments.length?(e=VO(t),n):e},n};function fk(t){go.call(this,null,t)}function hk(t,e){return t.parent===e.parent?1:2}function dk(t){var e=t.children;return e?e[0]:t.t}function pk(t){var e=t.children;return e?e[e.length-1]:t.t}function gk(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function vk(t,e,n){return t.a.parent===e.parent?t.a:n}function mk(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}fk.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(p.y)(fk,go).transform=function(t,e){e.source||Object(p.n)("Stratify transform requires an upstream data source.");var n=this.value,r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),o=!this.value||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?yO(lk().id(t.key).parentId(t.parentKey)(i.source),t.key,p.gb):yO(lk()([{}]),t.key,t.key)),i.source.root=this.value=n,i},mk.prototype=Object.create(kO.prototype);function yk(t,e){return t.parent===e.parent?1:2}function bk(t,e){return t+e.x}function wk(t,e){return Math.max(t,e.y)}var xk={tidy:function(){var t=hk,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new mk(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new mk(r[i],i)),n.parent=e;return(a.parent=new mk(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var c=i,l=i,f=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>f.depth&&(f=t)}));var h=c===l?1:t(c,l)/2,d=h-c.x,p=e/(l.x+h+d),g=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*g}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,l=a.m,f=s.m,h=u.m;s=pk(s),o=dk(o),s&&o;)u=dk(u),(a=pk(a)).a=e,(i=s.z+f-o.z-c+t(s._,o._))>0&&(gk(vk(s,e,r),e,i),c+=i,l+=i),f+=s.m,c+=o.m,h+=u.m,l+=a.m;s&&!pk(a)&&(a.t=s,a.m+=f-l),o&&!dk(u)&&(u.t=o,u.m+=c-h,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},cluster:function(){var t=yk,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(bk,0)/t.length}(n),e.y=function(t){return 1+t.reduce(wk,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}},_k=["x","y","depth","children"];function Ok(t){CO.call(this,t)}Ok.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:_k.length,default:_k}]};var kk=Object(p.y)(Ok,CO);function Sk(t){go.call(this,[],t)}kk.layout=function(t){var e=t||"tidy";if(Object(p.v)(xk,e))return xk[e]();Object(p.n)("Unrecognized Tree layout method: "+e)},kk.params=["size","nodeSize"],kk.fields=_k,Sk.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(p.y)(Sk,go).transform=function(t,e){var n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),o={};return r||Object(p.n)("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,(function(t){o[k(t)]=1})),r.each((function(t){var e=t.data,n=t.parent&&t.parent.data;n&&o[k(e)]&&o[k(n)]&&i.add.push(E({source:n,target:e}))})),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,(function(t){o[k(t)]=1})),n.forEach((function(t){(o[k(t.source)]||o[k(t.target)])&&i.mod.push(t)}))),i};var Ek=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},Ak=(1+Math.sqrt(5))/2;function Ck(t,e,n,r,i,o){for(var a,s,u,c,l,f,h,d,p,g,v,m=[],y=e.children,b=0,w=0,x=y.length,_=e.value;b<x;){u=i-n,c=o-r;do{l=y[w++].value}while(!l&&w<x);for(f=h=l,v=l*l*(g=Math.max(c/u,u/c)/(_*t)),p=Math.max(h/v,v/f);w<x;++w){if(l+=s=y[w].value,s<f&&(f=s),s>h&&(h=s),v=l*l*g,(d=Math.max(h/v,v/f))>p){l-=s;break}p=d}m.push(a={value:l,dice:u<c,children:y.slice(b,w)}),a.dice?nk(a,n,r,i,_?r+=c*l/_:o):Ek(a,n,r,_?n+=u*l/_:i,o),_-=l,b=w}return m}var jk=function t(e){function n(t,n,r,i,o){Ck(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Ak),Tk=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,l,f=-1,h=a.length,d=t.value;++f<h;){for(u=(s=a[f]).children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?nk(s,n,r,i,r+=(o-r)*s.value/d):Ek(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}else t._squarify=a=Ck(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Ak),Mk={binary:function(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(e>=n-1){var l=s[e];return l.x0=i,l.y0=o,l.x1=a,void(l.y1=u)}var f=c[e],h=r/2+f,d=e+1,p=n-1;for(;d<p;){var g=d+p>>>1;c[g]<h?d=g+1:p=g}h-c[d-1]<c[d]-h&&e+1<d&&--d;var v=c[d]-f,m=r-v;if(a-i>u-o){var y=(i*m+a*v)/r;t(e,d,v,i,o,y,u),t(d,n,m,y,o,a,u)}else{var b=(o*m+u*v)/r;t(e,d,v,i,o,a,b),t(d,n,m,i,b,a,u)}}(0,u,t.value,e,n,r,i)},dice:nk,slice:Ek,slicedice:function(t,e,n,r,i){(1&t.depth?Ek:nk)(t,e,n,r,i)},squarify:jk,resquarify:Tk},Rk=["x0","y0","x1","y1","depth","children"];function Dk(t){CO.call(this,t)}Dk.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Rk.length,default:Rk}]};var Lk=Object(p.y)(Dk,CO);Lk.layout=function(){var t=function(){var t=jk,e=!1,n=1,r=1,i=[0],o=qO,a=qO,s=qO,u=qO,c=qO;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(ek),t}function f(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<l&&(l=h=(l+h)/2),e.x0=r,e.y0=l,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,l+=a(e)-n,(f-=s(e)-n)<r&&(r=f=(r+f)/2),(h-=u(e)-n)<l&&(l=h=(l+h)/2),t(e,r,l,f,h))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=VO(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o="function"===typeof t?t:GO(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(a="function"===typeof t?t:GO(+t),l):a},l.paddingRight=function(t){return arguments.length?(s="function"===typeof t?t:GO(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"===typeof t?t:GO(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"===typeof t?t:GO(+t),l):c},l}();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){Object(p.v)(Mk,e)?t.tile(Mk[e]):Object(p.n)("Unrecognized Treemap layout method: "+e)},t},Lk.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],Lk.fields=Rk;var Nk=function(t,e){var n,r,i,o,a,s,u=[],c=function(t){return t(o)};if(null==e)u.push(t);else for(n={},r=0,i=t.length;r<i;++r)o=t[r],(s=n[a=e.map(c)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u};function Ik(t){go.call(this,null,t)}Ik.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Object(p.y)(Ik,go).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=e.materialize(e.SOURCE).source,i=Nk(r,t.groupby),o=(t.groupby||[]).map(p.h),a=o.length,s=t.as||[Object(p.h)(t.x),Object(p.h)(t.y)],u=[];i.forEach((function(e){Da(e,t.x,t.y,t.bandwidth||.3).forEach((function(t){for(var n={},r=0;r<a;++r)n[o[r]]=e.dims[r];n[s[0]]=t[0],n[s[1]]=t[1],u.push(E(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n};var Fk={linear:ka,log:Sa,exp:Aa,pow:Ca,quad:ja,poly:Ta};function Pk(t){go.call(this,null,t)}Pk.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Fk)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Object(p.y)(Pk,go).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=e.materialize(e.SOURCE).source,i=Nk(r,t.groupby),o=(t.groupby||[]).map(p.h),a=t.method||"linear",s=t.order||3,u=function(t,e){return"poly"===t?e:"quad"===t?2:1}(a,s),c=t.as||[Object(p.h)(t.x),Object(p.h)(t.y)],l=Fk[a],f=[],h=t.extent;Object(p.v)(Fk,a)||Object(p.n)("Invalid regression method: "+a),null!=h&&"log"===a&&h[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),i.forEach((function(n){if(n.length<=u)e.dataflow.warn("Skipping regression with more parameters than data points.");else{var r=l(n,t.x,t.y,s);if(t.params)f.push(E({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));else{var i=h||Object(p.p)(n,t.x),d=function(t){for(var e={},r=0;r<o.length;++r)e[o[r]]=n.dims[r];e[c[0]]=t[0],e[c[1]]=t[1],f.push(E(e))};"linear"===a?i.forEach((function(t){return d([t,r.predict(t)])})):Fa(r.predict,i,25,200).forEach(d)}}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n};var $k=n(5),zk=n(6),Bk=Math.pow(2,-52),Uk=new Uint32Array(512),Wk=function(){function t(e){Object($k.a)(this,t);var n=e.length>>1;if(n>0&&"number"!==typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return Object(zk.a)(t,null,[{key:"from",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xk,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zk,i=e.length,o=new Float64Array(2*i),a=0;a<i;a++){var s=e[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new t(o)}}]),Object(zk.a)(t,[{key:"update",value:function(){for(var t=this.coords,e=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,o=t.length>>1,a=1/0,s=1/0,u=-1/0,c=-1/0,l=0;l<o;l++){var f=t[2*l],h=t[2*l+1];f<a&&(a=f),h<s&&(s=h),f>u&&(u=f),h>c&&(c=h),this._ids[l]=l}for(var d,p,g,v=(a+u)/2,m=(s+c)/2,y=1/0,b=0;b<o;b++){var w=Hk(v,m,t[2*b],t[2*b+1]);w<y&&(d=b,y=w)}var x=t[2*d],_=t[2*d+1];y=1/0;for(var O=0;O<o;O++)if(O!==d){var k=Hk(x,_,t[2*O],t[2*O+1]);k<y&&k>0&&(p=O,y=k)}for(var S=t[2*p],E=t[2*p+1],A=1/0,C=0;C<o;C++)if(C!==d&&C!==p){var j=Kk(x,_,S,E,t[2*C],t[2*C+1]);j<A&&(g=C,A=j)}var T=t[2*g],M=t[2*g+1];if(A===1/0){for(var R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];Yk(this._ids,this._dists,0,o-1);for(var D=new Uint32Array(o),L=0,N=0,I=-1/0;N<o;N++){var F=this._ids[N];this._dists[F]>I&&(D[L++]=F,I=this._dists[F])}return this.hull=D.subarray(0,L),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(qk(x,_,S,E,T,M)){var P=p,$=S,z=E;p=g,S=T,E=M,g=P,T=$,M=z}var B=function(t,e,n,r,i,o){var a=n-t,s=r-e,u=i-t,c=o-e,l=a*a+s*s,f=u*u+c*c,h=.5/(a*c-s*u);return{x:t+(c*l-s*f)*h,y:e+(a*f-u*l)*h}}(x,_,S,E,T,M);this._cx=B.x,this._cy=B.y;for(var U=0;U<o;U++)this._dists[U]=Hk(t[2*U],t[2*U+1],B.x,B.y);Yk(this._ids,this._dists,0,o-1),this._hullStart=d;var W=3;n[d]=e[g]=p,n[p]=e[d]=g,n[g]=e[p]=d,r[d]=0,r[p]=1,r[g]=2,i.fill(-1),i[this._hashKey(x,_)]=d,i[this._hashKey(S,E)]=p,i[this._hashKey(T,M)]=g,this.trianglesLen=0,this._addTriangle(d,p,g,-1,-1,-1);for(var H,V,q=0;q<this._ids.length;q++){var G=this._ids[q],K=t[2*G],Y=t[2*G+1];if(!(q>0&&Math.abs(K-H)<=Bk&&Math.abs(Y-V)<=Bk)&&(H=K,V=Y,G!==d&&G!==p&&G!==g)){for(var Q=0,X=0,Z=this._hashKey(K,Y);X<this._hashSize&&(-1===(Q=i[(Z+X)%this._hashSize])||Q===n[Q]);X++);for(var J=Q=e[Q],tt=void 0;tt=n[J],!qk(K,Y,t[2*J],t[2*J+1],t[2*tt],t[2*tt+1]);)if((J=tt)===Q){J=-1;break}if(-1!==J){var et=this._addTriangle(J,G,n[J],-1,-1,r[J]);r[G]=this._legalize(et+2),r[J]=et,W++;for(var nt=n[J];tt=n[nt],qk(K,Y,t[2*nt],t[2*nt+1],t[2*tt],t[2*tt+1]);)et=this._addTriangle(nt,G,tt,r[G],-1,r[nt]),r[G]=this._legalize(et+2),n[nt]=nt,W--,nt=tt;if(J===Q)for(;qk(K,Y,t[2*(tt=e[J])],t[2*tt+1],t[2*J],t[2*J+1]);)et=this._addTriangle(tt,G,J,-1,r[J],r[tt]),this._legalize(et+2),r[tt]=et,n[J]=J,W--,J=tt;this._hullStart=e[G]=J,n[J]=e[nt]=G,n[G]=nt,i[this._hashKey(K,Y)]=G,i[this._hashKey(t[2*J],t[2*J+1])]=J}}}this.hull=new Uint32Array(W);for(var rt=0,it=this._hullStart;rt<W;rt++)this.hull[rt]=it,it=n[it];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(t,e){return Math.floor(function(t,e){var n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(t){for(var e=this._triangles,n=this._halfedges,r=this.coords,i=0,o=0;;){var a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1!==a){var u=a-a%3,c=s+(t+1)%3,l=u+(a+2)%3,f=e[o],h=e[t],d=e[c],p=e[l];if(Gk(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){e[t]=p,e[a]=f;var g=n[l];if(-1===g){var v=this._hullStart;do{if(this._hullTri[v]===l){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,g),this._link(a,n[o]),this._link(o,l);var m=u+(a+1)%3;i<Uk.length&&(Uk[i++]=m)}else{if(0===i)break;t=Uk[--i]}}else{if(0===i)break;t=Uk[--i]}}return o}},{key:"_link",value:function(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}},{key:"_addTriangle",value:function(t,e,n,r,i,o){var a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}]),t}();function Hk(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function Vk(t,e,n,r,i,o){var a=(r-e)*(i-t),s=(n-t)*(o-e);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function qk(t,e,n,r,i,o){return(Vk(i,o,t,e,n,r)||Vk(t,e,n,r,i,o)||Vk(n,r,i,o,t,e))<0}function Gk(t,e,n,r,i,o,a,s){var u=t-a,c=e-s,l=n-a,f=r-s,h=i-a,d=o-s,p=l*l+f*f,g=h*h+d*d;return u*(f*g-p*d)-c*(l*g-p*h)+(u*u+c*c)*(l*d-f*h)<0}function Kk(t,e,n,r,i,o){var a=n-t,s=r-e,u=i-t,c=o-e,l=a*a+s*s,f=u*u+c*c,h=.5/(a*c-s*u),d=(c*l-s*f)*h,p=(a*f-u*l)*h;return d*d+p*p}function Yk(t,e,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var o=t[i],a=e[o],s=i-1;s>=n&&e[t[s]]>a;)t[s+1]=t[s--];t[s+1]=o}else{var u=n+1,c=r;Qk(t,n+r>>1,u),e[t[n]]>e[t[r]]&&Qk(t,n,r),e[t[u]]>e[t[r]]&&Qk(t,u,r),e[t[n]]>e[t[u]]&&Qk(t,n,u);for(var l=t[u],f=e[l];;){do{u++}while(e[t[u]]<f);do{c--}while(e[t[c]]>f);if(c<u)break;Qk(t,u,c)}t[n+1]=t[c],t[c]=l,r-u+1>=c-n?(Yk(t,e,u,r),Yk(t,e,n,c-1)):(Yk(t,e,n,c-1),Yk(t,e,u,r))}}function Qk(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Xk(t){return t[0]}function Zk(t){return t[1]}var Jk=function(){function t(){Object($k.a)(this,t),this._x0=this._y0=this._x1=this._y1=null,this._=""}return Object(zk.a)(t,[{key:"moveTo",value:function(t,e){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(t,e){this._+="L".concat(this._x1=+t,",").concat(this._y1=+e)}},{key:"arc",value:function(t,e,n){var r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-i)>1e-6)&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(t-n,",").concat(e,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function(t,e,n,r){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}]),t}(),tS=function(){function t(){Object($k.a)(this,t),this._=[]}return Object(zk.a)(t,[{key:"moveTo",value:function(t,e){this._.push([t,e])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(t,e){this._.push([t,e])}},{key:"value",value:function(){return this._.length?this._:null}}]),t}(),eS=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],r=Object(Ea.a)(n,4),i=r[0],o=r[1],a=r[2],s=r[3];if(Object($k.a)(this,t),!((a=+a)>=(i=+i))||!((s=+s)>=(o=+o)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=a,this.xmin=i,this.ymax=s,this.ymin=o,this._init()}return Object(zk.a)(t,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var t,e,n=this.delaunay,r=n.points,i=n.hull,o=n.triangles,a=this.vectors,s=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2),u=0,c=0,l=o.length;u<l;u+=3,c+=2){var f=2*o[u],h=2*o[u+1],d=2*o[u+2],p=r[f],g=r[f+1],v=r[h],m=r[h+1],y=r[d],b=r[d+1],w=v-p,x=m-g,_=y-p,O=b-g,k=w*w+x*x,S=_*_+O*O,E=2*(w*O-x*_);if(E)if(Math.abs(E)<1e-8)t=(p+y)/2,e=(g+b)/2;else{var A=1/E;t=p+(O*k-x*S)*A,e=g+(w*S-_*k)*A}else t=(p+y)/2-1e8*O,e=(g+b)/2+1e8*_;s[c]=t,s[c+1]=e}var C,j,T,M=i[i.length-1],R=4*M,D=r[2*M],L=r[2*M+1];a.fill(0);for(var N=0;N<i.length;++N)C=R,j=D,T=L,R=4*(M=i[N]),D=r[2*M],L=r[2*M+1],a[C+2]=a[R]=T-L,a[C+3]=a[R+1]=D-j}},{key:"render",value:function(t){var e=null==t?t=new Jk:void 0,n=this.delaunay,r=n.halfedges,i=n.inedges,o=n.hull,a=this.circumcenters,s=this.vectors;if(o.length<=1)return null;for(var u=0,c=r.length;u<c;++u){var l=r[u];if(!(l<u)){var f=2*Math.floor(u/3),h=2*Math.floor(l/3),d=a[f],p=a[f+1],g=a[h],v=a[h+1];this._renderSegment(d,p,g,v,t)}}for(var m,y=o[o.length-1],b=0;b<o.length;++b){m=y,y=o[b];var w=2*Math.floor(i[y]/3),x=a[w],_=a[w+1],O=4*m,k=this._project(x,_,s[O+2],s[O+3]);k&&this._renderSegment(x,_,k[0],k[1],t)}return e&&e.value()}},{key:"renderBounds",value:function(t){var e=null==t?t=new Jk:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}},{key:"renderCell",value:function(t,e){var n=null==e?e=new Jk:void 0,r=this._clip(t);if(null!==r&&r.length){e.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(var o=2;o<i;o+=2)r[o]===r[o-2]&&r[o+1]===r[o-1]||e.lineTo(r[o],r[o+1]);return e.closePath(),n&&n.value()}}},{key:"cellPolygons",value:m.a.mark((function t(){var e,n,r,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.delaunay.points,n=0,r=e.length/2;case 2:if(!(n<r)){t.next=11;break}if(!(i=this.cellPolygon(n))){t.next=8;break}return i.index=n,t.next=8,i;case 8:++n,t.next=2;break;case 11:case"end":return t.stop()}}),t,this)}))},{key:"cellPolygon",value:function(t){var e=new tS;return this.renderCell(t,e),e.value()}},{key:"_renderSegment",value:function(t,e,n,r,i){var o,a=this._regioncode(t,e),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}},{key:"contains",value:function(t,e,n){return(e=+e)===e&&(n=+n)===n&&this.delaunay._step(t,e,n)===t}},{key:"neighbors",value:m.a.mark((function t(e){var n,r,i,o,a,s,u,c,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this._clip(e))){t.next=33;break}r=Object(Do.a)(this.delaunay.neighbors(e)),t.prev=3,r.s();case 5:if((i=r.n()).done){t.next=25;break}if(o=i.value,!(a=this._clip(o))){t.next=23;break}s=0,u=n.length;case 10:if(!(s<u)){t.next=23;break}c=0,l=a.length;case 12:if(!(c<l)){t.next=20;break}if(n[s]!=a[c]||n[s+1]!=a[c+1]||n[(s+2)%u]!=a[(c+l-2)%l]||n[(s+3)%u]!=a[(c+l-1)%l]){t.next=17;break}return t.next=16,o;case 16:return t.abrupt("break",23);case 17:c+=2,t.next=12;break;case 20:s+=2,t.next=10;break;case 23:t.next=5;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(3),r.e(t.t0);case 30:return t.prev=30,r.f(),t.finish(30);case 33:case"end":return t.stop()}}),t,this,[[3,27,30,33]])}))},{key:"_cell",value:function(t){var e=this.circumcenters,n=this.delaunay,r=n.inedges,i=n.halfedges,o=n.triangles,a=r[t];if(-1===a)return null;var s=[],u=a;do{var c=Math.floor(u/3);if(s.push(e[2*c],e[2*c+1]),o[u=u%3===2?u-2:u+1]!==t)break;u=i[u]}while(u!==a&&-1!==u);return s}},{key:"_clip",value:function(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var e=this._cell(t);if(null===e)return null;var n=this.vectors,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}},{key:"_clipFinite",value:function(t,e){for(var n,r,i,o,a,s=e.length,u=null,c=e[s-2],l=e[s-1],f=this._regioncode(c,l),h=0;h<s;h+=2)if(n=c,r=l,c=e[h],l=e[h+1],i=f,f=this._regioncode(c,l),0===i&&0===f)o=a,a=0,u?u.push(c,l):u=[c,l];else{var d=void 0,p=void 0,g=void 0,v=void 0,m=void 0;if(0===i){if(null===(d=this._clipSegment(n,r,c,l,i,f)))continue;var y=d,b=Object(Ea.a)(y,4);p=b[0],g=b[1],v=b[2],m=b[3]}else{if(null===(d=this._clipSegment(c,l,n,r,f,i)))continue;var w=d,x=Object(Ea.a)(w,4);v=x[0],m=x[1],p=x[2],g=x[3],o=a,a=this._edgecode(p,g),o&&a&&this._edge(t,o,a,u,u.length),u?u.push(p,g):u=[p,g]}o=a,a=this._edgecode(v,m),o&&a&&this._edge(t,o,a,u,u.length),u?u.push(v,m):u=[v,m]}if(u)o=a,a=this._edgecode(u[0],u[1]),o&&a&&this._edge(t,o,a,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}},{key:"_clipSegment",value:function(t,e,n,r,i,o){for(;;){if(0===i&&0===o)return[t,e,n,r];if(i&o)return null;var a=void 0,s=void 0,u=i||o;8&u?(a=t+(n-t)*(this.ymax-e)/(r-e),s=this.ymax):4&u?(a=t+(n-t)*(this.ymin-e)/(r-e),s=this.ymin):2&u?(s=e+(r-e)*(this.xmax-t)/(n-t),a=this.xmax):(s=e+(r-e)*(this.xmin-t)/(n-t),a=this.xmin),i?(t=a,e=s,i=this._regioncode(t,e)):(n=a,r=s,o=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(t,e,n,r,i,o){var a,s=Array.from(e);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(var u,c=0,l=s.length,f=this._edgecode(s[l-2],s[l-1]);c<l;c+=2)u=f,f=this._edgecode(s[c],s[c+1]),u&&f&&(c=this._edge(t,u,f,s,c),l=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}},{key:"_edge",value:function(t,e,n,r,i){for(;e!==n;){var o=void 0,a=void 0;switch(e){case 5:e=4;continue;case 4:e=6,o=this.xmax,a=this.ymin;break;case 6:e=2;continue;case 2:e=10,o=this.xmax,a=this.ymax;break;case 10:e=8;continue;case 8:e=9,o=this.xmin,a=this.ymax;break;case 9:e=1;continue;case 1:e=5,o=this.xmin,a=this.ymin}r[i]===o&&r[i+1]===a||!this.contains(t,o,a)||(r.splice(i,0,o,a),i+=2)}if(r.length>4)for(var s=0;s<r.length;s+=2){var u=(s+2)%r.length,c=(s+4)%r.length;(r[s]===r[u]&&r[u]===r[c]||r[s+1]===r[u+1]&&r[u+1]===r[c+1])&&(r.splice(u,2),s-=2)}return i}},{key:"_project",value:function(t,e,n,r){var i,o,a,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(a=this.ymin,o=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(a=this.ymax,o=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(o=this.xmax,a=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(o=this.xmin,a=e+(s=i)*r)}return[o,a]}},{key:"_edgecode",value:function(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}},{key:"_regioncode",value:function(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}]),t}(),nS=m.a.mark(lS),rS=2*Math.PI,iS=Math.pow;function oS(t){return t[0]}function aS(t){return t[1]}function sS(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}var uS=function(){function t(e){Object($k.a)(this,t),this._delaunator=new Wk(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}return Object(zk.a)(t,null,[{key:"from",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oS,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aS,i=arguments.length>3?arguments[3]:void 0;return new t("length"in e?cS(e,n,r,i):Float64Array.from(lS(e,n,r,i)))}}]),Object(zk.a)(t,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){for(var e=t.triangles,n=t.coords,r=0;r<e.length;r+=3){var i=2*e[r],o=2*e[r+1],a=2*e[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},(function(t,e){return e})).sort((function(t,n){return e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]}));for(var n=this.collinear[0],r=this.collinear[this.collinear.length-1],i=[e[2*n],e[2*n+1],e[2*r],e[2*r+1]],o=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]),a=0,s=e.length/2;a<s;++a){var u=sS(e[2*a],e[2*a+1],o);e[2*a]=u[0],e[2*a+1]=u[1]}this._delaunator=new Wk(e)}else delete this.collinear;for(var c=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,h=this.inedges.fill(-1),d=this._hullIndex.fill(-1),p=0,g=c.length;p<g;++p){var v=f[p%3===2?p-2:p+1];-1!==c[p]&&-1!==h[v]||(h[v]=p)}for(var m=0,y=l.length;m<y;++m)d[l[m]]=m;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],this.triangles[1]=l[1],this.triangles[2]=l[1],h[l[0]]=1,2===l.length&&(h[l[1]]=0))}},{key:"voronoi",value:function(t){return new eS(this,t)}},{key:"neighbors",value:m.a.mark((function t(e){var n,r,i,o,a,s,u,c,l,f,h;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.inedges,r=this.hull,i=this._hullIndex,o=this.halfedges,a=this.triangles,!(s=this.collinear)){t.next=10;break}if(!((u=s.indexOf(e))>0)){t.next=6;break}return t.next=6,s[u-1];case 6:if(!(u<s.length-1)){t.next=9;break}return t.next=9,s[u+1];case 9:return t.abrupt("return");case 10:if(-1!==(c=n[e])){t.next=13;break}return t.abrupt("return");case 13:l=c,f=-1;case 14:return t.next=16,f=a[l];case 16:if(a[l=l%3===2?l-2:l+1]===e){t.next=19;break}return t.abrupt("return");case 19:if(-1!==(l=o[l])){t.next=26;break}if((h=r[(i[e]+1)%r.length])===f){t.next=25;break}return t.next=25,h;case 25:return t.abrupt("return");case 26:if(l!==c){t.next=14;break}case 27:case"end":return t.stop()}}),t,this)}))},{key:"find",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((t=+t)!==t||(e=+e)!==e)return-1;for(var r,i=n;(r=this._step(n,t,e))>=0&&r!==n&&r!==i;)n=r;return r}},{key:"_step",value:function(t,e,n){var r=this.inedges,i=this.hull,o=this._hullIndex,a=this.halfedges,s=this.triangles,u=this.points;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);var c=t,l=iS(e-u[2*t],2)+iS(n-u[2*t+1],2),f=r[t],h=f;do{var d=s[h],p=iS(e-u[2*d],2)+iS(n-u[2*d+1],2);if(p<l&&(l=p,c=d),s[h=h%3===2?h-2:h+1]!==t)break;if(-1===(h=a[h])){if((h=i[(o[t]+1)%i.length])!==d&&iS(e-u[2*h],2)+iS(n-u[2*h+1],2)<l)return h;break}}while(h!==f);return c}},{key:"render",value:function(t){for(var e=null==t?t=new Jk:void 0,n=this.points,r=this.halfedges,i=this.triangles,o=0,a=r.length;o<a;++o){var s=r[o];if(!(s<o)){var u=2*i[o],c=2*i[s];t.moveTo(n[u],n[u+1]),t.lineTo(n[c],n[c+1])}}return this.renderHull(t),e&&e.value()}},{key:"renderPoints",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=null==t?t=new Jk:void 0,r=this.points,i=0,o=r.length;i<o;i+=2){var a=r[i],s=r[i+1];t.moveTo(a+e,s),t.arc(a,s,e,0,rS)}return n&&n.value()}},{key:"renderHull",value:function(t){var e=null==t?t=new Jk:void 0,n=this.hull,r=this.points,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(var a=1;a<o;++a){var s=2*n[a];t.lineTo(r[s],r[s+1])}return t.closePath(),e&&e.value()}},{key:"hullPolygon",value:function(){var t=new tS;return this.renderHull(t),t.value()}},{key:"renderTriangle",value:function(t,e){var n=null==e?e=new Jk:void 0,r=this.points,i=this.triangles,o=2*i[t*=3],a=2*i[t+1],s=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[a],r[a+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}},{key:"trianglePolygons",value:m.a.mark((function t(){var e,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.triangles,n=0,r=e.length/3;case 2:if(!(n<r)){t.next=8;break}return t.next=5,this.trianglePolygon(n);case 5:++n,t.next=2;break;case 8:case"end":return t.stop()}}),t,this)}))},{key:"trianglePolygon",value:function(t){var e=new tS;return this.renderTriangle(t,e),e.value()}}]),t}();function cS(t,e,n,r){for(var i=t.length,o=new Float64Array(2*i),a=0;a<i;++a){var s=t[a];o[2*a]=e.call(r,s,a,t),o[2*a+1]=n.call(r,s,a,t)}return o}function lS(t,e,n,r){var i,o,a,s;return m.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:i=0,o=Object(Do.a)(t),u.prev=2,o.s();case 4:if((a=o.n()).done){u.next=13;break}return s=a.value,u.next=8,e.call(r,s,i,t);case 8:return u.next=10,n.call(r,s,i,t);case 10:++i;case 11:u.next=4;break;case 13:u.next=18;break;case 15:u.prev=15,u.t0=u.catch(2),o.e(u.t0);case 18:return u.prev=18,o.f(),u.finish(18);case 21:case"end":return u.stop()}}),nS,null,[[2,15,18,21]])}function fS(t){go.call(this,null,t)}fS.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var hS=Object(p.y)(fS,go),dS=[-1e5,-1e5,1e5,1e5];function pS(t){for(var e=t[0][0],n=t[0][1],r=t.length-1;t[r][0]===e&&t[r][1]===n;--r);return"M"+t.slice(0,r+1).join("L")+"Z"}hS.transform=function(t,e){var n=t.as||"path",r=e.source;if(!r||!r.length)return e;var i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:dS;for(var o=this.value=uS.from(r,t.x,t.y).voronoi(i),a=0,s=r.length;a<s;++a){var u=o.cellPolygon(a);r[a][n]=u?pS(u):null}return e.reflow(t.modified()).modifies(n)};var gS=Math.PI/180,vS=function(){var t,e,n,r,i,o,a,s=[256,256],u=wS,c=[],l=Math.random,f={};function h(t,e,n){for(var r,i,o,a,c,f=e.x,h=e.y,d=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=u(s),g=l()<.5?1:-1,v=-g;(r=p(v+=g))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=d));)if(e.x=f+i,e.y=h+o,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>s[0]||e.y+e.y1>s[1])&&(!n||!yS(e,t,s[0]))&&(!n||(c=n,(a=e).x+a.x1>c[0].x&&a.x+a.x0<c[1].x&&a.y+a.y1>c[0].y&&a.y+a.y0<c[1].y))){for(var m,y=e.sprite,b=e.width>>5,w=s[0]>>5,x=e.x-(b<<4),_=127&x,O=32-_,k=e.y1-e.y0,S=(e.y+e.y0)*w+(x>>5),E=0;E<k;E++){m=0;for(var A=0;A<=b;A++)t[S+A]|=m<<O|(A<b?(m=y[E*b+A])>>>_:0);S+=w}return e.sprite=null,!0}return!1}return f.layout=function(){for(var u=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=2048/e,t.height=2048/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(Sl()),f=function(t){var e=[],n=-1;for(;++n<t;)e[n]=0;return e}((s[0]>>5)*s[1]),d=null,p=c.length,g=-1,v=[],m=c.map((function(s){return{text:t(s),font:e(s),style:r(s),weight:i(s),rotate:o(s),size:~~(n(s)+1e-14),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}})).sort((function(t,e){return e.size-t.size}));++g<p;){var y=m[g];y.x=s[0]*(l()+.5)>>1,y.y=s[1]*(l()+.5)>>1,mS(u,y,m,g),y.hasText&&h(f,y,d)&&(v.push(y),d?bS(d,y):d=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=s[0]>>1,y.y-=s[1]>>1)}return v},f.words=function(t){return arguments.length?(c=t,f):c},f.size=function(t){return arguments.length?(s=[+t[0],+t[1]],f):s},f.font=function(t){return arguments.length?(e=xS(t),f):e},f.fontStyle=function(t){return arguments.length?(r=xS(t),f):r},f.fontWeight=function(t){return arguments.length?(i=xS(t),f):i},f.rotate=function(t){return arguments.length?(o=xS(t),f):o},f.text=function(e){return arguments.length?(t=xS(e),f):t},f.spiral=function(t){return arguments.length?(u=_S[t]||t,f):u},f.fontSize=function(t){return arguments.length?(n=xS(t),f):n},f.padding=function(t){return arguments.length?(a=xS(t),f):a},f.random=function(t){return arguments.length?(l=t,f):l},f};function mS(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,2048/o,2048/o);var a,s,u,c,l,f=0,h=0,d=0,p=n.length;for(--r;++r<p;){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font,a=i.measureText(e.text+"m").width*o,u=e.size<<1,e.rotate){var g=Math.sin(e.rotate*gS),v=Math.cos(e.rotate*gS),m=a*v,y=a*g,b=u*v,w=u*g;a=Math.max(Math.abs(m+w),Math.abs(m-w))+31>>5<<5,u=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else a=a+31>>5<<5;if(u>d&&(d=u),f+a>=2048&&(f=0,h+=d,d=0),h+u>=2048)break;i.translate((f+(a>>1))/o,(h+(u>>1))/o),e.rotate&&i.rotate(e.rotate*gS),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=a,e.height=u,e.xoff=f,e.yoff=h,e.x1=a>>1,e.y1=u>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,f+=a}for(var x=i.getImageData(0,0,2048/o,2048/o).data,_=[];--r>=0;)if((e=n[r]).hasText){for(s=(a=e.width)>>5,u=e.y1-e.y0,c=0;c<u*s;c++)_[c]=0;if(null==(f=e.xoff))return;h=e.yoff;var O=0,k=-1;for(l=0;l<u;l++){for(c=0;c<a;c++){var S=s*l+(c>>5),E=x[2048*(h+l)+(f+c)<<2]?1<<31-c%32:0;_[S]|=E,O|=E}O?k=l:(e.y0++,u--,l--,h++)}e.y1=e.y0+k,e.sprite=_.slice(0,(e.y1-e.y0)*s)}}}function yS(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),s=127&a,u=32-s,c=t.y1-t.y0,l=(t.y+t.y0)*n+(a>>5),f=0;f<c;f++){r=0;for(var h=0;h<=o;h++)if((r<<u|(h<o?(r=i[f*o+h])>>>s:0))&e[l+h])return!0;l+=n}return!1}function bS(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function wS(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function xS(t){return"function"===typeof t?t:function(){return t}}var _S={archimedean:wS,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}},OS=["x","y","font","fontSize","fontStyle","fontWeight","angle"],kS=["text","font","rotate","fontSize","fontStyle","fontWeight"];function SS(t){go.call(this,vS(),t)}function ES(t){return new Uint8Array(t)}function AS(t){return new Uint16Array(t)}function CS(t){return new Uint32Array(t)}function jS(t,e,n){var r=(e<257?ES:e<65537?AS:CS)(t);return n&&r.set(n),r}SS.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:OS}]},Object(p.y)(SS,go).transform=function(t,e){!t.size||t.size[0]&&t.size[1]||Object(p.n)("Wordcloud size dimensions must be non-zero.");var n=t.modified();if(n||e.changed(e.ADD_REM)||kS.some((function(n){var r=t[n];return Object(p.D)(r)&&e.modified(r.fields)}))){var r,i=e.materialize(e.SOURCE).source,o=this.value,a=t.as||OS,s=t.fontSize||14;if(Object(p.D)(s)?r=t.fontSizeRange:s=Object(p.l)(s),r){var u=s,c=eg("sqrt")().domain(Object(p.p)(i,u)).range(r);s=function(t){return c(u(t))}}i.forEach((function(t){t[a[0]]=NaN,t[a[1]]=NaN,t[a[3]]=0}));for(var l,f,h=o.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(s).random(Ko).layout(),d=o.size(),g=d[0]>>1,v=d[1]>>1,m=0,y=h.length;m<y;++m)(f=(l=h[m]).datum)[a[0]]=l.x+g,f[a[1]]=l.y+v,f[a[2]]=l.font,f[a[3]]=l.size,f[a[4]]=l.style,f[a[5]]=l.weight,f[a[6]]=l.rotate;return e.reflow(n).modifies(a)}};var TS=function(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var n,i=this.bisect(this.range,t.value),o=t.index,a=i[0],s=i[1],u=o.length;for(n=0;n<a;++n)e[o[n]]|=r;for(n=s;n<u;++n)e[o[n]]|=r;return this}}};function MS(){var t=CS(0),e=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];var a,s,u,c,l,f,h,d=n,p=i.length,g=Array(p),v=CS(p);for(u=0;u<p;++u)g[u]=r(i[u]),v[u]=u;if(h=v,(f=g).sort.call(h,(function(t,e){var n=f[t],r=f[e];return n<r?-1:n>r?1:0})),c=f,l=h,g=Array.from(l,(function(t){return c[t]})),d)a=e,s=t,e=Array(d+p),t=CS(d+p),function(t,e,n,r,i,o,a,s,u){var c,l=0,f=0;for(c=0;l<r&&f<a;++c)e[l]<i[f]?(s[c]=e[l],u[c]=n[l++]):(s[c]=i[f],u[c]=o[f++]+t);for(;l<r;++l,++c)s[c]=e[l],u[c]=n[l];for(;f<a;++f,++c)s[c]=i[f],u[c]=o[f]+t}(o,a,s,d,g,v,p,e,t);else{if(o>0)for(u=0;u<p;++u)v[u]+=o;e=g,t=v}return n=d+p,{index:v,value:g}},remove:function(r,i){var o,a,s,u=n;for(a=0;!i[t[a]]&&a<u;++a);for(s=a;a<u;++a)i[o=t[a]]||(t[s]=o,e[s]=e[a],++s);n=u-r},bisect:function(t,r){var i;return r?i=r.length:(r=e,i=n),[ad(r,t[0],0,i),od(r,t[1],0,i)]},reindex:function(e){for(var r=0,i=n;r<i;++r)t[r]=e[t[r]]},index:function(){return t},size:function(){return n}}}function RS(t){go.call(this,function(){var t=8,e=[],n=CS(0),r=jS(0,t),i=jS(0,t);return{data:function(){return e},seen:function(){return t=n,r=e.length,n=t.length>=r?t:((i=i||new t.constructor(r)).set(t),i);var t,r,i},add:function(t){for(var n,r=0,i=e.length,o=t.length;r<o;++r)(n=t[r])._index=i++,e.push(n)},remove:function(t,n){var o,a,s,u=e.length,c=Array(u-t),l=e;for(a=0;!n[a]&&a<u;++a)c[a]=e[a],l[a]=a;for(s=a;a<u;++a)o=e[a],n[a]?l[a]=-1:(l[a]=s,r[s]=r[a],i[s]=i[a],c[s]=o,o._index=s++),r[a]=0;return e=c,l},size:function(){return e.length},curr:function(){return r},prev:function(){return i},reset:function(t){i[t]=r[t]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(t,e){r[t]|=e},clear:function(t,e){r[t]&=~e},resize:function(e,n){(e>r.length||n>t)&&(t=Math.max(n,t),r=jS(e,t,r),i=jS(e,t))}}}(),t),this._indices=null,this._dims=null}RS.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var DS=Object(p.y)(RS,go);function LS(t){go.call(this,null,t)}DS.transform=function(t,e){return this._dims?t.modified("fields")||t.fields.some((function(t){return e.modified(t.fields)}))?this.reinit(t,e):this.eval(t,e):this.init(t,e)},DS.init=function(t,e){for(var n,r,i=t.fields,o=t.query,a=this._indices={},s=this._dims=[],u=o.length,c=0;c<u;++c)r=a[n=i[c].fname]||(a[n]=MS()),s.push(TS(r,c,o[c]));return this.eval(t,e)},DS.reinit=function(t,e){var n,r,i,o,a,s,u,c,l,f=e.materialize().fork(),h=t.fields,d=t.query,p=this._indices,g=this._dims,v=this.value,m=v.curr(),y=v.prev(),b=v.all(),w=f.rem=f.add,x=f.mod,_=d.length,O={};if(y.set(m),e.rem.length&&(a=this.remove(t,e,f)),e.add.length&&v.add(e.add),e.mod.length)for(s={},u=0,c=(o=e.mod).length;u<c;++u)s[o[u]._index]=1;for(u=0;u<_;++u)l=h[u],(!g[u]||t.modified("fields",u)||e.modified(l.fields))&&((n=O[i=l.fname])||(p[i]=r=MS(),O[i]=n=r.insert(l,e.source,0)),g[u]=TS(r,u,d[u]).onAdd(n,m));for(u=0,c=v.data().length;u<c;++u)a[u]||(y[u]!==m[u]?w.push(u):s[u]&&m[u]!==b&&x.push(u));return v.mask=(1<<_)-1,f},DS.eval=function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},DS.insert=function(t,e,n){var r,i,o,a=e.add,s=this.value,u=this._dims,c=this._indices,l=t.fields,f={},h=n.add,d=s.size(),p=d+a.length,g=u.length;s.resize(p,g),s.add(a);var v=s.curr(),m=s.prev(),y=s.all();for(r=0;r<g;++r)o=f[i=l[r].fname]||(f[i]=c[i].insert(l[r],a,d)),u[r].onAdd(o,v);for(;d<p;++d)m[d]=y,v[d]!==y&&h.push(d)},DS.modify=function(t,e){var n,r,i,o=e.mod,a=this.value,s=a.curr(),u=a.all(),c=t.mod;for(n=0,r=c.length;n<r;++n)s[i=c[n]._index]!==u&&o.push(i)},DS.remove=function(t,e,n){var r,i,o,a,s=this._indices,u=this.value,c=u.curr(),l=u.prev(),f=u.all(),h={},d=n.rem,p=e.rem;for(r=0,i=p.length;r<i;++r)h[o=p[r]._index]=1,l[o]=a=c[o],c[o]=f,a!==f&&d.push(o);for(o in s)s[o].remove(i,h);return this.reindex(e,i,h),h},DS.reindex=function(t,e,n){var r=this._indices,i=this.value;t.runAfter((function(){var t=i.remove(e,n);for(var o in r)r[o].reindex(t)}))},DS.update=function(t,e,n){var r,i,o=this._dims,a=t.query,s=e.stamp,u=o.length,c=0;for(n.filters=0,i=0;i<u;++i)t.modified("query",i)&&(r=i,++c);if(1===c)c=o[r].one,this.incrementOne(o[r],a[r],n.add,n.rem);else for(i=0,c=0;i<u;++i)t.modified("query",i)&&(c|=o[i].one,this.incrementAll(o[i],a[i],s,n.add),n.rem=n.add);return c},DS.incrementAll=function(t,e,n,r){var i,o,a,s=this.value,u=s.seen(),c=s.curr(),l=s.prev(),f=t.index(),h=t.bisect(t.range),d=t.bisect(e),p=d[0],g=d[1],v=h[0],m=h[1],y=t.one;if(p<v)for(i=p,o=Math.min(v,g);i<o;++i)u[a=f[i]]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;else if(p>v)for(i=v,o=Math.min(p,m);i<o;++i)u[a=f[i]]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;if(g>m)for(i=Math.max(p,m),o=g;i<o;++i)u[a=f[i]]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;else if(g<m)for(i=Math.max(v,g),o=m;i<o;++i)u[a=f[i]]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;t.range=e.slice()},DS.incrementOne=function(t,e,n,r){var i,o,a,s=this.value.curr(),u=t.index(),c=t.bisect(t.range),l=t.bisect(e),f=l[0],h=l[1],d=c[0],p=c[1],g=t.one;if(f<d)for(i=f,o=Math.min(d,h);i<o;++i)s[a=u[i]]^=g,n.push(a);else if(f>d)for(i=d,o=Math.min(f,p);i<o;++i)s[a=u[i]]^=g,r.push(a);if(h>p)for(i=Math.max(f,p),o=h;i<o;++i)s[a=u[i]]^=g,n.push(a);else if(h<p)for(i=Math.max(d,h),o=p;i<o;++i)s[a=u[i]]^=g,r.push(a);t.range=e.slice()},LS.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(p.y)(LS,go).transform=function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(0===(i&n))return e.StopPropagation;var o=e.fork(e.ALL),a=r.data(),s=r.curr(),u=r.prev(),c=function(t){return s[t]&n?null:a[t]};return o.filter(o.MOD,c),i&i-1?(o.filter(o.ADD,(function(t){var e=s[t]&n;return!e&&e^u[t]&n?a[t]:null})),o.filter(o.REM,(function(t){var e=s[t]&n;return e&&!(e^e^u[t]&n)?a[t]:null}))):(o.filter(o.ADD,c),o.filter(o.REM,(function(t){return(s[t]&n)===i?a[t]:null}))),o.filter(o.SOURCE,(function(t){return c(t._index)}))};var NS=n(114);function IS(t,e){t&&(null==e?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function FS(t,e){var n=t.globalCursor()?"undefined"!==typeof document&&document.body:t.container();if(n)return null==e?n.style.removeProperty("cursor"):n.style.cursor=e}function PS(t,e){var n=t._runtime.data;return Object(p.v)(n,e)||Object(p.n)("Unrecognized data set: "+e),n[e]}function $S(t,e){M(e)||Object(p.n)("Second argument to changes must be a changeset.");var n=PS(this,t);return n.modified=!0,this.pulse(n.input,e)}function zS(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function BS(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function US(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function WS(t){var e=US(t),n=zS(t),r=BS(t);t._renderer.background(t.background()),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach((function(e){try{e(n,r)}catch(i){t.error(i)}}))}var HS=function(t,e,n){var r,i,o,a=t._renderer,s=a&&a.canvas();return s&&(o=US(t),i=e.changedTouches?e.changedTouches[0]:e,(r=Eh(i,s))[0]-=o[0],r[1]-=o[1]),e.dataflow=t,e.item=n,e.vega=function(t,e,n){var r=e?"group"===e.mark.marktype?e:e.mark.group:null;function i(t){var n,i=r;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(t){if(!t)return n;Object(p.H)(t)&&(t=i(t));for(var e=n.slice();t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:Object(p.l)(t),item:Object(p.l)(e||{}),group:i,xy:o,x:function(t){return o(t)[0]},y:function(t){return o(t)[1]}}}(t,n,r),e};var VS={trap:!1};function qS(t,e,n){var r=t._eventConfig&&t._eventConfig[e];return!(!1===r||Object(p.F)(r)&&!r[n])||(t.warn("Blocked ".concat(e," ").concat(n," event listener.")),!1)}function GS(t){return t.item}function KS(t){return t.item.mark.source}function YS(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}var QS=function(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r},XS=function(t,e,n){if(e){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(e){e!==t.signal(r.signal)&&t.runAsync(null,(function(){i.source=!0,t.signal(r.signal,e)}))}},r.debounce&&(i.update=Object(p.m)(r.debounce,i.update))),function(t,e,n,r){var i=QS("div",{class:"vega-bind"}),o="radio"===n.input?i:i.appendChild(QS("label"));o.appendChild(QS("span",{class:"vega-bind-name"},n.name||n.signal)),e.appendChild(i);var a=ZS;switch(n.input){case"checkbox":a=JS;break;case"select":a=tE;break;case"radio":a=eE;break;case"range":a=nE}a(t,o,n,r)}(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,(function(){i.source?i.source=!1:i.set(t.signal(r.signal))})),i.active=!0),i}};function ZS(t,e,n,r){var i=QS("input");for(var o in n)"signal"!==o&&"element"!==o&&i.setAttribute("input"===o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",(function(){return t.update(i.value)})),t.elements=[i],t.set=function(t){return i.value=t}}function JS(t,e,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var o=QS("input",i);e.appendChild(o),o.addEventListener("change",(function(){return t.update(o.checked)})),t.elements=[o],t.set=function(t){return o.checked=!!t||null}}function tE(t,e,n,r){var i=QS("select",{name:n.signal}),o=n.labels||[];n.options.forEach((function(t,e){var n={value:t};rE(t,r)&&(n.selected=!0),i.appendChild(QS("option",n,(o[e]||t)+""))})),e.appendChild(i),i.addEventListener("change",(function(){t.update(n.options[i.selectedIndex])})),t.elements=[i],t.set=function(t){for(var e=0,r=n.options.length;e<r;++e)if(rE(n.options[e],t))return void(i.selectedIndex=e)}}function eE(t,e,n,r){var i=QS("span",{class:"vega-bind-radio"}),o=n.labels||[];e.appendChild(i),t.elements=n.options.map((function(e,a){var s={type:"radio",name:n.signal,value:e};rE(e,r)&&(s.checked=!0);var u=QS("input",s);u.addEventListener("change",(function(){return t.update(e)}));var c=QS("label",{},(o[a]||e)+"");return c.prepend(u),i.appendChild(c),u})),t.set=function(e){for(var n=t.elements,r=n.length,i=0;i<r;++i)rE(n[i].value,e)&&(n[i].checked=!0)}}function nE(t,e,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||zt(o,i,100),s=QS("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;var u=QS("span",{},+r);e.appendChild(s),e.appendChild(u);var c=function(){u.textContent=s.value,t.update(+s.value)};s.addEventListener("input",c),s.addEventListener("change",c),t.elements=[s],t.set=function(t){s.value=t,u.textContent=t}}function rE(t,e){return t===e||t+""===e+""}var iE=function(t,e,n,r,i,o){return(e=e||new r(t.loader())).initialize(n,zS(t),BS(t),US(t),i,o).background(t.background())},oE=function(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null};function aE(t,e){if("string"===typeof e){if("undefined"===typeof document)return t.error("DOM document instance not found."),null;if(!(e=document.querySelector(e)))return t.error("Signal bind element not found: "+e),null}if(e)try{e.innerHTML=""}catch(n){e=null,t.error(n)}return e}var sE=function(t){return+t||0},uE=function(t){return Object(p.F)(t)?{top:sE(t.top),bottom:sE(t.bottom),left:sE(t.left),right:sE(t.right)}:function(t){return{top:t,bottom:t,left:t,right:t}}(sE(t))},cE=function(t,e,n,r){return lE.apply(this,arguments)};function lE(){return(lE=Object(y.a)(m.a.mark((function t(e,n,r,i){var o,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=lm(n),(a=o&&o.headless)||Object(p.n)("Unrecognized renderer type: "+n),t.next=4,e.runAsync();case 4:return t.abrupt("return",iE(e,null,null,a,r,i).renderAsync(e._scenegraph.root));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function fE(){return(fE=Object(y.a)(m.a.mark((function t(e,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e!==um.Canvas&&e!==um.SVG&&e!==um.PNG&&Object(p.n)("Unrecognized image type: "+e),t.next=3,cE(this,e,n);case 3:return r=t.sent,t.abrupt("return",e===um.SVG?hE(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png"));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function hE(t,e){var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}function dE(){return(dE=Object(y.a)(m.a.mark((function t(e,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cE(this,um.Canvas,e,n);case 2:return r=t.sent,t.abrupt("return",r.canvas());case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function pE(){return(pE=Object(y.a)(m.a.mark((function t(e){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cE(this,um.SVG,e);case 2:return n=t.sent,t.abrupt("return",n.svg());case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function gE(t){var e=this.context.data[t];return e?e.values.value:[]}var vE=function(t){return function(e,n){return this.context.dataflow.locale()[t](n)(e)}},mE=vE("format"),yE=vE("timeFormat"),bE=vE("utcFormat"),wE=vE("timeParse"),xE=vE("utcParse"),_E=new Date(2e3,0,1);function OE(t,e,n){return Number.isInteger(t)&&Number.isInteger(e)?(_E.setYear(2e3),_E.setMonth(t),_E.setDate(e),yE.call(this,_E,n)):""}var kE=n(23);function SE(t,e,n,r){e[0].type!==kE.b&&Object(p.n)("First argument to data functions must be a string literal.");var i=e[0].value,o=":"+i;if(!Object(p.v)(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(a){}}function EE(t,e,n,r){if(e[0].type===kE.b)AE(n,r,e[0].value);else for(t in n.scales)AE(n,r,t)}function AE(t,e,n){var r="%"+n;if(!Object(p.v)(e,r))try{e[r]=t.scaleRef(n)}catch(i){}}function CE(t,e){var n;return Object(p.D)(t)?t:Object(p.H)(t)?(n=e.scales[t])&&n.value:void 0}var jE,TE,ME,RE,DE,LE=rb(),NE=rb(),IE={point:Ab,lineStart:Ab,lineEnd:Ab,polygonStart:function(){LE.reset(),IE.lineStart=FE,IE.lineEnd=PE},polygonEnd:function(){var t=+LE;NE.add(t<0?lb+t:t),this.lineStart=this.lineEnd=this.point=Ab},sphere:function(){NE.add(lb)}};function FE(){IE.point=$E}function PE(){zE(jE,TE)}function $E(t,e){IE.point=zE,jE=t,TE=e,ME=t*=hb,RE=vb(e=(e*=hb)/2+cb),DE=xb(e)}function zE(t,e){var n=(t*=hb)-ME,r=n>=0?1:-1,i=r*n,o=vb(e=(e*=hb)/2+cb),a=xb(e),s=DE*a,u=RE*o+s*vb(i),c=s*r*xb(i);LE.add(gb(c,u)),ME=t,RE=o,DE=a}var BE,UE,WE,HE,VE,qE,GE,KE,YE,QE,XE=rb(),ZE={point:JE,lineStart:eA,lineEnd:nA,polygonStart:function(){ZE.point=rA,ZE.lineStart=iA,ZE.lineEnd=oA,XE.reset(),IE.polygonStart()},polygonEnd:function(){IE.polygonEnd(),ZE.point=JE,ZE.lineStart=eA,ZE.lineEnd=nA,LE<0?(BE=-(WE=180),UE=-(HE=90)):XE>1e-6?HE=90:XE<-1e-6&&(UE=-90),QE[0]=BE,QE[1]=WE},sphere:function(){BE=-(WE=180),UE=-(HE=90)}};function JE(t,e){YE.push(QE=[BE=t,WE=t]),e<UE&&(UE=e),e>HE&&(HE=e)}function tA(t,e){var n=Nw([t*hb,e*hb]);if(KE){var r=Fw(KE,n),i=Fw([r[1],-r[0],0],r);zw(i),i=Lw(i);var o,a=t-VE,s=a>0?1:-1,u=i[0]*fb*s,c=db(a)>180;c^(s*VE<u&&u<s*t)?(o=i[1]*fb)>HE&&(HE=o):c^(s*VE<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*fb)<UE&&(UE=o):(e<UE&&(UE=e),e>HE&&(HE=e)),c?t<VE?aA(BE,t)>aA(BE,WE)&&(WE=t):aA(t,WE)>aA(BE,WE)&&(BE=t):WE>=BE?(t<BE&&(BE=t),t>WE&&(WE=t)):t>VE?aA(BE,t)>aA(BE,WE)&&(WE=t):aA(t,WE)>aA(BE,WE)&&(BE=t)}else YE.push(QE=[BE=t,WE=t]);e<UE&&(UE=e),e>HE&&(HE=e),KE=n,VE=t}function eA(){ZE.point=tA}function nA(){QE[0]=BE,QE[1]=WE,ZE.point=JE,KE=null}function rA(t,e){if(KE){var n=t-VE;XE.add(db(n)>180?n+(n>0?360:-360):n)}else qE=t,GE=e;IE.point(t,e),tA(t,e)}function iA(){IE.lineStart()}function oA(){rA(qE,GE),IE.lineEnd(),db(XE)>1e-6&&(BE=-(WE=180)),QE[0]=BE,QE[1]=WE,KE=null}function aA(t,e){return(e-=t)<0?e+360:e}function sA(t,e){return t[0]-e[0]}function uA(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var cA,lA,fA,hA,dA,pA,gA,vA,mA,yA,bA,wA,xA,_A,OA,kA,SA={sphere:Ab,point:EA,lineStart:CA,lineEnd:MA,polygonStart:function(){SA.lineStart=RA,SA.lineEnd=DA},polygonEnd:function(){SA.lineStart=CA,SA.lineEnd=MA}};function EA(t,e){t*=hb;var n=vb(e*=hb);AA(n*vb(t),n*xb(t),xb(e))}function AA(t,e,n){++cA,fA+=(t-fA)/cA,hA+=(e-hA)/cA,dA+=(n-dA)/cA}function CA(){SA.point=jA}function jA(t,e){t*=hb;var n=vb(e*=hb);_A=n*vb(t),OA=n*xb(t),kA=xb(e),SA.point=TA,AA(_A,OA,kA)}function TA(t,e){t*=hb;var n=vb(e*=hb),r=n*vb(t),i=n*xb(t),o=xb(e),a=gb(Ob((a=OA*o-kA*i)*a+(a=kA*r-_A*o)*a+(a=_A*i-OA*r)*a),_A*r+OA*i+kA*o);lA+=a,pA+=a*(_A+(_A=r)),gA+=a*(OA+(OA=i)),vA+=a*(kA+(kA=o)),AA(_A,OA,kA)}function MA(){SA.point=EA}function RA(){SA.point=LA}function DA(){NA(wA,xA),SA.point=EA}function LA(t,e){wA=t,xA=e,t*=hb,e*=hb,SA.point=NA;var n=vb(e);_A=n*vb(t),OA=n*xb(t),kA=xb(e),AA(_A,OA,kA)}function NA(t,e){t*=hb;var n=vb(e*=hb),r=n*vb(t),i=n*xb(t),o=xb(e),a=OA*o-kA*i,s=kA*r-_A*o,u=_A*i-OA*r,c=Ob(a*a+s*s+u*u),l=Eb(c),f=c&&-l/c;mA+=f*a,yA+=f*s,bA+=f*u,lA+=l,pA+=l*(_A+(_A=r)),gA+=l*(OA+(OA=i)),vA+=l*(kA+(kA=o)),AA(_A,OA,kA)}function IA(t,e){return function(n,r,i){if(n){var o=CE(n,(i||this).context);return o&&o.path[t](r)}return e(r)}}var FA=IA("area",(function(t){return NE.reset(),nb(t,IE),2*NE})),PA=IA("bounds",(function(t){var e,n,r,i,o,a,s;if(HE=WE=-(BE=UE=1/0),YE=[],nb(t,ZE),n=YE.length){for(YE.sort(sA),e=1,o=[r=YE[0]];e<n;++e)uA(r,(i=YE[e])[0])||uA(r,i[1])?(aA(r[0],i[1])>aA(r[0],r[1])&&(r[1]=i[1]),aA(i[0],r[1])>aA(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=aA(r[1],i[0]))>a&&(a=s,BE=i[0],WE=r[1])}return YE=QE=null,BE===1/0||UE===1/0?[[NaN,NaN],[NaN,NaN]]:[[BE,UE],[WE,HE]]})),$A=IA("centroid",(function(t){cA=lA=fA=hA=dA=pA=gA=vA=mA=yA=bA=0,nb(t,SA);var e=mA,n=yA,r=bA,i=e*e+n*n+r*r;return i<1e-12&&(e=pA,n=gA,r=vA,lA<1e-6&&(e=fA,n=hA,r=dA),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[gb(n,e)*fb,Eb(r/Ob(i))*fb]}));function zA(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function BA(t){var e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function UA(t){var e=Fd(t);return.2126*BA(e.r)+.7152*BA(e.g)+.0722*BA(e.b)}function WA(t,e){return t===e||t!==t&&e!==e||(Object(p.A)(t)?!(!Object(p.A)(e)||t.length!==e.length)&&function(t,e){for(var n=0,r=t.length;n<r;++n)if(!WA(t[n],e[n]))return!1;return!0}(t,e):!(!Object(p.F)(t)||!Object(p.F)(e))&&HA(t,e))}function HA(t,e){for(var n in t)if(!WA(t[n],e[n]))return!1;return!0}function VA(t){return function(e){return HA(t,e)}}var qA=function(t){return t.data};function GA(t,e){var n=gE.call(e,t);return n.root&&n.root.lookup||{}}var KA=function(){return"undefined"!==typeof window&&window||null};function YA(t,e){for(var n,r,i=e.fields,o=e.values,a=i.length,s=0;s<a;++s)if((r=i[s]).getter=p.t.getter||Object(p.t)(r.field),n=r.getter(t),Object(p.C)(n)&&(n=Object(p.cb)(n)),Object(p.C)(o[s])&&(o[s]=Object(p.cb)(o[s])),Object(p.C)(o[s][0])&&(o[s]=o[s].map(p.cb)),"E"===r.type){if(Object(p.A)(o[s])?o[s].indexOf(n)<0:n!==o[s])return!1}else if("R"===r.type){if(!Object(p.z)(n,o[s]))return!1}else if("R-RE"===r.type){if(!Object(p.z)(n,o[s],!0,!1))return!1}else if("R-E"===r.type){if(!Object(p.z)(n,o[s],!1,!1))return!1}else if("R-LE"===r.type&&!Object(p.z)(n,o[s],!1,!0))return!1;return!0}var QA={E_union:function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter((function(t){return e.indexOf(t)>=0})):e},R_union:function(t,e){var n=Object(p.cb)(e[0]),r=Object(p.cb)(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]},R_intersect:function(t,e){var n=Object(p.cb)(e[0]),r=Object(p.cb)(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]}};function XA(t,e,n,r){e[0].type!==kE.b&&Object(p.n)("First argument to selection functions must be a string literal.");var i=e[0].value,o=":"+i;"intersect"!==(e.length>=2&&Object(p.U)(e).value)||Object(p.v)(r,"@unit")||(r["@unit"]=n.getData(i).indataRef(n,"unit")),Object(p.v)(r,o)||(r[o]=n.getData(i).tuplesRef())}var ZA={random:function(){return Ko()},cumulativeNormal:oa,cumulativeLogNormal:fa,cumulativeUniform:ma,densityNormal:ia,densityLogNormal:la,densityUniform:va,quantileNormal:aa,quantileLogNormal:ha,quantileUniform:ya,sampleNormal:ra,sampleLogNormal:ca,sampleUniform:ga,isArray:p.A,isBoolean:p.B,isDate:p.C,isDefined:function(t){return void 0!==t},isNumber:p.E,isObject:p.F,isRegExp:p.G,isString:p.H,isTuple:O,isValid:function(t){return null!=t&&t===t},toBoolean:p.ab,toDate:p.bb,toNumber:p.cb,toString:p.eb,flush:p.u,lerp:p.J,merge:function(){var t=[].slice.call(arguments);return t.unshift({}),p.o.apply(null,t)},pad:p.P,peek:p.U,span:p.X,inrange:p.z,truncate:p.fb,rgb:Fd,lab:Mg,hcl:Pg,hsl:Hd,luminance:UA,contrast:function(t,e){var n=UA(t),r=UA(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:zs,format:mE,utcFormat:bE,utcParse:xE,utcOffset:Zn,utcSequence:er,timeFormat:yE,timeParse:wE,timeOffset:Xn,timeSequence:tr,timeUnitSpecifier:Ae,monthFormat:function(t){return OE.call(this,t,1,"%B")},monthAbbrevFormat:function(t){return OE.call(this,t,1,"%b")},dayFormat:function(t){return OE.call(this,0,2+t,"%A")},dayAbbrevFormat:function(t){return OE.call(this,0,2+t,"%a")},quarter:p.V,utcquarter:p.hb,week:on,utcweek:fn,dayofyear:rn,utcdayofyear:ln,warn:function(){return zA(this.context.dataflow,"warn",arguments)},info:function(){return zA(this.context.dataflow,"info",arguments)},debug:function(){return zA(this.context.dataflow,"debug",arguments)},extent:p.p,inScope:function(t){var e=this.context.group,n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n},intersect:function(t,e,n){if(!t)return[];var r=Object(Ea.a)(t,2),i=r[0],o=r[1],a=(new xl).set(i[0],i[1],o[0],o[1]);return fm(n||this.context.dataflow.scenegraph().root,a,function(t){var e=null;if(t){var n=Object(p.i)(t.marktype),r=Object(p.i)(t.markname);e=function(t){return(!n.length||n.some((function(e){return t.marktype===e})))&&(!r.length||r.some((function(e){return t.name===e})))}}return e}(e))},clampRange:p.j,pinchDistance:function(t){var e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(t){var e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)},screen:function(){var t=KA();return t?t.screen:{}},containerSize:function(){var t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]},windowSize:function(){var t=KA();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]},bandspace:function(t,e,n){return Jh(t||0,e||0,n||0)},setdata:function(t,e){var n=this.context.dataflow,r=this.context.data[t].input;return n.pulse(r,n.changeset().remove(p.gb).insert(e)),1},pathShape:function(t){var e=null;return function(n){return n?kc(n,e=e||dc(t)):t}},panLinear:p.Q,panLog:p.R,panPow:p.S,panSymlog:p.T,zoomLinear:p.lb,zoomLog:p.mb,zoomPow:p.nb,zoomSymlog:p.ob,encode:function(t,e,n){if(t){var r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e))}return void 0!==n?n:t},modify:function(t,e,n,r,i,o){var a,s,u=this.context.dataflow,c=this.context.data[t],l=c.input,f=c.changes,h=u.stamp();if(!1===u._trigger||!(l.value.length||e||r))return 0;if((!f||f.stamp<h)&&(c.changes=f=u.changeset(),f.stamp=h,u.runAfter((function(){c.modified=!0,u.pulse(l,f).run()}),!0,1)),n&&(a=!0===n?p.gb:Object(p.A)(n)||O(n)?n:VA(n),f.remove(a)),e&&f.insert(e),r&&(a=VA(r),l.value.some(a)?f.remove(a):f.insert(r)),i)for(s in o)f.modify(i,s,o[s]);return 1}},JA=["view","item","group","xy","x","y"],tC={};function eC(t,e,n){return 1===arguments.length?ZA[t]:(ZA[t]=e,n&&(tC[t]=n),rC&&(rC.functions[t]="this."+t),this)}eC("bandwidth",(function(t,e){var n=CE(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}),EE),eC("copy",(function(t,e){var n=CE(t,(e||this).context);return n?n.copy():void 0}),EE),eC("domain",(function(t,e){var n=CE(t,(e||this).context);return n?n.domain():[]}),EE),eC("range",(function(t,e){var n=CE(t,(e||this).context);return n&&n.range?n.range():[]}),EE),eC("invert",(function(t,e,n){var r=CE(t,(n||this).context);return r?Object(p.A)(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}),EE),eC("scale",(function(t,e,n){var r=CE(t,(n||this).context);return r?r(e):void 0}),EE),eC("gradient",(function(t,e,n,r,i){t=CE(t,(i||this).context);var o=vu(e,n),a=t.domain(),s=a[0],u=Object(p.U)(a),c=p.x;return u-s?c=av(t,s,u):t=(t.interpolator?eg("sequential")().interpolator(t.interpolator()):eg("linear")().interpolate(t.interpolate()).range(t.range())).domain([s=0,u=1]),t.ticks&&(s!==(a=t.ticks(+r||15))[0]&&a.unshift(s),u!==Object(p.U)(a)&&a.push(u)),a.forEach((function(e){return o.stop(c(e),t(e))})),o}),EE),eC("geoArea",FA,EE),eC("geoBounds",PA,EE),eC("geoCentroid",$A,EE),eC("geoShape",(function(t,e,n){var r=CE(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}}),EE),eC("indata",(function(t,e,n){var r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(t,e,n,r){e[0].type!==kE.b&&Object(p.n)("First argument to indata must be a string literal."),e[1].type!==kE.b&&Object(p.n)("Second argument to indata must be a string literal.");var i=e[0].value,o=e[1].value,a="@"+o;Object(p.v)(a,r)||(r[a]=n.getData(i).indataRef(n,o))})),eC("data",gE,SE),eC("treePath",(function(t,e,n){var r=GA(t,this),i=r[e],o=r[n];return i&&o?i.path(o).map(qA):void 0}),SE),eC("treeAncestors",(function(t,e){var n=GA(t,this)[e];return n?n.ancestors().map(qA):void 0}),SE),eC("vlSelectionTest",(function(t,e,n){for(var r,i,o,a,s,u=this.context.data[t],c=u?u.values.value:[],l=u?u["index:unit"]&&u["index:unit"].value:void 0,f="intersect"===n,h=c.length,d=0;d<h;++d)if(r=c[d],l&&f){if(-1===(o=(i=i||{})[a=r.unit]||0))continue;if(s=YA(e,r),i[a]=s?-1:++o,s&&1===l.size)return!0;if(!s&&o===l.get(a).count)return!1}else if(f^(s=YA(e,r)))return s;return h&&f}),XA),eC("vlSelectionResolve",(function(t,e,n){for(var r,i,o,a,s,u,c,l,f,h,d,g=this.context.data[t],v=g?g.values.value:[],m={},y={},b={},w=v.length,x=0;x<w;++x){for(a=(r=v[x]).unit,i=r.fields,o=r.values,h=0,d=i.length;h<d;++h)s=i[h],c=(u=m[s.field]||(m[s.field]={}))[a]||(u[a]=[]),b[s.field]=l=s.type.charAt(0),f=QA[l+"_union"],u[a]=f(c,Object(p.i)(o[h]));n&&(c=y[a]||(y[a]=[])).push(Object(p.i)(o).reduce((function(t,e,n){return t[i[n].field]=e,t}),{}))}return e=e||"union",Object.keys(m).forEach((function(t){m[t]=Object.keys(m[t]).map((function(e){return m[t][e]})).reduce((function(n,r){return void 0===n?r:QA[b[t]+"_"+e](n,r)}))})),v=Object.keys(y),n&&v.length&&(m.vlMulti="union"===e?Object(fe.a)({},"or",v.reduce((function(t,e){return t.push.apply(t,y[e]),t}),[])):Object(fe.a)({},"and",v.map((function(t){return Object(fe.a)({},"or",y[t])})))),m}),XA);var nC={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(t){return"_["+Object(p.Z)("$"+t)+"]"},functions:function(t){var e=Object(kE.e)(t);for(var n in JA.forEach((function(t){return e[t]="event.vega."+t})),ZA)e[n]="this."+n;return Object(p.o)(e,function(t,e,n){e.__bandwidth=function(t){return t&&t.bandwidth?t.bandwidth():0},n._bandwidth=EE,n._range=EE,n._scale=EE;var r=function(e){return"_["+(e.type===kE.b?Object(p.Z)("%"+e.value):Object(p.Z)("%")+"+"+t(e))+"]"};return{_bandwidth:function(t){return"this.__bandwidth(".concat(r(t[0]),")")},_range:function(t){return"".concat(r(t[0]),".range()")},_scale:function(e){return"".concat(r(e[0]),"(").concat(t(e[1]),")")}}}(t,ZA,tC)),e},constants:kE.d,visitors:tC},rC=Object(kE.c)(nC),iC=function(t,e){var n,r,i={};try{t=Object(p.H)(t)?t:Object(p.Z)(t)+"",n=Object(kE.f)(t)}catch(o){Object(p.n)("Expression parse error: "+t)}return n.visit((function(t){if(t.type===kE.a){var n=t.callee.name,r=nC.visitors[n];r&&r(n,t.arguments,e,i)}})),(r=rC(n)).globals.forEach((function(t){var n="$"+t;!Object(p.v)(i,n)&&e.getSignal(t)&&(i[n]=e.signalRef(t))})),{$expr:Object(p.o)({code:r.code},e.options.ast?{ast:n}:null),$fields:r.fields,$params:i}},oC=Object(p.db)(["rule"]),aC=Object(p.db)(["group","image","rect"]);function sC(t){return(t+"").toLowerCase()}function uC(t,e,n){";"!==n[n.length-1]&&(n="return("+n+");");var r=Function.apply(null,e.concat(n));return t&&t.functions?r.bind(t.functions):r}var cC={operator:function(t,e){return uC(t,["_"],e.code)},parameter:function(t,e){return uC(t,["datum","_"],e.code)},event:function(t,e){return uC(t,["event"],e.code)},handler:function(t,e){return uC(t,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(e.code,";"))},encode:function(t,e){var n=e.marktype,r=e.channels,i="var o=item,datum=o.datum,m=0,$;";for(var o in r){var a="o["+Object(p.Z)(o)+"]";i+="$=".concat(r[o].code,";if(").concat(a,"!==$)").concat(a,"=$,m=1;")}return i+=function(t,e){var n="";return oC[e]||(t.x2&&(t.x?(aC[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(aC[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),uC(t,["item","_"],i+="return m;")},codegen:{get:function(t){var e="[".concat(t.map(p.Z).join("]["),"]"),n=Function("_","return _".concat(e,";"));return n.path=e,n},comparator:function(t,e){var n,r=Function("a","b","var u, v; return "+t.map((function(t,r){var i,o,a=e[r];return t.path?(i="a".concat(t.path),o="b".concat(t.path)):((n=n||{})["f"+r]=t,i="this.f".concat(r,"(a)"),o="this.f".concat(r,"(b)")),function(t,e,n,r){return"((u = ".concat(t,") < (v = ").concat(e,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(i,o,-a,a)})).join("")+"0;");return n?r.bind(n):r}}};function lC(t,e,n){if(!t||!Object(p.F)(t))return t;for(var r,i=0,o=fC.length;i<o;++i)if(r=fC[i],Object(p.v)(t,r.key))return r.parse(t,e,n);return t}var fC=[{key:"$ref",parse:function(t,e){return e.get(t.$ref)||Object(p.n)("Operator not defined: "+t.$ref)}},{key:"$key",parse:function(t,e){var n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=Object(p.I)(t.$key,t.$flat,e.expr.codegen))}},{key:"$expr",parse:function(t,e,n){t.$params&&e.parseParameters(t.$params,n);var r="e:"+t.$expr.code+"_"+t.$name;return e.fn[r]||(e.fn[r]=Object(p.f)(e.parameterExpression(t.$expr),t.$fields,t.$name))}},{key:"$field",parse:function(t,e){if(!t.$field)return null;var n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Object(p.t)(t.$field,t.$name,e.expr.codegen))}},{key:"$encode",parse:function(t,e){var n=t.$encode,r={};for(var i in n){var o=n[i];r[i]=Object(p.f)(e.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}},{key:"$compare",parse:function(t,e){var n="c:"+t.$compare+"_"+t.$order,r=Object(p.i)(t.$compare).map((function(t){return t&&t.$tupleid?k:t}));return e.fn[n]||(e.fn[n]=Object(p.k)(r,t.$order,e.expr.codegen))}},{key:"$context",parse:function(t,e){return e}},{key:"$subflow",parse:function(t,e){var n=t.$subflow;return function(t,r,i){var o=e.fork().parse(n),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a.detachSubflow=function(){return e.detach(o)},a}}},{key:"$tupleid",parse:function(){return k}}];var hC={skip:!0};var dC=function(t,e,n,r){return new pC(t,e,n,r)};function pC(t,e,n,r){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=r||cC,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function gC(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}pC.prototype=gC.prototype={fork:function(){var t=new gC(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach:function(t){this.subcontext=this.subcontext.filter((function(e){return e!==t}));for(var e=Object.keys(t.nodes),n=0,r=e;n<r.length;n++){var i=r[n];t.nodes[i]._targets=null}for(var o=0,a=e;o<a.length;o++){var s=a[o];t.nodes[s].detach()}t.nodes=null},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var n=this,r=n.dataflow,i=t.value;if(n.set(t.id,e),"collect"===sC(t.type)&&i&&(i.$ingest?r.ingest(e,i.$ingest,i.$format):i.$request?r.preload(e,i.$request,i.$format):r.pulse(e,r.changeset().insert(i))),t.root&&(n.root=e),t.parent){var o=n.get(t.parent.$ref);o?(r.connect(o,[e]),e.targets().add(o)):(n.unresolved=n.unresolved||[]).push((function(){o=n.get(t.parent.$ref),r.connect(o,[e]),e.targets().add(o)}))}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data){var a=function(r){var i=n.data[r]||(n.data[r]={});t.data[r].forEach((function(t){return i[t]=e}))};for(var s in t.data)a(s)}},resolve:function(){return(this.unresolved||[]).forEach((function(t){return t()})),delete this.unresolved,this},operator:function(t,e){this.add(t,this.dataflow.add(t.value,e))},transform:function(t,e){this.add(t,this.dataflow.add(this.transforms[sC(e)]))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},operatorExpression:function(t){return this.expr.operator(this,t)},parameterExpression:function(t){return this.expr.parameter(this,t)},eventExpression:function(t){return this.expr.event(this,t)},handlerExpression:function(t){return this.expr.handler(this,t)},encodeExpression:function(t){return this.expr.encode(this,t)},parse:function(t){var e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach((function(t){return e.parseOperator(t)})),n.forEach((function(t){return e.parseOperatorParameters(t)})),(t.streams||[]).forEach((function(t){return e.parseStream(t)})),(t.updates||[]).forEach((function(t){return e.parseUpdate(t)})),e.resolve()},parseOperator:function(t){"operator"!==sC(t.type)&&t.type?this.transform(t,t.type):this.operator(t,t.update?this.operatorExpression(t.update):null)},parseOperatorParameters:function(t){if(t.params){var e=this.get(t.id);e||Object(p.n)("Invalid operator id: "+t.id),this.dataflow.connect(e,e.parameters(this.parseParameters(t.params),t.react,t.initonly))}},parseParameters:function(t,e){e=e||{};var n=this;for(var r in t){var i=t[r];e[r]=Object(p.A)(i)?i.map((function(t){return lC(t,n,e)})):lC(i,n,e)}return e},parseStream:function(t){var e,n=this,r=null!=t.filter?n.eventExpression(t.filter):void 0,i=null!=t.stream?n.get(t.stream):void 0;t.source?i=n.events(t.source,t.type,r):t.merge&&(i=(e=t.merge.map((function(t){return n.get(t)})))[0].merge.apply(e[0],e.slice(1))),t.between&&(e=t.between.map((function(t){return n.get(t)})),i=i.between(e[0],e[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&Object(p.n)("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),n.stream(t,i)},parseUpdate:function(t){var e,n=Object(p.F)(n=t.source)?n.$ref:n,r=this.get(n),i=t.update,o=void 0;r||Object(p.n)("Source not defined: "+t.source),e=t.target&&t.target.$expr?this.eventExpression(t.target.$expr):this.get(t.target),i&&i.$expr&&(i.$params&&(o=this.parseParameters(i.$params)),i=this.handlerExpression(i.$expr)),this.update(t,r,e,i,o)},getState:function(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach((function(n){var i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)}))}if(t.data){var i=n.data={};Object.keys(e.data).forEach((function(n){var r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)}))}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map((function(e){return e.getState(t)}))),n},setState:function(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach((function(t){n.update(e.signals[t],i[t],hC)})),Object.keys(r||{}).forEach((function(t){n.pulse(e.data[t].input,n.changeset().remove(p.gb).insert(r[t]))})),(t.subcontext||[]).forEach((function(t,n){var r=e.subcontext[n];r&&r.setState(t)}))}};var vC={skip:!0};function mC(t,e){var n=t.autosize(),r=t.padding();return e-(n&&"padding"===n.contains?r.left+r.right:0)}function yC(t,e){var n=t.autosize(),r=t.padding();return e-(n&&"padding"===n.contains?r.top+r.bottom:0)}function bC(t,e){return e.modified&&Object(p.A)(e.input.value)&&t.indexOf("_:vega:_")}function wC(t,e){return!("parent"===t||e instanceof mo.proxy)}var xC=function(t,e,n,r){var i=t.element();i&&i.setAttribute("title",function(t){return null==t?"":Object(p.A)(t)?_C(t):Object(p.F)(t)&&!Object(p.C)(t)?(e=t,Object.keys(e).map((function(t){var n=e[t];return t+": "+(Object(p.A)(n)?_C(n):OC(n))})).join("\n")):t+"";var e}(r))};function _C(t){return"["+t.map(OC).join(", ")+"]"}function OC(t){return Object(p.A)(t)?"[\u2026]":Object(p.F)(t)&&!Object(p.C)(t)?"{\u2026}":t}function kC(t,e){if(e=e||{},fo.call(this),e.loader&&this.loader(e.loader),e.logger&&this.logger(e.logger),null!=e.logLevel&&this.logLevel(e.logLevel),e.locale||t.locale){var n=Object(p.o)({},t.locale,e.locale);this.locale(zi(n.number,n.time))}this._el=null,this._elBind=null,this._renderType=e.renderer||um.Canvas,this._scenegraph=new yh;var r=this._scenegraph.root;this._renderer=null,this._tooltip=e.tooltip||xC,this._redraw=!0,this._handler=(new Bh).scene(r),this._globalCursor=!1,this._preventDefault=!1,this._timers=[],this._eventListeners=[],this._resizeListeners=[],this._eventConfig=function(t){var e=Object(p.o)({defaults:{}},t),n=function(t,e){e.forEach((function(e){Object(p.A)(t[e])&&(t[e]=Object(p.db)(t[e]))}))};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}(t.eventConfig),this.globalCursor(this._eventConfig.globalCursor);var i=function(t,e,n){return dC(t,mo,ZA,n).parse(e)}(this,t,e.expr);this._runtime=i,this._signals=i.signals,this._bind=(t.bindings||[]).map((function(t){return{state:null,param:Object(p.o)({},t)}})),i.root&&i.root.set(r),r.source=i.data.root.input,this.pulse(i.data.root.input,this.changeset().insert(r.items)),this._width=this.width(),this._height=this.height(),this._viewWidth=mC(this,this._width),this._viewHeight=yC(this,this._height),this._origin=[0,0],this._resize=0,this._autosize=1,function(t){var e=t._signals,n=e.width,r=e.height,i=e.padding;function o(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,(function(e){t._width=e.size,t._viewWidth=mC(t,e.size),o()}),{size:n}),t._resizeHeight=t.add(null,(function(e){t._height=e.size,t._viewHeight=yC(t,e.size),o()}),{size:r});var a=t.add(null,o,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(this),function(t){t.add(null,(function(e){return t._background=e.bg,t._resize=1,e.bg}),{bg:t._signals.background})}(this),function(t){var e=t._signals.cursor||(t._signals.cursor=t.add({user:"default",item:null}));t.on(t.events("view","mousemove"),e,(function(t,n){var r=e.value,i=r?Object(p.H)(r)?r:r.user:"default",o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}})),t.add(null,(function(e){var n=e.cursor,r=this.value;return Object(p.H)(n)||(r=n.item,n=n.user),FS(t,n&&"default"!==n?n:r||n),r}),{cursor:e})}(this),this.description(t.description),e.hover&&this.hover(),e.container&&this.initialize(e.container,e.bind)}var SC=Object(p.y)(kC,fo);function EC(t,e){return Object(p.v)(t._signals,e)?t._signals[e]:Object(p.n)("Unrecognized signal name: "+Object(p.Z)(e))}function AC(t,e){var n=(t._targets||[]).filter((function(t){return t._update&&t._update.handler===e}));return n.length?n[0]:null}function CC(t,e,n,r){var i=AC(n,r);return i||((i=oE(t,(function(){return r(e,n.value)}))).handler=r,t.on(n,null,i)),t}function jC(t,e,n){var r=AC(e,n);return r&&e._targets.remove(r),t}SC.evaluate=function(){var t=Object(y.a)(m.a.mark((function t(e,n,r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fo.prototype.evaluate.call(this,e,n);case 2:if(!this._redraw&&!this._resize){t.next=14;break}if(t.prev=3,!this._renderer){t.next=8;break}return this._resize&&(this._resize=0,WS(this)),t.next=8,this._renderer.renderAsync(this._scenegraph.root);case 8:this._redraw=!1,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),this.error(t.t0);case 14:return r&&b(this,r),t.abrupt("return",this);case 16:case"end":return t.stop()}}),t,this,[[3,11]])})));return function(e,n,r){return t.apply(this,arguments)}}(),SC.dirty=function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},SC.description=function(t){if(arguments.length){var e=null!=t?t+"":null;return e!==this._desc&&IS(this._el,this._desc=e),this}return this._desc},SC.container=function(){return this._el},SC.scenegraph=function(){return this._scenegraph},SC.origin=function(){return this._origin.slice()},SC.signal=function(t,e,n){var r=EC(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},SC.width=function(t){return arguments.length?this.signal("width",t):this.signal("width")},SC.height=function(t){return arguments.length?this.signal("height",t):this.signal("height")},SC.padding=function(t){return arguments.length?this.signal("padding",uE(t)):uE(this.signal("padding"))},SC.autosize=function(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},SC.background=function(t){return arguments.length?this.signal("background",t):this.signal("background")},SC.renderer=function(t){return arguments.length?(lm(t)||Object(p.n)("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},SC.tooltip=function(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},SC.loader=function(t){return arguments.length?(t!==this._loader&&(fo.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},SC.resize=function(){return this._autosize=1,this.touch(EC(this,"autosize"))},SC._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},SC._resizeView=function(t,e,n,r,i,o){this.runAfter((function(a){var s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal("width",n,vC),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal("height",r,vC),a._resizeHeight.skip(!0)),a._viewWidth!==t&&(a._resize=1,a._viewWidth=t),a._viewHeight!==e&&(a._resize=1,a._viewHeight=e),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter((function(t){return t.resize()}))}),!1,1)},SC.addEventListener=function(t,e,n){var r=e;return n&&!1===n.trap||((r=oE(this,e)).raw=e),this._handler.on(t,r),this},SC.removeEventListener=function(t,e){for(var n,r,i=this._handler.handlers(t),o=i.length;--o>=0;)if(r=i[o].type,n=i[o].handler,t===r&&(e===n||e===n.raw)){this._handler.off(r,n);break}return this},SC.addResizeListener=function(t){var e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},SC.removeResizeListener=function(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},SC.addSignalListener=function(t,e){return CC(this,t,EC(this,t),e)},SC.removeSignalListener=function(t,e){return jC(this,EC(this,t),e)},SC.addDataListener=function(t,e){return CC(this,t,PS(this,t).values,e)},SC.removeDataListener=function(t,e){return jC(this,PS(this,t).values,e)},SC.globalCursor=function(t){if(arguments.length){if(this._globalCursor!==!!t){var e=FS(this,null);this._globalCursor=!!t,e&&FS(this,e)}return this}return this._globalCursor},SC.preventDefault=function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},SC.timer=function(t,e){this._timers.push(function(t,e,n){var r=new tO,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?Z_():+n,r.restart((function o(a){a+=i,r.restart(o,i+=e,n),t(a)}),e,n),r)}((function(e){t({timestamp:Date.now(),elapsed:e})}),e))},SC.events=function(t,e,n){var r,i=this,o=new U(n),a=function(n,r){i.runAsync(null,(function(){"view"===t&&function(t,e){var n=t._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[e]:i?!i[e]:t.preventDefault()))}(i,e)&&n.preventDefault(),o.receive(HS(i,n,r))}))};if("timer"===t)qS(i,"timer",e)&&i.timer(a,e);else if("view"===t)qS(i,"view",e)&&i.addEventListener(e,a,VS);else if("window"===t?qS(i,"window",e)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&qS(i,"selector",e)&&(r=document.querySelectorAll(t)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(e,a);i._eventListeners.push({type:e,sources:r,handler:a})}else i.warn("Can not resolve event source: "+t);return o},SC.finalize=function(){var t,e,n,r=this._tooltip,i=this._timers,o=this._eventListeners;for(t=i.length;--t>=0;)i[t].stop();for(t=o.length;--t>=0;)for(e=(n=o[t]).sources.length;--e>=0;)n.sources[e].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},SC.hover=function(t,e){return e=[e||"update",(t=[t||"hover"])[0]],this.on(this.events("view","mouseover",GS),KS,YS(t)),this.on(this.events("view","mouseout",GS),KS,YS(e)),this},SC.data=function(t,e){return arguments.length<2?PS(this,t).values.value:$S.call(this,t,R().remove(p.gb).insert(e))},SC.change=$S,SC.insert=function(t,e){return $S.call(this,t,R().insert(e))},SC.remove=function(t,e){return $S.call(this,t,R().remove(e))},SC.scale=function(t){var e=this._runtime.scales;return Object(p.v)(e,t)||Object(p.n)("Unrecognized scale or projection: "+t),e[t].value},SC.initialize=function(t,e){var n=this,r=n._renderType,i=n._eventConfig.bind,o=lm(r);t=n._el=t?aE(n,t):null,function(t){var e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),IS(e,t.description()))}(n),o||n.error("Unrecognized renderer type: "+r);var a=o.handler||Bh,s=t?o.renderer:o.headless;return n._renderer=s?iE(n,n._renderer,t,s):null,n._handler=function(t,e,n,r){var i=new r(t.loader(),oE(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,US(t),t);return e&&e.handlers().forEach((function(t){i.on(t.type,t.handler)})),i}(n,n._handler,t,a),n._redraw=!0,t&&"none"!==i&&(e=e?n._elBind=aE(n,e):t.appendChild(QS("form",{class:"vega-bindings"})),n._bind.forEach((function(t){t.param.element&&"container"!==i&&(t.element=aE(n,t.param.element))})),n._bind.forEach((function(t){XS(n,t.element||e,t)}))),n},SC.toImageURL=function(t,e){return fE.apply(this,arguments)},SC.toCanvas=function(t,e){return dE.apply(this,arguments)},SC.toSVG=function(t){return pE.apply(this,arguments)},SC.getState=function(t){return this._runtime.getState(t||{data:bC,signals:wC,recurse:!0})},SC.setState=function(t){return this.runAsync(null,(function(e){e._trigger=!1,e._runtime.setState(t)}),(function(t){t._trigger=!0})),this};var TC=function(t){return Object(p.F)(t)?t:{type:t||"pad"}},MC=function(t){return+t||0},RC=function(t){return Object(p.F)(t)?t.signal?t:{top:MC(t.top),bottom:MC(t.bottom),left:MC(t.left),right:MC(t.right)}:{top:e=MC(t),bottom:e,left:e,right:e};var e},DC=function(t){return Object(p.F)(t)&&!Object(p.A)(t)?Object(p.o)({},t):{value:t}};function LC(t,e,n,r){return null!=n?(Object(p.F)(n)&&!Object(p.A)(n)?t.update[e]=n:t[r||"enter"][e]={value:n},1):0}function NC(t,e,n){for(var r in e)LC(t,r,e[r]);for(var i in n)LC(t,i,n[i],"update")}function IC(t,e,n){for(var r in e)n&&Object(p.v)(n,r)||(t[r]=Object(p.o)(t[r]||{},e[r]));return t}function FC(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}function PC(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}var $C=function(t){return Object(p.H)(t)?Object(p.Z)(t):t.signal?"(".concat(t.signal,")"):WC(t)};function zC(t){if(null!=t.gradient)return function(t){var e=[t.start,t.stop,t.count].map((function(t){return null==t?null:Object(p.Z)(t)}));for(;e.length&&null==Object(p.U)(e);)e.pop();return e.unshift($C(t.gradient)),"gradient(".concat(e.join(","),")")}(t);var e=t.signal?"(".concat(t.signal,")"):t.color?function(t){return t.c?BC("hcl",t.h,t.c,t.l):t.h||t.s?BC("hsl",t.h,t.s,t.l):t.l||t.a?BC("lab",t.l,t.a,t.b):t.r||t.g||t.b?BC("rgb",t.r,t.g,t.b):null}(t.color):null!=t.field?WC(t.field):void 0!==t.value?Object(p.Z)(t.value):void 0;return null!=t.scale&&(e=function(t,e){var n=$C(t.scale);null!=t.range?e="lerp(_range(".concat(n,"), ").concat(+t.range,")"):(void 0!==e&&(e="_scale(".concat(n,", ").concat(e,")")),t.band&&(e=(e?e+"+":"")+"_bandwidth(".concat(n,")")+(1===+t.band?"":"*"+UC(t.band)),t.extra&&(e="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(e,")"))),null==e&&(e="0"));return e}(t,e)),void 0===e&&(e=null),null!=t.exponent&&(e="pow(".concat(e,",").concat(UC(t.exponent),")")),null!=t.mult&&(e+="*".concat(UC(t.mult))),null!=t.offset&&(e+="+".concat(UC(t.offset))),t.round&&(e="round(".concat(e,")")),e}var BC=function(t,e,n,r){return"(".concat(t,"(").concat([e,n,r].map(zC).join(","),")+'')")};function UC(t){return Object(p.F)(t)?"("+zC(t)+")":t}function WC(t){return function t(e){var n,r,i;if(e.signal)n="datum",i=e.signal;else if(e.group||e.parent){for(r=Math.max(1,e.level||1),n="item";r-- >0;)n+=".mark.group";e.parent?(i=e.parent,n+=".datum"):i=e.group}else e.datum?(n="datum",i=e.datum):Object(p.n)("Invalid field reference: "+Object(p.Z)(e));e.signal||(i=Object(p.H)(i)?Object(p.Y)(i).map(p.Z).join("]["):t(i));return n+"["+i+"]"}(Object(p.F)(t)?t:{datum:t})}var HC=function(t,e,n,r,i,o){var a={};for(var s in(o=o||{}).encoders={$encode:a},t=function(t,e,n,r,i){var o,a,s,u={},c={};for(a in a="lineBreak","text"!==e||null==i[a]||FC(a,t)||PC(u,a,i[a]),("legend"==n||String(n).startsWith("axis"))&&(n=null),s="frame"===n?i.group:"mark"===n?Object(p.o)({},i.mark,i[e]):null)FC(a,t)||("fill"===a||"stroke"===a)&&(FC("fill",t)||FC("stroke",t))||PC(u,a,s[a]);for(a in Object(p.i)(r).forEach((function(e){var n=i.style&&i.style[e];for(var r in n)FC(r,t)||PC(u,r,n[r])})),t=Object(p.o)({},t),u)(s=u[a]).signal?(o=o||{})[a]=s:c[a]=s;return t.enter=Object(p.o)(c,t.enter),o&&(t.update=Object(p.o)(o,t.update)),t}(t,e,n,r,i.config))a[s]=VC(t[s],e,o,i);return o};function VC(t,e,n,r){var i,o={},a={};for(var s in t)null!=t[s]&&(o[s]=qC((i=t[s],Object(p.A)(i)?function(t){var e="";return t.forEach((function(t){var n=zC(t);e+=t.test?"(".concat(t.test,")?").concat(n,":"):n})),":"===Object(p.U)(e)&&(e+="null"),e}(i):zC(i)),r,n,a));return{$expr:{marktype:e,channels:o},$fields:Object.keys(a),$output:Object.keys(t)}}function qC(t,e,n,r){var i=iC(t,e);return i.$fields.forEach((function(t){return r[t]=1})),Object(p.o)(n,i.$params),i.$expr}var GC=["value","update","init","react","bind"];function KC(t,e){Object(p.n)(t+' for "outer" push: '+Object(p.Z)(e))}var YC=function(t,e){var n=t.name;if("outer"===t.push)e.signals[n]||KC("No prior signal definition",n),GC.forEach((function(e){void 0!==t[e]&&KC("Invalid property ",e)}));else{var r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}};function QC(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function XC(t,e,n,r){return new QC(t,e,n,r)}function ZC(t,e){return XC("operator",t,e)}function JC(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function tj(t,e){return e?{$field:t,$name:e}:{$field:t}}var ej=tj("key");function nj(t,e){return{$compare:t,$order:e}}function rj(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}function ij(t){return t&&t.signal}function oj(t){if(ij(t))return!0;if(Object(p.F)(t))for(var e in t)if(oj(t[e]))return!0;return!1}function aj(t,e){return null!=t?t:e}function sj(t){return t&&t.signal||t}function uj(t,e){return(t.merge?cj:t.stream?lj:t.type?fj:Object(p.n)("Invalid stream specification: "+Object(p.Z)(t)))(t,e)}function cj(t,e){var n=hj({merge:t.merge.map((function(t){return uj(t,e)}))},t,e);return e.addStream(n).id}function lj(t,e){var n=hj({stream:uj(t.stream,e)},t,e);return e.addStream(n).id}function fj(t,e){var n,r,i;return"timer"===t.type?(n=e.event("timer",t.throttle),t={between:t.between,filter:t.filter}):n=e.event("scope"===(i=t.source)?"view":i||"view",t.type),r=hj({stream:n},t,e),1===Object.keys(r).length?n:e.addStream(r).id}function hj(t,e,n){var r=e.between;return r&&(2!==r.length&&Object(p.n)('Stream "between" parameter must have 2 entries: '+Object(p.Z)(e)),t.between=[uj(r[0],n),uj(r[1],n)]),r=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(function(t,e,n){var r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}(e.marktype,e.markname,e.markrole)),"scope"===e.source&&r.push("inScope(event.item)"),r.length&&(t.filter=iC("("+r.join(")&&(")+")",n).$expr),null!=(r=e.throttle)&&(t.throttle=+r),null!=(r=e.debounce)&&(t.debounce=+r),e.consume&&(t.consume=!0),t}var dj=n(27),pj={code:"_.$value",ast:{type:"Identifier",value:"value"}},gj=function(t,e,n){var r=t.events,i=t.update,o=t.encode,a=[],s={target:n};r||Object(p.n)("Signal update missing events specification."),Object(p.H)(r)&&(r=Object(dj.a)(r,e.isSubscope()?"scope":"view")),r=Object(p.i)(r).filter((function(t){return t.signal||t.scale?(a.push(t),0):1})),a.length>1&&(a=[vj(a)]),r.length&&a.push(r.length>1?{merge:r}:r[0]),null!=o&&(i&&Object(p.n)("Signal encode and update are mutually exclusive."),i="encode(item(),"+Object(p.Z)(o)+")"),s.update=Object(p.H)(i)?iC(i,e):null!=i.expr?iC(i.expr,e):null!=i.value?i.value:null!=i.signal?{$expr:pj,$params:{$value:e.signalRef(i.signal)}}:Object(p.n)("Invalid signal update specification."),t.force&&(s.options={force:!0}),a.forEach((function(t){e.addUpdate(Object(p.o)(function(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):uj(t,e)}}(t,e),s))}))};function vj(t){return{signal:"["+t.map((function(t){return t.scale?'scale("'+t.scale+'")':t.signal}))+"]"}}var mj=function(t){return function(e,n,r){return XC(t,n,e||void 0,r)}},yj=mj("aggregate"),bj=mj("axisticks"),wj=mj("bound"),xj=mj("collect"),_j=mj("compare"),Oj=mj("datajoin"),kj=mj("encode"),Sj=mj("expression"),Ej=(mj("extent"),mj("facet")),Aj=mj("field"),Cj=mj("key"),jj=mj("legendentries"),Tj=mj("load"),Mj=mj("mark"),Rj=mj("multiextent"),Dj=mj("multivalues"),Lj=mj("overlap"),Nj=mj("params"),Ij=mj("prefacet"),Fj=mj("projection"),Pj=mj("proxy"),$j=mj("relay"),zj=mj("render"),Bj=mj("scale"),Uj=mj("sieve"),Wj=mj("sortitems"),Hj=mj("viewlayout"),Vj=mj("values"),qj=0,Gj={min:"min",max:"max",count:"sum"};function Kj(t,e){var n,r,i=e.getScale(t.name).params;for(n in i.domain=Zj(t.domain,t,e),null!=t.range&&(i.range=function t(e,n,r){var i=e.range,o=n.config.range;if(i.signal)return n.signalRef(i.signal);if(Object(p.H)(i)){if(o&&Object(p.v)(o,i))return e=Object(p.o)({},e,{range:o[i]}),t(e,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=og(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(p.n)("Unrecognized scale range value: "+Object(p.Z)(i))}else{if(i.scheme)return r.scheme=Object(p.A)(i.scheme)?Qj(i.scheme,n):Yj(i.scheme,n),i.extent&&(r.schemeExtent=Qj(i.extent,n)),void(i.count&&(r.schemeCount=Yj(i.count,n)));if(i.step)return void(r.rangeStep=Yj(i.step,n));if(og(e.type)&&!Object(p.A)(i))return Zj(i,e,n);Object(p.A)(i)||Object(p.n)("Unsupported range type: "+Object(p.Z)(i))}return i.map((function(t){return(Object(p.A)(t)?Qj:Yj)(t,n)}))}(t,e,i)),null!=t.interpolate&&function(t,e){e.interpolate=Yj(t.type||t),null!=t.gamma&&(e.interpolateGamma=Yj(t.gamma))}(t.interpolate,i),null!=t.nice&&(i.nice=(r=t.nice,Object(p.F)(r)?{interval:Yj(r.interval),step:Yj(r.step)}:Yj(r))),null!=t.bins&&(i.bins=function(t,e){return t.signal||Object(p.A)(t)?Qj(t,e):e.objectProperty(t)}(t.bins,e)),t)Object(p.v)(i,n)||"name"===n||(i[n]=Yj(t[n],e))}function Yj(t,e){return Object(p.F)(t)?t.signal?e.signalRef(t.signal):Object(p.n)("Unsupported object: "+Object(p.Z)(t)):t}function Qj(t,e){return t.signal?e.signalRef(t.signal):t.map((function(t){return Yj(t,e)}))}function Xj(t){Object(p.n)("Can not find data set: "+Object(p.Z)(t))}function Zj(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(Object(p.A)(t)?Jj:t.fields?eT:tT)(t,e,n);null==e.domainMin&&null==e.domainMax||Object(p.n)("No scale domain defined for domainMin/domainMax to override.")}function Jj(t,e,n){return t.map((function(t){return Yj(t,n)}))}function tT(t,e,n){var r=n.getData(t.data);return r||Xj(t.data),og(e.type)?r.valuesRef(n,t.field,rT(t.sort,!1)):cg(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function eT(t,e,n){var r=t.data,i=t.fields.reduce((function(t,e){return e=Object(p.H)(e)?{data:r,field:e}:Object(p.A)(e)||e.signal?function(t,e){var n="_:vega:_"+qj++,r=xj({});if(Object(p.A)(t))r.value={$ingest:t};else if(t.signal){var i="setdata("+Object(p.Z)(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,Uj({})]),{data:n,field:"data"}}(e,n):e,t.push(e),t}),[]);return(og(e.type)?nT:cg(e.type)?iT:oT)(t,n,i)}function nT(t,e,n){var r,i,o,a,s,u=rT(t.sort,!0);return r=n.map((function(t){var n=e.getData(t.data);return n||Xj(t.data),n.countsRef(e,t.field,u)})),i={groupby:ej,pulse:r},u&&(o=u.op||"count",s=u.field?rj(o,u.field):"count",i.ops=[Gj[o]],i.fields=[e.fieldRef(s)],i.as=[s]),o=e.add(yj(i)),a=e.add(xj({pulse:JC(o)})),s=e.add(Vj({field:ej,sort:e.sortRef(u),pulse:JC(a)})),JC(s)}function rT(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field&&t.op&&!Gj[t.op]&&Object(p.n)("Multiple domain scales can not be sorted using "+t.op):Object(p.n)("No field provided for sort aggregate op: "+t.op):Object(p.F)(t)?t.field="key":t={field:"key"}),t}function iT(t,e,n){var r=n.map((function(t){var n=e.getData(t.data);return n||Xj(t.data),n.domainRef(e,t.field)}));return JC(e.add(Dj({values:r})))}function oT(t,e,n){var r=n.map((function(t){var n=e.getData(t.data);return n||Xj(t.data),n.extentRef(e,t.field)}));return JC(e.add(Rj({extents:r})))}function aT(t,e,n){return Object(p.A)(t)?t.map((function(t){return aT(t,e,n)})):Object(p.F)(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:Object(p.n)("Unsupported parameter object: "+Object(p.Z)(t)):t}var sT="value",uT=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],cT={name:1,style:1,interactive:1},lT={value:0},fT={value:1},hT=function(t){return t.type="group",t.interactive=t.interactive||!1,t};function dT(t,e){var n=function(n,r){return aj(t[n],aj(e[n],r))};return n.isVertical=function(n){return"vertical"===aj(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection))},n.gradientLength=function(){return aj(t.gradientLength,e.gradientLength||e.gradientWidth)},n.gradientThickness=function(){return aj(t.gradientThickness,e.gradientThickness||e.gradientHeight)},n.entryColumns=function(){return aj(t.columns,aj(e.columns,+n.isVertical(!0)))},n}function pT(t,e){var n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function gT(t,e,n){return"item.anchor === '".concat("start","' ? ").concat(t," : item.anchor === '").concat("end","' ? ").concat(e," : ").concat(n)}var vT=gT(Object(p.Z)("left"),Object(p.Z)("right"),Object(p.Z)("center"));function mT(t,e){return e?t?Object(p.F)(t)?Object.assign({},t,{offset:mT(t.offset,e)}):{value:t,offset:e}:e:t}var yT=function(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=IC(t.encode,e,cT)):t.interactive=!1,t},bT=function(t,e,n,r){var i,o,a,s,u,c,l=dT(t,n),f=l.isVertical(),h=l.gradientThickness(),d=l.gradientLength();return f?(a=[0,1],s=[0,0],u=h,c=d):(a=[0,0],s=[1,0],u=d,c=h),NC(i={enter:o={opacity:lT,x:lT,y:lT,width:DC(u),height:DC(c)},update:Object(p.o)({},o,{opacity:fT,fill:{gradient:e,start:a,stop:s}}),exit:{opacity:lT}},{stroke:l("gradientStrokeColor"),strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")}),yT({type:"rect",role:"legend-gradient",encode:i},r)},wT=function(t,e,n,r,i){var o,a,s,u,c,l,f=dT(t,n),h=f.isVertical(),d=f.gradientThickness(),g=f.gradientLength(),v="";return h?(s="y",c="y2",u="x",l="width",v="1-"):(s="x",c="x2",u="y",l="height"),(a={opacity:lT,fill:{scale:e,field:sT}})[s]={signal:v+"datum.perc",mult:g},a[u]=lT,a[c]={signal:v+"datum.perc2",mult:g},a[l]=DC(d),NC(o={enter:a,update:Object(p.o)({},a,{opacity:fT}),exit:{opacity:lT}},{stroke:f("gradientStrokeColor"),strokeWidth:f("gradientStrokeWidth")},{opacity:f("gradientOpacity")}),yT({type:"rect",role:"legend-band",key:sT,from:i,encode:o},r)},xT="datum.".concat("perc",'<=0?"').concat("left",'":datum.').concat("perc",'>=1?"').concat("right",'":"').concat("center",'"'),_T="datum.".concat("perc",'<=0?"').concat("bottom",'":datum.').concat("perc",'>=1?"').concat("top",'":"').concat("middle",'"'),OT=function(t,e,n,r){var i,o,a,s,u,c=dT(t,e),l=c.isVertical(),f=DC(c.gradientThickness()),h=c.gradientLength(),d=c("labelOverlap"),p="";return NC(i={enter:o={opacity:lT},update:a={opacity:fT,text:{field:"label"}},exit:{opacity:lT}},{fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontStyle:c("labelFontStyle"),fontWeight:c("labelFontWeight"),limit:aj(t.labelLimit,e.gradientLabelLimit)}),l?(o.align={value:"left"},o.baseline=a.baseline={signal:_T},s="y",u="x",p="1-"):(o.align=a.align={signal:xT},o.baseline={value:"top"},s="x",u="y"),o[s]=a[s]={signal:p+"datum.perc",mult:h},o[u]=a[u]=f,f.offset=aj(t.labelOffset,e.gradientLabelOffset)||0,d=d?{separation:c("labelSeparation"),method:d,order:"datum.index"}:void 0,yT({type:"text",role:"legend-label",style:"guide-label",key:sT,from:r,encode:i,overlap:d},n)},kT=function(t,e,n,r,i){var o,a,s,u,c,l,f,h=dT(t,e),d=n.entries,p=!(!d||!d.interactive),g=d?d.name:void 0,v=h("clipHeight"),m=h("symbolOffset"),y={data:"value"},b={},w="(".concat(i,") ? datum.").concat("offset"," : datum.").concat("size"),x=v?DC(v):{field:"size"},_="datum.".concat("index"),O="max(1, ".concat(i,")");x.mult=.5,b={enter:o={opacity:lT,x:{signal:w,mult:.5,offset:m},y:x},update:a={opacity:fT,x:o.x,y:o.y},exit:{opacity:lT}};var k=null,S=null;return t.fill||(k=e.symbolBaseFillColor,S=e.symbolBaseStrokeColor),NC(b,{fill:h("symbolFillColor",k),shape:h("symbolType"),size:h("symbolSize"),stroke:h("symbolStrokeColor",S),strokeDash:h("symbolDash"),strokeDashOffset:h("symbolDashOffset"),strokeWidth:h("symbolStrokeWidth")},{opacity:h("symbolOpacity")}),uT.forEach((function(e){t[e]&&(a[e]=o[e]={scale:t[e],field:sT})})),u=yT({type:"symbol",role:"legend-symbol",key:sT,from:y,clip:!!v||void 0,encode:b},n.symbols),(s=DC(m)).offset=h("labelOffset"),NC(b={enter:o={opacity:lT,x:{signal:w,offset:s},y:x},update:a={opacity:fT,text:{field:"label"},x:o.x,y:o.y},exit:{opacity:lT}},{align:h("labelAlign"),baseline:h("labelBaseline"),fill:h("labelColor"),fillOpacity:h("labelOpacity"),font:h("labelFont"),fontSize:h("labelFontSize"),fontStyle:h("labelFontStyle"),fontWeight:h("labelFontWeight"),limit:h("labelLimit")}),c=yT({type:"text",role:"legend-label",style:"guide-label",key:sT,from:y,encode:b},n.labels),b={enter:{noBound:{value:!v},width:lT,height:v?DC(v):lT,opacity:lT},exit:{opacity:lT},update:a={opacity:fT,row:{signal:null},column:{signal:null}}},h.isVertical(!0)?(l="ceil(item.mark.items.length / ".concat(O,")"),a.row.signal="".concat(_,"%").concat(l),a.column.signal="floor(".concat(_," / ").concat(l,")"),f={field:["row",_]}):(a.row.signal="floor(".concat(_," / ").concat(O,")"),a.column.signal="".concat(_," % ").concat(O),f={field:_}),a.column.signal="(".concat(i,")?").concat(a.column.signal,":").concat(_),hT({role:"scope",from:r={facet:{data:r,name:"value",groupby:"index"}},encode:IC(b,d,cT),marks:[u,c],name:g,interactive:p,sort:f})};var ST='item.orient === "left"',ET='item.orient === "right"',AT="(".concat(ST," || ").concat(ET,")"),CT="datum.vgrad && ".concat(AT),jT=gT('"top"','"bottom"','"middle"'),TT=gT('"right"','"left"','"center"'),MT="datum.vgrad && ".concat(ET," ? (").concat(TT,") : (").concat(AT," && !(datum.vgrad && ").concat(ST,')) ? "left" : ').concat(vT),RT="item._anchor || (".concat(AT,' ? "middle" : "start")'),DT="".concat(CT," ? (").concat(ST," ? -90 : 90) : 0"),LT="".concat(AT," ? (datum.vgrad ? (").concat(ET,' ? "bottom" : "top") : ').concat(jT,') : "top"'),NT=function(t,e){var n;return Object(p.F)(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+IT(t.path)+")":t.sphere&&(n="geoShape("+IT(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t};function IT(t){return Object(p.F)(t)&&t.signal?t.signal:Object(p.Z)(t)}var FT=function(t){var e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")&&e.indexOf("title")?"group"===t.type?"scope":e||"mark":e},PT=function(t){return{marktype:t.type,name:t.name||void 0,role:t.role||FT(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}},$T=function(t,e){return t&&t.signal?e.signalRef(t.signal):!1!==t},zT=function(t,e){var n=yo(t.type);n||Object(p.n)("Unrecognized transform type: "+Object(p.Z)(t.type));var r=XC(n.type.toLowerCase(),null,BT(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r};function BT(t,e,n){var r,i,o,a={};for(i=0,o=t.params.length;i<o;++i)a[(r=t.params[i]).name]=UT(r,e,n);return a}function UT(t,e,n){var r=t.type,i=e[t.name];return"index"===r?function(t,e,n){Object(p.H)(e.from)||Object(p.n)('Lookup "from" parameter must be a string literal.');return n.getData(e.from).lookupRef(n,e.key)}(0,e,n):void 0!==i?"param"===r?function(t,e,n){var r=e[t.name];return t.array?(Object(p.A)(r)||Object(p.n)("Expected an array of sub-parameters. Instead: "+Object(p.Z)(r)),r.map((function(e){return HT(t,e,n)}))):HT(t,r,n)}(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!ij(i)?i.map((function(e){return WT(t,e,n)})):WT(t,i,n):void(t.required&&Object(p.n)("Missing required "+Object(p.Z)(e.type)+" parameter: "+Object(p.Z)(t.name)))}function WT(t,e,n){var r=t.type;if(ij(e))return VT(r)?Object(p.n)("Expression references can not be signals."):qT(r)?n.fieldRef(e):GT(r)?n.compareRef(e):n.signalRef(e.signal);var i,o=t.expr||qT(r);return o&&((i=e)&&i.expr)?n.exprRef(e.expr,e.as):o&&function(t){return t&&t.field}(e)?tj(e.field,e.as):VT(r)?iC(e,n):function(t){return"data"===t}(r)?JC(n.getData(e).values):qT(r)?tj(e):GT(r)?n.compareRef(e):e}function HT(t,e,n){var r,i,o,a,s;for(a=0,s=t.params.length;a<s;++a){for(o in(i=t.params[a]).key)if(i.key[o]!==e[o]){i=null;break}if(i)break}return i||Object(p.n)("Unsupported parameter: "+Object(p.Z)(e)),r=Object(p.o)(BT(i,e,n),i.key),JC(n.add(Nj(r)))}function VT(t){return"expr"===t}function qT(t){return"field"===t}function GT(t){return"compare"===t}function KT(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:JC(e.getData(t.data).output)}function YT(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}YT.fromEntries=function(t,e){var n=e.length,r=1,i=e[0],o=e[n-1],a=e[n-2],s=null;for(i&&"load"===i.type&&(i=e[1]),t.add(e[0]);r<n;++r)e[r].params.pulse=JC(e[r-1]),t.add(e[r]),"aggregate"===e[r].type&&(s=e[r]);return new YT(t,i,a,o,s)};var QT=YT.prototype;function XT(t){return Object(p.H)(t)?t:null}function ZT(t,e,n){var r,i=rj(n.op,n.field);if(e.ops){for(var o=0,a=e.as.length;o<a;++o)if(e.as[o]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function JT(t,e,n,r,i,o,a){var s,u,c=e[n]||(e[n]={}),l=function(t){return Object(p.F)(t)?("descending"===t.order?"-":"+")+rj(t.op,t.field):""}(o),f=XT(i);if(null!=f&&(t=e.scope,s=c[f+=l?"|"+l:""]),!s){var h=o?{field:ej,pulse:e.countsRef(t,i,o)}:{field:t.fieldRef(i),pulse:JC(e.output)};l&&(h.sort=t.sortRef(o)),u=t.add(XC(r,void 0,h)),a&&(e.index[i]=u),s=JC(u),null!=f&&(c[f]=s)}return s}QT.countsRef=function(t,e,n){var r,i,o,a=this.counts||(this.counts={}),s=XT(e);return null!=s&&(t=this.scope,r=a[s]),r?n&&n.field&&ZT(t,r.agg.params,n):(o={groupby:t.fieldRef(e,"key"),pulse:JC(this.output)},n&&n.field&&ZT(t,o,n),i=t.add(yj(o)),r=t.add(xj({pulse:JC(i)})),r={agg:i,ref:JC(r)},null!=s&&(a[s]=r)),r.ref},QT.tuplesRef=function(){return JC(this.values)},QT.extentRef=function(t,e){return JT(t,this,"extent","extent",e,!1)},QT.domainRef=function(t,e){return JT(t,this,"domain","values",e,!1)},QT.valuesRef=function(t,e,n){return JT(t,this,"vals","values",e,n||!0)},QT.lookupRef=function(t,e){return JT(t,this,"lookup","tupleindex",e,!1)},QT.indataRef=function(t,e){return JT(t,this,"indata","tupleindex",e,!0,!0)};var tM=function(t,e,n){var r,i,o=t.remove,a=t.insert,s=t.toggle,u=t.modify,c=t.values,l=e.add(ZC());r="if("+t.trigger+',modify("'+n+'",'+[a,o,s,u,c].map((function(t){return null==t?"null":t})).join(",")+"),0)",i=iC(r,e),l.update=i.$expr,l.params=i.$params},eM=function(t,e){var n,r,i,o,a,s,u,c,l,f,h,d,g,v,m=FT(t),y="group"===t.type,b=t.from&&t.from.facet,w=t.layout||"scope"===m||"frame"===m,x="mark"===m||w||b,_=t.overlap;i=function(t,e,n){var r,i,o,a,s;return t?(r=t.facet)&&(e||Object(p.n)("Only group marks can be faceted."),null!=r.field?a=s=KT(r,n):(t.data?s=JC(n.getData(t.data).aggregate):((o=zT(Object(p.o)({type:"aggregate",groupby:Object(p.i)(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),o.params.pulse=KT(r,n),a=s=JC(n.add(o))),i=n.keyRef(r.groupby,!0))):a=JC(n.add(xj(null,[{}]))),a||(a=KT(t,n)),{key:i,pulse:a,parent:s}}(t.from,y,e),f=JC(r=e.add(Oj({key:i.key||(t.key?tj(t.key):void 0),pulse:i.pulse,clean:!y}))),r=o=e.add(xj({pulse:f})),r=e.add(Mj({markdef:PT(t),interactive:$T(t.interactive,e),clip:NT(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:JC(r)})),h=JC(r),(r=a=e.add(kj(HC(t.encode,t.type,m,t.style,e,{mod:!1,pulse:h})))).params.parent=e.encode(),t.transform&&t.transform.forEach((function(t){var n=zT(t,e),i=n.metadata;(i.generates||i.changes)&&Object(p.n)("Mark transforms should not generate new data."),i.nomod||(a.params.mod=!0),n.params.pulse=JC(r),e.add(r=n)})),t.sort&&(r=e.add(Wj({sort:e.compareRef(t.sort),pulse:JC(r)}))),d=JC(r),(b||w)&&(g=JC(w=e.add(Hj({layout:e.objectProperty(t.layout),legends:e.legends,mark:h,pulse:d})))),v=JC(s=e.add(wj({mark:h,pulse:g||d}))),y&&(x&&((n=e.operators).pop(),w&&n.pop()),e.pushState(d,g||v,f),b?function(t,e,n){var r,i,o,a,s=t.from.facet,u=s.name,c=KT(s,e);s.name||Object(p.n)("Facet must have a name: "+Object(p.Z)(s)),s.data||Object(p.n)("Facet must reference a data set: "+Object(p.Z)(s)),s.field?a=e.add(Ij({field:e.fieldRef(s.field),pulse:c})):s.groupby?a=e.add(Ej({key:e.keyRef(s.groupby),group:JC(e.proxy(n.parent)),pulse:c})):Object(p.n)("Facet must specify groupby or field: "+Object(p.Z)(s)),i=(r=e.fork()).add(xj()),o=r.add(Uj({pulse:JC(i)})),r.addData(u,new YT(r,i,i,o)),r.addSignal("parent",null),a.params.subflow={$subflow:r.parse(t).toRuntime()}}(t,e,i):x?function(t,e,n){var r=e.add(Ij({pulse:n.pulse})),i=e.fork();i.add(Uj()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(t).toRuntime()}}(t,e,i):e.parse(t),e.popState(),x&&(w&&n.push(w),n.push(s))),_&&(v=function(t,e,n){var r,i=t.method,o=t.bound,a=t.separation,s={separation:ij(a)?n.signalRef(a.signal):a,method:ij(i)?n.signalRef(i.signal):i,pulse:e};t.order&&(s.sort=n.compareRef({field:t.order}));o&&(r=o.tolerance,s.boundTolerance=ij(r)?n.signalRef(r.signal):+r,s.boundScale=n.scaleRef(o.scale),s.boundOrient=o.orient);return JC(n.add(Lj(s)))}(_,v,e)),u=e.add(zj({pulse:v})),c=e.add(Uj({pulse:JC(u)},void 0,e.parent())),null!=t.name&&(l=t.name,e.addData(l,new YT(e,o,u,c)),t.on&&t.on.forEach((function(t){(t.insert||t.remove||t.toggle)&&Object(p.n)("Marks only support modify triggers."),tM(t,e,l)})))};var nM=function(t,e){var n,r,i,o,a,s,u,c,l=e.config.legend,f=t.encode||{},h=f.legend||{},d=h.name||void 0,g=h.interactive,v=h.style,m=dT(t,l),y={},b=0;return uT.forEach((function(e){return t[e]?(y[e]=t[e],b=b||t[e]):0})),b||Object(p.n)("Missing valid scale for legend."),a=function(t,e){var n=t.type||"symbol";t.type||1!==function(t){return uT.reduce((function(e,n){return e+(t[n]?1:0)}),0)}(t)||!t.fill&&!t.stroke||(n=ig(e)?"gradient":ag(e)?"discrete":"symbol");return"gradient"!==n?n:ag(e)?"discrete":"gradient"}(t,e.scaleType(b)),s={title:null!=t.title,scales:y,type:a,vgrad:"symbol"!==a&&m.isVertical()},u=JC(e.add(xj(null,[s]))),h=IC(function(t,e,n){var r={enter:{},update:{}};return NC(r,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),r}(m,t,l),h,cT),n={enter:{x:{value:0},y:{value:0}}},c=JC(e.add(jj(i={type:a,scale:e.scaleRef(b),count:e.objectProperty(m("tickCount")),limit:e.property(m("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),"gradient"===a?(o=[bT(t,b,l,f.gradient),OT(t,l,f.labels,c)],i.count=i.count||e.signalRef("max(2,2*floor((".concat(sj(m.gradientLength()),")/100))"))):"discrete"===a?o=[wT(t,b,l,f.gradient,c),OT(t,l,f.labels,c)]:(r=function(t,e){var n=dT(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(t,l),o=[kT(t,l,f,c,sj(r.columns))],i.size=function(t,e,n){var r=sj(rM("size",t,n)),i=sj(rM("strokeWidth",t,n)),o=sj(function(t,e,n){return pT("fontSize",t)||function(t,e,n){var r=e.config.style[n];return r&&r[t]}("fontSize",e,n)}(n[1].encode,e,"guide-label"));return iC("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(o,")"),e)}(t,e,o[0].marks)),o=[hT({role:"legend-entry",from:u,encode:n,marks:o,layout:r,interactive:g})],s.title&&o.push(function(t,e,n,r){var i,o=dT(t,e);return NC(i={enter:{opacity:lT},update:{opacity:fT,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:lT}},{orient:o("titleOrient"),_anchor:o("titleAnchor"),anchor:{signal:RT},angle:{signal:DT},align:{signal:MT},baseline:{signal:LT},text:t.title,fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),baseline:o("titleBaseline")}),yT({type:"text",role:"legend-title",style:"guide-title",from:r,encode:i},n)}(t,l,f.title,u)),eM(hT({role:"legend",from:u,encode:h,marks:o,aria:m("aria"),description:m("description"),zindex:m("zindex"),name:d,interactive:g,style:v}),e)};function rM(t,e,n){return e[t]?'scale("'.concat(e[t],'",datum)'):pT(t,n[0].encode)}var iM='item.orient==="'.concat("left",'"?-90:item.orient==="').concat("right",'"?90:0'),oM=function(t,e){var n,r,i=dT(t=Object(p.H)(t)?{text:t}:t,e.config.title),o=t.encode||{},a=o.group||{},s=a.name||void 0,u=a.interactive,c=a.style,l=[];return n={},r=JC(e.add(xj(null,[n]))),l.push(function(t,e,n,r){var i={value:0},o=t.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return NC(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),yT({type:"text",role:"title-text",style:"group-title",from:r,encode:a},n)}(t,i,function(t){var e=t.encode;return e&&e.title||Object(p.o)({name:t.name,interactive:t.interactive,style:t.style},e)}(t),r)),t.subtitle&&l.push(function(t,e,n,r){var i={value:0},o=t.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return NC(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),yT({type:"text",role:"title-subtitle",style:"group-subtitle",from:r,encode:a},n)}(t,i,o.subtitle,r)),eM(hT({role:"title",from:r,encode:aM(i,a),marks:l,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:u,style:c}),e)};function aM(t,e){var n={enter:{},update:{}};return NC(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:vT},angle:{signal:iM},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),IC(n,e,cT)}function sM(t,e){var n=[];t.transform&&t.transform.forEach((function(t){n.push(zT(t,e))})),t.on&&t.on.forEach((function(n){tM(n,e,t.name)})),e.addDataPipeline(t.name,function(t,e,n){var r,i,o,a,s,u=[],c=null,l=!1,f=!1;t.values?oj(t.values)||oj(t.format)?(u.push(cM(e,t)),u.push(c=uM())):u.push(c=uM({$ingest:t.values,$format:t.format})):t.url?oj(t.url)||oj(t.format)?(u.push(cM(e,t)),u.push(c=uM())):u.push(c=uM({$request:t.url,$format:t.format})):t.source&&(c=r=Object(p.i)(t.source).map((function(t){return JC(e.getData(t).output)})),u.push(null));for(i=0,o=n.length;i<o;++i)a=n[i],s=a.metadata,c||s.source||u.push(c=uM()),u.push(a),s.generates&&(f=!0),s.modifies&&!f&&(l=!0),s.source?c=a:s.changes&&(c=null);r&&(o=r.length-1,u[0]=$j({derive:l,pulse:o?r:r[0]}),(l||o)&&u.splice(1,0,uM()));c||u.push(uM());return u.push(Uj({})),u}(t,e,n))}function uM(t){var e=xj({},t);return e.metadata={source:!0},e}function cM(t,e){return Tj({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}var lM=function(t){return"bottom"===t||"top"===t},fM=function(t,e,n){return ij(t)?mM(t.signal,e,n):"left"===t||"top"===t?e:n},hM=function(t,e,n){return ij(t)?gM(t.signal,e,n):lM(t)?e:n},dM=function(t,e,n){return ij(t)?vM(t.signal,e,n):lM(t)?n:e},pM=function(t,e,n){return ij(t)?yM(t.signal,e,n):"top"===t?{value:e}:{value:n}},gM=function(t,e,n){return wM("".concat(t," === '").concat("top","' || ").concat(t," === '").concat("bottom","'"),e,n)},vM=function(t,e,n){return wM("".concat(t," !== '").concat("top","' && ").concat(t," !== '").concat("bottom","'"),e,n)},mM=function(t,e,n){return _M("".concat(t," === '").concat("left","' || ").concat(t," === '").concat("top","'"),e,n)},yM=function(t,e,n){return _M("".concat(t," === '").concat("top","'"),e,n)},bM=function(t,e,n){return _M("".concat(t," === '").concat("right","'"),e,n)},wM=function(t,e,n){return e=null!=e?DC(e):e,n=null!=n?DC(n):n,xM(e)&&xM(n)?(e=e?e.signal||Object(p.Z)(e.value):null,n=n?n.signal||Object(p.Z)(n.value):null,{signal:"".concat(t," ? (").concat(e,") : (").concat(n,")")}):[Object(p.o)({test:t},e)].concat(n||[])},xM=function(t){return null==t||1===Object.keys(t).length},_M=function(t,e,n){return{signal:"".concat(t," ? (").concat(OM(e),") : (").concat(OM(n),")")}},OM=function(t){return ij(t)?t.signal:null==t?null:Object(p.Z)(t)},kM=function(t,e){var n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function SM(t,e,n,r){var i;if(e&&Object(p.v)(e,t))return e[t];if(Object(p.v)(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return r["guide-title"][i]}if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return r["guide-label"][i]}return null}function EM(t){var e,n={},r=Object(Do.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i)for(var o in i)n[o]=1}}catch(a){r.e(a)}finally{r.f()}return Object.keys(n)}function AM(t,e){return{scale:t.scale,range:e}}var CM=function(t,e,n,r,i){var o,a,s,u,c,l,f,h,d=dT(t,e),g=t.orient,v=t.gridScale,m=fM(g,1,-1),y=function(t,e){if(1===e);else if(Object(p.F)(t)){for(var n=t=Object(p.o)({},t);null!=n.mult;){if(!Object(p.F)(n.mult))return n.mult=ij(e)?{signal:"(".concat(n.mult,") * (").concat(e.signal,")")}:n.mult*e,t;n=n.mult=Object(p.o)({},n.mult)}n.mult=e}else t=ij(e)?{signal:"(".concat(e.signal,") * (").concat(t||0,")")}:e*(t||0);return t}(t.offset,m);return NC(o={enter:a={opacity:lT},update:u={opacity:fT},exit:s={opacity:lT}},{stroke:d("gridColor"),strokeCap:d("gridCap"),strokeDash:d("gridDash"),strokeDashOffset:d("gridDashOffset"),strokeOpacity:d("gridOpacity"),strokeWidth:d("gridWidth")}),c={scale:t.scale,field:sT,band:i.band,extra:i.extra,offset:i.offset,round:d("tickRound")},h=hM(g,{signal:"height"},{signal:"width"}),l=v?{scale:v,range:0,mult:m,offset:y}:{value:0,offset:y},f=v?{scale:v,range:1,mult:m,offset:y}:Object(p.o)(h,{mult:m,offset:y}),a.x=u.x=hM(g,c,l),a.y=u.y=dM(g,c,l),a.x2=u.x2=dM(g,f),a.y2=u.y2=hM(g,f),s.x=hM(g,c),s.y=dM(g,c),yT({type:"rule",role:"axis-grid",key:sT,from:r,encode:o},n)};function jM(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}var TM=function(t,e,n,r,i,o){var a,s,u,c,l,f,h,d,p,g,v=dT(t,e),m=t.orient,y=t.scale,b=fM(m,-1,1),w=sj(v("labelFlush")),x=sj(v("labelFlushOffset")),_=0===w||!!w,O=v("labelAlign"),k=v("labelBaseline");return(c=DC(i)).mult=b,c.offset=DC(v("labelPadding")||0),c.offset.mult=b,l={scale:y,field:sT,band:.5,offset:mT(o.offset,v("labelOffset"))},f=hM(m,_?jM(y,w,'"left"','"right"','"center"'):{value:"center"},function(t,e,n){return ij(t)?bM(t.signal,e,n):"right"===t?{value:e}:{value:n}}(m,"left","right")),h=hM(m,pM(m,"bottom","top"),_?jM(y,w,'"top"','"bottom"','"middle"'):{value:"middle"}),g=jM(y,w,"-(".concat(x,")"),x,0),_=_&&x,NC(a={enter:s={opacity:lT,x:hM(m,l,c),y:dM(m,l,c)},update:u={opacity:fT,text:{field:"label"},x:s.x,y:s.y,align:f,baseline:h},exit:{opacity:lT,x:s.x,y:s.y}},{dx:!O&&_?hM(m,g):null,dy:!k&&_?dM(m,g):null}),NC(a,{angle:v("labelAngle"),fill:v("labelColor"),fillOpacity:v("labelOpacity"),font:v("labelFont"),fontSize:v("labelFontSize"),fontWeight:v("labelFontWeight"),fontStyle:v("labelFontStyle"),limit:v("labelLimit"),lineHeight:v("labelLineHeight")},{align:O,baseline:k}),d=v("labelBound"),p=(p=v("labelOverlap"))||d?{separation:v("labelSeparation"),method:p,order:"datum.index",bound:d?{scale:y,orient:m,tolerance:d}:null}:void 0,u.align!==f&&(u.align=kM(u.align,f)),u.baseline!==h&&(u.baseline=kM(u.baseline,h)),yT({type:"text",role:"axis-label",style:"guide-label",key:sT,from:r,encode:a,overlap:p},n)},MM=function(t,e,n,r){var i,o,a,s,u=dT(t,e),c=t.orient,l=fM(c,-1,1);return i={enter:o={opacity:lT,anchor:DC(u("titleAnchor",null)),align:{signal:vT}},update:a=Object(p.o)({},o,{opacity:fT,text:DC(t.title)}),exit:{opacity:lT}},s={signal:'lerp(range("'.concat(t.scale,'"), ').concat(gT(0,1,.5),")")},a.x=hM(c,s),a.y=dM(c,s),o.angle=hM(c,lT,function(t,e){return 0===e?0:ij(t)?{signal:"(".concat(t.signal,") * ").concat(e)}:{value:t*e}}(l,90)),o.baseline=hM(c,pM(c,"bottom","top"),{value:"bottom"}),a.angle=o.angle,a.baseline=o.baseline,NC(i,{fill:u("titleColor"),fillOpacity:u("titleOpacity"),font:u("titleFont"),fontSize:u("titleFontSize"),fontStyle:u("titleFontStyle"),fontWeight:u("titleFontWeight"),limit:u("titleLimit"),lineHeight:u("titleLineHeight")},{align:u("titleAlign"),angle:u("titleAngle"),baseline:u("titleBaseline")}),function(t,e,n,r){var i=function(t,e){return null!=t?(n.update[e]=kM(DC(t),n.update[e]),!1):!FC(e,r)},o=i(t("titleX"),"x"),a=i(t("titleY"),"y");n.enter.auto=a===o?DC(a):hM(e,DC(a),DC(o))}(u,c,i,n),i.update.align=kM(i.update.align,o.align),i.update.angle=kM(i.update.angle,o.angle),i.update.baseline=kM(i.update.baseline,o.baseline),yT({type:"text",role:"axis-title",style:"guide-title",from:r,encode:i},n)};var RM=function(t,e){var n,r,i,o,a,s=function(t,e){var n,r,i,o,a,s,u,c,l=e.config,f=l.style,h=l.axis,d="band"===e.scaleType(t.scale)&&l.axisBand,g=t.orient;if(ij(g)){var v=EM([l.axisX,l.axisY]),m=EM([l.axisTop,l.axisBottom,l.axisLeft,l.axisRight]);n={};var y,b=Object(Do.a)(v);try{for(b.s();!(y=b.n()).done;)n[i=y.value]=hM(g,SM(i,l.axisX,h,f),SM(i,l.axisY,h,f))}catch(_){b.e(_)}finally{b.f()}r={};var w,x=Object(Do.a)(m);try{for(x.s();!(w=x.n()).done;)r[i=w.value]=(o=g.signal,a=SM(i,l.axisTop,h,f),s=SM(i,l.axisBottom,h,f),u=SM(i,l.axisLeft,h,f),c=SM(i,l.axisRight,h,f),{signal:(null!=u?"".concat(o," === '").concat("left","' ? (").concat(OM(u),") : "):"")+(null!=s?"".concat(o," === '").concat("bottom","' ? (").concat(OM(s),") : "):"")+(null!=c?"".concat(o," === '").concat("right","' ? (").concat(OM(c),") : "):"")+(null!=a?"".concat(o," === '").concat("top","' ? (").concat(OM(a),") : "):"")+"(null)"})}catch(_){x.e(_)}finally{x.f()}}else n="top"===g||"bottom"===g?l.axisX:l.axisY,r=l["axis"+g[0].toUpperCase()+g.slice(1)];return n||r||d?Object(p.o)({},h,n,r,d):h}(t,e),u=t.encode||{},c=u.axis||{},l=c.name||void 0,f=c.interactive,h=c.style,d=dT(t,s),g=function(t){var e,n,r=t("tickBand"),i=t("tickOffset");return r?r.signal?(e={signal:"(".concat(r.signal,") === 'extent' ? 1 : 0.5")},n={signal:"(".concat(r.signal,") === 'extent'")},Object(p.F)(i)||(i={signal:"(".concat(r.signal,") === 'extent' ? 0 : ").concat(i)})):"extent"===r?(e=1,n=!0,i=0):(e=.5,n=!1):(e=t("bandPosition"),n=t("tickExtra")),{extra:n,band:e,offset:i}}(d);return n={scale:t.scale,ticks:!!d("ticks"),labels:!!d("labels"),grid:!!d("grid"),domain:!!d("domain"),title:null!=t.title},r=JC(e.add(xj({},[n]))),c=IC(function(t,e){var n={enter:{},update:{}};return NC(n,{orient:t("orient"),offset:t("offset")||0,position:aj(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:'abs(span(range("'.concat(e.scale,'")))')},translate:t("translate"),format:e.format,formatType:e.formatType}),n}(d,t),c,cT),i=JC(e.add(bj({scale:e.scaleRef(t.scale),extra:e.property(g.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),a=[],n.grid&&a.push(CM(t,s,u.grid,i,g)),n.ticks&&(o=d("tickSize"),a.push(function(t,e,n,r,i,o){var a,s,u,c,l,f,h=dT(t,e),d=t.orient,p=fM(d,-1,1);return NC(a={enter:s={opacity:lT},update:c={opacity:fT},exit:u={opacity:lT}},{stroke:h("tickColor"),strokeCap:h("tickCap"),strokeDash:h("tickDash"),strokeDashOffset:h("tickDashOffset"),strokeOpacity:h("tickOpacity"),strokeWidth:h("tickWidth")}),(l=DC(i)).mult=p,f={scale:t.scale,field:sT,band:o.band,extra:o.extra,offset:o.offset,round:h("tickRound")},c.y=s.y=hM(d,lT,f),c.y2=s.y2=hM(d,l),u.x=hM(d,f),c.x=s.x=dM(d,lT,f),c.x2=s.x2=dM(d,l),u.y=dM(d,f),yT({type:"rule",role:"axis-tick",key:sT,from:r,encode:a},n)}(t,s,u.ticks,i,o,g))),n.labels&&(o=n.ticks?o:0,a.push(TM(t,s,u.labels,i,o,g))),n.domain&&a.push(function(t,e,n,r){var i,o,a,s=dT(t,e),u=t.orient;NC(i={enter:o={opacity:lT},update:a={opacity:fT},exit:{opacity:lT}},{stroke:s("domainColor"),strokeCap:s("domainCap"),strokeDash:s("domainDash"),strokeDashOffset:s("domainDashOffset"),strokeWidth:s("domainWidth"),strokeOpacity:s("domainOpacity")});var c=AM(t,0),l=AM(t,1);return o.x=a.x=hM(u,c,lT),o.x2=a.x2=hM(u,l),o.y=a.y=dM(u,c,lT),o.y2=a.y2=dM(u,l),yT({type:"rule",role:"axis-domain",from:r,encode:i},n)}(t,s,u.domain,r)),n.title&&a.push(MM(t,s,u.title,r)),eM(hT({role:"axis",from:r,encode:c,marks:a,aria:d("aria"),description:d("description"),zindex:d("zindex"),name:l,interactive:f,style:h}),e)};var DM=function(t,e,n){var r=Object(p.i)(t.signals),i=Object(p.i)(t.scales);return n||r.forEach((function(t){return YC(t,e)})),Object(p.i)(t.projections).forEach((function(t){return function(t,e){var n=e.config.projection||{},r={};for(var i in t)"name"!==i&&(r[i]=aT(t[i],i,e));for(i in n)null==r[i]&&(r[i]=aT(n[i],i,e));e.addProjection(t.name,r)}(t,e)})),i.forEach((function(t){return function(t,e){var n=t.type||"linear";ng(n)||Object(p.n)("Unrecognized scale type: "+Object(p.Z)(n)),e.addScale(t.name,{type:n,domain:void 0})}(t,e)})),Object(p.i)(t.data).forEach((function(t){return sM(t,e)})),i.forEach((function(t){return Kj(t,e)})),(n||r).forEach((function(t){return function(t,e){var n=e.getSignal(t.name),r=t.update;t.init&&(r?Object(p.n)("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=iC(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach((function(t){gj(t,e,n.id)}))}(t,e)})),Object(p.i)(t.axes).forEach((function(t){return RM(t,e)})),Object(p.i)(t.marks).forEach((function(t){return eM(t,e)})),Object(p.i)(t.legends).forEach((function(t){return nM(t,e)})),t.title&&oM(t.title,e),e.parseLambdas(),e};function LM(t,e){var n=e.config,r=JC(e.root=e.add(ZC())),i=function(t,e){var n=function(n){return aj(t[n],e[n])},r=[NM("background",n("background")),NM("autosize",TC(n("autosize"))),NM("padding",RC(n("padding"))),NM("width",n("width")||0),NM("height",n("height")||0)],i=r.reduce((function(t,e){return t[e.name]=e,t}),{}),o={};return Object(p.i)(t.signals).forEach((function(t){Object(p.v)(i,t.name)?t=Object(p.o)(i[t.name],t):r.push(t),o[t.name]=t})),Object(p.i)(e.signals).forEach((function(t){Object(p.v)(o,t.name)||Object(p.v)(i,t.name)||r.push(t)})),r}(t,n);i.forEach((function(t){return YC(t,e)})),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;var o=e.add(xj()),a=e.add(kj(HC(function(t){return IC({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t)}(t.encode),"group","frame",t.style,e,{pulse:JC(o)}))),s=e.add(Hj({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:r,pulse:JC(a)}));e.operators.pop(),e.pushState(JC(a),JC(s),null),DM(t,e,i),e.operators.push(s);var u=e.add(wj({mark:r,pulse:JC(s)}));return u=e.add(zj({pulse:JC(u)})),u=e.add(Uj({pulse:JC(u)})),e.addData("root",new YT(e,o,o,u)),e}function NM(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function IM(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function FM(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}var PM=IM.prototype=FM.prototype;function $M(t){return(Object(p.A)(t)?zM:BM)(t)}function zM(t){for(var e,n="[",r=0,i=t.length;r<i;++r)e=t[r],n+=(r>0?",":"")+(Object(p.F)(e)?e.signal||$M(e):Object(p.Z)(e));return n+"]"}function BM(t){var e,n,r="{",i=0;for(e in t)n=t[e],r+=(++i>1?",":"")+Object(p.Z)(e)+":"+(Object(p.F)(n)?n.signal||$M(n):Object(p.Z)(n));return r+"}"}PM.parse=function(t){return DM(t,this)},PM.fork=function(){return new FM(this)},PM.isSubscope=function(){return this._subid>0},PM.toRuntime=function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},PM.id=function(){return(this._subid?this._subid+":":0)+this._id++},PM.add=function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach((function(e){e.$ref=t.id})),t.refs=null),t},PM.proxy=function(t){var e=t instanceof QC?JC(t):t;return this.add(Pj({value:e}))},PM.addStream=function(t){return this.streams.push(t),t.id=this.id(),t},PM.addUpdate=function(t){return this.updates.push(t),t},PM.finish=function(){var t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){var r;t&&((r=t.data||(t.data={}))[e]||(r[e]=[])).push(n)}for(t in this.data)for(var r in n((e=this.data[t]).input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values"),e.index)n(e.index[r],t,"index:"+r);return this},PM.pushState=function(t,e,n){this._encode.push(JC(this.add(Uj({pulse:t})))),this._parent.push(e),this._lookup.push(n?JC(this.proxy(n)):null),this._markpath.push(-1)},PM.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},PM.parent=function(){return Object(p.U)(this._parent)},PM.encode=function(){return Object(p.U)(this._encode)},PM.lookup=function(){return Object(p.U)(this._lookup)},PM.markpath=function(){var t=this._markpath;return++t[t.length-1]},PM.fieldRef=function(t,e){if(Object(p.H)(t))return tj(t,e);t.signal||Object(p.n)("Unsupported field reference: "+Object(p.Z)(t));var n,r=t.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},e&&(n.as=e),this.field[r]=i=JC(this.add(Aj(n)))),i},PM.compareRef=function(t){function e(t){return ij(t)?(r=!0,n.signalRef(t.signal)):function(t){return t&&t.expr}(t)?(r=!0,n.exprRef(t.expr)):t}var n=this,r=!1,i=Object(p.i)(t.field).map(e),o=Object(p.i)(t.order).map(e);return r?JC(this.add(_j({fields:i,orders:o}))):nj(i,o)},PM.keyRef=function(t,e){var n=this.signals,r=!1;return t=Object(p.i)(t).map((function(t){return ij(t)?(r=!0,JC(n[t.signal])):t})),r?JC(this.add(Cj({fields:t,flat:e}))):function(t,e){var n={$key:t};return e&&(n.$flat=!0),n}(t,e)},PM.sortRef=function(t){if(!t)return t;var e=rj(t.op,t.field),n=t.order||"ascending";return n.signal?JC(this.add(_j({fields:e,orders:this.signalRef(n.signal)}))):nj(e,n)},PM.event=function(t,e){var n=t+":"+e;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},PM.hasOwnSignal=function(t){return Object(p.v)(this.signals,t)},PM.addSignal=function(t,e){this.hasOwnSignal(t)&&Object(p.n)("Duplicate signal name: "+Object(p.Z)(t));var n=e instanceof QC?e:this.add(ZC(e));return this.signals[t]=n},PM.getSignal=function(t){return this.signals[t]||Object(p.n)("Unrecognized signal name: "+Object(p.Z)(t)),this.signals[t]},PM.signalRef=function(t){return this.signals[t]?JC(this.signals[t]):(Object(p.v)(this.lambdas,t)||(this.lambdas[t]=this.add(ZC(null))),JC(this.lambdas[t]))},PM.parseLambdas=function(){for(var t=Object.keys(this.lambdas),e=0,n=t.length;e<n;++e){var r=t[e],i=iC(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},PM.property=function(t){return t&&t.signal?this.signalRef(t.signal):t},PM.objectProperty=function(t){return t&&Object(p.F)(t)?this.signalRef(t.signal||$M(t)):t},PM.exprRef=function(t,e){var n={expr:iC(t,this)};return e&&(n.expr.$name=e),JC(this.add(Sj(n)))},PM.addBinding=function(t,e){this.bindings||Object(p.n)("Nested signals do not support binding: "+Object(p.Z)(t)),this.bindings.push(Object(p.o)({signal:t},e))},PM.addScaleProj=function(t,e){Object(p.v)(this.scales,t)&&Object(p.n)("Duplicate scale or projection name: "+Object(p.Z)(t)),this.scales[t]=this.add(e)},PM.addScale=function(t,e){this.addScaleProj(t,Bj(e))},PM.addProjection=function(t,e){this.addScaleProj(t,Fj(e))},PM.getScale=function(t){return this.scales[t]||Object(p.n)("Unrecognized scale name: "+Object(p.Z)(t)),this.scales[t]},PM.projectionRef=PM.scaleRef=function(t){return JC(this.getScale(t))},PM.projectionType=PM.scaleType=function(t){return this.getScale(t).params.type},PM.addData=function(t,e){return Object(p.v)(this.data,t)&&Object(p.n)("Duplicate data set name: "+Object(p.Z)(t)),this.data[t]=e},PM.getData=function(t){return this.data[t]||Object(p.n)("Undefined data set name: "+Object(p.Z)(t)),this.data[t]},PM.addDataPipeline=function(t,e){return Object(p.v)(this.data,t)&&Object(p.n)("Duplicate data set name: "+Object(p.Z)(t)),this.addData(t,YT.fromEntries(this,e))};var UM=function(t,e,n){return Object(p.F)(t)||Object(p.n)("Input Vega specification must be an object."),LM(t,new IM(e=Object(p.N)({description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},trail:{fill:"#4c78a8",size:2},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,fontWeight:"bold"},"group-title":{fill:"#000",font:"sans-serif",fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:"#000",font:"sans-serif",fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,gridWidth:1,gridColor:"#ddd",labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:"#888",titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}},e,t.config),n)).toRuntime()};Object(p.o)(mo,r,o,a,s,u,c,l,f,h,d)},function(t,e,n){"use strict";var r=n(43),i=n(12),o=n(221),a=n(9),s=["xs","sm","md","lg","xl"];function u(t){var e=t.values,n=void 0===e?{xs:0,sm:600,md:960,lg:1280,xl:1920}:e,r=t.unit,o=void 0===r?"px":r,u=t.step,c=void 0===u?5:u,l=Object(i.a)(t,["values","unit","step"]);function f(t){var e="number"===typeof n[t]?n[t]:t;return"@media (min-width:".concat(e).concat(o,")")}function h(t,e){var r=s.indexOf(e);return r===s.length-1?f(t):"@media (min-width:".concat("number"===typeof n[t]?n[t]:t).concat(o,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[s[r+1]]?n[s[r+1]]:e)-c/100).concat(o,")")}return Object(a.a)({keys:s,values:n,up:f,down:function(t){var e=s.indexOf(t)+1,r=n[s[e]];return e===s.length?f("xs"):"@media (max-width:".concat(("number"===typeof r&&e>0?r:t)-c/100).concat(o,")")},between:h,only:function(t){return h(t,t)},width:function(t){return n[t]}},l)}function c(t,e,n){var i;return Object(a.a)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a.a)({paddingLeft:e(2),paddingRight:e(2)},n,Object(r.a)({},t.up("sm"),Object(a.a)({paddingLeft:e(3),paddingRight:e(3)},n[t.up("sm")])))},toolbar:(i={minHeight:56},Object(r.a)(i,"".concat(t.up("xs")," and (orientation: landscape)"),{minHeight:48}),Object(r.a)(i,t.up("sm"),{minHeight:64}),i)},n)}var l=n(134),f={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},d={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},p={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},g={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=n(30),w={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:f.white,default:h[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:f.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:h[800],default:"#303030"},action:{active:f.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function _(t,e,n,r){var i=r.light||r,o=r.dark||1.5*r;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=Object(b.d)(t.main,i):"dark"===e&&(t.dark=Object(b.a)(t.main,o)))}function O(t){var e=t.primary,n=void 0===e?{light:d[300],main:d[500],dark:d[700]}:e,r=t.secondary,s=void 0===r?{light:p.A200,main:p.A400,dark:p.A700}:r,u=t.error,c=void 0===u?{light:g[300],main:g[500],dark:g[700]}:u,O=t.warning,k=void 0===O?{light:v[300],main:v[500],dark:v[700]}:O,S=t.info,E=void 0===S?{light:m[300],main:m[500],dark:m[700]}:S,A=t.success,C=void 0===A?{light:y[300],main:y[500],dark:y[700]}:A,j=t.type,T=void 0===j?"light":j,M=t.contrastThreshold,R=void 0===M?3:M,D=t.tonalOffset,L=void 0===D?.2:D,N=Object(i.a)(t,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function I(t){return Object(b.c)(t,x.text.primary)>=R?x.text.primary:w.text.primary}var F=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(t=Object(a.a)({},t)).main&&t[e]&&(t.main=t[e]),!t.main)throw new Error(Object(l.a)(4,e));if("string"!==typeof t.main)throw new Error(Object(l.a)(5,JSON.stringify(t.main)));return _(t,"light",n,L),_(t,"dark",r,L),t.contrastText||(t.contrastText=I(t.main)),t},P={dark:x,light:w};return Object(o.a)(Object(a.a)({common:f,type:T,primary:F(n),secondary:F(s,"A400","A200","A700"),error:F(c),warning:F(k),info:F(E),success:F(C),grey:h,contrastThreshold:R,getContrastText:I,augmentColor:F,tonalOffset:L},P[T]),N)}function k(t){return Math.round(1e5*t)/1e5}var S={textTransform:"uppercase"};function E(t,e){var n="function"===typeof e?e(t):e,r=n.fontFamily,s=void 0===r?'"Roboto", "Helvetica", "Arial", sans-serif':r,u=n.fontSize,c=void 0===u?14:u,l=n.fontWeightLight,f=void 0===l?300:l,h=n.fontWeightRegular,d=void 0===h?400:h,p=n.fontWeightMedium,g=void 0===p?500:p,v=n.fontWeightBold,m=void 0===v?700:v,y=n.htmlFontSize,b=void 0===y?16:y,w=n.allVariants,x=n.pxToRem,_=Object(i.a)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var O=c/14,E=x||function(t){return"".concat(t/b*O,"rem")},A=function(t,e,n,r,i){return Object(a.a)({fontFamily:s,fontWeight:t,fontSize:E(e),lineHeight:n},'"Roboto", "Helvetica", "Arial", sans-serif'===s?{letterSpacing:"".concat(k(r/e),"em")}:{},i,w)},C={h1:A(f,96,1.167,-1.5),h2:A(f,60,1.2,-.5),h3:A(d,48,1.167,0),h4:A(d,34,1.235,.25),h5:A(d,24,1.334,0),h6:A(g,20,1.6,.15),subtitle1:A(d,16,1.75,.15),subtitle2:A(g,14,1.57,.1),body1:A(d,16,1.5,.15),body2:A(d,14,1.43,.15),button:A(g,14,1.75,.4,S),caption:A(d,12,1.66,.4),overline:A(d,12,2.66,1,S)};return Object(o.a)(Object(a.a)({htmlFontSize:b,pxToRem:E,round:k,fontFamily:s,fontSize:c,fontWeightLight:f,fontWeightRegular:d,fontWeightMedium:g,fontWeightBold:m},C),_,{clone:!1})}function A(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var C=["none",A(0,2,1,-1,0,1,1,0,0,1,3,0),A(0,3,1,-2,0,2,2,0,0,1,5,0),A(0,3,3,-2,0,3,4,0,0,1,8,0),A(0,2,4,-1,0,4,5,0,0,1,10,0),A(0,3,5,-1,0,5,8,0,0,1,14,0),A(0,3,5,-1,0,6,10,0,0,1,18,0),A(0,4,5,-2,0,7,10,1,0,2,16,1),A(0,5,5,-3,0,8,10,1,0,3,14,2),A(0,5,6,-3,0,9,12,1,0,3,16,2),A(0,6,6,-3,0,10,14,1,0,4,18,3),A(0,6,7,-4,0,11,15,1,0,4,20,3),A(0,7,8,-4,0,12,17,2,0,5,22,4),A(0,7,8,-4,0,13,19,2,0,5,24,4),A(0,7,9,-4,0,14,21,2,0,5,26,4),A(0,8,9,-5,0,15,22,2,0,6,28,5),A(0,8,10,-5,0,16,24,2,0,6,30,5),A(0,8,11,-5,0,17,26,2,0,6,32,5),A(0,9,11,-5,0,18,28,2,0,7,34,6),A(0,9,12,-6,0,19,29,2,0,7,36,6),A(0,10,13,-6,0,20,31,3,0,8,38,7),A(0,10,13,-6,0,21,33,3,0,8,40,7),A(0,10,14,-6,0,22,35,3,0,8,42,7),A(0,11,14,-7,0,23,36,3,0,9,44,8),A(0,11,15,-7,0,24,38,3,0,9,46,8)],j={borderRadius:4},T=n(119);var M=n(66),R=n(120);function D(t,e){return Object(T.a)(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||Object(M.a)(t,e)||Object(R.a)()}n(49);var L=n(52);n(15);var N=function(t,e){return e?Object(o.a)(t,e,{clone:!1}):t},I={xs:0,sm:600,md:960,lg:1280,xl:1920},F={keys:["xs","sm","md","lg","xl"],up:function(t){return"@media (min-width:".concat(I[t],"px)")}};var P={m:"margin",p:"padding"},$={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},z={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},B=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){if(t.length>2){if(!z[t])return[t];t=z[t]}var e=D(t.split(""),2),n=e[0],r=e[1],i=P[n],o=$[r]||"";return Array.isArray(o)?o.map((function(t){return i+t})):[i+o]})),U=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function W(t){var e=t.spacing||8;return"number"===typeof e?function(t){return e*t}:Array.isArray(e)?function(t){return e[t]}:"function"===typeof e?e:function(){}}function H(t,e){return function(n){return t.reduce((function(t,r){return t[r]=function(t,e){if("string"===typeof e)return e;var n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}(e,n),t}),{})}}function V(t){var e=W(t.theme);return Object.keys(t).map((function(n){if(-1===U.indexOf(n))return null;var r=H(B(n),e),i=t[n];return function(t,e,n){if(Array.isArray(e)){var r=t.theme.breakpoints||F;return e.reduce((function(t,i,o){return t[r.up(r.keys[o])]=n(e[o]),t}),{})}if("object"===Object(L.a)(e)){var i=t.theme.breakpoints||F;return Object.keys(e).reduce((function(t,r){return t[i.up(r)]=n(e[r]),t}),{})}return n(e)}(t,i,r)})).reduce(N,{})}V.propTypes={},V.filterProps=U;function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;var e=W({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 0===n.length?e(1):1===n.length?e(n[0]):n.map((function(t){if("string"===typeof t)return t;var n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return t}}),n.mui=!0,n}var G={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},K={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Y(t){return"".concat(Math.round(t),"ms")}var Q={easing:G,duration:K,create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.duration,r=void 0===n?K.standard:n,o=e.easing,a=void 0===o?G.easeInOut:o,s=e.delay,u=void 0===s?0:s;Object(i.a)(e,["duration","easing","delay"]);return(Array.isArray(t)?t:[t]).map((function(t){return"".concat(t," ").concat("string"===typeof r?r:Y(r)," ").concat(a," ").concat("string"===typeof u?u:Y(u))})).join(",")},getAutoHeightDuration:function(t){if(!t)return 0;var e=t/36;return Math.round(10*(4+15*Math.pow(e,.25)+e/5))}},X={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var Z=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.breakpoints,n=void 0===e?{}:e,r=t.mixins,a=void 0===r?{}:r,s=t.palette,l=void 0===s?{}:s,f=t.spacing,h=t.typography,d=void 0===h?{}:h,p=Object(i.a)(t,["breakpoints","mixins","palette","spacing","typography"]),g=O(l),v=u(n),m=q(f),y=Object(o.a)({breakpoints:v,direction:"ltr",mixins:c(v,m,a),overrides:{},palette:g,props:{},shadows:C,typography:E(g,d),spacing:m,shape:j,transitions:Q,zIndex:X},p),b=arguments.length,w=new Array(b>1?b-1:0),x=1;x<b;x++)w[x-1]=arguments[x];return y=w.reduce((function(t,e){return Object(o.a)(t,e)}),y)}();e.a=Z},function(t,e,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;t.exports=function(t,e){var n,i,o;return e=e||{},n=JSON.stringify([1],void 0,void 0===e.indent?2:e.indent).slice(2,-3),i=""===n?1/0:void 0===e.maxLength?80:e.maxLength,o=e.replacer,function t(e,a,s){var u,c,l,f,h,d,p,g,v,m,y,b;if(e&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0===(y=JSON.stringify(e,o)))return y;if(p=i-a.length-s,y.length<=p&&(v=y.replace(r,(function(t,e){return e||t+" "}))).length<=p)return v;if(null!=o&&(e=JSON.parse(y),o=void 0),"object"===typeof e&&null!==e){if(g=a+n,l=[],c=0,Array.isArray(e))for(m="[",u="]",p=e.length;c<p;c++)l.push(t(e[c],g,c===p-1?0:1)||"null");else for(m="{",u="}",p=(d=Object.keys(e)).length;c<p;c++)f=d[c],h=JSON.stringify(f)+": ",void 0!==(b=t(e[f],g,h.length+(c===p-1?0:1)))&&l.push(h+b);if(l.length>0)return[m,n+l.join(",\n"+g),u].join("\n"+a)}return y}(t,"",0)}},function(t,e,n){"use strict";e.a='.vega-embed {\n  position: relative;\n  display: inline-block; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: scroll;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n'},,,function(t,e,n){(function(t){!function(){var t=function(){return this}();t||"undefined"==typeof window||(t=window);var e=function t(e,n,r){"string"===typeof e?(2==arguments.length&&(r=n),t.modules[e]||(t.payloads[e]=r,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};e.modules={},e.payloads={};var n=function(t,e,n){if("string"===typeof e){var o=i(t,e);if(void 0!=o)return n&&n(),o}else if("[object Array]"===Object.prototype.toString.call(e)){for(var a=[],s=0,u=e.length;s<u;++s){var c=i(t,e[s]);if(void 0==c&&r.original)return;a.push(c)}return n&&n.apply(null,a)||!0}},r=function t(e,r){var i=n("",e,r);return void 0==i&&t.original?t.original.apply(this,arguments):i},i=function(t,r){r=function t(e,n){if(-1!==n.indexOf("!")){var r=n.split("!");return t(e,r[0])+"!"+t(e,r[1])}if("."==n.charAt(0))for(n=e.split("/").slice(0,-1).join("/")+"/"+n;-1!==n.indexOf(".")&&i!=n;){var i=n;n=n.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return n}(t,r);var i=e.modules[r];if(!i){if("function"===typeof(i=e.payloads[r])){var o={},a={id:r,uri:"",exports:o,packaged:!0};o=i((function(t,e){return n(r,t,e)}),o,a)||a.exports,e.modules[r]=o,delete e.payloads[r]}i=e.modules[r]=o||i}return i};!function(n){var i=t;n&&(t[n]||(t[n]={}),i=t[n]),i.define&&i.define.packaged||(e.original=i.define,i.define=e,i.define.packaged=!0),i.require&&i.require.packaged||(r.original=i.require,i.require=r,i.require.packaged=!0)}("ace")}(),ace.define("ace/lib/regexp",["require","exports","module"],(function(t,e,n){"use strict";var r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},i=void 0===r.exec.call(/()??/,"")[1],o=function(){var t=/^/g;return r.test.call(t,""),!t.lastIndex}();function a(t){return(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":"")}function s(t,e,n){if(Array.prototype.indexOf)return t.indexOf(e,n);for(var r=n||0;r<t.length;r++)if(t[r]===e)return r;return-1}o&&i||(RegExp.prototype.exec=function(t){var e,n,u=r.exec.apply(this,arguments);if("string"==typeof t&&u){if(!i&&u.length>1&&s(u,"")>-1&&(n=RegExp(this.source,r.replace.call(a(this),"g","")),r.replace.call(t.slice(u.index),n,(function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(u[t]=void 0)}))),this._xregexp&&this._xregexp.captureNames)for(var c=1;c<u.length;c++)(e=this._xregexp.captureNames[c-1])&&(u[e]=u[c]);!o&&this.global&&!u[0].length&&this.lastIndex>u.index&&this.lastIndex--}return u},o||(RegExp.prototype.test=function(t){var e=r.exec.call(this,t);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}))})),ace.define("ace/lib/es5-shim",["require","exports","module"],(function(t,e,n){function r(){}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError("Function.prototype.bind called on incompatible "+e);var n=h.call(arguments,1),i=function r(){if(this instanceof r){var i=e.apply(this,n.concat(h.call(arguments)));return Object(i)===i?i:this}return e.apply(t,n.concat(h.call(arguments)))};return e.prototype&&(r.prototype=e.prototype,i.prototype=new r,r.prototype=null),i});var i,o,a,s,u,c=Function.prototype.call,l=Array.prototype,f=Object.prototype,h=l.slice,d=c.bind(f.toString),p=c.bind(f.hasOwnProperty);if((u=p(f,"__defineGetter__"))&&(i=c.bind(f.__defineGetter__),o=c.bind(f.__defineSetter__),a=c.bind(f.__lookupGetter__),s=c.bind(f.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function t(t){var e=new Array(t+2);return e[0]=e[1]=0,e}var e,n=[];if(n.splice.apply(n,t(20)),n.splice.apply(n,t(26)),e=n.length,n.splice(5,0,"XXX"),n.length,e+1==n.length)return!0}()){var g=Array.prototype.splice;Array.prototype.splice=function(t,e){return arguments.length?g.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(h.call(arguments,2))):[]}}else Array.prototype.splice=function(t,e){var n=this.length;t>0?t>n&&(t=n):void 0==t?t=0:t<0&&(t=Math.max(n+t,0)),t+e<n||(e=n-t);var r=this.slice(t,t+e),i=h.call(arguments,2),o=i.length;if(t===n)o&&this.push.apply(this,i);else{var a=Math.min(e,n-t),s=t+a,u=s+o-a,c=n-s,l=n-a;if(u<s)for(var f=0;f<c;++f)this[u+f]=this[s+f];else if(u>s)for(f=c;f--;)this[u+f]=this[s+f];if(o&&t===l)this.length=l,this.push.apply(this,i);else for(this.length=l+o,f=0;f<o;++f)this[t+f]=i[f]}return r};Array.isArray||(Array.isArray=function(t){return"[object Array]"==d(t)});var v,m,y=Object("a"),b="a"!=y[0]||!(0 in y);if(Array.prototype.forEach||(Array.prototype.forEach=function(t){var e=R(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=arguments[1],i=-1,o=n.length>>>0;if("[object Function]"!=d(t))throw new TypeError;for(;++i<o;)i in n&&t.call(r,n[i],i,e)}),Array.prototype.map||(Array.prototype.map=function(t){var e=R(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=n.length>>>0,i=Array(r),o=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var a=0;a<r;a++)a in n&&(i[a]=t.call(o,n[a],a,e));return i}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,n=R(this),r=b&&"[object String]"==d(this)?this.split(""):n,i=r.length>>>0,o=[],a=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var s=0;s<i;s++)s in r&&(e=r[s],t.call(a,e,s,n)&&o.push(e));return o}),Array.prototype.every||(Array.prototype.every=function(t){var e=R(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var o=0;o<r;o++)if(o in n&&!t.call(i,n[o],o,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var e=R(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");for(var o=0;o<r;o++)if(o in n&&t.call(i,n[o],o,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=R(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=n.length>>>0;if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o++];break}if(++o>=r)throw new TypeError("reduce of empty array with no initial value")}for(;o<r;o++)o in n&&(i=t.call(void 0,i,n[o],o,e));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=R(this),n=b&&"[object String]"==d(this)?this.split(""):e,r=n.length>>>0;if("[object Function]"!=d(t))throw new TypeError(t+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=r-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do{o in this&&(i=t.call(void 0,i,n[o],o,e))}while(o--);return i}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var e=b&&"[object String]"==d(this)?this.split(""):R(this),n=e.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=M(arguments[1])),r=r>=0?r:Math.max(0,n+r);r<n;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var e=b&&"[object String]"==d(this)?this.split(""):R(this),n=e.length>>>0;if(!n)return-1;var r=n-1;for(arguments.length>1&&(r=Math.min(r,M(arguments[1]))),r=r>=0?r:n-Math.abs(r);r>=0;r--)if(r in e&&t===e[r])return r;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:f)}),!Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor=function(t,e){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+t);if(p(t,e)){var n;if(n={enumerable:!0,configurable:!0},u){var r=t.__proto__;t.__proto__=f;var i=a(t,e),o=s(t,e);if(t.__proto__=r,i||o)return i&&(n.get=i),o&&(n.set=o),n}return n.value=t[e],n}}}(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),Object.create)||(v=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var t={};for(var e in t)t[e]=null;return t.constructor=t.hasOwnProperty=t.propertyIsEnumerable=t.isPrototypeOf=t.toLocaleString=t.toString=t.valueOf=t.__proto__=null,t},Object.create=function(t,e){var n;if(null===t)n=v();else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var r=function(){};r.prototype=t,(n=new r).__proto__=t}return void 0!==e&&Object.defineProperties(n,e),n});function w(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(e){}}if(Object.defineProperty){var x=w({}),_="undefined"==typeof document||w(document.createElement("div"));if(!x||!_)var O=Object.defineProperty}if(!Object.defineProperty||O){Object.defineProperty=function(t,e,n){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.defineProperty called on non-object: "+t);if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError("Property description must be an object: "+n);if(O)try{return O.call(Object,t,e,n)}catch(c){}if(p(n,"value"))if(u&&(a(t,e)||s(t,e))){var r=t.__proto__;t.__proto__=f,delete t[e],t[e]=n.value,t.__proto__=r}else t[e]=n.value;else{if(!u)throw new TypeError("getters & setters can not be defined on this javascript engine");p(n,"get")&&i(t,e,n.get),p(n,"set")&&o(t,e,n.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,e){for(var n in e)p(e,n)&&Object.defineProperty(t,n,e[n]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze((function(){}))}catch(D){Object.freeze=(m=Object.freeze,function(t){return"function"==typeof t?t:m(t)})}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;for(var e="";p(t,e);)e+="?";t[e]=!0;var n=p(t,e);return delete t[e],n}),!Object.keys){var k=!0,S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],E=S.length;for(var A in{toString:null})k=!1;Object.keys=function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var e=[];for(var n in t)p(t,n)&&e.push(n);if(k)for(var r=0,i=E;r<i;r++){var o=S[r];p(t,o)&&e.push(o)}return e}}Date.now||(Date.now=function(){return(new Date).getTime()});var C="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim){C="["+C+"]";var j=new RegExp("^"+C+C+"*"),T=new RegExp(C+C+"*$");String.prototype.trim=function(){return String(this).replace(j,"").replace(T,"")}}function M(t){return(t=+t)!==t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}var R=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}})),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],(function(t,e,n){"use strict";t("./regexp"),t("./es5-shim"),"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",["require","exports","module"],(function(t,e,n){"use strict";e.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS};var r="object"==typeof navigator?navigator:{},i=(/mac|win|linux/i.exec(r.platform)||["other"])[0].toLowerCase(),o=r.userAgent||"",a=r.appName||"";e.isWin="win"==i,e.isMac="mac"==i,e.isLinux="linux"==i,e.isIE="Microsoft Internet Explorer"==a||a.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&e.isIE<9,e.isGecko=e.isMozilla=o.match(/ Gecko\/\d+/),e.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,e.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,e.isEdge=parseFloat(o.split(" Edge/")[1])||void 0,e.isAIR=o.indexOf("AdobeAIR")>=0,e.isAndroid=o.indexOf("Android")>=0,e.isChromeOS=o.indexOf(" CrOS ")>=0,e.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,e.isIOS&&(e.isMac=!0),e.isMobile=e.isIOS||e.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(t,e,n){"use strict";var r=t("./useragent");if(e.buildDom=function t(e,n,r){if("string"==typeof e&&e){var i=document.createTextNode(e);return n&&n.appendChild(i),i}if(!Array.isArray(e))return e&&e.appendChild&&n&&n.appendChild(e),e;if("string"!=typeof e[0]||!e[0]){for(var o=[],a=0;a<e.length;a++){var s=t(e[a],n,r);s&&o.push(s)}return o}var u=document.createElement(e[0]),c=e[1],l=1;c&&"object"==typeof c&&!Array.isArray(c)&&(l=2);for(a=l;a<e.length;a++)t(e[a],u,r);return 2==l&&Object.keys(c).forEach((function(t){var e=c[t];"class"===t?u.className=Array.isArray(e)?e.join(" "):e:"function"==typeof e||"value"==t||"$"==t[0]?u[t]=e:"ref"===t?r&&(r[e]=u):null!=e&&u.setAttribute(t,e)})),n&&n.appendChild(u),u},e.getDocumentHead=function(t){return t||(t=document),t.head||t.getElementsByTagName("head")[0]||t.documentElement},e.createElement=function(t,e){return document.createElementNS?document.createElementNS(e||"http://www.w3.org/1999/xhtml",t):document.createElement(t)},e.removeChildren=function(t){t.innerHTML=""},e.createTextNode=function(t,e){return(e?e.ownerDocument:document).createTextNode(t)},e.createFragment=function(t){return(t?t.ownerDocument:document).createDocumentFragment()},e.hasCssClass=function(t,e){return-1!==(t.className+"").split(/\s+/g).indexOf(e)},e.addCssClass=function(t,n){e.hasCssClass(t,n)||(t.className+=" "+n)},e.removeCssClass=function(t,e){for(var n=t.className.split(/\s+/g);;){var r=n.indexOf(e);if(-1==r)break;n.splice(r,1)}t.className=n.join(" ")},e.toggleCssClass=function(t,e){for(var n=t.className.split(/\s+/g),r=!0;;){var i=n.indexOf(e);if(-1==i)break;r=!1,n.splice(i,1)}return r&&n.push(e),t.className=n.join(" "),r},e.setCssClass=function(t,n,r){r?e.addCssClass(t,n):e.removeCssClass(t,n)},e.hasCssString=function(t,e){var n,r=0;if(n=(e=e||document).querySelectorAll("style"))for(;r<n.length;)if(n[r++].id===t)return!0},e.importCssString=function(t,n,r){var i=r;r&&r.getRootNode&&(i=r.getRootNode())&&i!=r||(i=document);var o=i.ownerDocument||i;if(n&&e.hasCssString(n,i))return null;n&&(t+="\n/*# sourceURL=ace/css/"+n+" */");var a=e.createElement("style");a.appendChild(o.createTextNode(t)),n&&(a.id=n),i==o&&(i=e.getDocumentHead(o)),i.insertBefore(a,i.firstChild)},e.importCssStylsheet=function(t,n){e.buildDom(["link",{rel:"stylesheet",href:t}],e.getDocumentHead(n))},e.scrollbarWidth=function(t){var n=e.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=e.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var o=t.documentElement;o.appendChild(r);var a=n.offsetWidth;i.overflow="scroll";var s=n.offsetWidth;return a==s&&(s=r.clientWidth),o.removeChild(r),a-s},"undefined"==typeof document&&(e.importCssString=function(){}),e.computedStyle=function(t,e){return window.getComputedStyle(t,"")||{}},e.setStyle=function(t,e,n){t[e]!==n&&(t[e]=n)},e.HAS_CSS_ANIMATION=!1,e.HAS_CSS_TRANSFORMS=!1,e.HI_DPI=!r.isWin||"undefined"!==typeof window&&window.devicePixelRatio>=1.5,"undefined"!==typeof document){var i=document.createElement("div");e.HI_DPI&&void 0!==i.style.transform&&(e.HAS_CSS_TRANSFORMS=!0),r.isEdge||"undefined"===typeof i.style.animationName||(e.HAS_CSS_ANIMATION=!0),i=null}e.HAS_CSS_TRANSFORMS?e.translate=function(t,e,n){t.style.transform="translate("+Math.round(e)+"px, "+Math.round(n)+"px)"}:e.translate=function(t,e,n){t.style.top=Math.round(n)+"px",t.style.left=Math.round(e)+"px"}})),ace.define("ace/lib/oop",["require","exports","module"],(function(t,e,n){"use strict";e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.mixin=function(t,e){for(var n in e)t[n]=e[n];return t},e.implement=function(t,n){e.mixin(t,n)}})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(t,e,n){"use strict";var r=t("./oop"),i=function(){var t,e,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(e in n.FUNCTION_KEYS)t=n.FUNCTION_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);for(e in n.PRINTABLE_KEYS)t=n.PRINTABLE_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);return r.mixin(n,n.MODIFIER_KEYS),r.mixin(n,n.PRINTABLE_KEYS),r.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],e=Math.pow(2,t.length);e--;)n.KEY_MODS[e]=t.filter((function(t){return e&n.KEY_MODS[t]})).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();r.mixin(e,i),e.keyCodeToString=function(t){var e=i[t];return"string"!=typeof e&&(e=String.fromCharCode(t)),e.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(t,e,n){"use strict";var r,i=t("./keys"),o=t("./useragent"),a=null,s=0;function u(){return void 0==r&&function(){r=!1;try{document.createComment("").addEventListener("test",(function(){}),{get passive(){r={passive:!1}}})}catch(t){}}(),r}function c(t,e,n){this.elem=t,this.type=e,this.callback=n}c.prototype.destroy=function(){f(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var l=e.addListener=function(t,e,n,r){t.addEventListener(e,n,u()),r&&r.$toDestroy.push(new c(t,e,n))},f=e.removeListener=function(t,e,n){t.removeEventListener(e,n,u())};e.stopEvent=function(t){return e.stopPropagation(t),e.preventDefault(t),!1},e.stopPropagation=function(t){t.stopPropagation&&t.stopPropagation()},e.preventDefault=function(t){t.preventDefault&&t.preventDefault()},e.getButton=function(t){return"dblclick"==t.type?0:"contextmenu"==t.type||o.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.button},e.capture=function(t,e,n){function r(t){e&&e(t),n&&n(t),f(document,"mousemove",e),f(document,"mouseup",r),f(document,"dragstart",r)}return l(document,"mousemove",e),l(document,"mouseup",r),l(document,"dragstart",r),r},e.addMouseWheelListener=function(t,e,n){"onmousewheel"in t?l(t,"mousewheel",(function(t){void 0!==t.wheelDeltaX?(t.wheelX=-t.wheelDeltaX/8,t.wheelY=-t.wheelDeltaY/8):(t.wheelX=0,t.wheelY=-t.wheelDelta/8),e(t)}),n):"onwheel"in t?l(t,"wheel",(function(t){switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=.35*t.deltaX||0,t.wheelY=.35*t.deltaY||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0)}e(t)}),n):l(t,"DOMMouseScroll",(function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),e(t)}),n)},e.addMultiMouseDownListener=function(t,n,r,i,a){var s,u,c,f=0,h={2:"dblclick",3:"tripleclick",4:"quadclick"};function d(t){if(0!==e.getButton(t)?f=0:t.detail>1?++f>4&&(f=1):f=1,o.isIE){var a=Math.abs(t.clientX-s)>5||Math.abs(t.clientY-u)>5;c&&!a||(f=1),c&&clearTimeout(c),c=setTimeout((function(){c=null}),n[f-1]||600),1==f&&(s=t.clientX,u=t.clientY)}if(t._clicks=f,r[i]("mousedown",t),f>4)f=0;else if(f>1)return r[i](h[f],t)}Array.isArray(t)||(t=[t]),t.forEach((function(t){l(t,"mousedown",d,a)}))};var h=function(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)};function d(t,e,n){var r=h(e);if(!o.isMac&&a){if(e.getModifierState&&(e.getModifierState("OS")||e.getModifierState("Win"))&&(r|=8),a.altGr){if(3==(3&r))return;a.altGr=0}if(18===n||17===n){var u="location"in e?e.location:e.keyLocation;if(17===n&&1===u)1==a[n]&&(s=e.timeStamp);else if(18===n&&3===r&&2===u){e.timeStamp-s<50&&(a.altGr=!0)}}}if((n in i.MODIFIER_KEYS&&(n=-1),!r&&13===n)&&(3===(u="location"in e?e.location:e.keyLocation)&&(t(e,r,-n),e.defaultPrevented)))return;if(o.isChromeOS&&8&r){if(t(e,r,n),e.defaultPrevented)return;r&=-9}return!!(r||n in i.FUNCTION_KEYS||n in i.PRINTABLE_KEYS)&&t(e,r,n)}function p(){a=Object.create(null)}if(e.getModifierString=function(t){return i.KEY_MODS[h(t)]},e.addCommandKeyListener=function(t,n,r){if(o.isOldGecko||o.isOpera&&!("KeyboardEvent"in window)){var i=null;l(t,"keydown",(function(t){i=t.keyCode}),r),l(t,"keypress",(function(t){return d(n,t,i)}),r)}else{var s=null;l(t,"keydown",(function(t){a[t.keyCode]=(a[t.keyCode]||0)+1;var e=d(n,t,t.keyCode);return s=t.defaultPrevented,e}),r),l(t,"keypress",(function(t){s&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(e.stopEvent(t),s=null)}),r),l(t,"keyup",(function(t){a[t.keyCode]=null}),r),a||(p(),l(window,"focus",p))}},"object"==typeof window&&window.postMessage&&!o.isOldIE){var g=1;e.nextTick=function(t,n){n=n||window;var r="zero-timeout-message-"+g++;l(n,"message",(function i(o){o.data==r&&(e.stopPropagation(o),f(n,"message",i),t())})),n.postMessage(r,"*")}}e.$idleBlocked=!1,e.onIdle=function(t,n){return setTimeout((function n(){e.$idleBlocked?setTimeout(n,100):t()}),n)},e.$idleBlockId=null,e.blockIdle=function(t){e.$idleBlockId&&clearTimeout(e.$idleBlockId),e.$idleBlocked=!0,e.$idleBlockId=setTimeout((function(){e.$idleBlocked=!1}),t||100)},e.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e.nextFrame?e.nextFrame=e.nextFrame.bind(window):e.nextFrame=function(t){setTimeout(t,17)}})),ace.define("ace/range",["require","exports","module"],(function(t,e,n){"use strict";var r=function(t,e,n,r){this.start={row:t,column:e},this.end={row:n,column:r}};(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(t,e){return 0==this.compare(t,e)},this.compareRange=function(t){var e,n=t.end,r=t.start;return 1==(e=this.compare(n.row,n.column))?1==(e=this.compare(r.row,r.column))?2:0==e?1:0:-1==e?-2:-1==(e=this.compare(r.row,r.column))?-1:1==e?42:0},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(t){var e=this.compareRange(t);return-1==e||0==e||1==e},this.isEnd=function(t,e){return this.end.row==t&&this.end.column==e},this.isStart=function(t,e){return this.start.row==t&&this.start.column==e},this.setStart=function(t,e){"object"==typeof t?(this.start.column=t.column,this.start.row=t.row):(this.start.row=t,this.start.column=e)},this.setEnd=function(t,e){"object"==typeof t?(this.end.column=t.column,this.end.row=t.row):(this.end.row=t,this.end.column=e)},this.inside=function(t,e){return 0==this.compare(t,e)&&(!this.isEnd(t,e)&&!this.isStart(t,e))},this.insideStart=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)},this.insideEnd=function(t,e){return 0==this.compare(t,e)&&!this.isStart(t,e)},this.compare=function(t,e){return this.isMultiLine()||t!==this.start.row?t<this.start.row?-1:t>this.end.row?1:this.start.row===t?e>=this.start.column?0:-1:this.end.row===t?e<=this.end.column?0:1:0:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(t,e){return this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.compareEnd=function(t,e){return this.end.row==t&&this.end.column==e?1:this.compare(t,e)},this.compareInside=function(t,e){return this.end.row==t&&this.end.column==e?1:this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.clipRows=function(t,e){if(this.end.row>e)var n={row:e+1,column:0};else if(this.end.row<t)n={row:t,column:0};if(this.start.row>e)var i={row:e+1,column:0};else if(this.start.row<t)i={row:t,column:0};return r.fromPoints(i||this.start,n||this.end)},this.extend=function(t,e){var n=this.compare(t,e);if(0==n)return this;if(-1==n)var i={row:t,column:e};else var o={row:t,column:e};return r.fromPoints(i||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(t){var e=t.documentToScreenPosition(this.start),n=t.documentToScreenPosition(this.end);return new r(e.row,e.column,n.row,n.column)},this.moveBy=function(t,e){this.start.row+=t,this.start.column+=e,this.end.row+=t,this.end.column+=e}}).call(r.prototype),r.fromPoints=function(t,e){return new r(t.row,t.column,e.row,e.column)},r.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},r.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},e.Range=r})),ace.define("ace/lib/lang",["require","exports","module"],(function(t,e,n){"use strict";e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split("").reverse().join("")},e.stringRepeat=function(t,e){for(var n="";e>0;)1&e&&(n+=t),(e>>=1)&&(t+=t);return n};var r=/^\s\s*/,i=/\s\s*$/;e.stringTrimLeft=function(t){return t.replace(r,"")},e.stringTrimRight=function(t){return t.replace(i,"")},e.copyObject=function(t){var e={};for(var n in t)e[n]=t[n];return e},e.copyArray=function(t){for(var e=[],n=0,r=t.length;n<r;n++)t[n]&&"object"==typeof t[n]?e[n]=this.copyObject(t[n]):e[n]=t[n];return e},e.deepCopy=function t(e){if("object"!==typeof e||!e)return e;var n;if(Array.isArray(e)){n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r]);return n}if("[object Object]"!==Object.prototype.toString.call(e))return e;for(var r in n={},e)n[r]=t(e[r]);return n},e.arrayToMap=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=1;return e},e.createMap=function(t){var e=Object.create(null);for(var n in t)e[n]=t[n];return e},e.arrayRemove=function(t,e){for(var n=0;n<=t.length;n++)e===t[n]&&t.splice(n,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},e.escapeHTML=function(t){return(""+t).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},e.getMatchOffsets=function(t,e){var n=[];return t.replace(e,(function(t){n.push({offset:arguments[arguments.length-2],length:t.length})})),n},e.deferredCall=function(t){var e=null,n=function(){e=null,t()},r=function t(r){return t.cancel(),e=setTimeout(n,r||0),t};return r.schedule=r,r.call=function(){return this.cancel(),t(),r},r.cancel=function(){return clearTimeout(e),e=null,r},r.isPending=function(){return e},r},e.delayedCall=function(t,e){var n=null,r=function(){n=null,t()},i=function(t){null==n&&(n=setTimeout(r,t||e))};return i.delay=function(t){n&&clearTimeout(n),n=setTimeout(r,t||e)},i.schedule=i,i.call=function(){this.cancel(),t()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}})),ace.define("ace/clipboard",["require","exports","module"],(function(t,e,n){"use strict";var r;n.exports={lineMode:!1,pasteCancelled:function(){return!!(r&&r>Date.now()-50)||(r=!1)},cancel:function(){r=Date.now()}}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],(function(t,e,n){"use strict";var r=t("../lib/event"),i=t("../lib/useragent"),o=t("../lib/dom"),a=t("../lib/lang"),s=t("../clipboard"),u=i.isChrome<18,c=i.isIE,l=i.isChrome>63,f=t("../lib/keys"),h=f.KEY_MODS,d=i.isIOS,p=d?/\s/:/\n/,g=i.isMobile;e.TextInput=function(t,e){var n=o.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",t.insertBefore(n,t.firstChild);var v=!1,m=!1,y=!1,b=!1,w="";g||(n.style.fontSize="1px");var x=!1,_=!1,O="",k=0,S=0,E=0;try{var A=document.activeElement===n}catch(V){}r.addListener(n,"blur",(function(t){_||(e.onBlur(t),A=!1)}),e),r.addListener(n,"focus",(function(t){if(!_){if(A=!0,i.isEdge)try{if(!document.hasFocus())return}catch(t){}e.onFocus(t),i.isEdge?setTimeout(C):C()}}),e),this.$focusScroll=!1,this.focus=function(){if(w||l||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var t=n.style.top;n.style.position="fixed",n.style.top="0px";try{var e=0!=n.getBoundingClientRect().top}catch(V){return}var r=[];if(e)for(var i=n.parentElement;i&&1==i.nodeType;)r.push(i),i.setAttribute("ace_nocontext",!0),i=!i.parentElement&&i.getRootNode?i.getRootNode().host:i.parentElement;n.focus({preventScroll:!0}),e&&r.forEach((function(t){t.removeAttribute("ace_nocontext")})),setTimeout((function(){n.style.position="","0px"==n.style.top&&(n.style.top=t)}),0)},this.blur=function(){n.blur()},this.isFocused=function(){return A},e.on("beforeEndOperation",(function(){var t=e.curOp,r=t&&t.command&&t.command.name;if("insertstring"!=r){var i=r&&(t.docChanged||t.selectionChanged);y&&i&&(O=n.value="",$()),C()}}));var C=d?function(t){if(A&&(!v||t)&&!b){t||(t="");var r="\n ab"+t+"cde fg\n";r!=n.value&&(n.value=O=r);var i=4+(t.length||(e.selection.isEmpty()?0:1));4==k&&S==i||n.setSelectionRange(4,i),k=4,S=i}}:function(){if(!y&&!b&&(A||T)){y=!0;var t=0,r=0,i="";if(e.session){var o=e.selection,a=o.getRange(),s=o.cursor.row;if(t=a.start.column,r=a.end.column,i=e.session.getLine(s),a.start.row!=s){var u=e.session.getLine(s-1);t=a.start.row<s-1?0:t,r+=u.length+1,i=u+"\n"+i}else if(a.end.row!=s){var c=e.session.getLine(s+1);r=a.end.row>s+1?c.length:r,r+=i.length+1,i=i+"\n"+c}else g&&s>0&&(i="\n"+i,r+=1,t+=1);i.length>400&&(t<400&&r<400?i=i.slice(0,400):(i="\n",t=0,r=1))}var l=i+"\n\n";if(l!=O&&(n.value=O=l,k=S=l.length),T&&(k=n.selectionStart,S=n.selectionEnd),S!=r||k!=t||n.selectionEnd!=S)try{n.setSelectionRange(t,r),k=t,S=r}catch(V){}y=!1}};this.resetSelection=C,A&&e.onFocus();var j=null;this.setInputHandler=function(t){j=t},this.getInputHandler=function(){return j};var T=!1,M=function(t,r){if(T&&(T=!1),m)return C(),t&&e.onPaste(t),m=!1,"";for(var i=n.selectionStart,o=n.selectionEnd,a=k,s=O.length-S,u=t,c=t.length-i,l=t.length-o,f=0;a>0&&O[f]==t[f];)f++,a--;for(u=u.slice(f),f=1;s>0&&O.length-f>k-1&&O[O.length-f]==t[t.length-f];)f++,s--;c-=f-1,l-=f-1;var h=u.length-f+1;return h<0&&(a=-h,h=0),u=u.slice(0,h),r||u||c||a||s||l?(b=!0,u&&!a&&!s&&!c&&!l||x?e.onTextInput(u):e.onTextInput(u,{extendLeft:a,extendRight:s,restoreStart:c,restoreEnd:l}),b=!1,O=t,k=i,S=o,E=l,u):""},R=function(t){if(y)return P();if(t&&t.inputType){if("historyUndo"==t.inputType)return e.execCommand("undo");if("historyRedo"==t.inputType)return e.execCommand("redo")}var r=n.value,i=M(r,!0);(r.length>500||p.test(i)||g&&k<1&&k==S)&&C()},D=function t(e,n,r){var i=e.clipboardData||window.clipboardData;if(i&&!u){var o=c||r?"Text":"text/plain";try{return n?!1!==i.setData(o,n):i.getData(o)}catch(e){if(!r)return t(e,n,!0)}}},L=function(t,i){var o=e.getCopyText();if(!o)return r.preventDefault(t);D(t,o)?(d&&(C(o),v=o,setTimeout((function(){v=!1}),10)),i?e.onCut():e.onCopy(),r.preventDefault(t)):(v=!0,n.value=o,n.select(),setTimeout((function(){v=!1,C(),i?e.onCut():e.onCopy()})))},N=function(t){L(t,!0)},I=function(t){L(t,!1)},F=function(t){var o=D(t);s.pasteCancelled()||("string"==typeof o?(o&&e.onPaste(o,t),i.isIE&&setTimeout(C),r.preventDefault(t)):(n.value="",m=!0))};r.addCommandKeyListener(n,e.onCommandKey.bind(e),e),r.addListener(n,"select",(function(t){y||(v?v=!1:!function(t){return 0===t.selectionStart&&t.selectionEnd>=O.length&&t.value===O&&O&&t.selectionEnd!==S}(n)?g&&n.selectionStart!=k&&C():(e.selectAll(),C()))}),e),r.addListener(n,"input",R,e),r.addListener(n,"cut",N,e),r.addListener(n,"copy",I,e),r.addListener(n,"paste",F,e),"oncut"in n&&"oncopy"in n&&"onpaste"in n||r.addListener(t,"keydown",(function(t){if((!i.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:I(t);break;case 86:F(t);break;case 88:N(t)}}),e);var P=function(){if(y&&e.onCompositionUpdate&&!e.$readOnly){if(x)return z();if(y.useTextareaForIME)e.onCompositionUpdate(n.value);else{var t=n.value;M(t),y.markerRange&&(y.context&&(y.markerRange.start.column=y.selectionStart=y.context.compositionStartOffset),y.markerRange.end.column=y.markerRange.start.column+S-y.selectionStart+E)}}},$=function(t){e.onCompositionEnd&&!e.$readOnly&&(y=!1,e.onCompositionEnd(),e.off("mousedown",z),t&&R())};function z(){_=!0,n.blur(),n.focus(),_=!1}var B,U=a.delayedCall(P,50).schedule.bind(null,null);function W(){clearTimeout(B),B=setTimeout((function(){w&&(n.style.cssText=w,w=""),e.renderer.$isMousePressed=!1,e.renderer.$keepTextAreaAtCursor&&e.renderer.$moveTextAreaToCursor()}),0)}r.addListener(n,"compositionstart",(function(t){if(!y&&e.onCompositionStart&&!e.$readOnly&&(y={},!x)){t.data&&(y.useTextareaForIME=!1),setTimeout(P,0),e._signal("compositionStart"),e.on("mousedown",z);var r=e.getSelectionRange();r.end.row=r.start.row,r.end.column=r.start.column,y.markerRange=r,y.selectionStart=k,e.onCompositionStart(y),y.useTextareaForIME?(O=n.value="",k=0,S=0):(n.msGetInputContext&&(y.context=n.msGetInputContext()),n.getInputContext&&(y.context=n.getInputContext()))}}),e),r.addListener(n,"compositionupdate",P,e),r.addListener(n,"keyup",(function(t){27==t.keyCode&&n.value.length<n.selectionStart&&(y||(O=n.value),k=S=-1,C()),U()}),e),r.addListener(n,"keydown",U,e),r.addListener(n,"compositionend",$,e),this.getElement=function(){return n},this.setCommandMode=function(t){x=t,n.readOnly=!1},this.setReadOnly=function(t){x||(n.readOnly=t)},this.setCopyWithEmptySelection=function(t){},this.onContextMenu=function(t){T=!0,C(),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,a){w||(w=n.style.cssText),n.style.cssText=(a?"z-index:100000;":"")+(i.isIE?"opacity:0.1;":"")+"text-indent: -"+(k+S)*e.renderer.characterWidth*.5+"px;";var s=e.container.getBoundingClientRect(),u=o.computedStyle(e.container),c=s.top+(parseInt(u.borderTopWidth)||0),l=s.left+(parseInt(s.borderLeftWidth)||0),f=s.bottom-c-n.clientHeight-2,h=function(t){o.translate(n,t.clientX-l-2,Math.min(t.clientY-c-2,f))};h(t),"mousedown"==t.type&&(e.renderer.$isMousePressed=!0,clearTimeout(B),i.isWin&&r.capture(e.container,h,W))},this.onContextMenuClose=W;var H=function(t){e.textInput.onContextMenu(t),W()};r.addListener(n,"mouseup",H,e),r.addListener(n,"mousedown",(function(t){t.preventDefault(),W()}),e),r.addListener(e.renderer.scroller,"contextmenu",H,e),r.addListener(n,"contextmenu",H,e),d&&function(t,e,n){var r=null,i=!1;n.addEventListener("keydown",(function(t){r&&clearTimeout(r),i=!0}),!0),n.addEventListener("keyup",(function(t){r=setTimeout((function(){i=!1}),100)}),!0);var o=function(t){if(document.activeElement===n&&!(i||y||e.$mouseHandler.isMousePressed)&&!v){var r=n.selectionStart,o=n.selectionEnd,a=null,s=0;if(0==r?a=f.up:1==r?a=f.home:o>S&&"\n"==O[o]?a=f.end:r<k&&" "==O[r-1]?(a=f.left,s=h.option):r<k||r==k&&S!=k&&r==o?a=f.left:o>S&&O.slice(0,o).split("\n").length>2?a=f.down:o>S&&" "==O[o-1]?(a=f.right,s=h.option):(o>S||o==S&&S!=k&&r==o)&&(a=f.right),r!==o&&(s|=h.shift),a){if(!e.onCommandKey({},s,a)&&e.commands){a=f.keyCodeToString(a);var u=e.commands.findKeyCommand(s,a);u&&e.execCommand(u)}k=r,S=o,C("")}}};document.addEventListener("selectionchange",o),e.on("destroy",(function(){document.removeEventListener("selectionchange",o)}))}(0,e,n)},e.$setUserAgentForTests=function(t,e){g=t,d=e}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(t,e,n){"use strict";var r=t("../lib/useragent");function i(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(e){t[e]=this[e]}),this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function o(t,e){if(t.start.row==t.end.row)var n=2*e.column-t.start.column-t.end.column;else if(t.start.row!=t.end.row-1||t.start.column||t.end.column)n=2*e.row-t.start.row-t.end.row;else var n=e.column-4;return n<0?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}(function(){this.onMouseDown=function(t){var e=t.inSelection(),n=t.getDocumentPosition();this.mousedownEvent=t;var i=this.editor,o=t.getButton();return 0!==o?((i.getSelectionRange().isEmpty()||1==o)&&i.selection.moveToPosition(n),void(2==o&&(i.textInput.onContextMenu(t.domEvent),r.isMozilla||t.preventDefault()))):(this.mousedownEvent.time=Date.now(),!e||i.isFocused()||(i.focus(),!this.$focusTimeout||this.$clickSelection||i.inMultiSelectMode)?(this.captureMouse(t),this.startSelect(n,t.domEvent._clicks>1),t.preventDefault()):(this.setState("focusWait"),void this.captureMouse(t)))},this.startSelect=function(t,e){t=t||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(t):e||n.selection.moveToPosition(t),e||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var t,e=this.editor,n=e.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(-1==r)t=this.$clickSelection.end;else if(1==r)t=this.$clickSelection.start;else{var i=o(this.$clickSelection,n);n=i.cursor,t=i.anchor}e.selection.setSelectionAnchor(t.row,t.column)}e.selection.selectToPosition(n),e.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(t){var e,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[t](r.row,r.column);if(this.$clickSelection){var a=this.$clickSelection.comparePoint(i.start),s=this.$clickSelection.comparePoint(i.end);if(-1==a&&s<=0)e=this.$clickSelection.end,i.end.row==r.row&&i.end.column==r.column||(r=i.start);else if(1==s&&a>=0)e=this.$clickSelection.start,i.start.row==r.row&&i.start.column==r.column||(r=i.end);else if(-1==a&&1==s)r=i.end,e=i.start;else{var u=o(this.$clickSelection,r);r=u.cursor,e=u.anchor}n.selection.setSelectionAnchor(e.row,e.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var t,e,n,r,i=(t=this.mousedownEvent.x,e=this.mousedownEvent.y,n=this.x,r=this.y,Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2))),o=Date.now();(i>0||o-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(t){var e=t.getDocumentPosition(),n=this.editor,r=n.session.getBracketRange(e);r?(r.isEmpty()&&(r.start.column--,r.end.column++),this.setState("select")):(r=n.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=r,this.select()},this.onTripleClick=function(t){var e=t.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(e.row,e.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(t){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(t){if(!t.getAccelKey()){t.getShiftKey()&&t.wheelY&&!t.wheelX&&(t.wheelX=t.wheelY,t.wheelY=0);var e=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,r=t.domEvent.timeStamp,i=r-n.t,o=i?t.wheelX/i:n.vx,a=i?t.wheelY/i:n.vy;i<550&&(o=(o+n.vx)/2,a=(a+n.vy)/2);var s=Math.abs(o/a),u=!1;if(s>=1&&e.renderer.isScrollableBy(t.wheelX*t.speed,0)&&(u=!0),s<=1&&e.renderer.isScrollableBy(0,t.wheelY*t.speed)&&(u=!0),u)n.allowed=r;else if(r-n.allowed<550){Math.abs(o)<=1.5*Math.abs(n.vx)&&Math.abs(a)<=1.5*Math.abs(n.vy)?(u=!0,n.allowed=r):n.allowed=0}return n.t=r,n.vx=o,n.vy=a,u?(e.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()):void 0}}}).call(i.prototype),e.DefaultHandlers=i})),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(t,e,n){"use strict";t("./lib/oop");var r=t("./lib/dom");function i(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}(function(){this.$init=function(){return this.$element=r.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(t){this.getElement().textContent=t},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(t,e){this.getElement().style.left=t+"px",this.getElement().style.top=e+"px"},this.setClassName=function(t){r.addCssClass(this.getElement(),t)},this.show=function(t,e,n){null!=t&&this.setText(t),null!=e&&null!=n&&this.setPosition(e,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(i.prototype),e.Tooltip=i})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(t,e,n){"use strict";var r=t("../lib/dom"),i=t("../lib/oop"),o=t("../lib/event"),a=t("../tooltip").Tooltip;function s(t){a.call(this,t)}i.inherits(s,a),function(){this.setPosition=function(t,e){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),o=this.getHeight();(t+=15)+i>n&&(t-=t+i-n),(e+=15)+o>r&&(e-=20+o),a.prototype.setPosition.call(this,t,e)}}.call(s.prototype),e.GutterHandler=function(t){var e,n,i,a=t.editor,u=a.renderer.$gutterLayer,c=new s(a.container);function l(){e&&(e=clearTimeout(e)),i&&(c.hide(),i=null,a._signal("hideGutterTooltip",c),a.off("mousewheel",l))}function f(t){c.setPosition(t.x,t.y)}t.editor.setDefaultHandler("guttermousedown",(function(e){if(a.isFocused()&&0==e.getButton()&&"foldWidgets"!=u.getRegion(e)){var n=e.getDocumentPosition().row,r=a.session.selection;if(e.getShiftKey())r.selectTo(n,0);else{if(2==e.domEvent.detail)return a.selectAll(),e.preventDefault();t.$clickSelection=a.selection.getLineRange(n)}return t.setState("selectByLines"),t.captureMouse(e),e.preventDefault()}})),t.editor.setDefaultHandler("guttermousemove",(function(o){var s=o.domEvent.target||o.domEvent.srcElement;if(r.hasCssClass(s,"ace_fold-widget"))return l();i&&t.$tooltipFollowsMouse&&f(o),n=o,e||(e=setTimeout((function(){e=null,n&&!t.isMousePressed?function(){var e=n.getDocumentPosition().row,r=u.$annotations[e];if(!r)return l();if(e==a.session.getLength()){var o=a.renderer.pixelToScreenCoordinates(0,n.y).row,s=n.$pos;if(o>a.session.documentToScreenRow(s.row,s.column))return l()}if(i!=r)if(i=r.text.join("<br/>"),c.setHtml(i),c.show(),a._signal("showGutterTooltip",c),a.on("mousewheel",l),t.$tooltipFollowsMouse)f(n);else{var h=n.domEvent.target.getBoundingClientRect(),d=c.getElement().style;d.left=h.right+"px",d.top=h.bottom+"px"}}():l()}),50))})),o.addListener(a.renderer.$gutter,"mouseout",(function(t){n=null,i&&!e&&(e=setTimeout((function(){e=null,l()}),50))}),a),a.on("changeSession",l)}})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(t,e,n){"use strict";var r=t("../lib/event"),i=t("../lib/useragent"),o=e.MouseEvent=function(t,e){this.domEvent=t,this.editor=e,this.x=this.clientX=t.clientX,this.y=this.clientY=t.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var t=this.editor.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var e=this.getDocumentPosition();this.$inSelection=t.contains(e.row,e.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(t,e,n){"use strict";var r=t("../lib/dom"),i=t("../lib/event"),o=t("../lib/useragent");function a(t){var e=t.editor,n=r.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",o.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(e){t[e]=this[e]}),this),e.on("mousedown",this.onMouseDown.bind(t));var a,u,c,l,f,h,d,p,g,v,m,y=e.container,b=0;function w(){var t=h;(function(t,n){var r=Date.now(),i=!n||t.row!=n.row,o=!n||t.column!=n.column;!v||i||o?(e.moveCursorToPosition(t),v=r,m={x:u,y:c}):s(m.x,m.y,u,c)>5?v=null:r-v>=200&&(e.renderer.scrollCursorIntoView(),v=null)})(h=e.renderer.screenToTextCoordinates(u,c),t),function(t,n){var r=Date.now(),i=e.renderer.layerConfig.lineHeight,o=e.renderer.layerConfig.characterWidth,a=e.renderer.scroller.getBoundingClientRect(),s={x:{left:u-a.left,right:a.right-u},y:{top:c-a.top,bottom:a.bottom-c}},l=Math.min(s.x.left,s.x.right),f=Math.min(s.y.top,s.y.bottom),h={row:t.row,column:t.column};l/o<=2&&(h.column+=s.x.left<s.x.right?-3:2),f/i<=1&&(h.row+=s.y.top<s.y.bottom?-1:1);var d=t.row!=h.row,p=t.column!=h.column,v=!n||t.row!=n.row;d||p&&!v?g?r-g>=200&&e.renderer.scrollCursorIntoView(h):g=r:g=null}(h,t)}function x(){f=e.selection.toOrientedRange(),a=e.session.addMarker(f,"ace_selection",e.getSelectionStyle()),e.clearSelection(),e.isFocused()&&e.renderer.$cursorLayer.setBlinking(!1),clearInterval(l),w(),l=setInterval(w,20),b=0,i.addListener(document,"mousemove",k)}function _(){clearInterval(l),e.session.removeMarker(a),a=null,e.selection.fromOrientedRange(f),e.isFocused()&&!p&&e.$resetCursorStyle(),f=null,h=null,b=0,g=null,v=null,i.removeListener(document,"mousemove",k)}this.onDragStart=function(t){if(this.cancelDrag||!y.draggable){var r=this;return setTimeout((function(){r.startSelect(),r.captureMouse(t)}),0),t.preventDefault()}f=e.getSelectionRange();var i=t.dataTransfer;i.effectAllowed=e.getReadOnly()?"copy":"copyMove",o.isOpera&&(e.container.appendChild(n),n.scrollTop=0),i.setDragImage&&i.setDragImage(n,0,0),o.isOpera&&e.container.removeChild(n),i.clearData(),i.setData("Text",e.session.getTextRange()),p=!0,this.setState("drag")},this.onDragEnd=function(t){if(y.draggable=!1,p=!1,this.setState(null),!e.getReadOnly()){var n=t.dataTransfer.dropEffect;d||"move"!=n||e.session.remove(e.getSelectionRange()),e.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(t){if(!e.getReadOnly()&&S(t.dataTransfer))return u=t.clientX,c=t.clientY,a||x(),b++,t.dataTransfer.dropEffect=d=E(t),i.preventDefault(t)},this.onDragOver=function(t){if(!e.getReadOnly()&&S(t.dataTransfer))return u=t.clientX,c=t.clientY,a||(x(),b++),null!==O&&(O=null),t.dataTransfer.dropEffect=d=E(t),i.preventDefault(t)},this.onDragLeave=function(t){if(--b<=0&&a)return _(),d=null,i.preventDefault(t)},this.onDrop=function(t){if(h){var n=t.dataTransfer;if(p)switch(d){case"move":f=f.contains(h.row,h.column)?{start:h,end:h}:e.moveText(f,h);break;case"copy":f=e.moveText(f,h,!0)}else{var r=n.getData("Text");f={start:h,end:e.session.insert(h,r)},e.focus(),d=null}return _(),i.preventDefault(t)}},i.addListener(y,"dragstart",this.onDragStart.bind(t),e),i.addListener(y,"dragend",this.onDragEnd.bind(t),e),i.addListener(y,"dragenter",this.onDragEnter.bind(t),e),i.addListener(y,"dragover",this.onDragOver.bind(t),e),i.addListener(y,"dragleave",this.onDragLeave.bind(t),e),i.addListener(y,"drop",this.onDrop.bind(t),e);var O=null;function k(){null==O&&(O=setTimeout((function(){null!=O&&a&&_()}),20))}function S(t){var e=t.types;return!e||Array.prototype.some.call(e,(function(t){return"text/plain"==t||"Text"==t}))}function E(t){var e=["copy","copymove","all","uninitialized"],n=o.isMac?t.altKey:t.ctrlKey,r="uninitialized";try{r=t.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var i="none";return n&&e.indexOf(r)>=0?i="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(r)>=0?i="move":e.indexOf(r)>=0&&(i="copy"),i}}function s(t,e,n,r){return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor;t.container.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging");var e=o.isWin?"default":"move";t.renderer.setCursorStyle(e),this.setState("dragReady")},this.onMouseDrag=function(t){var e=this.editor.container;o.isIE&&"dragReady"==this.state&&(s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&e.dragDrop());"dragWait"===this.state&&(s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition())))},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var e=this.editor,n=t.inSelection(),r=t.getButton();if(1===(t.domEvent.detail||1)&&0===r&&n){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var i=t.domEvent.target||t.domEvent.srcElement;if("unselectable"in i&&(i.unselectable="on"),e.getDragDelay()){if(o.isWebKit)this.cancelDrag=!0,e.container.draggable=!0;this.setState("dragWait")}else this.startDrag();this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(a.prototype),e.DragdropHandler=a})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],(function(t,e,n){"use strict";var r=t("./mouse_event").MouseEvent,i=t("../lib/event"),o=t("../lib/dom");e.addTouchListeners=function(t,e){var n,a,s,u,c,l,f,h,d,p="scroll",g=0,v=0,m=0,y=0;function b(){var t=window.navigator&&window.navigator.clipboard,n=!1,r=function(r){var i=r.target.getAttribute("action");if("more"==i||!n)return n=!n,function(){var r=e.getCopyText(),i=e.session.getUndoManager().hasUndo();d.replaceChild(o.buildDom(n?["span",!r&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],r&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],r&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],t&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],i&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),d.firstChild)}();"paste"==i?t.readText().then((function(t){e.execCommand(i,t)})):i&&("cut"!=i&&"copy"!=i||(t?t.writeText(e.getCopyText()):document.execCommand("copy")),e.execCommand(i)),d.firstChild.style.display="none",n=!1,"openCommandPallete"!=i&&e.focus()};d=o.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(t){p="menu",t.stopPropagation(),t.preventDefault(),e.textInput.focus()},ontouchend:function(t){t.stopPropagation(),t.preventDefault(),r(t)},onclick:r},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],e.container)}function w(){d||b();var t=e.selection.cursor,n=e.renderer.textToScreenCoordinates(t.row,t.column),r=e.container.getBoundingClientRect();d.style.top=n.pageY-r.top-3+"px",d.style.right="10px",d.style.display="",d.firstChild.style.display="none",e.on("input",x)}function x(t){d&&(d.style.display="none"),e.off("input",x)}function _(){c=null,clearTimeout(c);var t=e.selection.getRange(),n=t.contains(f.row,f.column);!t.isEmpty()&&n||(e.selection.moveToPosition(f),e.selection.selectWord()),p="wait",w()}i.addListener(t,"contextmenu",(function(t){h&&e.textInput.getElement().focus()}),e),i.addListener(t,"touchstart",(function(t){var i=t.touches;if(c||i.length>1)return clearTimeout(c),c=null,s=-1,void(p="zoom");h=e.$mouseHandler.isMousePressed=!0;var o=e.renderer.layerConfig.lineHeight,l=e.renderer.layerConfig.lineHeight,d=t.timeStamp;u=d;var b=i[0],w=b.clientX,x=b.clientY;Math.abs(n-w)+Math.abs(a-x)>o&&(s=-1),n=t.clientX=w,a=t.clientY=x,m=y=0;var O=new r(t,e);if(f=O.getDocumentPosition(),d-s<500&&1==i.length&&!g)v++,t.preventDefault(),t.button=0,function(){c=null,clearTimeout(c),e.selection.moveToPosition(f);var t=v>=2?e.selection.getLineRange(f.row):e.session.getBracketRange(f);t&&!t.isEmpty()?e.selection.setRange(t):e.selection.selectWord(),p="wait"}();else{v=0;var k=e.selection.cursor,S=e.selection.isEmpty()?k:e.selection.anchor,E=e.renderer.$cursorLayer.getPixelPosition(k,!0),A=e.renderer.$cursorLayer.getPixelPosition(S,!0),C=e.renderer.scroller.getBoundingClientRect(),j=function(t,e){return(t/=l)*t+(e=e/o-.75)*e};if(t.clientX<C.left)return void(p="zoom");var T=j(t.clientX-C.left-E.left,t.clientY-C.top-E.top),M=j(t.clientX-C.left-A.left,t.clientY-C.top-A.top);T<3.5&&M<3.5&&(p=T>M?"cursor":"anchor"),p=M<3.5?"anchor":T<3.5?"cursor":"scroll",c=setTimeout(_,450)}s=d}),e),i.addListener(t,"touchend",(function(t){h=e.$mouseHandler.isMousePressed=!1,l&&clearInterval(l),"zoom"==p?(p="",g=0):c?(e.selection.moveToPosition(f),g=0,w()):"scroll"==p?(g+=60,l=setInterval((function(){g--<=0&&(clearInterval(l),l=null),Math.abs(m)<.01&&(m=0),Math.abs(y)<.01&&(y=0),g<20&&(m*=.9),g<20&&(y*=.9);var t=e.session.getScrollTop();e.renderer.scrollBy(10*m,10*y),t==e.session.getScrollTop()&&(g=0)}),10),x()):w(),clearTimeout(c),c=null}),e),i.addListener(t,"touchmove",(function(t){c&&(clearTimeout(c),c=null);var i=t.touches;if(!(i.length>1||"zoom"==p)){var o=i[0],s=n-o.clientX,l=a-o.clientY;if("wait"==p){if(!(s*s+l*l>4))return t.preventDefault();p="cursor"}n=o.clientX,a=o.clientY,t.clientX=o.clientX,t.clientY=o.clientY;var f=t.timeStamp,h=f-u;if(u=f,"scroll"==p){var d=new r(t,e);d.speed=1,d.wheelX=s,d.wheelY=l,10*Math.abs(s)<Math.abs(l)&&(s=0),10*Math.abs(l)<Math.abs(s)&&(l=0),0!=h&&(m=s/h,y=l/h),e._emit("mousewheel",d),d.propagationStopped||(m=y=0)}else{var g=new r(t,e).getDocumentPosition();"cursor"==p?e.selection.moveCursorToPosition(g):"anchor"==p&&e.selection.setSelectionAnchor(g.row,g.column),e.renderer.scrollCursorIntoView(g),t.preventDefault()}}}),e)}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var r=t("./dom");e.get=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.responseText)},n.send(null)},e.loadScript=function(t,e){var n=r.getDocumentHead(),i=document.createElement("script");i.src=t,n.appendChild(i),i.onload=i.onreadystatechange=function(t,n){!n&&i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(i=i.onload=i.onreadystatechange=null,n||e())}},e.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(t,e,n){"use strict";var r={},i=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(t,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[t]||[],r=this._defaultHandlers[t];if(n.length||r){"object"==typeof e&&e||(e={}),e.type||(e.type=t),e.stopPropagation||(e.stopPropagation=i),e.preventDefault||(e.preventDefault=o),n=n.slice();for(var a=0;a<n.length&&(n[a](e,this),!e.propagationStopped);a++);return r&&!e.defaultPrevented?r(e,this):void 0}},r._signal=function(t,e){var n=(this._eventRegistry||{})[t];if(n){n=n.slice();for(var r=0;r<n.length;r++)n[r](e,this)}},r.once=function(t,e){var n=this;if(this.on(t,(function r(){n.off(t,r),e.apply(null,arguments)})),!e)return new Promise((function(t){e=t}))},r.setDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[t]){var r=n[t],i=n._disabled_[t];i||(n._disabled_[t]=i=[]),i.push(r);var o=i.indexOf(e);-1!=o&&i.splice(o,1)}n[t]=e},r.removeDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n){var r=n._disabled_[t];if(n[t]==e)r&&this.setDefaultHandler(t,r.pop());else if(r){var i=r.indexOf(e);-1!=i&&r.splice(i,1)}}},r.on=r.addEventListener=function(t,e,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[t];return r||(r=this._eventRegistry[t]=[]),-1==r.indexOf(e)&&r[n?"unshift":"push"](e),e},r.off=r.removeListener=r.removeEventListener=function(t,e){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[t];if(n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}},r.removeAllListeners=function(t){t||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[t]=void 0),this._defaultHandlers&&(this._defaultHandlers[t]=void 0)},e.EventEmitter=r})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){var r=t("./oop"),i=t("./event_emitter").EventEmitter,o={setOptions:function(t){Object.keys(t).forEach((function(e){this.setOption(e,t[e])}),this)},getOptions:function(t){var e={};if(t)Array.isArray(t)||(e=t,t=Object.keys(e));else{var n=this.$options;t=Object.keys(n).filter((function(t){return!n[t].hidden}))}return t.forEach((function(t){e[t]=this.getOption(t)}),this),e},setOption:function(t,e){if(this["$"+t]!==e){var n=this.$options[t];if(!n)return a('misspelled option "'+t+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(t,e);n.handlesSet||(this["$"+t]=e),n&&n.set&&n.set.call(this,e)}},getOption:function(t){var e=this.$options[t];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(t):e&&e.get?e.get.call(this):this["$"+t]:a('misspelled option "'+t+'"')}};function a(t){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function s(t,e){var n=new Error(t);n.data=e,"object"==typeof console&&console.error&&console.error(n),setTimeout((function(){throw n}))}var u=function(){this.$defaultOptions={}};(function(){r.implement(this,i),this.defineOptions=function(t,e,n){return t.$options||(this.$defaultOptions[e]=t.$options={}),Object.keys(n).forEach((function(e){var r=n[e];"string"==typeof r&&(r={forwardTo:r}),r.name||(r.name=e),t.$options[r.name]=r,"initialValue"in r&&(t["$"+r.name]=r.initialValue)})),r.implement(t,o),this},this.resetOptions=function(t){Object.keys(t.$options).forEach((function(e){var n=t.$options[e];"value"in n&&t.setOption(e,n.value)}))},this.setDefaultValue=function(t,e,n){if(!t){for(t in this.$defaultOptions)if(this.$defaultOptions[t][e])break;if(!this.$defaultOptions[t][e])return!1}var r=this.$defaultOptions[t]||(this.$defaultOptions[t]={});r[e]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,e,n):r[e].value=n)},this.setDefaultValues=function(t,e){Object.keys(e).forEach((function(n){this.setDefaultValue(t,n,e[n])}),this)},this.warn=a,this.reportError=s}).call(u.prototype),e.AppConfig=u})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],(function(t,e,r){var i=t("./lib/lang"),o=(t("./lib/oop"),t("./lib/net")),a=t("./lib/app_config").AppConfig;r.exports=e=new a;var s=function(){return this||"undefined"!=typeof window&&window}(),u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};e.get=function(t){if(!u.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return u[t]},e.set=function(t,e){if(u.hasOwnProperty(t))u[t]=e;else if(0==this.setDefaultValue("",t,e))throw new Error("Unknown config key: "+t)},e.all=function(){return i.copyObject(u)},e.$modes={},e.moduleUrl=function(t,e){if(u.$moduleUrls[t])return u.$moduleUrls[t];var n=t.split("/"),r="snippets"==(e=e||n[n.length-2]||"")?"/":"-",i=n[n.length-1];if("worker"==e&&"-"==r){var o=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g");i=i.replace(o,"")}(!i||i==e)&&n.length>1&&(i=n[n.length-2]);var a=u[e+"Path"];return null==a?a=u.basePath:"/"==r&&(e=r=""),a&&"/"!=a.slice(-1)&&(a+="/"),a+e+r+i+this.get("suffix")},e.setModuleUrl=function(t,e){return u.$moduleUrls[t]=e},e.$loading={},e.loadModule=function(n,r){var i,a;Array.isArray(n)&&(a=n[0],n=n[1]);try{i=t(n)}catch(u){}if(i&&!e.$loading[n])return r&&r(i);if(e.$loading[n]||(e.$loading[n]=[]),e.$loading[n].push(r),!(e.$loading[n].length>1)){var s=function(){t([n],(function(t){e._emit("load.module",{name:n,module:t});var r=e.$loading[n];e.$loading[n]=null,r.forEach((function(e){e&&e(t)}))}))};if(!e.get("packaged"))return s();o.loadScript(e.moduleUrl(n,a),s),c()}};var c=function(){u.basePath||u.workerPath||u.modePath||u.themePath||Object.keys(u.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),c=function(){})};function l(i){if(s&&s.document){u.packaged=i||t.packaged||r.packaged||s.define&&n(102).packaged;for(var o,a={},c="",l=document.currentScript||document._currentScript,f=(l&&l.ownerDocument||document).getElementsByTagName("script"),h=0;h<f.length;h++){var d=f[h],p=d.src||d.getAttribute("src");if(p){for(var g=d.attributes,v=0,m=g.length;v<m;v++){var y=g[v];0===y.name.indexOf("data-ace-")&&(a[(o=y.name.replace(/^data-ace-/,""),o.replace(/-(.)/g,(function(t,e){return e.toUpperCase()})))]=y.value)}var b=p.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(c=b[1])}}for(var w in c&&(a.base=a.base||c,a.packaged=!0),a.basePath=a.base,a.workerPath=a.workerPath||a.base,a.modePath=a.modePath||a.base,a.themePath=a.themePath||a.base,delete a.base,a)"undefined"!==typeof a[w]&&e.set(w,a[w])}}l(!0),e.init=l,e.version="1.4.10"})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(t,e,n){"use strict";var r=t("../lib/event"),i=t("../lib/useragent"),o=t("./default_handlers").DefaultHandlers,a=t("./default_gutter_handler").GutterHandler,s=t("./mouse_event").MouseEvent,u=t("./dragdrop_handler").DragdropHandler,c=t("./touch_handler").addTouchListeners,l=t("../config"),f=function(t){var e=this;this.editor=t,new o(this),new a(this),new u(this);var n=function(e){(!document.hasFocus||!document.hasFocus()||!t.isFocused()&&document.activeElement==(t.textInput&&t.textInput.getElement()))&&window.focus(),t.focus()},s=t.renderer.getMouseEventTarget();r.addListener(s,"click",this.onMouseEvent.bind(this,"click"),t),r.addListener(s,"mousemove",this.onMouseMove.bind(this,"mousemove"),t),r.addMultiMouseDownListener([s,t.renderer.scrollBarV&&t.renderer.scrollBarV.inner,t.renderer.scrollBarH&&t.renderer.scrollBarH.inner,t.textInput&&t.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",t),r.addMouseWheelListener(t.container,this.onMouseWheel.bind(this,"mousewheel"),t),c(t.container,t);var l=t.renderer.$gutter;r.addListener(l,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),t),r.addListener(l,"click",this.onMouseEvent.bind(this,"gutterclick"),t),r.addListener(l,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),t),r.addListener(l,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),t),r.addListener(s,"mousedown",n,t),r.addListener(l,"mousedown",n,t),i.isIE&&t.renderer.scrollBarV&&(r.addListener(t.renderer.scrollBarV.element,"mousedown",n,t),r.addListener(t.renderer.scrollBarH.element,"mousedown",n,t)),t.on("mousemove",(function(n){if(!e.state&&!e.$dragDelay&&e.$dragEnabled){var r=t.renderer.screenToTextCoordinates(n.x,n.y),i=t.session.selection.getRange(),o=t.renderer;!i.isEmpty()&&i.insideStart(r.row,r.column)?o.setCursorStyle("default"):o.setCursorStyle("")}}),t)};(function(){this.onMouseEvent=function(t,e){this.editor._emit(t,new s(e,this.editor))},this.onMouseMove=function(t,e){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(t,new s(e,this.editor))},this.onMouseWheel=function(t,e){var n=new s(e,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=e.wheelX,n.wheelY=e.wheelY,this.editor._emit(t,n)},this.setState=function(t){this.state=t},this.captureMouse=function(t,e){this.x=t.x,this.y=t.y,this.isMousePressed=!0;var n=this.editor,o=this.editor.renderer;o.$isMousePressed=!0;var a=this,u=function(t){if(t){if(i.isWebKit&&!t.which&&a.releaseMouse)return a.releaseMouse();a.x=t.clientX,a.y=t.clientY,e&&e(t),a.mouseEvent=new s(t,a.editor),a.$mouseMoved=!0}},c=function(t){n.off("beforeEndOperation",f),clearInterval(h),l(),a[a.state+"End"]&&a[a.state+"End"](t),a.state="",a.isMousePressed=o.$isMousePressed=!1,o.$keepTextAreaAtCursor&&o.$moveTextAreaToCursor(),a.$onCaptureMouseMove=a.releaseMouse=null,t&&a.onMouseEvent("mouseup",t),n.endOperation()},l=function(){a[a.state]&&a[a.state](),a.$mouseMoved=!1};if(i.isOldIE&&"dblclick"==t.domEvent.type)return setTimeout((function(){c(t)}));var f=function(t){a.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(a[a.state+"End"]&&a[a.state+"End"](),a.state="",a.releaseMouse())};n.on("beforeEndOperation",f),n.startOperation({command:{name:"mouse"}}),a.$onCaptureMouseMove=u,a.releaseMouse=r.capture(this.editor.container,u,c);var h=setInterval(l,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&r.stopEvent(e.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)}}).call(f.prototype),l.defineOptions(f.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=f})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var r=t("../lib/dom");e.FoldHandler=function(t){t.on("click",(function(e){var n=e.getDocumentPosition(),i=t.session,o=i.getFoldAt(n.row,n.column,1);o&&(e.getAccelKey()?i.removeFold(o):i.expandFold(o),e.stop());var a=e.domEvent&&e.domEvent.target;a&&r.hasCssClass(a,"ace_inline_button")&&r.hasCssClass(a,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),t.renderer.scrollCursorIntoView())})),t.on("gutterclick",(function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var n=e.getDocumentPosition().row,r=t.session;r.foldWidgets&&r.foldWidgets[n]&&t.session.onFoldWidgetClick(n,e),t.isFocused()||t.focus(),e.stop()}})),t.on("gutterdblclick",(function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var n=e.getDocumentPosition().row,r=t.session,i=r.getParentFoldRangeData(n,!0),o=i.range||i.firstRange;if(o){n=o.start.row;var a=r.getFoldAt(n,r.getLine(n).length,1);a?r.removeFold(a):(r.addFold("...",o),t.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}e.stop()}}))}})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(t,e,n){"use strict";var r=t("../lib/keys"),i=t("../lib/event"),o=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(t){var e=this.$handlers;if(e[e.length-1]!=t){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(t,1)}},this.addKeyboardHandler=function(t,e){if(t){"function"!=typeof t||t.handleKeyboard||(t.handleKeyboard=t);var n=this.$handlers.indexOf(t);-1!=n&&this.$handlers.splice(n,1),void 0==e?this.$handlers.push(t):this.$handlers.splice(e,0,t),-1==n&&t.attach&&t.attach(this.$editor)}},this.removeKeyboardHandler=function(t){var e=this.$handlers.indexOf(t);return-1!=e&&(this.$handlers.splice(e,1),t.detach&&t.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,e=t.editor;return this.$handlers.map((function(n){return n.getStatusText&&n.getStatusText(e,t)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(t,e,n,r){for(var o,a=!1,s=this.$editor.commands,u=this.$handlers.length;u--&&!((o=this.$handlers[u].handleKeyboard(this.$data,t,e,n,r))&&o.command&&((a="null"==o.command||s.exec(o.command,this.$editor,o.args,r))&&r&&-1!=t&&1!=o.passEvent&&1!=o.command.passEvent&&i.stopEvent(r),a)););return a||-1!=t||(o={command:"insertstring"},a=s.exec("insertstring",this.$editor,e)),a&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),a},this.onCommandKey=function(t,e,n){var i=r.keyCodeToString(n);return this.$callKeyboardHandlers(e,i,n,t)},this.onTextInput=function(t){return this.$callKeyboardHandlers(-1,t)}}).call(o.prototype),e.KeyBinding=o})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(t,e,n){"use strict";var r=0,i=0,o=!1,a=!1,s=!1,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],l=[18,18,18,18,18,18,18,18,18,6,5,6,8,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,5,5,5,6,8,4,4,11,11,11,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,18,18,18,18,18,18,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,4,11,11,11,11,4,4,4,4,0,4,4,18,4,4,11,11,2,2,4,0,4,4,4,2,0,4,4,4,4,4],f=[8,8,8,8,8,8,8,8,8,8,8,18,18,18,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8];function h(t,e,n){if(!(i<t))if(1!=t||1!=r||a)for(var o,s,u,c,l=n.length,f=0;f<l;){if(e[f]>=t){for(o=f+1;o<l&&e[o]>=t;)o++;for(s=f,u=o-1;s<u;s++,u--)c=n[s],n[s]=n[u],n[u]=c;f=o}f++}else n.reverse()}function d(t,e,n,i){var u,c,l,f,h=e[i];switch(h){case 0:case 1:o=!1;case 4:case 3:return h;case 2:return o?3:2;case 7:return o=!0,!0,1;case 8:return 4;case 9:return i<1||i+1>=e.length||2!=(u=n[i-1])&&3!=u||2!=(c=e[i+1])&&3!=c?4:(o&&(c=3),c==u?c:4);case 10:return 2==(u=i>0?n[i-1]:5)&&i+1<e.length&&2==e[i+1]?2:4;case 11:if(i>0&&2==n[i-1])return 2;if(o)return 4;for(f=i+1,l=e.length;f<l&&11==e[f];)f++;return f<l&&2==e[f]?2:4;case 12:for(l=e.length,f=i+1;f<l&&12==e[f];)f++;if(f<l){var d=t[i],p=d>=1425&&d<=2303||64286==d;if(u=e[f],p&&(1==u||7==u))return 1}return i<1||5==(u=e[i-1])?4:n[i-1];case 5:return o=!1,a=!0,r;case 6:return s=!0,4;case 13:case 14:case 16:case 17:case 15:o=!1;case 18:return 4}}function p(t){var e=t.charCodeAt(0),n=e>>8;return 0==n?e>191?0:l[e]:5==n?/[\u0591-\u05f4]/.test(t)?1:0:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(t)?12:/[\u0660-\u0669\u066b-\u066c]/.test(t)?3:1642==e?11:/[\u06f0-\u06f9]/.test(t)?2:7:32==n&&e<=8287?f[255&e]:254==n&&e>=65136?7:4}e.L=0,e.R=1,e.EN=2,e.ON_R=3,e.AN=4,e.R_H=5,e.B=6,e.RLE=7,e.DOT="\xb7",e.doBidiReorder=function(t,n,l){if(t.length<2)return{};var f=t.split(""),g=new Array(f.length),v=new Array(f.length),m=[];r=l?1:0,function(t,e,n,l){var f=r?c:u,h=null,g=null,v=null,m=0,y=null,b=-1,w=null,x=null,_=[];if(!l)for(w=0,l=[];w<n;w++)l[w]=p(t[w]);for(i=r,o=!1,!1,a=!1,s=!1,x=0;x<n;x++){if(h=m,_[x]=g=d(t,l,_,x),y=240&(m=f[h][g]),m&=15,e[x]=v=f[m][5],y>0)if(16==y){for(w=b;w<x;w++)e[w]=1;b=-1}else b=-1;if(f[m][6])-1==b&&(b=x);else if(b>-1){for(w=b;w<x;w++)e[w]=v;b=-1}5==l[x]&&(e[x]=0),i|=v}if(s)for(w=0;w<n;w++)if(6==l[w]){e[w]=r;for(var O=w-1;O>=0&&8==l[O];O--)e[O]=r}}(f,m,f.length,n);for(var y=0;y<g.length;g[y]=y,y++);h(2,m,g),h(1,m,g);for(y=0;y<g.length-1;y++)3===n[y]?m[y]=e.AN:1===m[y]&&(n[y]>7&&n[y]<13||4===n[y]||18===n[y])?m[y]=e.ON_R:y>0&&"\u0644"===f[y-1]&&/\u0622|\u0623|\u0625|\u0627/.test(f[y])&&(m[y-1]=m[y]=e.R_H,y++);f[f.length-1]===e.DOT&&(m[f.length-1]=e.B),"\u202b"===f[0]&&(m[0]=e.RLE);for(y=0;y<g.length;y++)v[y]=m[g[y]];return{logicalFromVisual:g,bidiLevels:v}},e.hasBidiCharacters=function(t,e){for(var n=!1,r=0;r<t.length;r++)e[r]=p(t.charAt(r)),n||1!=e[r]&&7!=e[r]&&3!=e[r]||(n=!0);return n},e.getVisualFromLogicalIdx=function(t,e){for(var n=0;n<e.logicalFromVisual.length;n++)if(e.logicalFromVisual[n]==t)return n;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(t,e,n){"use strict";var r=t("./lib/bidiutil"),i=t("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(t){this.session=t,this.bidiMap={},this.currentRow=null,this.bidiUtil=r,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xb6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(t.getValue())};(function(){this.isBidiRow=function(t,e,n){return!!this.seenBidi&&(t!==this.currentRow&&(this.currentRow=t,this.updateRowLine(e,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(t){this.seenBidi?this.currentRow=null:"insert"==t.action&&o.test(t.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var t=0,e=this.session.$screenRowCache;if(e.length){var n=this.session.$getRowCacheIndex(e,this.currentRow);n>=0&&(t=this.session.$docRowCache[n])}return t},this.getSplitIndex=function(){var t=0,e=this.session.$screenRowCache;if(e.length)for(var n,r=this.session.$getRowCacheIndex(e,this.currentRow);this.currentRow-t>0&&(n=this.session.$getRowCacheIndex(e,this.currentRow-t-1))===r;)r=n,t++;else t=this.currentRow;return t},this.updateRowLine=function(t,e){void 0===t&&(t=this.getDocumentRow());var n=t===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(t),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var o=this.session.$wrapData[t];o&&(void 0===e&&(e=this.getSplitIndex()),e>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[r.L],this.line=e<o.length?this.line.substring(o[e-1],o[e]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[e])),e==o.length&&(this.line+=this.showInvisibles?n:r.DOT)}else this.line+=this.showInvisibles?n:r.DOT;var a,s=this.session,u=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(t,e){return"\t"===t||s.isFullWidth(t.charCodeAt(0))?(a="\t"===t?s.getScreenTabSize(e+u):2,u+=a-1,i.stringRepeat(r.DOT,a)):t})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==r.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var t=[];r.hasBidiCharacters(this.line,t)||this.isRtlDir?this.bidiMap=r.doBidiReorder(this.line,t,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(t){if(this.characterWidth!==t.$characterSize.width){this.fontMetrics=t;var e=this.characterWidth=t.$characterSize.width,n=t.$measureCharWidth("\u05d4");this.charWidths[r.L]=this.charWidths[r.EN]=this.charWidths[r.ON_R]=e,this.charWidths[r.R]=this.charWidths[r.AN]=n,this.charWidths[r.R_H]=.45*n,this.charWidths[r.B]=this.charWidths[r.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(t){this.showInvisibles=t,this.currentRow=null},this.setEolChar=function(t){this.EOL=t},this.setContentWidth=function(t){this.contentWidth=t},this.isRtlLine=function(t){return!!this.$isRtl||(void 0!=t?this.session.getLine(t).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(t,e){for(var n=t.getCursorPosition(),r=t.selection.getSelectionAnchor().row;r<=n.row;r++)e||t.session.getLine(r).charAt(0)!==t.session.$bidiHandler.RLE?e&&t.session.getLine(r).charAt(0)!==t.session.$bidiHandler.RLE&&t.session.doc.insert({column:0,row:r},t.session.$bidiHandler.RLE):t.session.doc.removeInLine(r,0,1)},this.getPosLeft=function(t){t-=this.wrapIndent;var e=this.line.charAt(0)===this.RLE?1:0,n=t>e?this.session.getOverwrite()?t:t-1:e,i=r.getVisualFromLogicalIdx(n,this.bidiMap),o=this.bidiMap.bidiLevels,a=0;!this.session.getOverwrite()&&t<=e&&o[i]%2!==0&&i++;for(var s=0;s<i;s++)a+=this.charWidths[o[s]];return!this.session.getOverwrite()&&t>e&&o[i]%2===0&&(a+=this.charWidths[o[i]]),this.wrapIndent&&(a+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(a+=this.rtlLineOffset),a},this.getSelections=function(t,e){var n,r=this.bidiMap,i=r.bidiLevels,o=[],a=0,s=Math.min(t,e)-this.wrapIndent,u=Math.max(t,e)-this.wrapIndent,c=!1,l=!1,f=0;this.wrapIndent&&(a+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var h,d=0;d<i.length;d++)h=r.logicalFromVisual[d],n=i[d],(c=h>=s&&h<u)&&!l?f=a:!c&&l&&o.push({left:f,width:a-f}),a+=this.charWidths[n],l=c;if(c&&d===i.length&&o.push({left:f,width:a-f}),this.isRtlDir)for(var p=0;p<o.length;p++)o[p].left+=this.rtlLineOffset;return o},this.offsetToCol=function(t){this.isRtlDir&&(t-=this.rtlLineOffset);var e=0,n=(t=Math.max(t,0),0),r=0,i=this.bidiMap.bidiLevels,o=this.charWidths[i[r]];for(this.wrapIndent&&(t-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);t>n+o/2;){if(n+=o,r===i.length-1){o=0;break}o=this.charWidths[i[++r]]}return r>0&&i[r-1]%2!==0&&i[r]%2===0?(t<n&&r--,e=this.bidiMap.logicalFromVisual[r]):r>0&&i[r-1]%2===0&&i[r]%2!==0?e=1+(t>n?this.bidiMap.logicalFromVisual[r]:this.bidiMap.logicalFromVisual[r-1]):this.isRtlDir&&r===i.length-1&&0===o&&i[r-1]%2===0||!this.isRtlDir&&0===r&&i[r]%2!==0?e=1+this.bidiMap.logicalFromVisual[r]:(r>0&&i[r-1]%2!==0&&0!==o&&r--,e=this.bidiMap.logicalFromVisual[r]),0===e&&this.isRtlDir&&e++,e+this.wrapIndent}}).call(a.prototype),e.BidiHandler=a})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/lang"),o=t("./lib/event_emitter").EventEmitter,a=t("./range").Range,s=function(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var e=this;this.cursor.on("change",(function(t){e.$cursorChanged=!0,e.$silent||e._emit("changeCursor"),e.$isEmpty||e.$silent||e._emit("changeSelection"),e.$keepDesiredColumnOnChange||t.old.column==t.value.column||(e.$desiredColumn=null)})),this.anchor.on("change",(function(){e.$anchorChanged=!0,e.$isEmpty||e.$silent||e._emit("changeSelection")}))};(function(){r.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(t,e){this.$isEmpty=!1,this.anchor.setPosition(t,e)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var t=this.anchor,e=this.lead;return t.row>e.row||t.row==e.row&&t.column>e.column},this.getRange=function(){var t=this.anchor,e=this.lead;return this.$isEmpty?a.fromPoints(e,e):this.isBackwards()?a.fromPoints(e,t):a.fromPoints(t,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(t,e){var n=e?t.end:t.start,r=e?t.start:t.end;this.$setSelection(n.row,n.column,r.row,r.column)},this.$setSelection=function(t,e,n,r){if(!this.$silent){var i=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(t,e),this.cursor.setPosition(n,r),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||i!=this.$isEmpty||o)&&this._emit("changeSelection")}},this.$moveSelection=function(t){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),t.call(this)},this.selectTo=function(t,e){this.$moveSelection((function(){this.moveCursorTo(t,e)}))},this.selectToPosition=function(t){this.$moveSelection((function(){this.moveCursorToPosition(t)}))},this.moveTo=function(t,e){this.clearSelection(),this.moveCursorTo(t,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(t,e){if("undefined"==typeof e){var n=t||this.lead;t=n.row,e=n.column}return this.session.getWordRange(t,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var t=this.getCursor(),e=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(e)},this.getLineRange=function(t,e){var n,r="number"==typeof t?t:this.lead.row,i=this.session.getFoldLine(r);return i?(r=i.start.row,n=i.end.row):n=r,!0===e?new a(r,0,n,this.session.getLine(n).length):new a(r,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(t,e,n){var r=t.column,i=t.column+e;return n<0&&(r=t.column-e,i=t.column),this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(r,i).split(" ").length-1==e},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();e=this.lead;this.wouldMoveIntoSoftTab(e,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var t=this.lead.row,e=this.lead.column,n=this.session.documentToScreenRow(t,e),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(t,null,r.row,r.column).match(/^\s*/);i[0].length==e||this.session.$useEmacsStyleLineStart||(r.column+=i[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var t=this.lead,e=this.session.getDocumentLastRowColumnPosition(t.row,t.column);if(this.lead.column==e.column){var n=this.session.getLine(e.row);if(e.column==n.length){var r=n.search(/\s+$/);r>0&&(e.column=r)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,e=this.doc.getLine(t).length;this.moveCursorTo(t,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),r=n.substring(e);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var i=this.session.getFoldAt(t,e,1);if(i)this.moveCursorTo(i.end.row,i.end.column);else{if(this.session.nonTokenRe.exec(r)&&(e+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(e)),e>=n.length)return this.moveCursorTo(t,n.length),this.moveCursorRight(),void(t<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(r)&&(e+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,e)}},this.moveCursorLongWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))this.moveCursorTo(t.start.row,t.start.column);else{var r=this.session.getFoldStringAt(e,n,-1);null==r&&(r=this.doc.getLine(e).substring(0,n));var o=i.stringReverse(r);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(n-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(e,0),this.moveCursorLeft(),void(e>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,n)}},this.$shortWordEndIndex=function(t){var e,n=0,r=/\s/,i=this.session.tokenRe;if(i.lastIndex=0,this.session.tokenRe.exec(t))n=this.session.tokenRe.lastIndex;else{for(;(e=t[n])&&r.test(e);)n++;if(n<1)for(i.lastIndex=0;(e=t[n])&&!i.test(e);)if(i.lastIndex=0,n++,r.test(e)){if(n>2){n--;break}for(;(e=t[n])&&r.test(e);)n++;if(n>2)break}}return i.lastIndex=0,n},this.moveCursorShortWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),r=n.substring(e),i=this.session.getFoldAt(t,e,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(e==n.length){var o=this.doc.getLength();do{t++,r=this.doc.getLine(t)}while(t<o&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),e=0}var a=this.$shortWordEndIndex(r);this.moveCursorTo(t,e+a)},this.moveCursorShortWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))return this.moveCursorTo(t.start.row,t.start.column);var r=this.session.getLine(e).substring(0,n);if(0===n){do{e--,r=this.doc.getLine(e)}while(e>0&&/^\s*$/.test(r));n=r.length,/\s+$/.test(r)||(r="")}var o=i.stringReverse(r),a=this.$shortWordEndIndex(o);return this.moveCursorTo(e,n-a)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(t,e){var n,r=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(0===e&&(0!==t&&(this.session.$bidiHandler.isBidiRow(r.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(r.column),r.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=r.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?r.column=this.$desiredColumn:this.$desiredColumn=r.column),0!=t&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var i=this.session.lineWidgets[this.lead.row];t<0?t-=i.rowsAbove||0:t>0&&(t+=i.rowCount-(i.rowsAbove||0))}var o=this.session.screenToDocumentPosition(r.row+t,r.column,n);0!==t&&0===e&&o.row===this.lead.row&&(o.column,this.lead.column),this.moveCursorTo(o.row,o.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(t,e,n){var r=this.session.getFoldAt(t,e,1);r&&(t=r.start.row,e=r.start.column),this.$keepDesiredColumnOnChange=!0;var i=this.session.getLine(t);/[\uDC00-\uDFFF]/.test(i.charAt(e))&&i.charAt(e-1)&&(this.lead.row==t&&this.lead.column==e+1?e-=1:e+=1),this.lead.setPosition(t,e),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(t,e,n){var r=this.session.screenToDocumentPosition(t,e);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(t){var e=this.getRange();return t?(t.start.column=e.start.column,t.start.row=e.start.row,t.end.column=e.end.column,t.end.row=e.end.row):t=e,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},this.getRangeOfMovements=function(t){var e=this.getCursor();try{t(this);var n=this.getCursor();return a.fromPoints(e,n)}catch(r){return a.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map((function(t){var e=t.clone();return e.isBackwards=t.cursor==t.start,e}));else(t=this.getRange()).isBackwards=this.isBackwards();return t},this.fromJSON=function(t){if(void 0==t.start){if(this.rangeList&&t.length>1){this.toSingleRange(t[0]);for(var e=t.length;e--;){var n=a.fromPoints(t[e].start,t[e].end);t[e].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}t=t[0]}this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},this.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(t[e]))return!1;return!0}}).call(s.prototype),e.Selection=s})),ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(t,e,n){"use strict";var r=t("./config"),i=2e3,o=function(t){for(var e in this.states=t,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[e],r=[],i=0,o=this.matchMappings[e]={defaultToken:"text"},a="g",s=[],u=0;u<n.length;u++){var c=n[u];if(c.defaultToken&&(o.defaultToken=c.defaultToken),c.caseInsensitive&&(a="gi"),null!=c.regex){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var l=c.regex,f=new RegExp("(?:("+l+")|(.))").exec("a").length-2;Array.isArray(c.token)?1==c.token.length||1==f?c.token=c.token[0]:f-1!=c.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:c,groupCount:f-1}),c.token=c.token[0]):(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):"function"!=typeof c.token||c.onMatch||(c.onMatch=f>1?this.$applyToken:c.token),f>1&&(/\\\d/.test(c.regex)?l=c.regex.replace(/\\([0-9]+)/g,(function(t,e){return"\\"+(parseInt(e,10)+i+1)})):(f=1,l=this.removeCapturingGroups(c.regex)),c.splitRegex||"string"==typeof c.token||s.push(c)),o[i]=u,i+=f,r.push(l),c.onMatch||(c.onMatch=null)}}r.length||(o[0]=0,r.push("$")),s.forEach((function(t){t.splitRegex=this.createSplitterRegexp(t.regex,a)}),this),this.regExps[e]=new RegExp("("+r.join(")|(")+")|($)",a)}};(function(){this.$setMaxTokenCount=function(t){i=0|t},this.$applyToken=function(t){var e=this.splitRegex.exec(t).slice(1),n=this.token.apply(this,e);if("string"===typeof n)return[{type:n,value:t}];for(var r=[],i=0,o=n.length;i<o;i++)e[i]&&(r[r.length]={type:n[i],value:e[i]});return r},this.$arrayTokens=function(t){if(!t)return[];var e=this.splitRegex.exec(t);if(!e)return"text";for(var n=[],r=this.tokenArray,i=0,o=r.length;i<o;i++)e[i+1]&&(n[n.length]={type:r[i],value:e[i+1]});return n},this.removeCapturingGroups=function(t){return t.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(t,e){return e?"(?:":t}))},this.createSplitterRegexp=function(t,e){if(-1!=t.indexOf("(?=")){var n=0,r=!1,i={};t.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(t,e,o,a,s,u){return r?r="]"!=s:s?r=!0:a?(n==i.stack&&(i.end=u+1,i.stack=-1),n--):o&&(n++,1!=o.length&&(i.stack=n,i.start=u)),t})),null!=i.end&&/^\)*$/.test(t.substr(i.end))&&(t=t.substring(0,i.start)+t.substr(i.end))}return"^"!=t.charAt(0)&&(t="^"+t),"$"!=t.charAt(t.length-1)&&(t+="$"),new RegExp(t,(e||"").replace("g",""))},this.getLineTokens=function(t,e){if(e&&"string"!=typeof e){var n=e.slice(0);"#tmp"===(e=n[0])&&(n.shift(),e=n.shift())}else n=[];var r=e||"start",o=this.states[r];o||(r="start",o=this.states[r]);var a=this.matchMappings[r],s=this.regExps[r];s.lastIndex=0;for(var u,c=[],l=0,f=0,h={type:null,value:""};u=s.exec(t);){var d=a.defaultToken,p=null,g=u[0],v=s.lastIndex;if(v-g.length>l){var m=t.substring(l,v-g.length);h.type==d?h.value+=m:(h.type&&c.push(h),h={type:d,value:m})}for(var y=0;y<u.length-2;y++)if(void 0!==u[y+1]){d=(p=o[a[y]]).onMatch?p.onMatch(g,r,n,t):p.token,p.next&&(r="string"==typeof p.next?p.next:p.next(r,n),(o=this.states[r])||(this.reportError("state doesn't exist",r),r="start",o=this.states[r]),a=this.matchMappings[r],l=v,(s=this.regExps[r]).lastIndex=v),p.consumeLineEnd&&(l=v);break}if(g)if("string"===typeof d)p&&!1===p.merge||h.type!==d?(h.type&&c.push(h),h={type:d,value:g}):h.value+=g;else if(d){h.type&&c.push(h),h={type:null,value:""};for(y=0;y<d.length;y++)c.push(d[y])}if(l==t.length)break;if(l=v,f++>i){for(f>2*t.length&&this.reportError("infinite loop with in ace tokenizer",{startState:e,line:t});l<t.length;)h.type&&c.push(h),h={value:t.substring(l,l+=500),type:"overflow"};r="start",n=[];break}}return h.type&&c.push(h),n.length>1&&n[0]!==r&&n.unshift("#tmp",r),{tokens:c,state:n.length?n:r}},this.reportError=r.reportError}).call(o.prototype),e.Tokenizer=o})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(t,e,n){"use strict";var r=t("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(t,e){if(e)for(var n in t){for(var r=t[n],i=0;i<r.length;i++){var o=r[i];(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(e)&&(o.next=e+o.next),o.nextState&&0!==o.nextState.indexOf(e)&&(o.nextState=e+o.nextState))}this.$rules[e+n]=r}else for(var n in t)this.$rules[n]=t[n]},this.getRules=function(){return this.$rules},this.embedRules=function(t,e,n,i,o){var a="function"==typeof t?(new t).getRules():t;if(i)for(var s=0;s<i.length;s++)i[s]=e+i[s];else for(var u in i=[],a)i.push(e+u);if(this.addRules(a,e),n){var c=Array.prototype[o?"push":"unshift"];for(s=0;s<i.length;s++)c.apply(this.$rules[i[s]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(e)},this.getEmbeds=function(){return this.$embeds};var t=function(t,e){return("start"!=t||e.length)&&e.unshift(this.nextState,t),this.nextState},e=function(t,e){return e.shift(),e.shift()||"start"};this.normalizeRules=function(){var n=0,r=this.$rules;Object.keys(r).forEach((function i(o){var a=r[o];a.processed=!0;for(var s=0;s<a.length;s++){var u=a[s],c=null;Array.isArray(u)&&(c=u,u={}),!u.regex&&u.start&&(u.regex=u.start,u.next||(u.next=[]),u.next.push({defaultToken:u.token},{token:u.token+".end",regex:u.end||u.start,next:"pop"}),u.token=u.token+".start",u.push=!0);var l=u.next||u.push;if(l&&Array.isArray(l)){var f=u.stateName;f||("string"!=typeof(f=u.token)&&(f=f[0]||""),r[f]&&(f+=n++)),r[f]=l,u.next=f,i(f)}else"pop"==l&&(u.next=e);if(u.push&&(u.nextState=u.next||u.push,u.next=t,delete u.push),u.rules)for(var h in u.rules)r[h]?r[h].push&&r[h].push.apply(r[h],u.rules[h]):r[h]=u.rules[h];var d="string"==typeof u?u:u.include;if(d&&(c=Array.isArray(d)?d.map((function(t){return r[t]})):r[d]),c){var p=[s,1].concat(c);u.noEscape&&(p=p.filter((function(t){return!t.next}))),a.splice.apply(a,p),s--}u.keywordMap&&(u.token=this.createKeywordMapper(u.keywordMap,u.defaultToken||"text",u.caseInsensitive),delete u.defaultToken)}}),this)},this.createKeywordMapper=function(t,e,n,r){var i=Object.create(null);return Object.keys(t).forEach((function(e){var o=t[e];n&&(o=o.toLowerCase());for(var a=o.split(r||"|"),s=a.length;s--;)i[a[s]]=e})),Object.getPrototypeOf(i)&&(i.__proto__=null),this.$keywordList=Object.keys(i),t=null,n?function(t){return i[t.toLowerCase()]||e}:function(t){return i[t]||e}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),e.TextHighlightRules=i})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(t,e,n){"use strict";var r=function(){this.$behaviours={}};(function(){this.add=function(t,e,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[t]:this.$behaviours[t]={}}this.$behaviours[t][e]=n},this.addBehaviours=function(t){for(var e in t)for(var n in t[e])this.add(e,n,t[e][n])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(t,e){if("function"===typeof t)var n=(new t).getBehaviours(e);else n=t.getBehaviours(e);this.addBehaviours(n)},this.getBehaviours=function(t){if(t){for(var e={},n=0;n<t.length;n++)this.$behaviours[t[n]]&&(e[t[n]]=this.$behaviours[t[n]]);return e}return this.$behaviours}}).call(r.prototype),e.Behaviour=r})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var r=t("./range").Range,i=function(t,e,n){this.$session=t,this.$row=e,this.$rowTokens=t.getTokens(e);var r=t.getTokenAt(e,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var t;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t||(t=this.$session.getLength()),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var t=this.$rowTokens,e=this.$tokenIndex,n=t[e].start;if(void 0!==n)return n;for(n=0;e>0;)n+=t[e-=1].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var t=this.$rowTokens[this.$tokenIndex],e=this.getCurrentTokenColumn();return new r(this.$row,e,this.$row,e+t.value.length)}}).call(i.prototype),e.TokenIterator=i})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(t,e,n){"use strict";var r,i=t("../../lib/oop"),o=t("../behaviour").Behaviour,a=t("../../token_iterator").TokenIterator,s=t("../../lib/lang"),u=["text","paren.rparen","rparen","paren","punctuation.operator"],c=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],l={},f={'"':'"',"'":"'"},h=function(t){var e=-1;if(t.multiSelect&&(e=t.selection.index,l.rangeCount!=t.multiSelect.rangeCount&&(l={rangeCount:t.multiSelect.rangeCount})),l[e])return r=l[e];r=l[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},d=function(t,e,n,r){var i=t.end.row-t.start.row;return{text:n+e+r,selection:[0,t.start.column+1,i,t.end.column+(i?0:1)]}},p=function t(e){this.add("braces","insertion",(function(n,i,o,a,u){var c=o.getCursorPosition(),l=a.doc.getLine(c.row);if("{"==u){h(o);var f=o.getSelectionRange(),p=a.doc.getTextRange(f);if(""!==p&&"{"!==p&&o.getWrapBehavioursEnabled())return d(f,p,"{","}");if(t.isSaneInsertion(o,a))return/[\]\}\)]/.test(l[c.column])||o.inMultiSelectMode||e&&e.braces?(t.recordAutoInsert(o,a,"}"),{text:"{}",selection:[1,1]}):(t.recordMaybeInsert(o,a,"{"),{text:"{",selection:[1,1]})}else if("}"==u){if(h(o),"}"==l.substring(c.column,c.column+1))if(null!==a.$findOpeningBracket("}",{column:c.column+1,row:c.row})&&t.isAutoInsertedClosing(c,l,u))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==u||"\r\n"==u){h(o);var g="";if(t.isMaybeInsertedClosing(c,l)&&(g=s.stringRepeat("}",r.maybeInsertedBrackets),t.clearMaybeInsertedClosing()),"}"===l.substring(c.column,c.column+1)){var v=a.findMatchingBracket({row:c.row,column:c.column+1},"}");if(!v)return null;var m=this.$getIndent(a.getLine(v.row))}else{if(!g)return void t.clearMaybeInsertedClosing();m=this.$getIndent(l)}var y=m+a.getTabString();return{text:"\n"+y+"\n"+m+g,selection:[1,y.length,1,y.length]}}t.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(t,e,n,i,o){var a=i.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==a){if(h(n),"}"==i.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o;r.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(e,n,r,i,o){if("("==o){h(r);var a=r.getSelectionRange(),s=i.doc.getTextRange(a);if(""!==s&&r.getWrapBehavioursEnabled())return d(a,s,"(",")");if(t.isSaneInsertion(r,i))return t.recordAutoInsert(r,i,")"),{text:"()",selection:[1,1]}}else if(")"==o){h(r);var u=r.getCursorPosition(),c=i.doc.getLine(u.row);if(")"==c.substring(u.column,u.column+1))if(null!==i.$findOpeningBracket(")",{column:u.column+1,row:u.row})&&t.isAutoInsertedClosing(u,c,o))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(t,e,n,r,i){var o=r.doc.getTextRange(i);if(!i.isMultiLine()&&"("==o&&(h(n),")"==r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)))return i.end.column++,i})),this.add("brackets","insertion",(function(e,n,r,i,o){if("["==o){h(r);var a=r.getSelectionRange(),s=i.doc.getTextRange(a);if(""!==s&&r.getWrapBehavioursEnabled())return d(a,s,"[","]");if(t.isSaneInsertion(r,i))return t.recordAutoInsert(r,i,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){h(r);var u=r.getCursorPosition(),c=i.doc.getLine(u.row);if("]"==c.substring(u.column,u.column+1))if(null!==i.$findOpeningBracket("]",{column:u.column+1,row:u.row})&&t.isAutoInsertedClosing(u,c,o))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(t,e,n,r,i){var o=r.doc.getTextRange(i);if(!i.isMultiLine()&&"["==o&&(h(n),"]"==r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)))return i.end.column++,i})),this.add("string_dquotes","insertion",(function(t,e,n,r,i){var o=r.$mode.$quotes||f;if(1==i.length&&o[i]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(i))return;h(n);var a=i,s=n.getSelectionRange(),u=r.doc.getTextRange(s);if(!(""===u||1==u.length&&o[u])&&n.getWrapBehavioursEnabled())return d(s,u,a,a);if(!u){var c=n.getCursorPosition(),l=r.doc.getLine(c.row),p=l.substring(c.column-1,c.column),g=l.substring(c.column,c.column+1),v=r.getTokenAt(c.row,c.column),m=r.getTokenAt(c.row,c.column+1);if("\\"==p&&v&&/escape/.test(v.type))return null;var y,b=v&&/string|escape/.test(v.type),w=!m||/string|escape/.test(m.type);if(g==a)(y=b!==w)&&/string\.end/.test(m.type)&&(y=!1);else{if(b&&!w)return null;if(b&&w)return null;var x=r.$mode.tokenRe;x.lastIndex=0;var _=x.test(p);x.lastIndex=0;var O=x.test(p);if(_||O)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;var k=l[c.column-2];if(p==a&&(k==a||x.test(k)))return null;y=!0}return{text:y?a+a:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(t,e,n,r,i){var o=r.$mode.$quotes||f,a=r.doc.getTextRange(i);if(!i.isMultiLine()&&o.hasOwnProperty(a)&&(h(n),r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)==a))return i.end.column++,i}))};p.isSaneInsertion=function(t,e){var n=t.getCursorPosition(),r=new a(e,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",u)){if(/[)}\]]/.test(t.session.getLine(n.row)[n.column]))return!0;var i=new a(e,n.row,n.column+1);if(!this.$matchTokenType(i.getCurrentToken()||"text",u))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",c)},p.$matchTokenType=function(t,e){return e.indexOf(t.type||t)>-1},p.recordAutoInsert=function(t,e,n){var i=t.getCursorPosition(),o=e.doc.getLine(i.row);this.isAutoInsertedClosing(i,o,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=i.row,r.autoInsertedLineEnd=n+o.substr(i.column),r.autoInsertedBrackets++},p.recordMaybeInsert=function(t,e,n){var i=t.getCursorPosition(),o=e.doc.getLine(i.row);this.isMaybeInsertedClosing(i,o)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=i.row,r.maybeInsertedLineStart=o.substr(0,i.column)+n,r.maybeInsertedLineEnd=o.substr(i.column),r.maybeInsertedBrackets++},p.isAutoInsertedClosing=function(t,e,n){return r.autoInsertedBrackets>0&&t.row===r.autoInsertedRow&&n===r.autoInsertedLineEnd[0]&&e.substr(t.column)===r.autoInsertedLineEnd},p.isMaybeInsertedClosing=function(t,e){return r.maybeInsertedBrackets>0&&t.row===r.maybeInsertedRow&&e.substr(t.column)===r.maybeInsertedLineEnd&&e.substr(0,t.column)==r.maybeInsertedLineStart},p.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},p.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},i.inherits(p,o),e.CstyleBehaviour=p})),ace.define("ace/unicode",["require","exports","module"],(function(t,e,n){"use strict";for(var r=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],i=0,o=[],a=0;a<r.length;a+=2)o.push(i+=r[a]),r[a+1]&&o.push(45,i+=r[a+1]);e.wordChars=String.fromCharCode.apply(null,o)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(t,e,n){"use strict";var r=t("../config"),i=t("../tokenizer").Tokenizer,o=t("./text_highlight_rules").TextHighlightRules,a=t("./behaviour/cstyle").CstyleBehaviour,s=t("../unicode"),u=t("../lib/lang"),c=t("../token_iterator").TokenIterator,l=t("../range").Range,f=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+s.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+s.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(t,e,n,r){var i=e.doc,o=!0,a=!0,s=1/0,c=e.getTabSize(),l=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))g=this.lineCommentStart.map(u.escapeRegExp).join("|"),d=this.lineCommentStart[0];else g=u.escapeRegExp(this.lineCommentStart),d=this.lineCommentStart;g=new RegExp("^(\\s*)(?:"+g+") ?"),l=e.getUseSoftTabs();y=function(t,e){var n=t.match(g);if(n){var r=n[1].length,o=n[0].length;h(t,r,o)||" "!=n[0][o-1]||o--,i.removeInLine(e,r,o)}};var f=d+" ",h=(m=function(t,e){o&&!/\S/.test(t)||(h(t,s,s)?i.insertInLine({row:e,column:s},f):i.insertInLine({row:e,column:s},d))},b=function(t,e){return g.test(t)},function(t,e,n){for(var r=0;e--&&" "==t.charAt(e);)r++;if(r%c!=0)return!1;for(r=0;" "==t.charAt(n++);)r++;return c>2?r%c!=c-1:r%c==0})}else{if(!this.blockComment)return!1;var d=this.blockComment.start,p=this.blockComment.end,g=new RegExp("^(\\s*)(?:"+u.escapeRegExp(d)+")"),v=new RegExp("(?:"+u.escapeRegExp(p)+")\\s*$"),m=function(t,e){b(t,e)||o&&!/\S/.test(t)||(i.insertInLine({row:e,column:t.length},p),i.insertInLine({row:e,column:s},d))},y=function(t,e){var n;(n=t.match(v))&&i.removeInLine(e,t.length-n[0].length,t.length),(n=t.match(g))&&i.removeInLine(e,n[1].length,n[0].length)},b=function(t,n){if(g.test(t))return!0;for(var r=e.getTokens(n),i=0;i<r.length;i++)if("comment"===r[i].type)return!0}}function w(t){for(var e=n;e<=r;e++)t(i.getLine(e),e)}var x=1/0;w((function(t,e){var n=t.search(/\S/);-1!==n?(n<s&&(s=n),a&&!b(t,e)&&(a=!1)):x>t.length&&(x=t.length)})),s==1/0&&(s=x,o=!1,a=!1),l&&s%c!=0&&(s=Math.floor(s/c)*c),w(a?y:m)},this.toggleBlockComment=function(t,e,n,r){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var o,a,s=(g=new c(e,r.row,r.column)).getCurrentToken(),u=(e.selection,e.selection.toOrientedRange());if(s&&/comment/.test(s.type)){for(var f,h;s&&/comment/.test(s.type);){if(-1!=(v=s.value.indexOf(i.start))){var d=g.getCurrentTokenRow(),p=g.getCurrentTokenColumn()+v;f=new l(d,p,d,p+i.start.length);break}s=g.stepBackward()}var g;for(s=(g=new c(e,r.row,r.column)).getCurrentToken();s&&/comment/.test(s.type);){var v;if(-1!=(v=s.value.indexOf(i.end))){d=g.getCurrentTokenRow(),p=g.getCurrentTokenColumn()+v;h=new l(d,p,d,p+i.end.length);break}s=g.stepForward()}h&&e.remove(h),f&&(e.remove(f),o=f.start.row,a=-i.start.length)}else a=i.start.length,o=n.start.row,e.insert(n.end,i.end),e.insert(n.start,i.start);u.start.row==o&&(u.start.column+=a),u.end.row==o&&(u.end.column+=a),e.selection.fromOrientedRange(u)}},this.getNextLineIndent=function(t,e,n){return this.$getIndent(e)},this.checkOutdent=function(t,e,n){return!1},this.autoOutdent=function(t,e,n){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(t){return null},this.createModeDelegates=function(t){for(var e in this.$embeds=[],this.$modes={},t)if(t[e]){var n=t[e],i=n.prototype.$id,o=r.$modes[i];o||(r.$modes[i]=o=new n),r.$modes[e]||(r.$modes[e]=o),this.$embeds.push(e),this.$modes[e]=o}var a=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(e=0;e<a.length;e++)!function(t){var n=a[e],r=t[n];t[a[e]]=function(){return this.$delegator(n,arguments,r)}}(this)},this.$delegator=function(t,e,n){var r=e[0]||"start";if("string"!=typeof r){if(Array.isArray(r[2])){var i=r[2][r[2].length-1];if(a=this.$modes[i])return a[t].apply(a,[r[1]].concat([].slice.call(e,1)))}r=r[0]||"start"}for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var a,s=r.split(this.$embeds[o]);if(!s[0]&&s[1])return e[0]=s[1],(a=this.$modes[this.$embeds[o]])[t].apply(a,e)}var u=n.apply(this,e);return n?u:void 0},this.transformAction=function(t,e,n,r,i){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var a in o)if(o[a][e]){var s=o[a][e].apply(this,arguments);if(s)return s}}},this.getKeywords=function(t){if(!this.completionKeywords){var e=this.$tokenizer.rules,n=[];for(var r in e)for(var i=e[r],o=0,a=i.length;o<a;o++)if("string"===typeof i[o].token)/keyword|support|storage/.test(i[o].token)&&n.push(i[o].regex);else if("object"===typeof i[o].token)for(var s=0,u=i[o].token.length;s<u;s++)if(/keyword|support|storage/.test(i[o].token[s])){r=i[o].regex.match(/\(.+?\)/g)[s];n.push(r.substr(1,r.length-2))}this.completionKeywords=n}return t?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(t,e,n,r){return(this.$keywordList||this.$createKeywordList()).map((function(t){return{name:t,value:t,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(f.prototype),e.Mode=f})),ace.define("ace/apply_delta",["require","exports","module"],(function(t,e,n){"use strict";e.applyDelta=function(t,e,n){var r=e.start.row,i=e.start.column,o=t[r]||"";switch(e.action){case"insert":if(1===e.lines.length)t[r]=o.substring(0,i)+e.lines[0]+o.substring(i);else{var a=[r,1].concat(e.lines);t.splice.apply(t,a),t[r]=o.substring(0,i)+t[r],t[r+e.lines.length-1]+=o.substring(i)}break;case"remove":var s=e.end.column,u=e.end.row;r===u?t[r]=o.substring(0,i)+o.substring(s):t.splice(r,u-r+1,o.substring(0,i)+t[u].substring(s))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/event_emitter").EventEmitter,o=e.Anchor=function(t,e,n){this.$onChange=this.onChange.bind(this),this.attach(t),"undefined"==typeof n?this.setPosition(e.row,e.column):this.setPosition(e,n)};(function(){function t(t,e,n){var r=n?t.column<=e.column:t.column<e.column;return t.row<e.row||t.row==e.row&&r}r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if((e.start.row!=e.end.row||e.start.row==this.row)&&!(e.start.row>this.row)){var n=function(e,n,r){var i="insert"==e.action,o=(i?1:-1)*(e.end.row-e.start.row),a=(i?1:-1)*(e.end.column-e.start.column),s=e.start,u=i?s:e.end;if(t(n,s,r))return{row:n.row,column:n.column};if(t(u,n,!r))return{row:n.row+o,column:n.column+(n.row==u.row?a:0)};return{row:s.row,column:s.column}}(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(t,e,n){var r;if(r=n?{row:t,column:e}:this.$clipPositionToDocument(t,e),this.row!=r.row||this.column!=r.column){var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(t,e){var n={};return t>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):t<0?(n.row=0,n.column=0):(n.row=t,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,e))),e<0&&(n.column=0),n}}).call(o.prototype)})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./apply_delta").applyDelta,o=t("./lib/event_emitter").EventEmitter,a=t("./range").Range,s=t("./anchor").Anchor,u=function(t){this.$lines=[""],0===t.length?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){r.implement(this,o),this.setValue=function(t){var e=this.getLength()-1;this.remove(new a(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},t)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,e){return new s(this,t,e)},0==="aaa".split(/a/).length?this.$split=function(t){return t.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return"\r\n"==t||"\r"==t||"\n"==t},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,e){return this.$lines.slice(t,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var e;if(t.start.row===t.end.row)e=[this.getLine(t.start.row).substring(t.start.column,t.end.column)];else{(e=this.getLines(t.start.row,t.end.row))[0]=(e[0]||"").substring(t.start.column);var n=e.length-1;t.end.row-t.start.row==n&&(e[n]=e[n].substring(0,t.end.column))}return e},this.insertLines=function(t,e){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,e)},this.removeLines=function(t,e){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,e)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,e){return this.getLength()<=1&&this.$detectNewLine(e),this.insertMergedLines(t,this.$split(e))},this.insertInLine=function(t,e){var n=this.clippedPos(t.row,t.column),r=this.pos(t.row,t.column+e.length);return this.applyDelta({start:n,end:r,action:"insert",lines:[e]},!0),this.clonePos(r)},this.clippedPos=function(t,e){var n=this.getLength();void 0===t?t=n:t<0?t=0:t>=n&&(t=n-1,e=void 0);var r=this.getLine(t);return void 0==e&&(e=r.length),{row:t,column:e=Math.min(Math.max(e,0),r.length)}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,e){return{row:t,column:e}},this.$clipPosition=function(t){var e=this.getLength();return t.row>=e?(t.row=Math.max(0,e-1),t.column=this.getLine(e-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,e){var n=0;(t=Math.min(Math.max(t,0),this.getLength()))<this.getLength()?(e=e.concat([""]),n=0):(e=[""].concat(e),t--,n=this.$lines[t].length),this.insertMergedLines({row:t,column:n},e)},this.insertMergedLines=function(t,e){var n=this.clippedPos(t.row,t.column),r={row:n.row+e.length-1,column:(1==e.length?n.column:0)+e[e.length-1].length};return this.applyDelta({start:n,end:r,action:"insert",lines:e}),this.clonePos(r)},this.remove=function(t){var e=this.clippedPos(t.start.row,t.start.column),n=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:e,end:n,action:"remove",lines:this.getLinesForRange({start:e,end:n})}),this.clonePos(e)},this.removeInLine=function(t,e,n){var r=this.clippedPos(t,e),i=this.clippedPos(t,n);return this.applyDelta({start:r,end:i,action:"remove",lines:this.getLinesForRange({start:r,end:i})},!0),this.clonePos(r)},this.removeFullLines=function(t,e){t=Math.min(Math.max(0,t),this.getLength()-1);var n=(e=Math.min(Math.max(0,e),this.getLength()-1))==this.getLength()-1&&t>0,r=e<this.getLength()-1,i=n?t-1:t,o=n?this.getLine(i).length:0,s=r?e+1:e,u=r?0:this.getLine(s).length,c=new a(i,o,s,u),l=this.$lines.slice(t,e+1);return this.applyDelta({start:c.start,end:c.end,action:"remove",lines:this.getLinesForRange(c)}),l},this.removeNewLine=function(t){t<this.getLength()-1&&t>=0&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,e){return t instanceof a||(t=a.fromPoints(t.start,t.end)),0===e.length&&t.isEmpty()?t.start:e==this.getTextRange(t)?t.end:(this.remove(t),e?this.insert(t.start,e):t.start)},this.applyDeltas=function(t){for(var e=0;e<t.length;e++)this.applyDelta(t[e])},this.revertDeltas=function(t){for(var e=t.length-1;e>=0;e--)this.revertDelta(t[e])},this.applyDelta=function(t,e){var n="insert"==t.action;(n?t.lines.length<=1&&!t.lines[0]:!a.comparePoints(t.start,t.end))||(n&&t.lines.length>2e4?this.$splitAndapplyLargeDelta(t,2e4):(i(this.$lines,t,e),this._signal("change",t)))},this.$safeApplyDelta=function(t){var e=this.$lines.length;("remove"==t.action&&t.start.row<e&&t.end.row<e||"insert"==t.action&&t.start.row<=e)&&this.applyDelta(t)},this.$splitAndapplyLargeDelta=function(t,e){for(var n=t.lines,r=n.length-e+1,i=t.start.row,o=t.start.column,a=0,s=0;a<r;a=s){s+=e-1;var u=n.slice(a,s);u.push(""),this.applyDelta({start:this.pos(i+a,o),end:this.pos(i+s,o=0),action:t.action,lines:u},!0)}t.lines=n.slice(a),t.start.row=i+a,t.start.column=o,this.applyDelta(t,!0)},this.revertDelta=function(t){this.$safeApplyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:"insert"==t.action?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,e){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=e||0,o=n.length;i<o;i++)if((t-=n[i].length+r)<0)return{row:i,column:t+n[i].length+r};return{row:o-1,column:t+n[o-1].length+r}},this.positionToIndex=function(t,e){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,o=Math.min(t.row,n.length),a=e||0;a<o;++a)i+=n[a].length+r;return i+t.column}}).call(u.prototype),e.Document=u})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/event_emitter").EventEmitter,o=function(t,e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var n=this;this.$worker=function(){if(n.running){for(var t=new Date,e=n.currentLine,r=-1,i=n.doc,o=e;n.lines[e];)e++;var a=i.getLength(),s=0;for(n.running=!1;e<a;){n.$tokenizeRow(e),r=e;do{e++}while(n.lines[e]);if(++s%5===0&&new Date-t>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=e,-1==r&&(r=e),o<=r&&n.fireUpdateEvent(o,r)}}};(function(){r.implement(this,i),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(t,e){var n={first:t,last:e};this._signal("update",{data:n})},this.start=function(t){this.currentLine=Math.min(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.lines[e]=null;else if("remove"==t.action)this.lines.splice(e,n+1,null),this.states.splice(e,n+1,null);else{var r=Array(n+1);r.unshift(e,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(e,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||"start"},this.$tokenizeRow=function(t){var e=this.doc.getLine(t),n=this.states[t-1],r=this.tokenizer.getLineTokens(e,n,t);return this.states[t]+""!==r.state+""?(this.states[t]=r.state,this.lines[t+1]=null,this.currentLine>t+1&&(this.currentLine=t+1)):this.currentLine==t&&(this.currentLine=t+1),this.lines[t]=r.tokens}}).call(o.prototype),e.BackgroundTokenizer=o})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(t,e,n){"use strict";var r=t("./lib/lang"),i=(t("./lib/oop"),t("./range").Range),o=function(t,e,n){this.setRegexp(t),this.clazz=e,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+""!=t+""&&(this.regExp=t,this.cache=[])},this.update=function(t,e,n,o){if(this.regExp)for(var a=o.firstRow,s=o.lastRow,u=a;u<=s;u++){var c=this.cache[u];null==c&&((c=r.getMatchOffsets(n.getLine(u),this.regExp)).length>this.MAX_RANGES&&(c=c.slice(0,this.MAX_RANGES)),c=c.map((function(t){return new i(u,t.offset,u,t.offset+t.length)})),this.cache[u]=c.length?c:"");for(var l=c.length;l--;)e.drawSingleLineMarker(t,c[l].toScreenRange(n),this.clazz,o)}}}).call(o.prototype),e.SearchHighlight=o})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var r=t("../range").Range;function i(t,e){this.foldData=t,Array.isArray(e)?this.folds=e:e=this.folds=[e];var n=e[e.length-1];this.range=new r(e[0].start.row,e[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(t){t.setFoldLine(this)}),this)}(function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach((function(e){e.start.row+=t,e.end.row+=t}))},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(t),this.folds.sort((function(t,e){return-t.range.compareEnd(e.start.row,e.start.column)})),this.range.compareEnd(t.start.row,t.start.column)>0?(this.end.row=t.end.row,this.end.column=t.end.column):this.range.compareStart(t.end.row,t.end.column)<0&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(t,e,n){var r,i,o=0,a=this.folds,s=!0;null==e&&(e=this.end.row,n=this.end.column);for(var u=0;u<a.length;u++){if(-1==(i=(r=a[u]).range.compareStart(e,n)))return void t(null,e,n,o,s);if(!t(null,r.start.row,r.start.column,o,s)&&t(r.placeholder,r.start.row,r.start.column,o)||0===i)return;s=!r.sameRow,o=r.end.column}t(null,e,n,o,s)},this.getNextFoldTo=function(t,e){for(var n,r,i=0;i<this.folds.length;i++){if(-1==(r=(n=this.folds[i]).range.compareEnd(t,e)))return{fold:n,kind:"after"};if(0===r)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(t,e,n){var r,i,o=this.getNextFoldTo(t,e);if(o)if(r=o.fold,"inside"==o.kind&&r.start.column!=e&&r.start.row!=t)window.console&&window.console.log(t,e,r);else if(r.start.row==t){var a=(i=this.folds).indexOf(r);for(0===a&&(this.start.column+=n);a<i.length;a++){if((r=i[a]).start.column+=n,!r.sameRow)return;r.end.column+=n}this.end.column+=n}},this.split=function(t,e){var n=this.getNextFoldTo(t,e);if(!n||"inside"==n.kind)return null;var r=n.fold,o=this.folds,a=this.foldData,s=o.indexOf(r),u=o[s-1];this.end.row=u.end.row,this.end.column=u.end.column;var c=new i(a,o=o.splice(s,o.length-s));return a.splice(a.indexOf(this)+1,0,c),c},this.merge=function(t){for(var e=t.folds,n=0;n<e.length;n++)this.addFold(e[n]);var r=this.foldData;r.splice(r.indexOf(t),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach((function(e){t.push("  "+e.toString())})),t.push("]"),t.join("\n")},this.idxToPosition=function(t){for(var e=0,n=0;n<this.folds.length;n++){var r=this.folds[n];if((t-=r.start.column-e)<0)return{row:r.start.row,column:r.start.column+t};if((t-=r.placeholder.length)<0)return r.start;e=r.end.column}return{row:this.end.row,column:this.end.column+t}}}).call(i.prototype),e.FoldLine=i})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var r=t("./range").Range.comparePoints,i=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=r,this.pointIndex=function(t,e,n){for(var i=this.ranges,o=n||0;o<i.length;o++){var a=i[o],s=r(t,a.end);if(!(s>0)){var u=r(t,a.start);return 0===s?e&&0!==u?-o-2:o:u>0||0===u&&!e?o:-o-1}}return-o-1},this.add=function(t){var e=!t.isEmpty(),n=this.pointIndex(t.start,e);n<0&&(n=-n-1);var r=this.pointIndex(t.end,e,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,t)},this.addList=function(t){for(var e=[],n=t.length;n--;)e.push.apply(e,this.add(t[n]));return e},this.substractPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges.splice(e,1)},this.merge=function(){for(var t,e=[],n=this.ranges,i=(n=n.sort((function(t,e){return r(t.start,e.start)})))[0],o=1;o<n.length;o++){t=i,i=n[o];var a=r(t.end,i.start);a<0||(0!=a||t.isEmpty()||i.isEmpty())&&(r(t.end,i.end)<0&&(t.end.row=i.end.row,t.end.column=i.end.column),n.splice(o,1),e.push(i),i=t,o--)}return this.ranges=n,e},this.contains=function(t,e){return this.pointIndex({row:t,column:e})>=0},this.containsPoint=function(t){return this.pointIndex(t)>=0},this.rangeAtPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges[e]},this.clipRows=function(t,e){var n=this.ranges;if(n[0].start.row>e||n[n.length-1].start.row<t)return[];var r=this.pointIndex({row:t,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:e,column:0},r);i<0&&(i=-i-1);for(var o=[],a=r;a<i;a++)o.push(n[a]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(t){for(var e=t.start,n=t.end,r=e.row,i=n.row,o=this.ranges,a=0,s=o.length;a<s;a++){if((l=o[a]).end.row>=r)break}if("insert"==t.action)for(var u=i-r,c=-e.column+n.column;a<s;a++){if((l=o[a]).start.row>r)break;if(l.start.row==r&&l.start.column>=e.column&&(l.start.column==e.column&&this.$bias<=0||(l.start.column+=c,l.start.row+=u)),l.end.row==r&&l.end.column>=e.column){if(l.end.column==e.column&&this.$bias<0)continue;l.end.column==e.column&&c>0&&a<s-1&&l.end.column>l.start.column&&l.end.column==o[a+1].start.column&&(l.end.column-=c),l.end.column+=c,l.end.row+=u}}else for(u=r-i,c=e.column-n.column;a<s;a++){if((l=o[a]).start.row>i)break;l.end.row<i&&(r<l.end.row||r==l.end.row&&e.column<l.end.column)?(l.end.row=r,l.end.column=e.column):l.end.row==i?l.end.column<=n.column?(u||l.end.column>e.column)&&(l.end.column=e.column,l.end.row=e.row):(l.end.column+=c,l.end.row+=u):l.end.row>i&&(l.end.row+=u),l.start.row<i&&(r<l.start.row||r==l.start.row&&e.column<l.start.column)?(l.start.row=r,l.start.column=e.column):l.start.row==i?l.start.column<=n.column?(u||l.start.column>e.column)&&(l.start.column=e.column,l.start.row=e.row):(l.start.column+=c,l.start.row+=u):l.start.row>i&&(l.start.row+=u)}if(0!=u&&a<s)for(;a<s;a++){var l;(l=o[a]).start.row+=u,l.end.row+=u}}}).call(i.prototype),e.RangeList=i})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],(function(t,e,n){"use strict";var r=t("../range_list").RangeList,i=t("../lib/oop"),o=e.Fold=function(t,e){this.foldLine=null,this.placeholder=e,this.range=t,this.start=t.start,this.end=t.end,this.sameRow=t.start.row==t.end.row,this.subFolds=this.ranges=[]};function a(t,e){t.row-=e.row,0==t.row&&(t.column-=e.column)}function s(t,e){0==t.row&&(t.column+=e.column),t.row+=e.row}i.inherits(o,r),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach((function(e){e.setFoldLine(t)}))},this.clone=function(){var t=this.range.clone(),e=new o(t,this.placeholder);return this.subFolds.forEach((function(t){e.subFolds.push(t.clone())})),e.collapseChildren=this.collapseChildren,e},this.addSubFold=function(t){if(!this.range.isEqual(t)){var e,n;e=t,n=this.start,a(e.start,n),a(e.end,n);for(var r=t.start.row,i=t.start.column,o=0,s=-1;o<this.subFolds.length&&1==(s=this.subFolds[o].range.compare(r,i));o++);var u=this.subFolds[o],c=0;if(0==s){if(u.range.containsRange(t))return u.addSubFold(t);c=1}r=t.range.end.row,i=t.range.end.column;var l=o;for(s=-1;l<this.subFolds.length&&1==(s=this.subFolds[l].range.compare(r,i));l++);0==s&&l++;for(var f=this.subFolds.splice(o,l-o,t),h=0==s?f.length-1:f.length,d=c;d<h;d++)t.addSubFold(f[d]);return t.setFoldLine(this.foldLine),t}},this.restoreRange=function(t){return function(t,e){s(t.start,e),s(t.end,e)}(t,this.start)}}.call(o.prototype)})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(t,e,n){"use strict";var r=t("../range").Range,i=t("./fold_line").FoldLine,o=t("./fold").Fold,a=t("../token_iterator").TokenIterator;e.Folding=function(){this.getFoldAt=function(t,e,n){var r=this.getFoldLine(t);if(!r)return null;for(var i=r.folds,o=0;o<i.length;o++){var a=i[o].range;if(a.contains(t,e)){if(1==n&&a.isEnd(t,e)&&!a.isEmpty())continue;if(-1==n&&a.isStart(t,e)&&!a.isEmpty())continue;return i[o]}}},this.getFoldsInRange=function(t){var e=t.start,n=t.end,r=this.$foldData,i=[];e.column+=1,n.column-=1;for(var o=0;o<r.length;o++){var a=r[o].range.compareRange(t);if(2!=a){if(-2==a)break;for(var s=r[o].folds,u=0;u<s.length;u++){var c=s[u];if(-2==(a=c.range.compareRange(t)))break;if(2!=a){if(42==a)break;i.push(c)}}}}return e.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(t){if(Array.isArray(t)){var e=[];t.forEach((function(t){e=e.concat(this.getFoldsInRange(t))}),this)}else e=this.getFoldsInRange(t);return e},this.getAllFolds=function(){for(var t=[],e=this.$foldData,n=0;n<e.length;n++)for(var r=0;r<e[n].folds.length;r++)t.push(e[n].folds[r]);return t},this.getFoldStringAt=function(t,e,n,r){if(!(r=r||this.getFoldLine(t)))return null;for(var i,o,a={end:{column:0}},s=0;s<r.folds.length;s++){var u=(o=r.folds[s]).range.compareEnd(t,e);if(-1==u){i=this.getLine(o.start.row).substring(a.end.column,o.start.column);break}if(0===u)return null;a=o}return i||(i=this.getLine(o.start.row).substring(a.end.column)),-1==n?i.substring(0,e-a.end.column):1==n?i.substring(e-a.end.column):i},this.getFoldLine=function(t,e){var n=this.$foldData,r=0;for(e&&(r=n.indexOf(e)),-1==r&&(r=0);r<n.length;r++){var i=n[r];if(i.start.row<=t&&i.end.row>=t)return i;if(i.end.row>t)return null}return null},this.getNextFoldLine=function(t,e){var n=this.$foldData,r=0;for(e&&(r=n.indexOf(e)),-1==r&&(r=0);r<n.length;r++){var i=n[r];if(i.end.row>=t)return i}return null},this.getFoldedRowCount=function(t,e){for(var n=this.$foldData,r=e-t+1,i=0;i<n.length;i++){var o=n[i],a=o.end.row,s=o.start.row;if(a>=e){s<e&&(s>=t?r-=e-s:r=0);break}a>=t&&(r-=s>=t?a-s:a-t+1)}return r},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort((function(t,e){return t.start.row-e.start.row})),t},this.addFold=function(t,e){var n,r=this.$foldData,a=!1;t instanceof o?n=t:(n=new o(e,t)).collapseChildren=e.collapseChildren,this.$clipRangeToDocument(n.range);var s=n.start.row,u=n.start.column,c=n.end.row,l=n.end.column,f=this.getFoldAt(s,u,1),h=this.getFoldAt(c,l,-1);if(f&&h==f)return f.addSubFold(n);f&&!f.range.isStart(s,u)&&this.removeFold(f),h&&!h.range.isEnd(c,l)&&this.removeFold(h);var d=this.getFoldsInRange(n.range);d.length>0&&(this.removeFolds(d),d.forEach((function(t){n.addSubFold(t)})));for(var p=0;p<r.length;p++){var g=r[p];if(c==g.start.row){g.addFold(n),a=!0;break}if(s==g.end.row){if(g.addFold(n),a=!0,!n.sameRow){var v=r[p+1];if(v&&v.start.row==c){g.merge(v);break}}break}if(c<=g.start.row)break}return a||(g=this.$addFoldLine(new i(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(t){t.forEach((function(t){this.addFold(t)}),this)},this.removeFold=function(t){var e=t.foldLine,n=e.start.row,r=e.end.row,i=this.$foldData,o=e.folds;if(1==o.length)i.splice(i.indexOf(e),1);else if(e.range.isEnd(t.end.row,t.end.column))o.pop(),e.end.row=o[o.length-1].end.row,e.end.column=o[o.length-1].end.column;else if(e.range.isStart(t.start.row,t.start.column))o.shift(),e.start.row=o[0].start.row,e.start.column=o[0].start.column;else if(t.sameRow)o.splice(o.indexOf(t),1);else{var a=e.split(t.start.row,t.start.column);(o=a.folds).shift(),a.start.row=o[0].start.row,a.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);e.forEach((function(t){this.removeFold(t)}),this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach((function(e){t.restoreRange(e),this.addFold(e)}),this),t.collapseChildren>0&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach((function(t){this.expandFold(t)}),this)},this.unfold=function(t,e){var n,i;if(null==t?(n=new r(0,0,this.getLength(),0),e=!0):n="number"==typeof t?new r(t,0,t,this.getLine(t).length):"row"in t?r.fromPoints(t,t):t,i=this.getFoldsInRangeList(n),e)this.removeFolds(i);else for(var o=i;o.length;)this.expandFolds(o),o=this.getFoldsInRangeList(n);if(i.length)return i},this.isRowFolded=function(t,e){return!!this.getFoldLine(t,e)},this.getRowFoldEnd=function(t,e){var n=this.getFoldLine(t,e);return n?n.end.row:t},this.getRowFoldStart=function(t,e){var n=this.getFoldLine(t,e);return n?n.start.row:t},this.getFoldDisplayLine=function(t,e,n,r,i){null==r&&(r=t.start.row),null==i&&(i=0),null==e&&(e=t.end.row),null==n&&(n=this.getLine(e).length);var o=this.doc,a="";return t.walk((function(t,e,n,s){if(!(e<r)){if(e==r){if(n<i)return;s=Math.max(i,s)}a+=null!=t?t:o.getLine(e).substring(s,n)}}),e,n),a},this.getDisplayLine=function(t,e,n,r){var i,o=this.getFoldLine(t);return o?this.getFoldDisplayLine(o,t,e,n,r):(i=this.doc.getLine(t)).substring(r||0,e||i.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map((function(e){var n=e.folds.map((function(t){return t.clone()}));return new i(t,n)}))},this.toggleFold=function(t){var e,n,r=this.selection.getRange();if(r.isEmpty()){var i=r.start;if(e=this.getFoldAt(i.row,i.column))return void this.expandFold(e);(n=this.findMatchingBracket(i))?1==r.comparePoint(n)?r.end=n:(r.start=n,r.start.column++,r.end.column--):(n=this.findMatchingBracket({row:i.row,column:i.column+1}))?(1==r.comparePoint(n)?r.end=n:r.start=n,r.start.column++):r=this.getCommentFoldRange(i.row,i.column)||r}else{var o=this.getFoldsInRange(r);if(t&&o.length)return void this.expandFolds(o);1==o.length&&(e=o[0])}if(e||(e=this.getFoldAt(r.start.row,r.start.column)),e&&e.range.toString()==r.toString())this.expandFold(e);else{var a="...";if(!r.isMultiLine()){if((a=this.getTextRange(r)).length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,r)}},this.getCommentFoldRange=function(t,e,n){var i=new a(this,t,e),o=i.getCurrentToken(),s=o.type;if(o&&/^comment|string/.test(s)){"comment"==(s=s.match(/comment|string/)[0])&&(s+="|doc-start");var u=new RegExp(s),c=new r;if(1!=n){do{o=i.stepBackward()}while(o&&u.test(o.type));i.stepForward()}if(c.start.row=i.getCurrentTokenRow(),c.start.column=i.getCurrentTokenColumn()+2,i=new a(this,t,e),-1!=n){var l=-1;do{if(o=i.stepForward(),-1==l){var f=this.getState(i.$row);u.test(f)||(l=i.$row)}else if(i.$row>l)break}while(o&&u.test(o.type));o=i.stepBackward()}else o=i.getCurrentToken();return c.end.row=i.getCurrentTokenRow(),c.end.column=i.getCurrentTokenColumn()+o.value.length-2,c}},this.foldAll=function(t,e,n){void 0==n&&(n=1e5);var r=this.foldWidgets;if(r){e=e||this.getLength();for(var i=t=t||0;i<e;i++)if(null==r[i]&&(r[i]=this.getFoldWidget(i)),"start"==r[i]){var o=this.getFoldWidgetRange(i);if(o&&o.isMultiLine()&&o.end.row<=e&&o.start.row>=t){i=o.end.row;try{var a=this.addFold("...",o);a&&(a.collapseChildren=n)}catch(s){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=t){this.$foldStyle=t,"manual"==t&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){this.$foldMode!=t&&(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),t&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(t,e){var n=this.foldWidgets;if(!n||e&&n[t])return{};for(var r,i=t-1;i>=0;){var o=n[i];if(null==o&&(o=n[i]=this.getFoldWidget(i)),"start"==o){var a=this.getFoldWidgetRange(i);if(r||(r=a),a&&a.end.row>=t)break}i--}return{range:-1!==i&&a,firstRange:r}},this.onFoldWidgetClick=function(t,e){var n={children:(e=e.domEvent).shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey};if(!this.$toggleFoldWidget(t,n)){var r=e.target||e.srcElement;r&&/ace_fold-widget/.test(r.className)&&(r.className+=" ace_invalid")}},this.$toggleFoldWidget=function(t,e){if(this.getFoldWidget){var n=this.getFoldWidget(t),r=this.getLine(t),i="end"===n?-1:1,o=this.getFoldAt(t,-1===i?0:r.length,i);if(o)return e.children||e.all?this.removeFold(o):this.expandFold(o),o;var a=this.getFoldWidgetRange(t,!0);if(a&&!a.isMultiLine()&&(o=this.getFoldAt(a.start.row,a.start.column,1))&&a.isEqual(o.range))return this.removeFold(o),o;if(e.siblings){var s=this.getParentFoldRangeData(t);if(s.range)var u=s.range.start.row+1,c=s.range.end.row;this.foldAll(u,c,e.all?1e4:0)}else e.children?(c=a?a.end.row:this.getLength(),this.foldAll(t+1,c,e.all?1e4:0)):a&&(e.all&&(a.collapseChildren=1e4),this.addFold("...",a));return a}},this.toggleFoldWidget=function(t){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var n=this.$toggleFoldWidget(e,{});if(!n){var r=this.getParentFoldRangeData(e,!0);if(n=r.range||r.firstRange){e=n.start.row;var i=this.getFoldAt(e,this.getLine(e).length,1);i?this.removeFold(i):this.addFold("...",n)}}},this.updateFoldWidgets=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.foldWidgets[e]=null;else if("remove"==t.action)this.foldWidgets.splice(e,n+1,null);else{var r=Array(n+1);r.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,r)}},this.tokenizerUpdateFoldWidgets=function(t){var e=t.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(t,e,n){"use strict";var r=t("../token_iterator").TokenIterator,i=t("../range").Range;e.BracketMatch=function(){this.findMatchingBracket=function(t,e){if(0==t.column)return null;var n=e||this.getLine(t.row).charAt(t.column-1);if(""==n)return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],t):this.$findOpeningBracket(r[2],t):null},this.getBracketRange=function(t){var e,n=this.getLine(t.row),r=!0,o=n.charAt(t.column-1),a=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(a||(o=n.charAt(t.column),t={row:t.row,column:t.column+1},a=o&&o.match(/([\(\[\{])|([\)\]\}])/),r=!1),!a)return null;if(a[1]){if(!(s=this.$findClosingBracket(a[1],t)))return null;e=i.fromPoints(t,s),r||(e.end.column++,e.start.column--),e.cursor=e.end}else{var s;if(!(s=this.$findOpeningBracket(a[2],t)))return null;e=i.fromPoints(s,t),r||(e.start.column++,e.end.column--),e.cursor=e.start}return e},this.getMatchingBracketRanges=function(t){var e=this.getLine(t.row),n=e.charAt(t.column-1),r=n&&n.match(/([\(\[\{])|([\)\]\}])/);if(r||(n=e.charAt(t.column),t={row:t.row,column:t.column+1},r=n&&n.match(/([\(\[\{])|([\)\]\}])/)),!r)return null;var o=new i(t.row,t.column-1,t.row,t.column),a=r[1]?this.$findClosingBracket(r[1],t):this.$findOpeningBracket(r[2],t);return a?[o,new i(a.row,a.column,a.row,a.column+1)]:[o]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(t,e,n){var i=this.$brackets[t],o=1,a=new r(this,e.row,e.column),s=a.getCurrentToken();if(s||(s=a.stepForward()),s){n||(n=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var u=e.column-a.getCurrentTokenColumn()-2,c=s.value;;){for(;u>=0;){var l=c.charAt(u);if(l==i){if(0==(o-=1))return{row:a.getCurrentTokenRow(),column:u+a.getCurrentTokenColumn()}}else l==t&&(o+=1);u-=1}do{s=a.stepBackward()}while(s&&!n.test(s.type));if(null==s)break;u=(c=s.value).length-1}return null}},this.$findClosingBracket=function(t,e,n){var i=this.$brackets[t],o=1,a=new r(this,e.row,e.column),s=a.getCurrentToken();if(s||(s=a.stepForward()),s){n||(n=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var u=e.column-a.getCurrentTokenColumn();;){for(var c=s.value,l=c.length;u<l;){var f=c.charAt(u);if(f==i){if(0==(o-=1))return{row:a.getCurrentTokenRow(),column:u+a.getCurrentTokenColumn()}}else f==t&&(o+=1);u+=1}do{s=a.stepForward()}while(s&&!n.test(s.type));if(null==s)break;u=0}return null}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/lang"),o=t("./bidihandler").BidiHandler,a=t("./config"),s=t("./lib/event_emitter").EventEmitter,u=t("./selection").Selection,c=t("./mode/text").Mode,l=t("./range").Range,f=t("./document").Document,h=t("./background_tokenizer").BackgroundTokenizer,d=t("./search_highlight").SearchHighlight,p=function t(e,n){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++t.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new f(e)),this.setDocument(e),this.selection=new u(this),this.$bidiHandler=new o(this),a.resetOptions(this),this.setMode(n),a._signal("session",this)};p.$uid=0,function(){r.implement(this,s),this.setDocument=function(t){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=t,t.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(t){if(!t)return this.$docRowCache=[],void(this.$screenRowCache=[]);var e=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,t)+1;e>n&&(this.$docRowCache.splice(n,e),this.$screenRowCache.splice(n,e))},this.$getRowCacheIndex=function(t,e){for(var n=0,r=t.length-1;n<=r;){var i=n+r>>1,o=t[i];if(e>o)n=i+1;else{if(!(e<o))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(t){var e=t.data;this.$resetRowCache(e.start.row)},this.onChange=function(t){this.$modified=!0,this.$bidiHandler.onChange(t),this.$resetRowCache(t.start.row);var e=this.$updateInternalDataOnChange(t);!this.$fromUndo&&this.$undoManager&&(e&&e.length&&(this.$undoManager.add({action:"removeFolds",folds:e},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(t,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",t)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(t,e){var n,r=this.bgTokenizer.getTokens(t),i=0;if(null==e){var o=r.length-1;i=this.getLine(t).length}else for(o=0;o<r.length&&!((i+=r[o].value.length)>=e);o++);return(n=r[o])?(n.index=o,n.start=i-n.value.length,n):null},this.setUndoManager=function(t){if(this.$undoManager=t,this.$informUndoManager&&this.$informUndoManager.cancel(),t){var e=this;t.addSession(this),this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.mergeUndoDeltas=!1},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(t){this.setOption("useSoftTabs",t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption("tabSize",t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&t.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(t){this.setOption("navigateWithinSoftTabs",t)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption("overwrite",t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(t,e){this.$decorations[t]||(this.$decorations[t]=""),this.$decorations[t]+=" "+e,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(t,e){this.$decorations[t]=(this.$decorations[t]||"").replace(" "+e,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(t){this.$breakpoints=[];for(var e=0;e<t.length;e++)this.$breakpoints[t[e]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(t,e){void 0===e&&(e="ace_breakpoint"),e?this.$breakpoints[t]=e:delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.addMarker=function(t,e,n,r){var i=this.$markerId++,o={range:t,type:n||"line",renderer:"function"==typeof n?n:null,clazz:e,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=o,this._signal("changeFrontMarker")):(this.$backMarkers[i]=o,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(t,e){if(t.update){var n=this.$markerId++;return t.id=n,t.inFront=!!e,e?(this.$frontMarkers[n]=t,this._signal("changeFrontMarker")):(this.$backMarkers[n]=t,this._signal("changeBackMarker")),t}},this.removeMarker=function(t){var e=this.$frontMarkers[t]||this.$backMarkers[t];e&&(delete(e.inFront?this.$frontMarkers:this.$backMarkers)[t],this._signal(e.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(t){if(!this.$searchHighlight){var e=new d(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(e)}this.$searchHighlight.setRegexp(t)},this.highlightLines=function(t,e,n,r){"number"!=typeof e&&(n=e,e=t),n||(n="ace_step");var i=new l(t,0,e,1/0);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(t){this.$annotations=t,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:"\n"},this.getWordRange=function(t,e){var n=this.getLine(t),r=!1;if(e>0&&(r=!!n.charAt(e-1).match(this.tokenRe)),r||(r=!!n.charAt(e).match(this.tokenRe)),r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(e-1,e+1)))i=/\s/;else i=this.nonTokenRe;var o=e;if(o>0){do{o--}while(o>=0&&n.charAt(o).match(i));o++}for(var a=e;a<n.length&&n.charAt(a).match(i);)a++;return new l(t,o,t,a)},this.getAWordRange=function(t,e){for(var n=this.getWordRange(t,e),r=this.getLine(n.end.row);r.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption("useWorker",t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(t){var e=t.data;this.bgTokenizer.start(e.first),this._signal("tokenizerUpdate",t)},this.$modes=a.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(t,e){if(t&&"object"===typeof t){if(t.getTokenizer)return this.$onChangeMode(t);var n=t,r=n.path}else r=t||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[r]&&!n)return this.$onChangeMode(this.$modes[r]),void(e&&e());this.$modeId=r,a.loadModule(["mode",r],function(t){if(this.$modeId!==r)return e&&e();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):t&&t.Mode&&(t=new t.Mode(n),n||(this.$modes[r]=t,t.$id=r),this.$onChangeMode(t)),e&&e()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(t,e){if(e||(this.$modeId=t.$id),this.$mode!==t){var n=this.$mode;this.$mode=t,this.$stopWorker(),this.$useWorker&&this.$startWorker();var r=t.getTokenizer();if(void 0!==r.on){var i=this.onReloadTokenizer.bind(this);r.on("update",i)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(r);else{this.bgTokenizer=new h(r);var o=this;this.bgTokenizer.on("update",(function(t){o._signal("tokenizerUpdate",t)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=t.tokenRe,this.nonTokenRe=t.nonTokenRe,e||(t.attachToSession&&t.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(t.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:t}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){a.warn("Could not load worker",t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal("changeScrollTop",t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal("changeScrollLeft",t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach((function(e){e&&e.screenWidth>t&&(t=e.screenWidth)})),this.lineWidgetWidth=t},this.$computeWidth=function(t){if(this.$modified||t){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,o=this.$foldData[i],a=o?o.start.row:1/0,s=e.length,u=0;u<s;u++){if(u>a){if((u=o.end.row+1)>=s)break;a=(o=this.$foldData[i++])?o.start.row:1/0}null==n[u]&&(n[u]=this.$getStringScreenWidth(e[u])[0]),n[u]>r&&(r=n[u])}this.screenWidth=r}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(t,e){return this.doc.getLines(t,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(t,e){return this.doc.insert(t,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(t,e){return this.doc.removeFullLines(t,e)},this.undoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=t.length-1;-1!=n;n--){var r=t[n];"insert"==r.action||"remove"==r.action?this.doc.revertDelta(r):r.folds&&this.addFolds(r.folds)}!e&&this.$undoSelect&&(t.selectionBefore?this.selection.fromJSON(t.selectionBefore):this.selection.setRange(this.$getUndoSelection(t,!0))),this.$fromUndo=!1}},this.redoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=0;n<t.length;n++){var r=t[n];"insert"!=r.action&&"remove"!=r.action||this.doc.$safeApplyDelta(r)}!e&&this.$undoSelect&&(t.selectionAfter?this.selection.fromJSON(t.selectionAfter):this.selection.setRange(this.$getUndoSelection(t,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(t,e){function n(t){return e?"insert"!==t.action:"insert"===t.action}for(var r,i,o=0;o<t.length;o++){var a=t[o];a.start&&(r?n(a)?(i=a.start,-1==r.compare(i.row,i.column)&&r.setStart(i),i=a.end,1==r.compare(i.row,i.column)&&r.setEnd(i)):(i=a.start,-1==r.compare(i.row,i.column)&&(r=l.fromPoints(a.start,a.start))):r=n(a)?l.fromPoints(a.start,a.end):l.fromPoints(a.start,a.start))}return r},this.replace=function(t,e){return this.doc.replace(t,e)},this.moveText=function(t,e,n){var r=this.getTextRange(t),i=this.getFoldsInRange(t),o=l.fromPoints(e,e);if(!n){this.remove(t);var a=t.start.row-t.end.row;(c=a?-t.end.column:t.start.column-t.end.column)&&(o.start.row==t.end.row&&o.start.column>t.end.column&&(o.start.column+=c),o.end.row==t.end.row&&o.end.column>t.end.column&&(o.end.column+=c)),a&&o.start.row>=t.end.row&&(o.start.row+=a,o.end.row+=a)}if(o.end=this.insert(o.start,r),i.length){var s=t.start,u=o.start,c=(a=u.row-s.row,u.column-s.column);this.addFolds(i.map((function(t){return(t=t.clone()).start.row==s.row&&(t.start.column+=c),t.end.row==s.row&&(t.end.column+=c),t.start.row+=a,t.end.row+=a,t})))}return o},this.indentRows=function(t,e,n){n=n.replace(/\t/g,this.getTabString());for(var r=t;r<=e;r++)this.doc.insertInLine({row:r,column:0},n)},this.outdentRows=function(t){for(var e=t.collapseRows(),n=new l(0,0,0,0),r=this.getTabSize(),i=e.start.row;i<=e.end.row;++i){var o=this.getLine(i);n.start.row=i,n.end.row=i;for(var a=0;a<r&&" "==o.charAt(a);++a);a<r&&"\t"==o.charAt(a)?(n.start.column=a,n.end.column=a+1):(n.start.column=0,n.end.column=a),this.remove(n)}},this.$moveLines=function(t,e,n){if(t=this.getRowFoldStart(t),e=this.getRowFoldEnd(e),n<0){if((i=this.getRowFoldStart(t+n))<0)return 0;var r=i-t}else if(n>0){var i;if((i=this.getRowFoldEnd(e+n))>this.doc.getLength()-1)return 0;r=i-e}else{t=this.$clipRowToDocument(t);r=(e=this.$clipRowToDocument(e))-t+1}var o=new l(t,0,e,Number.MAX_VALUE),a=this.getFoldsInRange(o).map((function(t){return(t=t.clone()).start.row+=r,t.end.row+=r,t})),s=0==n?this.doc.getLines(t,e):this.doc.removeFullLines(t,e);return this.doc.insertFullLines(t+r,s),a.length&&this.addFolds(a),r},this.moveLinesUp=function(t,e){return this.$moveLines(t,e,-1)},this.moveLinesDown=function(t,e){return this.$moveLines(t,e,1)},this.duplicateLines=function(t,e){return this.$moveLines(t,e,0)},this.$clipRowToDocument=function(t){return Math.max(0,Math.min(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(t,e){return e<0?0:Math.min(this.doc.getLine(t).length,e)},this.$clipPositionToDocument=function(t,e){if(e=Math.max(0,e),t<0)t=0,e=0;else{var n=this.doc.getLength();t>=n?(t=n-1,e=this.doc.getLine(n-1).length):e=Math.min(this.doc.getLine(t).length,e)}return{row:t,column:e}},this.$clipRangeToDocument=function(t){t.start.row<0?(t.start.row=0,t.start.column=0):t.start.column=this.$clipColumnToRow(t.start.row,t.start.column);var e=this.doc.getLength()-1;return t.end.row>e?(t.end.row=e,t.end.column=this.doc.getLine(e).length):t.end.column=this.$clipColumnToRow(t.end.row,t.end.column),t},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(t){if(t!=this.$useWrapMode){if(this.$useWrapMode=t,this.$modified=!0,this.$resetRowCache(0),t){var e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(t,e){this.$wrapLimitRange.min===t&&this.$wrapLimitRange.max===e||(this.$wrapLimitRange={min:t,max:e},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(t,e){var n=this.$wrapLimitRange;n.max<0&&(n={min:e,max:e});var r=this.$constrainWrapLimit(t,n.min,n.max);return r!=this.$wrapLimit&&r>1&&(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(t,e,n){return e&&(t=Math.max(e,t)),n&&(t=Math.min(n,t)),t},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(t){var e=this.$useWrapMode,n=t.action,r=t.start,i=t.end,o=r.row,a=i.row,s=a-o,u=null;if(this.$updating=!0,0!=s)if("remove"===n){this[e?"$wrapData":"$rowLengthCache"].splice(o,s);var c=this.$foldData;u=this.getFoldsInRange(t),this.removeFolds(u);var l=0;if(g=this.getFoldLine(i.row)){g.addRemoveChars(i.row,i.column,r.column-i.column),g.shiftRow(-s);var f=this.getFoldLine(o);f&&f!==g&&(f.merge(g),g=f),l=c.indexOf(g)+1}for(;l<c.length;l++){(g=c[l]).start.row>=i.row&&g.shiftRow(-s)}a=o}else{var h=Array(s);h.unshift(o,0);var d=e?this.$wrapData:this.$rowLengthCache;d.splice.apply(d,h);c=this.$foldData,l=0;if(g=this.getFoldLine(o)){var p=g.range.compareInside(r.row,r.column);0==p?(g=g.split(r.row,r.column))&&(g.shiftRow(s),g.addRemoveChars(a,0,i.column-r.column)):-1==p&&(g.addRemoveChars(o,0,i.column-r.column),g.shiftRow(s)),l=c.indexOf(g)+1}for(;l<c.length;l++){var g;(g=c[l]).start.row>=o&&g.shiftRow(s)}}else s=Math.abs(t.start.column-t.end.column),"remove"===n&&(u=this.getFoldsInRange(t),this.removeFolds(u),s=-s),(g=this.getFoldLine(o))&&g.addRemoveChars(o,r.column,s);return e&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,e?this.$updateWrapData(o,a):this.$updateRowLengthCache(o,a),u},this.$updateRowLengthCache=function(t,e,n){this.$rowLengthCache[t]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(n,r){var i,o,a=this.doc.getAllLines(),s=this.getTabSize(),u=this.$wrapData,c=this.$wrapLimit,l=n;for(r=Math.min(r,a.length-1);l<=r;)(o=this.getFoldLine(l,o))?(i=[],o.walk(function(n,r,o,s){var u;if(null!=n){(u=this.$getDisplayTokens(n,i.length))[0]=t;for(var c=1;c<u.length;c++)u[c]=e}else u=this.$getDisplayTokens(a[r].substring(s,o),i.length);i=i.concat(u)}.bind(this),o.end.row,a[o.end.row].length+1),u[o.start.row]=this.$computeWrapSplits(i,c,s),l=o.end.row+1):(i=this.$getDisplayTokens(a[l]),u[l]=this.$computeWrapSplits(i,c,s),l++)};var t=3,e=4;function n(t){return!(t<4352)&&(t>=4352&&t<=4447||t>=4515&&t<=4519||t>=4602&&t<=4607||t>=9001&&t<=9002||t>=11904&&t<=11929||t>=11931&&t<=12019||t>=12032&&t<=12245||t>=12272&&t<=12283||t>=12288&&t<=12350||t>=12353&&t<=12438||t>=12441&&t<=12543||t>=12549&&t<=12589||t>=12593&&t<=12686||t>=12688&&t<=12730||t>=12736&&t<=12771||t>=12784&&t<=12830||t>=12832&&t<=12871||t>=12880&&t<=13054||t>=13056&&t<=19903||t>=19968&&t<=42124||t>=42128&&t<=42182||t>=43360&&t<=43388||t>=44032&&t<=55203||t>=55216&&t<=55238||t>=55243&&t<=55291||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65106||t>=65108&&t<=65126||t>=65128&&t<=65131||t>=65281&&t<=65376||t>=65504&&t<=65510)}this.$computeWrapSplits=function(n,r,i){if(0==n.length)return[];var o=[],a=n.length,s=0,u=0,c=this.$wrapAsCode,l=this.$indentedSoftWrap,f=r<=Math.max(2*i,8)||!1===l?0:Math.floor(r/2);function h(t){for(var e=t-s,r=s;r<t;r++){var a=n[r];12!==a&&2!==a||(e-=1)}o.length||(d=function(){var t=0;if(0===f)return t;if(l)for(var e=0;e<n.length;e++){var r=n[e];if(10==r)t+=1;else{if(11!=r){if(12==r)continue;break}t+=i}}return c&&!1!==l&&(t+=i),Math.min(t,f)}(),o.indent=d),u+=e,o.push(u),s=t}for(var d=0;a-s>r-d;){var p=s+r-d;if(n[p-1]>=10&&n[p]>=10)h(p);else if(n[p]!=t&&n[p]!=e){for(var g=Math.max(p-(r-(r>>2)),s-1);p>g&&n[p]<t;)p--;if(c){for(;p>g&&n[p]<t;)p--;for(;p>g&&9==n[p];)p--}else for(;p>g&&n[p]<10;)p--;p>g?h(++p):(2==n[p=s+r]&&p--,h(p-d))}else{for(;p!=s-1&&n[p]!=t;p--);if(p>s){h(p);continue}for(p=s+r;p<n.length&&n[p]==e;p++);if(p==n.length)break;h(p)}}return o},this.$getDisplayTokens=function(t,e){var r,i=[];e=e||0;for(var o=0;o<t.length;o++){var a=t.charCodeAt(o);if(9==a){r=this.getScreenTabSize(i.length+e),i.push(11);for(var s=1;s<r;s++)i.push(12)}else 32==a?i.push(10):a>39&&a<48||a>57&&a<64?i.push(9):a>=4352&&n(a)?i.push(1,2):i.push(1)}return i},this.$getStringScreenWidth=function(t,e,r){if(0==e)return[0,0];var i,o;for(null==e&&(e=1/0),r=r||0,o=0;o<t.length&&(9==(i=t.charCodeAt(o))?r+=this.getScreenTabSize(r):i>=4352&&n(i)?r+=2:r+=1,!(r>e));o++);return[r,o]},this.lineWidgets=null,this.getRowLength=function(t){var e=1;return this.lineWidgets&&(e+=this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0),this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+e:e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(t){if(this.$useWrapMode){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE),n=this.$wrapData[e.row];return n.length&&n[0]<e.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(t){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(t,e){var n=this.documentToScreenRow(t,e);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(t,e){var n=this.documentToScreenRow(t,e);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-(t%this.$tabSize|0)},this.screenToDocumentRow=function(t,e){return this.screenToDocumentPosition(t,e).row},this.screenToDocumentColumn=function(t,e){return this.screenToDocumentPosition(t,e).column},this.screenToDocumentPosition=function(t,e,n){if(t<0)return{row:0,column:0};var r,i,o=0,a=0,s=0,u=0,c=this.$screenRowCache,l=this.$getRowCacheIndex(c,t),f=c.length;if(f&&l>=0){s=c[l],o=this.$docRowCache[l];var h=t>c[f-1]}else h=!f;for(var d=this.getLength()-1,p=this.getNextFoldLine(o),g=p?p.start.row:1/0;s<=t&&!(s+(u=this.getRowLength(o))>t||o>=d);)s+=u,++o>g&&(o=p.end.row+1,g=(p=this.getNextFoldLine(o,p))?p.start.row:1/0),h&&(this.$docRowCache.push(o),this.$screenRowCache.push(s));if(p&&p.start.row<=o)r=this.getFoldDisplayLine(p),o=p.start.row;else{if(s+u<=t||o>d)return{row:d,column:this.getLine(d).length};r=this.getLine(o),p=null}var v=0,m=Math.floor(t-s);if(this.$useWrapMode){var y=this.$wrapData[o];y&&(i=y[m],m>0&&y.length&&(v=y.indent,a=y[m-1]||y[y.length-1],r=r.substring(a)))}return void 0!==n&&this.$bidiHandler.isBidiRow(s+m,o,m)&&(e=this.$bidiHandler.offsetToCol(n)),a+=this.$getStringScreenWidth(r,e-v)[1],this.$useWrapMode&&a>=i&&(a=i-1),p?p.idxToPosition(a):{row:o,column:a}},this.documentToScreenPosition=function(t,e){if("undefined"===typeof e)var n=this.$clipPositionToDocument(t.row,t.column);else n=this.$clipPositionToDocument(t,e);t=n.row,e=n.column;var r,i=0,o=null;(r=this.getFoldAt(t,e,1))&&(t=r.start.row,e=r.start.column);var a,s=0,u=this.$docRowCache,c=this.$getRowCacheIndex(u,t),l=u.length;if(l&&c>=0){s=u[c],i=this.$screenRowCache[c];var f=t>u[l-1]}else f=!l;for(var h=this.getNextFoldLine(s),d=h?h.start.row:1/0;s<t;){if(s>=d){if((a=h.end.row+1)>t)break;d=(h=this.getNextFoldLine(a,h))?h.start.row:1/0}else a=s+1;i+=this.getRowLength(s),s=a,f&&(this.$docRowCache.push(s),this.$screenRowCache.push(i))}var p="";h&&s>=d?(p=this.getFoldDisplayLine(h,t,e),o=h.start.row):(p=this.getLine(t).substring(0,e),o=t);var g=0;if(this.$useWrapMode){var v=this.$wrapData[o];if(v){for(var m=0;p.length>=v[m];)i++,m++;p=p.substring(v[m-1]||0,p.length),g=m>0?v.indent:0}}return this.lineWidgets&&this.lineWidgets[s]&&this.lineWidgets[s].rowsAbove&&(i+=this.lineWidgets[s].rowsAbove),{row:i,column:g+this.$getStringScreenWidth(p)[0]}},this.documentToScreenColumn=function(t,e){return this.documentToScreenPosition(t,e).column},this.documentToScreenRow=function(t,e){return this.documentToScreenPosition(t,e).row},this.getScreenLength=function(){var t=0,e=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,r=0,i=(s=0,(e=this.$foldData[s++])?e.start.row:1/0);r<n;){var o=this.$wrapData[r];t+=o?o.length+1:1,++r>i&&(r=e.end.row+1,i=(e=this.$foldData[s++])?e.start.row:1/0)}else{t=this.getLength();for(var a=this.$foldData,s=0;s<a.length;s++)t-=(e=a[s]).end.row-e.start.row}return this.lineWidgets&&(t+=this.$getWidgetScreenLength()),t},this.$setFontMetrics=function(t){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,n,r){if(0===n)return[0,0];var i,o;for(n||(n=1/0),r=r||0,o=0;o<e.length&&!((r+="\t"===(i=e.charAt(o))?this.getScreenTabSize(r):t.getCharacterWidth(i))>n);o++);return[r,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.selection.detach()},this.isFullWidth=n}.call(p.prototype),t("./edit_session/folding").Folding.call(p.prototype),t("./edit_session/bracket_match").BracketMatch.call(p.prototype),a.defineOptions(p.prototype,"session",{wrap:{set:function(t){if(t&&"off"!=t?"free"==t?t=!0:"printMargin"==t?t=-1:"string"==typeof t&&(t=parseInt(t,10)||!1):t=!1,this.$wrap!=t)if(this.$wrap=t,t){var e="number"==typeof t?t:null;this.setWrapLimitRange(e,e),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(t){(t="auto"==t?"text"!=this.$mode.type:"text"!=t)!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){(t=parseInt(t))>0&&this.$tabSize!==t&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(t){this.setFoldStyle(t)},handlesSet:!0},overwrite:{set:function(t){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId},handlesSet:!0}}),e.EditSession=p})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(t,e,n){"use strict";var r=t("./lib/lang"),i=t("./lib/oop"),o=t("./range").Range,a=function(){this.$options={}};(function(){this.set=function(t){return i.mixin(this.$options,t),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(t){var e=this.$options,n=this.$matchIterator(t,e);if(!n)return!1;var r=null;return n.forEach((function(t,n,i,a){return r=new o(t,n,i,a),!(n==a&&e.start&&e.start.start&&0!=e.skipCurrent&&r.isEqual(e.start))||(r=null,!1)})),r},this.findAll=function(t){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var n=e.range,i=n?t.getLines(n.start.row,n.end.row):t.doc.getAllLines(),a=[],s=e.re;if(e.$isMultiLine){var u,c=s.length,l=i.length-c;t:for(var f=s.offset||0;f<=l;f++){for(var h=0;h<c;h++)if(-1==i[f+h].search(s[h]))continue t;var d=i[f],p=i[f+c-1],g=d.length-d.match(s[0])[0].length,v=p.match(s[c-1])[0].length;u&&u.end.row===f&&u.end.column>g||(a.push(u=new o(f,g,f+c-1,v)),c>2&&(f=f+c-2))}}else for(var m=0;m<i.length;m++){var y=r.getMatchOffsets(i[m],s);for(h=0;h<y.length;h++){var b=y[h];a.push(new o(m,b.offset,m,b.offset+b.length))}}if(n){var w=n.start.column,x=n.start.column;for(m=0,h=a.length-1;m<h&&a[m].start.column<w&&a[m].start.row==n.start.row;)m++;for(;m<h&&a[h].end.column>x&&a[h].end.row==n.end.row;)h--;for(a=a.slice(m,h+1),m=0,h=a.length;m<h;m++)a[m].start.row+=n.start.row,a[m].end.row+=n.start.row}return a},this.replace=function(t,e){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return e;if(r){var i=r.exec(t);if(!i||i[0].length!=t.length)return null;if(e=t.replace(r,e),n.preserveCase){e=e.split("");for(var o=Math.min(t.length,t.length);o--;){var a=t[o];a&&a.toLowerCase()!=a?e[o]=e[o].toUpperCase():e[o]=e[o].toLowerCase()}e=e.join("")}return e}},this.$assembleRegExp=function(t,e){if(t.needle instanceof RegExp)return t.re=t.needle;var n=t.needle;if(!t.needle)return t.re=!1;t.regExp||(n=r.escapeRegExp(n)),t.wholeWord&&(n=function(t,e){function n(t){return/\w/.test(t)||e.regExp?"\\b":""}return n(t[0])+t+n(t[t.length-1])}(n,t));var i=t.caseSensitive?"gm":"gmi";if(t.$isMultiLine=!e&&/[\n\r]/.test(n),t.$isMultiLine)return t.re=this.$assembleMultilineRegExp(n,i);try{var o=new RegExp(n,i)}catch(a){o=!1}return t.re=o},this.$assembleMultilineRegExp=function(t,e){for(var n=t.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[],i=0;i<n.length;i++)try{r.push(new RegExp(n[i],e))}catch(o){return!1}return r},this.$matchIterator=function(t,e){var n=this.$assembleRegExp(e);if(!n)return!1;var r=1==e.backwards,i=0!=e.skipCurrent,o=e.range,a=e.start;a||(a=o?o[r?"end":"start"]:t.selection.getRange()),a.start&&(a=a[i!=r?"end":"start"]);var s=o?o.start.row:0,u=o?o.end.row:t.getLength()-1;if(r)var c=function(t){var n=a.row;if(!f(n,a.column,t)){for(n--;n>=s;n--)if(f(n,Number.MAX_VALUE,t))return;if(0!=e.wrap)for(n=u,s=a.row;n>=s;n--)if(f(n,Number.MAX_VALUE,t))return}};else c=function(t){var n=a.row;if(!f(n,a.column,t)){for(n+=1;n<=u;n++)if(f(n,0,t))return;if(0!=e.wrap)for(n=s,u=a.row;n<=u;n++)if(f(n,0,t))return}};if(e.$isMultiLine)var l=n.length,f=function(e,i,o){var a=r?e-l+1:e;if(!(a<0)){var s=t.getLine(a),u=s.search(n[0]);if(!(!r&&u<i||-1===u)){for(var c=1;c<l;c++)if(-1==(s=t.getLine(a+c)).search(n[c]))return;var f=s.match(n[l-1])[0].length;if(!(r&&f>i))return!!o(a,u,a+l-1,f)||void 0}}};else if(r)f=function(e,r,i){var o,a=t.getLine(e),s=[],u=0;for(n.lastIndex=0;o=n.exec(a);){var c=o[0].length;if(u=o.index,!c){if(u>=a.length)break;n.lastIndex=u+=1}if(o.index+c>r)break;s.push(o.index,c)}for(var l=s.length-1;l>=0;l-=2){var f=s[l-1];if(i(e,f,e,f+(c=s[l])))return!0}};else f=function(e,r,i){var o,a,s=t.getLine(e);for(n.lastIndex=r;a=n.exec(s);){var u=a[0].length;if(i(e,o=a.index,e,o+u))return!0;if(!u&&(n.lastIndex=o+=1,o>=s.length))return!1}};return{forEach:c}}}).call(a.prototype),e.Search=a})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(t,e,n){"use strict";var r=t("../lib/keys"),i=t("../lib/useragent"),o=r.KEY_MODS;function a(t,e){this.platform=e||(i.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=!0}function s(t,e){a.call(this,t,e),this.$singleCommand=!1}s.prototype=a.prototype,function(){function t(t){return"object"==typeof t&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,e){var n=t&&("string"===typeof t?t:t.name);t=this.commands[n],e||delete this.commands[n];var r=this.commandKeyBinding;for(var i in r){var o=r[i];if(o==t)delete r[i];else if(Array.isArray(o)){var a=o.indexOf(t);-1!=a&&(o.splice(a,1),1==o.length&&(r[i]=o[0]))}}},this.bindKey=function(t,e,n){if("object"==typeof t&&t&&(void 0==n&&(n=t.position),t=t[this.platform]),t)return"function"==typeof e?this.addCommand({exec:e,bindKey:t,name:e.name||t}):void t.split("|").forEach((function(t){var r="";if(-1!=t.indexOf(" ")){var i=t.split(/\s+/);t=i.pop(),i.forEach((function(t){var e=this.parseKeys(t),n=o[e.hashId]+e.key;r+=(r?" ":"")+n,this._addCommandToBinding(r,"chainKeys")}),this),r+=" "}var a=this.parseKeys(t),s=o[a.hashId]+a.key;this._addCommandToBinding(r+s,e,n)}),this)},this._addCommandToBinding=function(e,n,r){var i,o=this.commandKeyBinding;if(n)if(!o[e]||this.$singleCommand)o[e]=n;else{Array.isArray(o[e])?-1!=(i=o[e].indexOf(n))&&o[e].splice(i,1):o[e]=[o[e]],"number"!=typeof r&&(r=t(n));var a=o[e];for(i=0;i<a.length;i++){if(t(a[i])>r)break}a.splice(i,0,n)}else delete o[e]},this.addCommands=function(t){t&&Object.keys(t).forEach((function(e){var n=t[e];if(n){if("string"===typeof n)return this.bindKey(n,e);"function"===typeof n&&(n={exec:n}),"object"===typeof n&&(n.name||(n.name=e),this.addCommand(n))}}),this)},this.removeCommands=function(t){Object.keys(t).forEach((function(e){this.removeCommand(t[e])}),this)},this.bindKeys=function(t){Object.keys(t).forEach((function(e){this.bindKey(e,t[e])}),this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var e=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(t){return t})),n=e.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!e.length)return{key:n,hashId:-1};if(1==e.length&&"shift"==e[0])return{key:n.toUpperCase(),hashId:-1}}for(var o=0,a=e.length;a--;){var s=r.KEY_MODS[e[a]];if(null==s)return"undefined"!=typeof console&&console.error("invalid modifier "+e[a]+" in "+t),!1;o|=s}return{key:n,hashId:o}},this.findKeyCommand=function(t,e){var n=o[t]+e;return this.commandKeyBinding[n]},this.handleKeyboard=function(t,e,n,r){if(!(r<0)){var i=o[e]+n,a=this.commandKeyBinding[i];return t.$keyChain&&(t.$keyChain+=" "+i,a=this.commandKeyBinding[t.$keyChain]||a),!a||"chainKeys"!=a&&"chainKeys"!=a[a.length-1]?(t.$keyChain&&(e&&4!=e||1!=n.length?(-1==e||r>0)&&(t.$keyChain=""):t.$keyChain=t.$keyChain.slice(0,-i.length-1)),{command:a}):(t.$keyChain=t.$keyChain||i,{command:"null"})}},this.getStatusText=function(t,e){return e.$keyChain||""}}.call(a.prototype),e.HashHandler=a,e.MultiHashHandler=s})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(t,e,n){"use strict";var r=t("../lib/oop"),i=t("../keyboard/hash_handler").MultiHashHandler,o=t("../lib/event_emitter").EventEmitter,a=function(t,e){i.call(this,e,t),this.byName=this.commands,this.setDefaultHandler("exec",(function(t){return t.command.exec(t.editor,t.args||{})}))};r.inherits(a,i),function(){r.implement(this,o),this.exec=function(t,e,n){if(Array.isArray(t)){for(var r=t.length;r--;)if(this.exec(t[r],e,n))return!0;return!1}if("string"===typeof t&&(t=this.commands[t]),!t)return!1;if(e&&e.$readOnly&&!t.readOnly)return!1;if(0!=this.$checkCommandState&&t.isAvailable&&!t.isAvailable(e))return!1;var i={editor:e,command:t,args:n};return i.returnValue=this._emit("exec",i),this._signal("afterExec",i),!1!==i.returnValue},this.toggleRecording=function(t){if(!this.$inReplay)return t&&t._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(t){this.macro.push([t.command,t.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach((function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map((function(t){return"string"!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t}))}}.call(a.prototype),e.CommandManager=a})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(t,e,n){"use strict";var r=t("../lib/lang"),i=t("../config"),o=t("../range").Range;function a(t,e){return{win:t,mac:e}}e.commands=[{name:"showSettingsMenu",bindKey:a("Ctrl-,","Command-,"),exec:function(t){i.loadModule("ace/ext/settings_menu",(function(e){e.init(t),t.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:a("Alt-E","F4"),exec:function(t){i.loadModule("./ext/error_marker",(function(e){e.showErrorMarker(t,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(t){i.loadModule("./ext/error_marker",(function(e){e.showErrorMarker(t,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(t){t.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(t){t.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(t,e){"number"!==typeof e||isNaN(e)||t.gotoLine(e),t.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:a("F2","F2"),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:a("Alt-F2","Alt-F2"),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(t){t.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(t){t.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(t){t.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(t){i.loadModule("ace/ext/searchbox",(function(e){e.Search(t)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(t){t.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(t){t.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(t,e){t.navigateUp(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(t){t.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(t){t.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(t,e){t.navigateDown(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(t){t.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(t){t.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(t,e){t.navigateLeft(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(t){t.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(t){t.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(t){t.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(t,e){t.navigateRight(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(t){t.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(t){t.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(t){t.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(t){t.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(t){},readOnly:!0},{name:"cut",description:"Cut",exec:function(t){var e=t.$copyWithEmptySelection&&t.selection.isEmpty()?t.selection.getLineRange():t.selection.getRange();t._emit("cut",e),e.isEmpty()||t.session.remove(e),t.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(t,e){t.$handlePaste(e)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(t){t.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(t){t.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(t){t.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(t){t.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(t){t.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(t){t.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(t){t.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(t){i.loadModule("ace/ext/searchbox",(function(e){e.Search(t,!0)}))}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(t){t.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(t){t.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(t){t.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(t){t.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(t){t.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(t){t.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(t){t.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(t){t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(t){if(!t.selection.isEmpty())return!1;t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(t){t.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(t){t.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(t){var e=t.selection.getRange();e.start.column=0,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(t){var e=t.selection.getRange();e.end.column=Number.MAX_VALUE,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(t){t.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(t){t.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(t){t.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(t){t.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(t){t.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(t){t.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(t,e){t.insert(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(t,e){t.insert(r.stringRepeat(e.text||"",e.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(t){t.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(t){t.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(t){t.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:a(null,null),exec:function(t){t.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(t){var e=t.selection.getRange();e.start.column=e.end.column=0,e.end.row++,t.selection.setRange(e,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(t){for(var e=t.selection.isBackwards(),n=e?t.selection.getSelectionLead():t.selection.getSelectionAnchor(),i=e?t.selection.getSelectionAnchor():t.selection.getSelectionLead(),a=t.session.doc.getLine(n.row).length,s=t.session.doc.getTextRange(t.selection.getRange()).replace(/\n\s*/," ").length,u=t.session.doc.getLine(n.row),c=n.row+1;c<=i.row+1;c++){var l=r.stringTrimLeft(r.stringTrimRight(t.session.doc.getLine(c)));0!==l.length&&(l=" "+l),u+=l}i.row+1<t.session.doc.getLength()-1&&(u+=t.session.doc.getNewLineCharacter()),t.clearSelection(),t.session.doc.replace(new o(n.row,0,i.row+2,0),u),s>0?(t.selection.moveCursorTo(n.row,n.column),t.selection.selectTo(n.row,n.column+s)):(a=t.session.doc.getLine(n.row).length>a?a+1:a,t.selection.moveCursorTo(n.row,a))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(t){var e=t.session.doc.getLength()-1,n=t.session.doc.getLine(e).length,r=t.selection.rangeList.ranges,i=[];r.length<1&&(r=[t.selection.getRange()]);for(var a=0;a<r.length;a++)a==r.length-1&&(r[a].end.row===e&&r[a].end.column===n||i.push(new o(r[a].end.row,r[a].end.column,e,n))),0===a?0===r[a].start.row&&0===r[a].start.column||i.push(new o(0,0,r[a].start.row,r[a].start.column)):i.push(new o(r[a-1].end.row,r[a-1].end.column,r[a].start.row,r[a].start.column));t.exitMultiSelectMode(),t.clearSelection();for(a=0;a<i.length;a++)t.selection.addRange(i[a],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",exec:function(t){t.selection.clearSelection(),t.navigateLineEnd(),t.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",exec:function(t){t.selection.clearSelection();var e=t.getCursorPosition();t.selection.moveTo(e.row-1,Number.MAX_VALUE),t.insert("\n"),0===e.row&&t.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:a("F1","F1"),exec:function(t){t.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(t){t.prompt({$type:"modes"})},readOnly:!0}]})),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],(function(t,e,n){"use strict";t("./lib/fixoldbrowsers");var r=t("./lib/oop"),i=t("./lib/dom"),o=t("./lib/lang"),a=t("./lib/useragent"),s=t("./keyboard/textinput").TextInput,u=t("./mouse/mouse_handler").MouseHandler,c=t("./mouse/fold_handler").FoldHandler,l=t("./keyboard/keybinding").KeyBinding,f=t("./edit_session").EditSession,h=t("./search").Search,d=t("./range").Range,p=t("./lib/event_emitter").EventEmitter,g=t("./commands/command_manager").CommandManager,v=t("./commands/default_commands").commands,m=t("./config"),y=t("./token_iterator").TokenIterator,b=t("./clipboard"),w=function t(e,n,r){this.$toDestroy=[];var i=e.getContainerElement();this.container=i,this.renderer=e,this.id="editor"+ ++t.$uid,this.commands=new g(a.isMac?"mac":"win",v),"object"==typeof document&&(this.textInput=new s(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new u(this),new c(this)),this.keyBinding=new l(this),this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(t,e){e._$emitInputEvent.schedule(31)})),this.setSession(n||r&&r.session||new f("")),m.resetOptions(this),r&&this.setOptions(r),m._signal("editor",this)};w.$uid=0,function(){r.implement(this,p),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(t){if(this.curOp&&this.session){if(t&&!1===t.returnValue||!this.session)return this.curOp=null;if(1==t&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var e=this.curOp.command,n=e&&e.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var r=this.selection.getRange(),i=this.renderer.layerConfig;(r.start.row>=i.lastRow||r.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var o=this.selection.toJSON();this.curOp.selectionAfter=o,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(o),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(t){if(this.$mergeUndoDeltas){var e=this.prevOp,n=this.$mergeableCommands,r=e.command&&t.command.name==e.command.name;if("insertstring"==t.command.name){var i=t.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(e.args)),this.mergeNextCommand=!0}else r=r&&-1!==n.indexOf(t.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(t.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(t,e){if(t&&"string"===typeof t&&"ace"!=t){this.$keybindingId=t;var n=this;m.loadModule(["keybinding",t],(function(r){n.$keybindingId==t&&n.keyBinding.setKeyboardHandler(r&&r.handler),e&&e()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),e&&e()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(t){if(this.session!=t){this.curOp&&this.endOperation(),this.curOp={};var e=this.session;if(e){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=t,t?(this.$onDocumentChange=this.onDocumentChange.bind(this),t.on("change",this.$onDocumentChange),this.renderer.setSession(t),this.$onChangeMode=this.onChangeMode.bind(this),t.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),t.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),t.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),t.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),t.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),t.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=t.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(t)),this._signal("changeSession",{session:t,oldSession:e}),this.curOp=null,e&&e._signal("changeEditor",{oldEditor:this}),t&&t._signal("changeEditor",{editor:this}),t&&t.bgTokenizer&&t.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(t,e){return this.session.doc.setValue(t),e?1==e?this.navigateFileEnd():-1==e&&this.navigateFileStart():this.selectAll(),t},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(t,e){this.renderer.setTheme(t,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container).fontSize},this.setFontSize=function(t){this.setOption("fontSize",t)},this.$highlightBrackets=function(){if(!this.$highlightPending){var t=this;this.$highlightPending=!0,setTimeout((function(){t.$highlightPending=!1;var e=t.session;if(e&&e.bgTokenizer){e.$bracketHighlight&&(e.$bracketHighlight.markerIds.forEach((function(t){e.removeMarker(t)})),e.$bracketHighlight=null);var n=e.getMatchingBracketRanges(t.getCursorPosition());if(!n&&e.$mode.getMatching&&(n=e.$mode.getMatching(t.session)),n){var r="ace_bracket";Array.isArray(n)?1==n.length&&(r="ace_error_bracket"):n=[n],2==n.length&&(0==d.comparePoints(n[0].end,n[1].start)?n=[d.fromPoints(n[0].start,n[1].end)]:0==d.comparePoints(n[0].start,n[1].end)&&(n=[d.fromPoints(n[1].start,n[0].end)])),e.$bracketHighlight={ranges:n,markerIds:n.map((function(t){return e.addMarker(t,r,"text")}))}}}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var t=this;this.$highlightTagPending=!0,setTimeout((function(){t.$highlightTagPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=t.getCursorPosition(),r=new y(t.session,n.row,n.column),i=r.getCurrentToken();if(!i||!/\b(?:tag-open|tag-name)/.test(i.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1==i.type.indexOf("tag-open")||(i=r.stepForward())){var o=i.value,a=0,s=r.stepBackward();if("<"==s.value)do{s=i,(i=r.stepForward())&&i.value===o&&-1!==i.type.indexOf("tag-name")&&("<"===s.value?a++:"</"===s.value&&a--)}while(i&&a>=0);else{do{i=s,s=r.stepBackward(),i&&i.value===o&&-1!==i.type.indexOf("tag-name")&&("<"===s.value?a++:"</"===s.value&&a--)}while(s&&a<=0);r.stepForward()}if(!i)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var u=r.getCurrentTokenRow(),c=r.getCurrentTokenColumn(),l=new d(u,c,u,c+i.value.length),f=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&void 0!=f&&0!==l.compareRange(f.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),e.$tagHighlight||(e.$tagHighlight=e.addMarker(l,"ace_bracket","text"))}}}),50)}},this.focus=function(){var t=this;setTimeout((function(){t.isFocused()||t.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",t))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(t){var e=this.session.$useWrapMode,n=t.start.row==t.end.row?t.end.row:1/0;this.renderer.updateLines(t.start.row,n,e),this._signal("change",t),this.$cursorChange()},this.onTokenizerUpdate=function(t){var e=t.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(t=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new d(t.row,t.column,t.row,1/0);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(t){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),r=this.getSelectionStyle();e.$selectionMarker=e.addMarker(n,"ace_selection",r)}var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var t=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var n=e.start.column,r=e.end.column,i=t.getLine(e.start.row),o=i.substring(n,r);if(!(o.length>5e3)&&/[\w\d]/.test(o)){var a=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o}),s=i.substring(n-1,r+1);if(a.test(s))return a}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit("changeMode",t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText(),e=this.session.doc.getNewLineCharacter(),n=!1;if(!t&&this.$copyWithEmptySelection){n=!0;for(var r=this.selection.getAllRanges(),i=0;i<r.length;i++){var o=r[i];i&&r[i-1].start.row==o.start.row||(t+=this.session.getLine(o.start.row)+e)}}var a={text:t};return this._signal("copy",a),b.lineMode=n?a.text:"",a.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(t,e){var n={text:t,event:e};this.commands.exec("paste",this,n)},this.$handlePaste=function(t){"string"==typeof t&&(t={text:t}),this._signal("paste",t);var e=t.text,n=e==b.lineMode,r=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?r.insert({row:this.selection.lead.row,column:0},e):this.insert(e);else if(n)this.selection.rangeList.ranges.forEach((function(t){r.insert({row:t.start.row,column:0},e)}));else{var i=e.split(/\r\n|\r|\n/),o=this.selection.rangeList.ranges,a=2==i.length&&(!i[0]||!i[1]);if(i.length!=o.length||a)return this.commands.exec("insertstring",this,e);for(var s=o.length;s--;){var u=o[s];u.isEmpty()||r.remove(u),r.insert(u.start,i[s])}}},this.execCommand=function(t,e){return this.commands.exec(t,this,e)},this.insert=function(t,e){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!e){var o=r.transformAction(n.getState(i.row),"insertion",this,n,t);o&&(t!==o.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),t=o.text)}if("\t"==t&&(t=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==t.indexOf("\n")){(a=new d.fromPoints(i,i)).end.column+=t.length,this.session.remove(a)}}else{var a=this.getSelectionRange();i=this.session.remove(a),this.clearSelection()}if("\n"==t||"\r\n"==t){var s=n.getLine(i.row);if(i.column>s.search(/\S|$/)){var u=s.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+u)}}this.clearSelection();var c=i.column,l=n.getState(i.row),f=(s=n.getLine(i.row),r.checkOutdent(l,s,t));if(n.insert(i,t),o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new d(i.row,c+o.selection[0],i.row,c+o.selection[1])):this.selection.setSelectionRange(new d(i.row+o.selection[0],o.selection[1],i.row+o.selection[2],o.selection[3]))),this.$enableAutoIndent){if(n.getDocument().isNewLine(t)){var h=r.getNextLineIndent(l,s.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},h)}f&&r.autoOutdent(l,n,i.row)}},this.autoIndent=function(){var t,e,n=this.session,r=n.getMode();if(this.selection.isEmpty())t=0,e=n.doc.getLength()-1;else{var i=this.getSelectionRange();t=i.start.row,e=i.end.row}for(var o,a,s,u="",c="",l="",f=n.getTabString(),h=t;h<=e;h++)h>0&&(u=n.getState(h-1),c=n.getLine(h-1),l=r.getNextLineIndent(u,c,f)),o=n.getLine(h),l!==(a=r.$getIndent(o))&&(a.length>0&&(s=new d(h,0,h,a.length),n.remove(s)),l.length>0&&n.insert({row:h,column:0},l)),r.autoOutdent(u,n,h)},this.onTextInput=function(t,e){if(!e)return this.keyBinding.onTextInput(t);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,t,e);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(t,e){var n;(e.extendLeft||e.extendRight)&&((n=this.selection.getRange()).start.column-=e.extendLeft,n.end.column+=e.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),t||n.isEmpty()||this.remove());(!t&&this.selection.isEmpty()||this.insert(t,!0),e.restoreStart||e.restoreEnd)&&((n=this.selection.getRange()).start.column-=e.restoreStart,n.end.column-=e.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(t,e,n){return this.keyBinding.onCommandKey(t,e,n)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption("scrollSpeed",t)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(t){this.setOption("dragDelay",t)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(t){this.setOption("selectionStyle",t)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(t){this.setOption("highlightActiveLine",t)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(t){this.setOption("highlightSelectedWord",t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption("readOnly",t)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(t){this.setOption("behavioursEnabled",t)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(t){this.setOption("wrapBehavioursEnabled",t)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(t){this.setOption("showFoldWidgets",t)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(t){this.selection.isEmpty()&&("left"==t?this.selection.selectLeft():this.selection.selectRight());var e=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(e.start.row),i=n.getMode().transformAction(r,"deletion",this,n,e);if(0===e.end.column){var o=n.getTextRange(e);if("\n"==o[o.length-1]){var a=n.getLine(e.end.row);/^\s+$/.test(a)&&(e.end.column=a.length)}}i&&(e=i)}this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(t)},this.transposeLetters=function(){if(this.selection.isEmpty()){var t=this.getCursorPosition(),e=t.column;if(0!==e){var n,r,i=this.session.getLine(t.row);e<i.length?(n=i.charAt(e)+i.charAt(e-1),r=new d(t.row,e-1,t.row,e+1)):(n=i.charAt(e-1)+i.charAt(e-2),r=new d(t.row,e-2,t.row,e)),this.session.replace(r,n),this.session.selection.moveToPosition(r.end)}}},this.toLowerCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toLowerCase()),this.selection.setSelectionRange(t)},this.toUpperCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toUpperCase()),this.selection.setSelectionRange(t)},this.indent=function(){var t=this.session,e=this.getSelectionRange();if(!(e.start.row<e.end.row)){if(e.start.column<e.end.column){var n=t.getTextRange(e);if(!/^\s+$/.test(n)){l=this.$getSelectedRows();return void t.indentRows(l.first,l.last,"\t")}}var r=t.getLine(e.start.row),i=e.start,a=t.getTabSize(),s=t.documentToScreenColumn(i.row,i.column);if(this.session.getUseSoftTabs())var u=a-s%a,c=o.stringRepeat(" ",u);else{for(u=s%a;" "==r[e.start.column-1]&&u;)e.start.column--,u--;this.selection.setSelectionRange(e),c="\t"}return this.insert(c)}var l=this.$getSelectedRows();t.indentRows(l.first,l.last,"\t")},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,"\t")},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){for(var t=this.$getSelectedRows(),e=this.session,n=[],r=t.first;r<=t.last;r++)n.push(e.getLine(r));n.sort((function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0}));var i=new d(0,0,0,0);for(r=t.first;r<=t.last;r++){var o=e.getLine(r);i.start.row=r,i.end.row=r,i.end.column=o.length,e.replace(i,n[r-t.first])}},this.toggleCommentLines=function(){var t=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(t,this.session,e.first,e.last)},this.toggleBlockComment=function(){var t=this.getCursorPosition(),e=this.session.getState(t.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,n,t)},this.getNumberAt=function(t,e){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var r=this.session.getLine(t);n.lastIndex<e;){var i=n.exec(r);if(i.index<=e&&i.index+i[0].length>=e)return{value:i[0],start:i.index,end:i.index+i[0].length}}return null},this.modifyNumber=function(t){var e=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new d(e,n-1,e,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var o=this.getNumberAt(e,n);if(o){var a=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,s=o.start+o.value.length-a,u=parseFloat(o.value);u*=Math.pow(10,s),a!==o.end&&n<a?t*=Math.pow(10,o.end-n-1):t*=Math.pow(10,o.end-n),u+=t;var c=(u/=Math.pow(10,s)).toFixed(s),l=new d(e,o.start,e,o.end);this.session.replace(l,c),this.moveCursorTo(e,Math.max(o.start+1,n+c.length-o.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var t=this.selection.getCursor().row,e=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),r=this.selection.getWordRange().start.column,i=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),a=e-r-1;a<0&&(a=0);var s=0,u=0,c=this;n.match(/[A-Za-z0-9_]+/)&&i.forEach((function(e,i){u=s+e.length,a>=s&&a<=u&&(n=e,c.selection.clearSelection(),c.moveCursorTo(t,s+r),c.selection.selectTo(t,u+r)),s=u}));for(var l,f=this.$toggleWordPairs,h=0;h<f.length;h++)for(var d=f[h],p=0;p<=1;p++){var g=+!p,v=n.match(new RegExp("^\\s?_?("+o.escapeRegExp(d[p])+")\\s?$","i"));if(v)n.match(new RegExp("([_]|^|\\s)("+o.escapeRegExp(v[1])+")($|\\s)","g"))&&(l=n.replace(new RegExp(o.escapeRegExp(d[p]),"i"),(function(t){var e=d[g];return t.toUpperCase()==t?e=e.toUpperCase():t.charAt(0).toUpperCase()==t.charAt(0)&&(e=e.substr(0,0)+d[g].charAt(0).toUpperCase()+e.substr(1)),e})),this.insert(l),l="")}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var t=this.selection,e=this.session,n=t.getRange(),r=t.isBackwards();if(n.isEmpty()){var i=n.start.row;e.duplicateLines(i,i)}else{var o=r?n.start:n.end,a=e.insert(o,e.getTextRange(n),!1);n.start=o,n.end=a,t.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(t,e,n){return this.session.moveText(t,e,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(t,e){var n,r,i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var o=i.toOrientedRange();n=this.$getSelectedRows(o),r=this.session.$moveLines(n.first,n.last,e?0:t),e&&-1==t&&(r=0),o.moveBy(r,0),i.fromOrientedRange(o)}else{var a=i.rangeList.ranges;i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var s=0,u=0,c=a.length,l=0;l<c;l++){var f=l;a[l].moveBy(s,0);for(var h=(n=this.$getSelectedRows(a[l])).first,d=n.last;++l<c;){u&&a[l].moveBy(u,0);var p=this.$getSelectedRows(a[l]);if(e&&p.first!=d)break;if(!e&&p.first>d+1)break;d=p.last}for(l--,s=this.session.$moveLines(h,d,e?0:t),e&&-1==t&&(f=l+1);f<=l;)a[f].moveBy(s,0),f++;e||(s=0),u+=s}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(t){this.renderer.showComposition(t)},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(t,e){var n=this.renderer,r=this.renderer.layerConfig,i=t*Math.floor(r.height/r.lineHeight);!0===e?this.selection.$moveSelection((function(){this.moveCursorBy(i,0)})):!1===e&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection());var o=n.scrollTop;n.scrollBy(0,i*r.lineHeight),null!=e&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(t,e,n,r){this.renderer.scrollToLine(t,e,n,r)},this.centerSelection=function(){var t=this.getSelectionRange(),e={row:Math.floor(t.start.row+(t.end.row-t.start.row)/2),column:Math.floor(t.start.column+(t.end.column-t.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(t,e){this.selection.moveCursorTo(t,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(t,e){var n=this.getCursorPosition(),r=new y(this.session,n.row,n.column),i=r.getCurrentToken(),o=i||r.stepForward();if(o){var a,s,u=!1,c={},l=n.column-o.start,f={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;l<o.value.length&&!u;l++)if(f[o.value[l]])switch(s=f[o.value[l]]+"."+o.type.replace("rparen","lparen"),isNaN(c[s])&&(c[s]=0),o.value[l]){case"(":case"[":case"{":c[s]++;break;case")":case"]":case"}":c[s]--,-1===c[s]&&(a="bracket",u=!0)}}else-1!==o.type.indexOf("tag-name")&&(isNaN(c[o.value])&&(c[o.value]=0),"<"===i.value?c[o.value]++:"</"===i.value&&c[o.value]--,-1===c[o.value]&&(a="tag",u=!0));u||(i=o,o=r.stepForward(),l=0)}while(o&&!u);if(a){var h,p;if("bracket"===a)(h=this.session.getBracketRange(n))||(p=(h=new d(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l-1)).start,(e||p.row===n.row&&Math.abs(p.column-n.column)<2)&&(h=this.session.getBracketRange(p)));else if("tag"===a){if(!o||-1===o.type.indexOf("tag-name"))return;var g=o.value;if(0===(h=new d(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2)).compare(n.row,n.column)){u=!1;do{o=i,(i=r.stepBackward())&&(-1!==i.type.indexOf("tag-close")&&h.setEnd(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1),o.value===g&&-1!==o.type.indexOf("tag-name")&&("<"===i.value?c[g]++:"</"===i.value&&c[g]--,0===c[g]&&(u=!0)))}while(i&&!u)}o&&o.type.indexOf("tag-name")&&(p=h.start).row==n.row&&Math.abs(p.column-n.column)<2&&(p=h.end)}(p=h&&h.cursor||p)&&(t?h&&e?this.selection.setRange(h):h&&h.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(p.row,p.column):this.selection.moveTo(p.row,p.column))}}},this.gotoLine=function(t,e,n){this.selection.clearSelection(),this.session.unfold({row:t-1,column:e||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(t-1,e||0),this.isRowFullyVisible(t-1)||this.scrollToLine(t-1,!0,n)},this.navigateTo=function(t,e){this.selection.moveTo(t,e)},this.navigateUp=function(t){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(-t||-1,0)},this.navigateDown=function(t){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(t||1,0)},this.navigateLeft=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(t,e){e&&this.$search.set(e);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,t)&&(r=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),r):r},this.replaceAll=function(t,e){e&&this.$search.set(e);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],t)&&r++;return this.selection.setSelectionRange(i),r},this.$tryReplace=function(t,e){var n=this.session.getTextRange(t);return null!==(e=this.$search.replace(n,e))?(t.end=this.session.replace(t,e),t):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(t,e,n){e||(e={}),"string"==typeof t||t instanceof RegExp?e.needle=t:"object"==typeof t&&r.mixin(e,t);var i=this.selection.getRange();null==e.needle&&((t=this.session.getTextRange(i)||this.$search.$options.needle)||(i=this.session.getWordRange(i.start.row,i.start.column),t=this.session.getTextRange(i)),this.$search.set({needle:t})),this.$search.set(e),e.start||this.$search.set({start:i});var o=this.$search.find(this.session);return e.preventScroll?o:o?(this.revealRange(o,n),o):(e.backwards?i.start=i.end:i.end=i.start,void this.selection.setRange(i))},this.findNext=function(t,e){this.find({skipCurrent:!0,backwards:!1},t,e)},this.findPrevious=function(t,e){this.find(t,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(t,e){this.session.unfold(t),this.selection.setSelectionRange(t);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(t.start,t.end,.5),!1!==e&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach((function(t){t.destroy()})),this.$toDestroy=null),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(t){if(t){var e,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var o=this.on("changeSelection",(function(){r=!0})),a=this.renderer.on("beforeRender",(function(){r&&(e=n.renderer.container.getBoundingClientRect())})),s=this.renderer.on("afterRender",(function(){if(r&&e&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var t=n.renderer,o=t.$cursorLayer.$pixelPos,a=t.layerConfig,s=o.top-a.offset;null!=(r=o.top>=0&&s+e.top<0||!(o.top<a.height&&o.top+e.top+a.lineHeight>window.innerHeight)&&null)&&(i.style.top=s+"px",i.style.left=o.left+"px",i.style.height=a.lineHeight+"px",i.scrollIntoView(r)),r=e=null}}));this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",o),this.renderer.off("afterRender",s),this.renderer.off("beforeRender",a))}}},this.$resetCursorStyle=function(){var t=this.$cursorStyle||"ace",e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(t)),e.isBlinking=!this.$readOnly&&"wide"!=t,i.setCssClass(e.element,"ace_slim-cursors",/slim/.test(t)))},this.prompt=function(t,e,n){var r=this;m.loadModule("./ext/prompt",(function(i){i.prompt(r,t,e,n)}))}}.call(w.prototype),m.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:t})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(t){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(t){this.textInput.setReadOnly(t),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(t){this.textInput.setCopyWithEmptySelection(t)},initialValue:!1},cursorStyle:{set:function(t){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(t){this.session.setValue(t)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(t){this.setSession(t)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(t){this.renderer.$gutterLayer.setShowLineNumbers(t),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),t&&this.$relativeLineNumbers?x.attach(this):x.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(t){this.$showLineNumbers&&t?x.attach(this):x.detach(this)}},placeholder:{set:function(t){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var t=this.session&&(this.renderer.$composition||this.getValue());if(t&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),i.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(t||this.renderer.placeholderNode)!t&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"");else{this.renderer.on("afterRender",this.$updatePlaceholder),i.addCssClass(this.container,"ace_hasPlaceholder");var e=i.createElement("div");e.className="ace_placeholder",e.textContent=this.$placeholder||"",this.renderer.placeholderNode=e,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var x={getText:function(t,e){return(Math.abs(t.selection.lead.row-e)||e+1+(e<9?"\xb7":""))+""},getWidth:function(t,e,n){return Math.max(e.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(t,e){e.renderer.$loop.schedule(e.renderer.CHANGE_GUTTER)},attach:function(t){t.renderer.$gutterLayer.$renderer=this,t.on("changeSelection",this.update),this.update(null,t)},detach:function(t){t.renderer.$gutterLayer.$renderer==this&&(t.renderer.$gutterLayer.$renderer=null),t.off("changeSelection",this.update),this.update(null,t)}};e.Editor=w})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var r=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(t){this.$session=t},this.add=function(t,e,n){this.$fromUndo||t!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),!1!==e&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),t.id=this.$rev=++this.$maxRev),"remove"!=t.action&&"insert"!=t.action||(this.$lastDelta=t),this.lastDeltas.push(t))},this.addSelection=function(t,e){this.selections.push({value:t,rev:e||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(t,e){null==e&&(e=this.$rev+1);for(var n=this.$undoStack,r=n.length;r--;){var i=n[r][0];if(i.id<=t)break;i.id<e&&(i.ignore=!0)}this.lastDeltas=null},this.getSelection=function(t,e){for(var n=this.selections,r=n.length;r--;){var i=n[r];if(i.rev<t)return e&&(i=n[r+1]),i}},this.getRevision=function(){return this.$rev},this.getDeltas=function(t,e){null==e&&(e=this.$rev+1);for(var n=this.$undoStack,r=null,i=0,o=n.length;o--;){var a=n[o][0];if(a.id<e&&!r&&(r=o+1),a.id<=t){i=o+1;break}}return n.slice(i,r)},this.getChangedRanges=function(t,e){null==e&&(e=this.$rev+1)},this.getChangedLines=function(t,e){null==e&&(e=this.$rev+1)},this.undo=function(t,e){this.lastDeltas=null;var n=this.$undoStack;if(function(t,e){for(var n=e;n--;){var r=t[n];if(r&&!r[0].ignore){for(;n<e-1;){var i=l(t[n],t[n+1]);t[n]=i[0],t[n+1]=i[1],n++}return!0}}}(n,n.length)){t||(t=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var r=n.pop(),i=null;return r&&(i=t.undoChanges(r,e),this.$redoStack.push(r),this.$syncRev()),this.$fromUndo=!1,i}},this.redo=function(t,e){if(this.lastDeltas=null,t||(t=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(t,e){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)g(t,r[i])}(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(t){t[0].id=++this.$maxRev}),this)}var r=this.$redoStack.pop(),i=null;return r&&(i=t.redoChanges(r,e),this.$undoStack.push(r),this.$syncRev()),this.$fromUndo=!1,i},this.$syncRev=function(){var t=this.$undoStack,e=t[t.length-1],n=e&&e[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(t){void 0==t&&(t=this.$rev),this.mark=t},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(t){return t?s(t):s(this.$undoStack)+"\n---\n"+s(this.$redoStack)}}).call(r.prototype);var i=t("./range").Range,o=i.comparePoints;i.comparePoints;function a(t){return{row:t.row,column:t.column}}function s(t){if(t=t||this,Array.isArray(t))return t.map(s).join("\n");var e="";return t.action?(e="insert"==t.action?"+":"-",e+="["+t.lines+"]"):t.value&&(e=Array.isArray(t.value)?t.value.map(u).join("\n"):u(t.value)),t.start&&(e+=u(t)),(t.id||t.rev)&&(e+="\t("+(t.id||t.rev)+")"),e}function u(t){return t.start.row+":"+t.start.column+"=>"+t.end.row+":"+t.end.column}function c(t,e){var n="insert"==t.action,r="insert"==e.action;if(n&&r)if(o(e.start,t.end)>=0)h(e,t,-1);else{if(!(o(e.start,t.start)<=0))return null;h(t,e,1)}else if(n&&!r)if(o(e.start,t.end)>=0)h(e,t,-1);else{if(!(o(e.end,t.start)<=0))return null;h(t,e,-1)}else if(!n&&r)if(o(e.start,t.start)>=0)h(e,t,1);else{if(!(o(e.start,t.start)<=0))return null;h(t,e,1)}else if(!n&&!r)if(o(e.start,t.start)>=0)h(e,t,1);else{if(!(o(e.end,t.start)<=0))return null;h(t,e,-1)}return[e,t]}function l(t,e){for(var n=t.length;n--;)for(var r=0;r<e.length;r++)if(!c(t[n],e[r])){for(;n<t.length;){for(;r--;)c(e[r],t[n]);r=e.length,n++}return[t,e]}return t.selectionBefore=e.selectionBefore=t.selectionAfter=e.selectionAfter=null,[e,t]}function f(t,e){var n="insert"==t.action,r="insert"==e.action;if(n&&r)o(t.start,e.start)<0?h(e,t,1):h(t,e,1);else if(n&&!r)o(t.start,e.end)>=0?h(t,e,-1):(o(t.start,e.start)<=0||h(t,i.fromPoints(e.start,t.start),-1),h(e,t,1));else if(!n&&r)o(e.start,t.end)>=0?h(e,t,-1):(o(e.start,t.start)<=0||h(e,i.fromPoints(t.start,e.start),-1),h(t,e,1));else if(!n&&!r)if(o(e.start,t.end)>=0)h(e,t,-1);else{var a,s;if(!(o(e.end,t.start)<=0))return o(t.start,e.start)<0&&(a=t,t=p(t,e.start)),o(t.end,e.end)>0&&(s=p(t,e.end)),d(e.end,t.start,t.end,-1),s&&!a&&(t.lines=s.lines,t.start=s.start,t.end=s.end,s=t),[e,a,s].filter(Boolean);h(t,e,-1)}return[e,t]}function h(t,e,n){d(t.start,e.start,e.end,n),d(t.end,e.start,e.end,n)}function d(t,e,n,r){t.row==(1==r?e:n).row&&(t.column+=r*(n.column-e.column)),t.row+=r*(n.row-e.row)}function p(t,e){var n=t.lines,r=t.end;t.end=a(e);var i=t.end.row-t.start.row,o=n.splice(i,n.length),s=i?e.column:e.column-t.start.column;return n.push(o[0].substring(0,s)),o[0]=o[0].substr(s),{start:a(e),end:r,lines:o,action:t.action}}function g(t,e){e=function(t){return{start:a(t.start),end:a(t.end),action:t.action,lines:t.lines.slice()}}(e);for(var n=t.length;n--;){for(var r=t[n],i=0;i<r.length;i++){var o=f(r[i],e);e=o[0],2!=o.length&&(o[2]?(r.splice(i+1,1,o[1],o[2]),i++):o[1]||(r.splice(i,1),i--))}r.length||t.splice(n,1)}return t}e.UndoManager=r})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var r=t("../lib/dom"),i=function(t,e){this.element=t,this.canvasHeight=e||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(t){r.translate(this.element,0,-t.firstRowScreen*t.lineHeight%this.canvasHeight-t.offset*this.$offsetCoefficient)},this.pageChanged=function(t,e){return Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)!==Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)},this.computeLineTop=function(t,e,n){var r=e.firstRowScreen*e.lineHeight,i=Math.floor(r/this.canvasHeight);return n.documentToScreenRow(t,0)*e.lineHeight-i*this.canvasHeight},this.computeLineHeight=function(t,e,n){return e.lineHeight*n.getRowLineCount(t)},this.getLength=function(){return this.cells.length},this.get=function(t){return this.cells[t]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(t){if(Array.isArray(t)){this.cells.push.apply(this.cells,t);for(var e=r.createFragment(this.element),n=0;n<t.length;n++)e.appendChild(t[n].element);this.element.appendChild(e)}else this.cells.push(t),this.element.appendChild(t.element)},this.unshift=function(t){if(Array.isArray(t)){this.cells.unshift.apply(this.cells,t);for(var e=r.createFragment(this.element),n=0;n<t.length;n++)e.appendChild(t[n].element);this.element.firstChild?this.element.insertBefore(e,this.element.firstChild):this.element.appendChild(e)}else this.cells.unshift(t),this.element.insertAdjacentElement("afterbegin",t.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(t){t&&(t.element.remove(),this.cellCache.push(t))},this.createCell=function(t,e,n,i){var o=this.cellCache.pop();if(!o){var a=r.createElement("div");i&&i(a),this.element.appendChild(a),o={element:a,text:"",row:t}}return o.row=t,o}}).call(i.prototype),e.Lines=i})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],(function(t,e,n){"use strict";var r=t("../lib/dom"),i=t("../lib/oop"),o=t("../lib/lang"),a=t("../lib/event_emitter").EventEmitter,s=t("./lines").Lines,u=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new s(this.element),this.$lines.$offsetCoefficient=1};function c(t){var e=document.createTextNode("");t.appendChild(e);var n=r.createElement("span");return t.appendChild(n),t}(function(){i.implement(this,a),this.setSession=function(t){this.session&&this.session.off("change",this.$updateAnnotations),this.session=t,t&&t.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(t,e)},this.setAnnotations=function(t){this.$annotations=[];for(var e=0;e<t.length;e++){var n=t[e],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var a=n.text;a=a?o.escapeHTML(a):n.html||"",-1===i.text.indexOf(a)&&i.text.push(a);var s=n.type;"error"==s?i.className=" ace_error":"warning"==s&&" ace_error"!=i.className?i.className=" ace_warning":"info"!=s||i.className||(i.className=" ace_info")}},this.$updateAnnotations=function(t){if(this.$annotations.length){var e=t.start.row,n=t.end.row-e;if(0===n);else if("remove"==t.action)this.$annotations.splice(e,n+1,null);else{var r=new Array(n+1);r.unshift(e,1),this.$annotations.splice.apply(this.$annotations,r)}}},this.update=function(t){this.config=t;var e=this.session,n=t.firstRow,r=Math.min(t.lastRow+t.gutterOffset,e.getLength()-1);this.oldLastRow=r,this.config=t,this.$lines.moveContainer(t),this.$updateCursorRow();for(var i=e.getNextFoldLine(n),o=i?i.start.row:1/0,a=null,s=-1,u=n;;){if(u>o&&(u=i.end.row+1,o=(i=e.getNextFoldLine(u,i))?i.start.row:1/0),u>r){for(;this.$lines.getLength()>s+1;)this.$lines.pop();break}(a=this.$lines.get(++s))?a.row=u:(a=this.$lines.createCell(u,t,this.session,c),this.$lines.push(a)),this.$renderCell(a,t,i,u),u++}this._signal("afterRender"),this.$updateGutterWidth(t)},this.$updateGutterWidth=function(t){var e=this.session,n=e.gutterRenderer||this.$renderer,r=e.$firstLineNumber,i=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||e.$useWrapMode)&&(i=e.getLength()+r-1);var o=n?n.getWidth(e,i,t):i.toString().length*t.characterWidth,a=this.$padding||this.$computePadding();(o+=a.left+a.right)===this.gutterWidth||isNaN(o)||(this.gutterWidth=o,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",o))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var t=this.session.selection.getCursor();this.$cursorRow!==t.row&&(this.$cursorRow=t.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var t=this.session.selection.cursor.row;if(this.$cursorRow=t,!this.$cursorCell||this.$cursorCell.row!=t){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var e=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<e.length;n++){var r=e[n];if(r.row>=this.$cursorRow){if(r.row>this.$cursorRow){var i=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&i&&i.start.row==e[n-1].row))break;r=e[n-1]}r.element.className="ace_gutter-active-line "+r.element.className,this.$cursorCell=r;break}}}}},this.scrollLines=function(t){var e=this.config;if(this.config=t,this.$updateCursorRow(),this.$lines.pageChanged(e,t))return this.update(t);this.$lines.moveContainer(t);var n=Math.min(t.lastRow+t.gutterOffset,this.session.getLength()-1),r=this.oldLastRow;if(this.oldLastRow=n,!e||r<t.firstRow)return this.update(t);if(n<e.firstRow)return this.update(t);if(e.firstRow<t.firstRow)for(var i=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);i>0;i--)this.$lines.shift();if(r>n)for(i=this.session.getFoldedRowCount(n+1,r);i>0;i--)this.$lines.pop();t.firstRow<e.firstRow&&this.$lines.unshift(this.$renderLines(t,t.firstRow,e.firstRow-1)),n>r&&this.$lines.push(this.$renderLines(t,r+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(t)},this.$renderLines=function(t,e,n){for(var r=[],i=e,o=this.session.getNextFoldLine(i),a=o?o.start.row:1/0;i>a&&(i=o.end.row+1,a=(o=this.session.getNextFoldLine(i,o))?o.start.row:1/0),!(i>n);){var s=this.$lines.createCell(i,t,this.session,c);this.$renderCell(s,t,o,i),r.push(s),i++}return r},this.$renderCell=function(t,e,n,i){var o=t.element,a=this.session,s=o.childNodes[0],u=o.childNodes[1],c=a.$firstLineNumber,l=a.$breakpoints,f=a.$decorations,h=a.gutterRenderer||this.$renderer,d=this.$showFoldWidgets&&a.foldWidgets,p=n?n.start.row:Number.MAX_VALUE,g="ace_gutter-cell ";if(this.$highlightGutterLine&&(i==this.$cursorRow||n&&i<this.$cursorRow&&i>=p&&this.$cursorRow<=n.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=t&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=t)),l[i]&&(g+=l[i]),f[i]&&(g+=f[i]),this.$annotations[i]&&(g+=this.$annotations[i].className),o.className!=g&&(o.className=g),d){var v=d[i];null==v&&(v=d[i]=a.getFoldWidget(i))}if(v){g="ace_fold-widget ace_"+v;"start"==v&&i==p&&i<n.end.row?g+=" ace_closed":g+=" ace_open",u.className!=g&&(u.className=g);var m=e.lineHeight+"px";r.setStyle(u.style,"height",m),r.setStyle(u.style,"display","inline-block")}else u&&r.setStyle(u.style,"display","none");var y=(h?h.getText(a,i):i+c).toString();return y!==s.data&&(s.data=y),r.setStyle(t.element.style,"height",this.$lines.computeLineHeight(i,e,a)+"px"),r.setStyle(t.element.style,"top",this.$lines.computeLineTop(i,e,a)+"px"),t.text=y,t},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(t){this.$highlightGutterLine=t},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(t.borderLeftWidth)||0)+(parseInt(t.paddingLeft)||0)+1,this.$padding.right=(parseInt(t.borderRightWidth)||0)+(parseInt(t.paddingRight)||0),this.$padding},this.getRegion=function(t){var e=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return t.x<e.left+n.left?"markers":this.$showFoldWidgets&&t.x>n.right-e.right?"foldWidgets":void 0}}).call(u.prototype),e.Gutter=u})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(t,e,n){"use strict";var r=t("../range").Range,i=t("../lib/dom"),o=function(t){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",t.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.elt=function(t,e){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=e,n.className=t},this.update=function(t){if(t){var e;for(var n in this.config=t,this.i=0,this.markers){var r=this.markers[n];if(r.range){var i=r.range.clipRows(t.firstRow,t.lastRow);if(!i.isEmpty())if(i=i.toScreenRange(this.session),r.renderer){var o=this.$getTop(i.start.row,t),a=this.$padding+i.start.column*t.characterWidth;r.renderer(e,i,a,o,t)}else"fullLine"==r.type?this.drawFullLineMarker(e,i,r.clazz,t):"screenLine"==r.type?this.drawScreenLineMarker(e,i,r.clazz,t):i.isMultiLine()?"text"==r.type?this.drawTextMarker(e,i,r.clazz,t):this.drawMultiLineMarker(e,i,r.clazz,t):this.drawSingleLineMarker(e,i,r.clazz+" ace_start ace_br15",t)}else r.update(e,this,this.session,t)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(t,e){return(t-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(t,e,n,i,o){for(var a=this.session,s=e.start.row,u=e.end.row,c=s,l=0,f=0,h=a.getScreenLastRowColumn(c),d=new r(c,e.start.column,c,f);c<=u;c++)d.start.row=d.end.row=c,d.start.column=c==s?e.start.column:a.getRowWrapIndent(c),d.end.column=h,l=f,f=h,h=c+1<u?a.getScreenLastRowColumn(c+1):c==u?0:e.end.column,this.drawSingleLineMarker(t,d,n+(c==s?" ace_start":"")+" ace_br"+((c==s||c==s+1&&e.start.column?1:0)|(l<f?2:0)|(f>h?4:0)|(c==u?8:0)),i,c==u?0:1,o)},this.drawMultiLineMarker=function(t,e,n,r,i){var o=this.$padding,a=r.lineHeight,s=this.$getTop(e.start.row,r),u=o+e.start.column*r.characterWidth;(i=i||"",this.session.$bidiHandler.isBidiRow(e.start.row))?((c=e.clone()).end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(t,c,n+" ace_br1 ace_start",r,null,i)):this.elt(n+" ace_br1 ace_start","height:"+a+"px;right:0;top:"+s+"px;left:"+u+"px;"+(i||""));if(this.session.$bidiHandler.isBidiRow(e.end.row)){var c;(c=e.clone()).start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(t,c,n+" ace_br12",r,null,i)}else{s=this.$getTop(e.end.row,r);var l=e.end.column*r.characterWidth;this.elt(n+" ace_br12","height:"+a+"px;width:"+l+"px;top:"+s+"px;left:"+o+"px;"+(i||""))}if(!((a=(e.end.row-e.start.row-1)*r.lineHeight)<=0)){s=this.$getTop(e.start.row+1,r);var f=(e.start.column?1:0)|(e.end.column?0:8);this.elt(n+(f?" ace_br"+f:""),"height:"+a+"px;right:0;top:"+s+"px;left:"+o+"px;"+(i||""))}},this.drawSingleLineMarker=function(t,e,n,r,i,o){if(this.session.$bidiHandler.isBidiRow(e.start.row))return this.drawBidiSingleLineMarker(t,e,n,r,i,o);var a=r.lineHeight,s=(e.end.column+(i||0)-e.start.column)*r.characterWidth,u=this.$getTop(e.start.row,r),c=this.$padding+e.start.column*r.characterWidth;this.elt(n,"height:"+a+"px;width:"+s+"px;top:"+u+"px;left:"+c+"px;"+(o||""))},this.drawBidiSingleLineMarker=function(t,e,n,r,i,o){var a=r.lineHeight,s=this.$getTop(e.start.row,r),u=this.$padding;this.session.$bidiHandler.getSelections(e.start.column,e.end.column).forEach((function(t){this.elt(n,"height:"+a+"px;width:"+t.width+(i||0)+"px;top:"+s+"px;left:"+(u+t.left)+"px;"+(o||""))}),this)},this.drawFullLineMarker=function(t,e,n,r,i){var o=this.$getTop(e.start.row,r),a=r.lineHeight;e.start.row!=e.end.row&&(a+=this.$getTop(e.end.row,r)-o),this.elt(n,"height:"+a+"px;top:"+o+"px;left:0;right:0;"+(i||""))},this.drawScreenLineMarker=function(t,e,n,r,i){var o=this.$getTop(e.start.row,r),a=r.lineHeight;this.elt(n,"height:"+a+"px;top:"+o+"px;left:0;right:0;"+(i||""))}}).call(o.prototype),e.Marker=o})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],(function(t,e,n){"use strict";var r=t("../lib/oop"),i=t("../lib/dom"),o=t("../lib/lang"),a=t("./lines").Lines,s=t("../lib/event_emitter").EventEmitter,u=function(t){this.dom=i,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)};(function(){r.implement(this,s),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var t=this.session.doc,e="\n"==t.getNewLineCharacter()&&"windows"!=t.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(t){this.$padding=t,this.element.style.margin="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",function(t){this._signal("changeCharacterSize",t)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,"string"==typeof t?(this.showSpaces=/tab/i.test(t),this.showTabs=/space/i.test(t),this.showEOL=/eol/i.test(t)):this.showSpaces=this.showTabs=this.showEOL=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var e=this.$tabStrings=[0],n=1;n<t+1;n++){if(this.showTabs)(r=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",r.textContent=o.stringRepeat(this.TAB_CHAR,n),e.push(r);else e.push(this.dom.createTextNode(o.stringRepeat(" ",n),this.element))}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r,i=this.showSpaces?" ace_invisible ace_invisible_space":"",a=this.showSpaces?o.stringRepeat(this.SPACE_CHAR,this.tabSize):o.stringRepeat(" ",this.tabSize),s=this.showTabs?" ace_invisible ace_invisible_tab":"",u=this.showTabs?o.stringRepeat(this.TAB_CHAR,this.tabSize):a;(r=this.dom.createElement("span")).className="ace_indent-guide"+i,r.textContent=a,this.$tabStrings[" "]=r,(r=this.dom.createElement("span")).className="ace_indent-guide"+s,r.textContent=u,this.$tabStrings["\t"]=r}},this.updateLines=function(t,e,n){if(this.config.lastRow!=t.lastRow||this.config.firstRow!=t.firstRow)return this.update(t);this.config=t;for(var r=Math.max(e,t.firstRow),i=Math.min(n,t.lastRow),o=this.element.childNodes,a=0,s=t.firstRow;s<r;s++){if(u=this.session.getFoldLine(s)){if(u.containsRow(r)){r=u.start.row;break}s=u.end.row}a++}for(var u,c=!1,l=(s=r,(u=this.session.getNextFoldLine(s))?u.start.row:1/0);s>l&&(s=u.end.row+1,l=(u=this.session.getNextFoldLine(s,u))?u.start.row:1/0),!(s>i);){var f=o[a++];if(f){this.dom.removeChildren(f),this.$renderLine(f,s,s==l&&u),c&&(f.style.top=this.$lines.computeLineTop(s,t,this.session)+"px");var h=t.lineHeight*this.session.getRowLength(s)+"px";f.style.height!=h&&(c=!0,f.style.height=h)}s++}if(c)for(;a<this.$lines.cells.length;){var d=this.$lines.cells[a++];d.element.style.top=this.$lines.computeLineTop(d.row,t,this.session)+"px"}},this.scrollLines=function(t){var e=this.config;if(this.config=t,this.$lines.pageChanged(e,t))return this.update(t);this.$lines.moveContainer(t);var n=t.lastRow,r=e?e.lastRow:-1;if(!e||r<t.firstRow)return this.update(t);if(n<e.firstRow)return this.update(t);if(!e||e.lastRow<t.firstRow)return this.update(t);if(t.lastRow<e.firstRow)return this.update(t);if(e.firstRow<t.firstRow)for(var i=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);i>0;i--)this.$lines.shift();if(e.lastRow>t.lastRow)for(i=this.session.getFoldedRowCount(t.lastRow+1,e.lastRow);i>0;i--)this.$lines.pop();t.firstRow<e.firstRow&&this.$lines.unshift(this.$renderLinesFragment(t,t.firstRow,e.firstRow-1)),t.lastRow>e.lastRow&&this.$lines.push(this.$renderLinesFragment(t,e.lastRow+1,t.lastRow))},this.$renderLinesFragment=function(t,e,n){for(var r=[],o=e,a=this.session.getNextFoldLine(o),s=a?a.start.row:1/0;o>s&&(o=a.end.row+1,s=(a=this.session.getNextFoldLine(o,a))?a.start.row:1/0),!(o>n);){var u=this.$lines.createCell(o,t,this.session),c=u.element;this.dom.removeChildren(c),i.setStyle(c.style,"height",this.$lines.computeLineHeight(o,t,this.session)+"px"),i.setStyle(c.style,"top",this.$lines.computeLineTop(o,t,this.session)+"px"),this.$renderLine(c,o,o==s&&a),this.$useLineGroups()?c.className="ace_line_group":c.className="ace_line",r.push(u),o++}return r},this.update=function(t){this.$lines.moveContainer(t),this.config=t;for(var e=t.firstRow,n=t.lastRow,r=this.$lines;r.getLength();)r.pop();r.push(this.$renderLinesFragment(t,e,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,e,n,r){for(var i,a=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,s=this.dom.createFragment(this.element),u=0;i=a.exec(r);){var c=i[1],l=i[2],f=i[3],h=i[4],d=i[5];if(this.showSpaces||!l){var p=u!=i.index?r.slice(u,i.index):"";if(u=i.index+i[0].length,p&&s.appendChild(this.dom.createTextNode(p,this.element)),c){var g=this.session.getScreenTabSize(e+i.index);s.appendChild(this.$tabStrings[g].cloneNode(!0)),e+=g-1}else if(l){if(this.showSpaces)(m=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",m.textContent=o.stringRepeat(this.SPACE_CHAR,l.length),s.appendChild(m);else s.appendChild(this.com.createTextNode(l,this.element))}else if(f){(m=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",m.textContent=o.stringRepeat(this.SPACE_CHAR,f.length),s.appendChild(m)}else if(h){e+=1,(m=this.dom.createElement("span")).style.width=2*this.config.characterWidth+"px",m.className=this.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",m.textContent=this.showSpaces?this.SPACE_CHAR:h,s.appendChild(m)}else if(d){e+=1,(m=this.dom.createElement("span")).style.width=2*this.config.characterWidth+"px",m.className="ace_cjk",m.textContent=d,s.appendChild(m)}}}if(s.appendChild(this.dom.createTextNode(u?r.slice(u):r,this.element)),this.$textToken[n.type])t.appendChild(s);else{var v="ace_"+n.type.replace(/\./g," ace_"),m=this.dom.createElement("span");"fold"==n.type&&(m.style.width=n.value.length*this.config.characterWidth+"px"),m.className=v,m.appendChild(s),t.appendChild(m)}return e+r.length},this.renderIndentGuide=function(t,e,n){var r=e.search(this.$indentGuideRe);if(r<=0||r>=n)return e;if(" "==e[0]){for(var i=(r-=r%this.tabSize)/this.tabSize,o=0;o<i;o++)t.appendChild(this.$tabStrings[" "].cloneNode(!0));return e.substr(r)}if("\t"==e[0]){for(o=0;o<r;o++)t.appendChild(this.$tabStrings["\t"].cloneNode(!0));return e.substr(r)}return e},this.$createLineElement=function(t){var e=this.dom.createElement("div");return e.className="ace_line",e.style.height=this.config.lineHeight+"px",e},this.$renderWrappedLine=function(t,e,n){var r=0,i=0,a=n[0],s=0,u=this.$createLineElement();t.appendChild(u);for(var c=0;c<e.length;c++){var l=e[c],f=l.value;if(0==c&&this.displayIndentGuides){if(r=f.length,!(f=this.renderIndentGuide(u,f,a)))continue;r-=f.length}if(r+f.length<a)s=this.$renderToken(u,s,l,f),r+=f.length;else{for(;r+f.length>=a;)s=this.$renderToken(u,s,l,f.substring(0,a-r)),f=f.substring(a-r),r=a,u=this.$createLineElement(),t.appendChild(u),u.appendChild(this.dom.createTextNode(o.stringRepeat("\xa0",n.indent),this.element)),s=0,a=n[++i]||Number.MAX_VALUE;0!=f.length&&(r+=f.length,s=this.$renderToken(u,s,l,f))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(u,s,null,"",!0)},this.$renderSimpleLine=function(t,e){var n=0,r=e[0],i=r.value;this.displayIndentGuides&&(i=this.renderIndentGuide(t,i)),i&&(n=this.$renderToken(t,n,r,i));for(var o=1;o<e.length;o++){if(n+(i=(r=e[o]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(t,n,r,i);n=this.$renderToken(t,n,r,i)}},this.$renderOverflowMessage=function(t,e,n,r,i){n&&this.$renderToken(t,e,n,r.slice(0,this.MAX_LINE_LENGTH-e));var o=this.dom.createElement("span");o.className="ace_inline_button ace_keyword ace_toggle_wrap",o.textContent=i?"<hide>":"<click to see more...>",t.appendChild(o)},this.$renderLine=function(t,e,n){if(n||0==n||(n=this.session.getFoldLine(e)),n)var r=this.$getFoldLineTokens(e,n);else r=this.session.getTokens(e);var i=t;if(r.length){var o=this.session.getRowSplitData(e);if(o&&o.length){this.$renderWrappedLine(t,r,o);i=t.lastChild}else{i=t;this.$useLineGroups()&&(i=this.$createLineElement(),t.appendChild(i)),this.$renderSimpleLine(i,r)}}else this.$useLineGroups()&&(i=this.$createLineElement(),t.appendChild(i));if(this.showEOL&&i){n&&(e=n.end.row);var a=this.dom.createElement("span");a.className="ace_invisible ace_invisible_eol",a.textContent=e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,i.appendChild(a)}},this.$getFoldLineTokens=function(t,e){var n=this.session,r=[];var i=n.getTokens(t);return e.walk((function(t,e,o,a,s){null!=t?r.push({type:"fold",value:t}):(s&&(i=n.getTokens(e)),i.length&&function(t,e,n){for(var i=0,o=0;o+t[i].value.length<e;)if(o+=t[i].value.length,++i==t.length)return;for(o!=e&&((a=t[i].value.substring(e-o)).length>n-e&&(a=a.substring(0,n-e)),r.push({type:t[i].type,value:a}),o=e+a.length,i+=1);o<n&&i<t.length;){var a;(a=t[i].value).length+o>n?r.push({type:t[i].type,value:a.substring(0,n-o)}):r.push(t[i]),o+=a.length,i+=1}}(i,a,o))}),e.end.row,this.session.getLine(e.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(u.prototype),e.Text=u})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var r=t("../lib/dom"),i=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",t.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(t){for(var e=this.cursors,n=e.length;n--;)r.setStyle(e[n].style,"opacity",t?"":"0")},this.$startCssAnimation=function(){for(var t=this.cursors,e=t.length;e--;)t[e].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){r.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){r.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t!=this.smoothBlinking&&(this.smoothBlinking=t,r.setCssClass(this.element,"ace_smooth-blinking",t),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var t=r.createElement("div");return t.className="ace_cursor",this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(this.cursors.length>1){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var t=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),t(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)),r.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var e=function(){this.timeoutId=setTimeout((function(){t(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){t(!0),e()}),this.blinkInterval),e()}else this.$stopCssAnimation()},this.getPixelPosition=function(t,e){if(!this.config||!this.session)return{left:0,top:0};t||(t=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(t);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,t.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(t,e){return t.top>=0&&t.top<e.maxHeight},this.update=function(t){this.config=t;var e=this.session.$selectionMarkers,n=0,i=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]);n=0;for(var o=e.length;n<o;n++){var a=this.getPixelPosition(e[n].cursor,!0);if(!((a.top>t.height+t.offset||a.top<0)&&n>1)){var s=this.cursors[i++]||this.addCursor(),u=s.style;this.drawCursor?this.drawCursor(s,a,t,e[n],this.session):this.isCursorInView(a,t)?(r.setStyle(u,"display","block"),r.translate(s,a.left,a.top),r.setStyle(u,"width",Math.round(t.characterWidth)+"px"),r.setStyle(u,"height",t.lineHeight+"px")):r.setStyle(u,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=a,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&(this.overwrite=t,t?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(i.prototype),e.Cursor=i})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/dom"),o=t("./lib/event"),a=t("./lib/event_emitter").EventEmitter,s=function(t){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xa0",this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){r.implement(this,a),this.setVisible=function(t){this.element.style.display=t?"":"none",this.isVisible=t,this.coeff=1}}).call(s.prototype);var u=function(t,e){s.call(this,t),this.scrollTop=0,this.scrollHeight=0,e.$scrollbarWidth=this.width=i.scrollbarWidth(t.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};r.inherits(u,s),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var t=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-t)/(this.coeff-t)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(t){this.element.style.height=t+"px"},this.setInnerHeight=this.setScrollHeight=function(t){this.scrollHeight=t,t>32768?(this.coeff=32768/t,t=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=t+"px"},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=t,this.element.scrollTop=t*this.coeff)}}.call(u.prototype);var c=function(t,e){s.call(this,t),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(c,s),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+"px"},this.setInnerWidth=function(t){this.inner.style.width=t+"px"},this.setScrollWidth=function(t){this.inner.style.width=t+"px"},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}.call(c.prototype),e.ScrollBar=u,e.ScrollBarV=u,e.ScrollBarH=c,e.VScrollBar=u,e.HScrollBar=c})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(t,e,n){"use strict";var r=t("./lib/event"),i=function(t,e){this.onRender=t,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=e||window;var n=this;this._flush=function(t){n.pending=!1;var e=n.changes;if(e&&(r.blockIdle(100),n.changes=0,n.onRender(e)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(t){this.changes=this.changes|t,this.changes&&!this.pending&&(r.nextFrame(this._flush),this.pending=!0)},this.clear=function(t){var e=this.changes;return this.changes=0,e}}).call(i.prototype),e.RenderLoop=i})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(t,e,n){var r=t("../lib/oop"),i=t("../lib/dom"),o=t("../lib/lang"),a=t("../lib/event"),s=t("../lib/useragent"),u=t("../lib/event_emitter").EventEmitter,c="function"==typeof ResizeObserver,l=200,f=e.FontMetrics=function(t){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),this.$measureNode.textContent=o.stringRepeat("X",256),this.$characterSize={width:0,height:0},c?this.$addObserver():this.checkForSizeChanges()};(function(){r.implement(this,u),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(t,e){t.width=t.height="auto",t.left=t.top="0px",t.visibility="hidden",t.position="absolute",t.whiteSpace="pre",s.isIE<8?t["font-family"]="inherit":t.font="inherit",t.overflow=e?"hidden":"visible"},this.checkForSizeChanges=function(t){if(void 0===t&&(t=this.$measureSizes()),t&&(this.$characterSize.width!==t.width||this.$characterSize.height!==t.height)){this.$measureNode.style.fontWeight="bold";var e=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=t,this.charSizes=Object.create(null),this.allowBoldFonts=e&&e.width===t.width&&e.height===t.height,this._emit("changeCharacterSize",{data:t})}},this.$addObserver=function(){var t=this;this.$observer=new window.ResizeObserver((function(e){t.checkForSizeChanges()})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=a.onIdle((function e(){t.checkForSizeChanges(),a.onIdle(e,500)}),500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(t){var e={height:(t||this.$measureNode).clientHeight,width:(t||this.$measureNode).clientWidth/256};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(t){return this.$main.textContent=o.stringRepeat(t,256),this.$main.getBoundingClientRect().width/256},this.getCharacterWidth=function(t){var e=this.charSizes[t];return void 0===e&&(e=this.charSizes[t]=this.$measureCharWidth(t)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function t(e){return e?(window.getComputedStyle(e).zoom||1)*t(e.parentElement):1},this.$initTransformMeasureNodes=function(){var t=function(t,e){return["div",{style:"position: absolute;top:"+t+"px;left:"+e+"px;"}]};this.els=i.buildDom([t(0,0),t(l,0),t(0,l),t(l,l)],this.el)},this.transformCoordinates=function(t,e){t&&(t=o(1/this.$getZoom(this.el),t));function n(t,e,n){var r=t[1]*e[0]-t[0]*e[1];return[(-e[1]*n[0]+e[0]*n[1])/r,(+t[1]*n[0]-t[0]*n[1])/r]}function r(t,e){return[t[0]-e[0],t[1]-e[1]]}function i(t,e){return[t[0]+e[0],t[1]+e[1]]}function o(t,e){return[t*e[0],t*e[1]]}function a(t){var e=t.getBoundingClientRect();return[e.left,e.top]}this.els||this.$initTransformMeasureNodes();var s=a(this.els[0]),u=a(this.els[1]),c=a(this.els[2]),f=a(this.els[3]),h=n(r(f,u),r(f,c),r(i(u,c),i(f,s))),d=o(1+h[0],r(u,s)),p=o(1+h[1],r(c,s));if(e){var g=e,v=h[0]*g[0]/l+h[1]*g[1]/l+1,m=i(o(g[0],d),o(g[1],p));return i(o(1/v/l,m),s)}var y=r(t,s),b=n(r(d,o(h[0],y)),r(p,o(h[1],y)),y);return o(l,b)}}).call(f.prototype)})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],(function(t,e,n){"use strict";var r=t("./lib/oop"),i=t("./lib/dom"),o=t("./config"),a=t("./layer/gutter").Gutter,s=t("./layer/marker").Marker,u=t("./layer/text").Text,c=t("./layer/cursor").Cursor,l=t("./scrollbar").HScrollBar,f=t("./scrollbar").VScrollBar,h=t("./renderloop").RenderLoop,d=t("./layer/font_metrics").FontMetrics,p=t("./lib/event_emitter").EventEmitter,g='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',v=t("./lib/useragent"),m=v.isIE;i.importCssString(g,"ace_editor.css");var y=function(t,e){var n=this;this.container=t||i.createElement("div"),i.addCssClass(this.container,"ace_editor"),i.HI_DPI&&i.addCssClass(this.container,"ace_hidpi"),this.setTheme(e),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new a(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new s(this.content);var r=this.$textLayer=new u(this.content);this.canvas=r.element,this.$markerFront=new s(this.content),this.$cursorLayer=new c(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new f(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on("scroll",(function(t){n.$scrollAnimation||n.session.setScrollTop(t.data-n.scrollMargin.top)})),this.scrollBarH.on("scroll",(function(t){n.$scrollAnimation||n.session.setScrollLeft(t.data-n.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new d(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",(function(t){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",t)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!v.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,p),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),i.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(t){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=t,t&&this.scrollMargin.top&&t.getScrollTop()<=0&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(t,e,n){if(void 0===e&&(e=1/0),this.$changedLines?(this.$changedLines.firstRow>t&&(this.$changedLines.firstRow=t),this.$changedLines.lastRow<e&&(this.$changedLines.lastRow=e)):this.$changedLines={firstRow:t,lastRow:e},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(t,e,n,r){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=t?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var o=this.$updateCachedSize(t,e,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;t&&(this.$gutterLayer.$padding=null),t?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(t,e,n,r){r-=this.$extraHeight||0;var o=0,a=this.$size,s={width:a.width,height:a.height,scrollerHeight:a.scrollerHeight,scrollerWidth:a.scrollerWidth};if(r&&(t||a.height!=r)&&(a.height=r,o|=this.CHANGE_SIZE,a.scrollerHeight=a.height,this.$horizScroll&&(a.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",o|=this.CHANGE_SCROLL),n&&(t||a.width!=n)){o|=this.CHANGE_SIZE,a.width=n,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,i.setStyle(this.scrollBarH.element.style,"left",e+"px"),i.setStyle(this.scroller.style,"left",e+this.margin.left+"px"),a.scrollerWidth=Math.max(0,n-e-this.scrollBarV.getWidth()-this.margin.h),i.setStyle(this.$gutter.style,"left",this.margin.left+"px");var u=this.scrollBarV.getWidth()+"px";i.setStyle(this.scrollBarH.element.style,"right",u),i.setStyle(this.scroller.style,"right",u),i.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||t)&&(o|=this.CHANGE_FULL)}return a.$dirty=!n||!r,o&&this._signal("resize",s),o},this.onGutterResize=function(t){var e=this.$showGutter?t:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var t=this.$size.scrollerWidth-2*this.$padding,e=Math.floor(t/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption("animatedScroll",t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption("showInvisibles",t),this.session.$bidiHandler.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(t){this.setOption("displayIndentGuides",t)},this.setShowPrintMargin=function(t){this.setOption("showPrintMargin",t)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(t){this.setOption("printMarginColumn",t)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(t){return this.setOption("showGutter",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var t=i.createElement("div");t.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",t.appendChild(this.$printMarginEl),this.content.insertBefore(t,this.content.firstChild)}var e=this.$printMarginEl.style;e.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var t=this.textarea.style,e=this.$composition;if(this.$keepTextAreaAtCursor||e){var n=this.$cursorLayer.$pixelPos;if(n){e&&e.markerRange&&(n=this.$cursorLayer.getPixelPosition(e.markerRange.start,!0));var r=this.layerConfig,o=n.top,a=n.left;o-=r.offset;var s=e&&e.useTextareaForIME?this.lineHeight:m?0:1;if(o<0||o>r.height-s)i.translate(this.textarea,0,0);else{var u=1,c=this.$size.height-s;if(e)if(e.useTextareaForIME){var l=this.textarea.value;u=this.characterWidth*this.session.$getStringScreenWidth(l)[0]}else o+=this.lineHeight+2;else o+=this.lineHeight;(a-=this.scrollLeft)>this.$size.scrollerWidth-u&&(a=this.$size.scrollerWidth-u),a+=this.gutterWidth+this.margin.left,i.setStyle(t,"height",s+"px"),i.setStyle(t,"width",u+"px"),i.translate(this.textarea,Math.min(a,this.$size.scrollerWidth-u),Math.min(o,c))}}}else i.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var t=this.layerConfig,e=t.lastRow;return this.session.documentToScreenRow(e,0)*t.lineHeight-this.session.getScrollTop()>t.height-t.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(t,e,n,r){var i=this.scrollMargin;i.top=0|t,i.bottom=0|e,i.right=0|r,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.setMargin=function(t,e,n,r){var i=this.margin;i.top=0|t,i.bottom=0|e,i.right=0|r,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption("hScrollBarAlwaysVisible",t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption("vScrollBarAlwaysVisible",t)},this.$updateScrollBarV=function(){var t=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(t-=(e-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>t-e&&(t=this.scrollTop+e,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(t+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(t,e){if(this.$changes&&(t|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(t||e)){if(this.$size.$dirty)return this.$changes|=t,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",t),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(t&this.CHANGE_FULL||t&this.CHANGE_SIZE||t&this.CHANGE_TEXT||t&this.CHANGE_LINES||t&this.CHANGE_SCROLL||t&this.CHANGE_H_SCROLL){if(t|=this.$computeLayerConfig()|this.$loop.clear(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,t|=this.CHANGE_SCROLL,t|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),t&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),i.translate(this.content,-this.scrollLeft,-n.offset);var o=n.width+2*this.$padding+"px",a=n.minHeight+"px";i.setStyle(this.content.style,"width",o),i.setStyle(this.content.style,"height",a)}if(t&this.CHANGE_H_SCROLL&&(i.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),t&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",t);if(t&this.CHANGE_SCROLL)return this.$changedLines=null,t&this.CHANGE_TEXT||t&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(t&this.CHANGE_GUTTER||t&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",t);t&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):t&this.CHANGE_LINES?(this.$updateLines()||t&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):t&this.CHANGE_TEXT||t&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):t&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),t&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender",t)}else this.$changes|=t},this.$autosize=function(){var t=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,n=Math.min(e,Math.max((this.$minLines||1)*this.lineHeight,t))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var r=!(n<=2*this.lineHeight)&&t>e;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||r!=this.$vScroll){r!=this.$vScroll&&(this.$vScroll=r,this.scrollBarV.setVisible(r));var i=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,i,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var t=this.session,e=this.$size,n=e.height<=2*this.lineHeight,r=this.session.getScreenLength()*this.lineHeight,i=this.$getLongestLine(),o=!n&&(this.$hScrollBarAlwaysVisible||e.scrollerWidth-i-2*this.$padding<0),a=this.$horizScroll!==o;a&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var s=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var u=e.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;r+=c;var l=this.scrollMargin;this.session.setScrollTop(Math.max(-l.top,Math.min(this.scrollTop,r-e.scrollerHeight+l.bottom))),this.session.setScrollLeft(Math.max(-l.left,Math.min(this.scrollLeft,i+2*this.$padding-e.scrollerWidth+l.right)));var f=!n&&(this.$vScrollBarAlwaysVisible||e.scrollerHeight-r+c<0||this.scrollTop>l.top),h=s!==f;h&&(this.$vScroll=f,this.scrollBarV.setVisible(f));var d,p,g=this.scrollTop%this.lineHeight,v=Math.ceil(u/this.lineHeight)-1,m=Math.max(0,Math.round((this.scrollTop-g)/this.lineHeight)),y=m+v,b=this.lineHeight;m=t.screenToDocumentRow(m,0);var w=t.getFoldLine(m);w&&(m=w.start.row),d=t.documentToScreenRow(m,0),p=t.getRowLength(m)*b,y=Math.min(t.screenToDocumentRow(y,0),t.getLength()-1),u=e.scrollerHeight+t.getRowLength(y)*b+p,g=this.scrollTop-d*b;var x=0;return(this.layerConfig.width!=i||a)&&(x=this.CHANGE_H_SCROLL),(a||h)&&(x|=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal("scrollbarVisibilityChanged"),h&&(i=this.$getLongestLine())),this.layerConfig={width:i,padding:this.$padding,firstRow:m,firstRowScreen:d,lastRow:y,lineHeight:b,characterWidth:this.characterWidth,minHeight:u,maxHeight:r,offset:g,gutterOffset:b?Math.max(0,Math.ceil((g+e.height-e.scrollerHeight)/b)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(i-this.$padding),x},this.$updateLines=function(){if(this.$changedLines){var t=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(t>n.lastRow+1)&&!(e<n.firstRow))return e===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,t,e),!0)}},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),this.$textLayer&&t>this.$textLayer.MAX_LINE_LENGTH&&(t=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(t,e){this.$gutterLayer.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){this.$gutterLayer.removeGutterDecoration(t,e)},this.updateBreakpoints=function(t){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(t,e,n){this.scrollCursorIntoView(t,n),this.scrollCursorIntoView(e,n)},this.scrollCursorIntoView=function(t,e,n){if(0!==this.$size.scrollerHeight){var r=this.$cursorLayer.getPixelPosition(t),i=r.left,o=r.top,a=n&&n.top||0,s=n&&n.bottom||0,u=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;u+a>o?(e&&u+a>o+this.lineHeight&&(o-=e*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):u+this.$size.scrollerHeight-s<o+this.lineHeight&&(e&&u+this.$size.scrollerHeight-s<o-this.lineHeight&&(o+=e*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight+s-this.$size.scrollerHeight));var c=this.scrollLeft;c>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):c+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&i-c<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(t,e){"number"==typeof t&&(t={row:t,column:0});var n=this.$cursorLayer.getPixelPosition(t),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(e||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(t,e){var n,r,i=0,o=this.STEPS,a=[];for(i=0;i<o;++i)a.push((n=i/this.STEPS,r=t,(e-t)*(Math.pow(n-1,3)+1)+r));return a},this.scrollToLine=function(t,e,n,r){var i=this.$cursorLayer.getPixelPosition({row:t,column:0}).top;e&&(i-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(i),!1!==n&&this.animateScrolling(o,r)},this.animateScrolling=function(t,e){var n=this.scrollTop;if(this.$animatedScroll){var r=this;if(t!=n){if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length&&(t=i[0])==n)return}var o=r.$calcSteps(t,n);this.$scrollAnimation={from:t,to:n,steps:o},clearInterval(this.$timer),r.session.setScrollTop(o.shift()),r.session.$scrollTop=n,this.$timer=setInterval((function(){if(!r.session)return clearInterval(r.$timer);o.length?(r.session.setScrollTop(o.shift()),r.session.$scrollTop=n):null!=n?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,e&&e())}),10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(t,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(t,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),t&&this.session.setScrollLeft(this.session.getScrollLeft()+t)},this.isScrollableBy=function(t,e){return e<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(e>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(t<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(t>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(t,e){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([t,e]);t=r[1]-this.gutterWidth-this.margin.left,e=r[0]}else n=this.scroller.getBoundingClientRect();var i=t+this.scrollLeft-n.left-this.$padding,o=i/this.characterWidth,a=Math.floor((e+this.scrollTop-n.top)/this.lineHeight),s=this.$blockCursor?Math.floor(o):Math.round(o);return{row:a,column:s,side:o-s>0?1:-1,offsetX:i}},this.screenToTextCoordinates=function(t,e){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([t,e]);t=r[1]-this.gutterWidth-this.margin.left,e=r[0]}else n=this.scroller.getBoundingClientRect();var i=t+this.scrollLeft-n.left-this.$padding,o=i/this.characterWidth,a=this.$blockCursor?Math.floor(o):Math.round(o),s=Math.floor((e+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(s,Math.max(a,0),i)},this.textToScreenCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(t,e),i=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,t)?this.session.$bidiHandler.getPosLeft(r.column):Math.round(r.column*this.characterWidth)),o=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+o-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(t){this.$composition=t,t.cssText||(t.cssText=this.textarea.style.cssText),void 0==t.useTextareaForIME&&(t.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):t.markerId=this.session.addMarker(t.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(t){var e=this.session.selection.cursor;this.addToken(t,"composition_placeholder",e.row,e.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),i.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var t=this.session.selection.cursor;this.removeExtraToken(t.row,t.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.addToken=function(t,e,n,r){var i=this.session;i.bgTokenizer.lines[n]=null;var o={type:e,value:t},a=i.getTokens(n);if(null==r)a.push(o);else for(var s=0,u=0;u<a.length;u++){var c=a[u];if(r<=(s+=c.value.length)){var l=c.value.length-(s-r),f=c.value.slice(0,l),h=c.value.slice(l);a.splice(u,1,{type:c.type,value:f},o,{type:c.type,value:h});break}}this.updateLines(n,n)},this.removeExtraToken=function(t,e){this.updateLines(t,t)},this.setTheme=function(t,e){var n=this;if(this.$themeId=t,n._dispatchEvent("themeChange",{theme:t}),t&&"string"!=typeof t)a(t);else{var r=t||this.$options.theme.initialValue;o.loadModule(["theme",r],a)}function a(r){if(n.$themeId!=t)return e&&e();if(!r||!r.cssClass)throw new Error("couldn't load module "+t+" or it didn't call define");r.$id&&(n.$themeId=r.$id),i.importCssString(r.cssText,r.cssClass,n.container),n.theme&&i.removeCssClass(n.container,n.theme.cssClass);var o="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&o!=n.$padding&&n.setPadding(o),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),e&&e()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(t,e){i.setCssClass(this.container,t,!1!==e)},this.unsetStyle=function(t){i.removeCssClass(this.container,t)},this.setCursorStyle=function(t){i.setStyle(this.scroller.style,"cursor",t)},this.setMouseCursor=function(t){i.setStyle(this.scroller.style,"cursor",t)},this.attachToShadowRoot=function(){i.importCssString(g,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(y.prototype),o.defineOptions(y.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){"number"==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){this.$gutterLayer.setHighlightGutterLine(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(t){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(t){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){"number"==typeof t&&(t+="px"),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(t){this.updateFull()}},minLines:{set:function(t){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(t){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(t){t=+t||0,this.$scrollPastEnd!=t&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!v.isMobile&&!v.isIE}}),e.VirtualRenderer=y})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(t,e,n){"use strict";var r=t("../lib/oop"),i=t("../lib/net"),o=t("../lib/event_emitter").EventEmitter,a=t("../config");function s(t){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var e=function(t){var e="importScripts('"+i.qualifyURL(t)+"');";try{return new Blob([e],{type:"application/javascript"})}catch(r){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return n.append(e),n.getBlob("application/javascript")}}(t),n=(window.URL||window.webkitURL).createObjectURL(e);return new Worker(n)}return new Worker(t)}var u=function(t){t.postMessage||(t=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=t,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,o),this.$createWorkerFromOldConfig=function(e,n,r,i,o){if(t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),a.get("packaged")||!t.toUrl)i=i||a.moduleUrl(n,"worker");else{var u=this.$normalizePath;i=i||u(t.toUrl("ace/worker/worker.js",null,"_"));var c={};e.forEach((function(e){c[e]=u(t.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=s(i),o&&this.send("importScripts",o),this.$worker.postMessage({init:!0,tlns:c,module:n,classname:r}),this.$worker},this.onMessage=function(t){var e=t.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var n=this.callbacks[e.id];n&&(n(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data)}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return i.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,e){this.$worker.postMessage({command:t,args:e})},this.call=function(t,e,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,e.push(r)}this.send(t,e)},this.emit=function(t,e){try{e.data&&e.data.err&&(e.data.err={message:e.data.err.message,stack:e.data.err.stack,code:e.data.err.code}),this.$worker.postMessage({event:t,data:{data:e.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==t.action?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))}}).call(u.prototype);e.UIWorkerClient=function(t,e,n){var r=null,i=!1,s=Object.create(o),c=[],l=new u({messageBuffer:c,terminate:function(){},postMessage:function(t){c.push(t),r&&(i?setTimeout(f):f())}});l.setEmitSync=function(t){i=t};var f=function(){var t=c.shift();t.command?r[t.command].apply(r,t.args):t.event&&s._signal(t.event,t.data)};return s.postMessage=function(t){l.onMessage({data:t})},s.callback=function(t,e){this.postMessage({type:"call",id:e,data:t})},s.emit=function(t,e){this.postMessage({type:"event",name:t,data:e})},a.loadModule(["worker",e],(function(t){for(r=new t[n](s);c.length;)f()})),l},e.WorkerClient=u,e.createWorker=s})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(t,e,n){"use strict";var r=t("./range").Range,i=t("./lib/event_emitter").EventEmitter,o=t("./lib/oop"),a=function(t,e,n,r,i,o){var a=this;this.length=e,this.session=t,this.doc=t.getDocument(),this.mainClass=i,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout((function(){a.onCursorChange()}))},this.$pos=n;var s=t.getUndoManager().$undoStack||t.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=s.length,this.setup(),t.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,i),this.setup=function(){var t=this,e=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var i=this.pos;i.$insertRight=!0,i.detach(),i.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(n){var r=e.createAnchor(n.row,n.column);r.$insertRight=!0,r.detach(),t.others.push(r)})),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var t=this.session,e=this;this.othersActive=!0,this.others.forEach((function(n){n.markerId=t.addMarker(new r(n.row,n.column,n.row,n.column+e.length),e.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(t){if(this.$updating)return this.updateAnchors(t);var e=t;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var n="insert"===t.action?e.end.column-e.start.column:e.start.column-e.end.column,i=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,o=e.start.column-this.pos.column;if(this.updateAnchors(t),i&&(this.length+=n),i&&!this.session.$fromUndo)if("insert"===t.action)for(var a=this.others.length-1;a>=0;a--){var s={row:(u=this.others[a]).row,column:u.column+o};this.doc.insertMergedLines(s,t.lines)}else if("remove"===t.action)for(a=this.others.length-1;a>=0;a--){var u;s={row:(u=this.others[a]).row,column:u.column+o};this.doc.remove(new r(s.row,s.column,s.row,s.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(t){this.pos.onChange(t);for(var e=this.others.length;e--;)this.others[e].onChange(t);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var t=this,e=this.session,n=function(n,i){e.removeMarker(n.markerId),n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),i,null,!1)};n(this.pos,this.mainClass);for(var i=this.others.length;i--;)n(this.others[i],this.othersClass)}},this.onCursorChange=function(t){if(!this.$updating&&this.session){var e=this.session.selection.getCursor();e.row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",t)):(this.hideOtherMarkers(),this._emit("cursorLeave",t))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var t=this.session.getUndoManager(),e=(t.$undoStack||t.$undostack).length-this.$undoStackDepth,n=0;n<e;n++)t.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(a.prototype),e.PlaceHolder=a})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(t,e,n){var r=t("../lib/event"),i=t("../lib/useragent");function o(t,e){return t.row==e.row&&t.column==e.column}e.onMouseDown=function(t){var e=t.domEvent,n=e.altKey,a=e.shiftKey,s=e.ctrlKey,u=t.getAccelKey(),c=t.getButton();if(s&&i.isMac&&(c=e.button),t.editor.inMultiSelectMode&&2==c)t.editor.textInput.onContextMenu(t.domEvent);else if(s||n||u){if(0===c){var l,f=t.editor,h=f.selection,d=f.inMultiSelectMode,p=t.getDocumentPosition(),g=h.getCursor(),v=t.inSelection()||h.isEmpty()&&o(p,g),m=t.x,y=t.y,b=f.session,w=f.renderer.pixelToScreenCoordinates(m,y),x=w;if(f.$mouseHandler.$enableJumpToDef)s&&n||u&&n?l=a?"block":"add":n&&f.$blockSelectEnabled&&(l="block");else if(u&&!n){if(l="add",!d&&a)return}else n&&f.$blockSelectEnabled&&(l="block");if(l&&i.isMac&&e.ctrlKey&&f.$mouseHandler.cancelContextMenu(),"add"==l){if(!d&&v)return;if(!d){var _=h.toOrientedRange();f.addSelectionMarker(_)}var O=h.rangeList.rangeAtPoint(p);f.inVirtualSelectionMode=!0,a&&(O=null,_=h.ranges[0]||_,f.removeSelectionMarker(_)),f.once("mouseup",(function(){var t=h.toOrientedRange();O&&t.isEmpty()&&o(O.cursor,t.cursor)?h.substractPoint(t.cursor):(a?h.substractPoint(_.cursor):_&&(f.removeSelectionMarker(_),h.addRange(_)),h.addRange(t)),f.inVirtualSelectionMode=!1}))}else if("block"==l){var k;t.stop(),f.inVirtualSelectionMode=!0;var S=[],E=function(){var t=f.renderer.pixelToScreenCoordinates(m,y),e=b.screenToDocumentPosition(t.row,t.column,t.offsetX);o(x,t)&&o(e,h.lead)||(x=t,f.selection.moveToPosition(e),f.renderer.scrollCursorIntoView(),f.removeSelectionMarkers(S),S=h.rectangularRangeBlock(x,w),f.$mouseHandler.$clickSelection&&1==S.length&&S[0].isEmpty()&&(S[0]=f.$mouseHandler.$clickSelection.clone()),S.forEach(f.addSelectionMarker,f),f.updateSelectionMarkers())};d&&!u?h.toSingleRange():!d&&u&&(k=h.toOrientedRange(),f.addSelectionMarker(k)),a?w=b.documentToScreenPosition(h.lead):h.moveToPosition(p),x={row:-1,column:-1};var A=E;r.capture(f.container,(function(t){m=t.clientX,y=t.clientY}),(function(t){E(),clearInterval(C),f.removeSelectionMarkers(S),S.length||(S=[h.toOrientedRange()]),k&&(f.removeSelectionMarker(k),h.toSingleRange(k));for(var e=0;e<S.length;e++)h.addRange(S[e]);f.inVirtualSelectionMode=!1,f.$mouseHandler.$clickSelection=null}));var C=setInterval((function(){A()}),20);return t.preventDefault()}}}else 0===c&&t.editor.inMultiSelectMode&&t.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(t,e,n){e.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(t){t.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(t){t.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(t){t.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(t){t.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(t){t.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(t){t.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(t){t.multiSelect.rangeCount>1?t.multiSelect.joinSelections():t.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(t){t.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(t){t.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(t){t.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],e.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(t){t.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var r=t("../keyboard/hash_handler").HashHandler;e.keyboardHandler=new r(e.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(t,e,n){var r=t("./range_list").RangeList,i=t("./range").Range,o=t("./selection").Selection,a=t("./mouse/multi_select_handler").onMouseDown,s=t("./lib/event"),u=t("./lib/lang"),c=t("./commands/multi_select_commands");e.commands=c.defaultCommands.concat(c.multiSelectCommands);var l=new(0,t("./search").Search);var f=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(f.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(t,e){if(t){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(t),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(t);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}t.cursor||(t.cursor=t.end);var r=this.rangeList.add(t);return this.$onAddRange(t),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(t)}},this.toSingleRange=function(t){t=t||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),t&&this.fromOrientedRange(t)},this.substractPoint=function(t){var e=this.rangeList.substractPoint(t);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length&&this.$onRemoveRange(t)},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal("addRange",{range:t})},this.$onRemoveRange=function(t){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var e=this.rangeList.ranges.pop();t.push(e),this.rangeCount=0}for(var n=t.length;n--;){var r=this.ranges.indexOf(t[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:t}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(e=e||this.ranges[0])&&!e.isEqual(this.getRange())&&this.fromOrientedRange(e)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var t=this.ranges.length?this.ranges:[this.getRange()],e=[],n=0;n<t.length;n++){var r=t[n],o=r.start.row,a=r.end.row;if(o===a)e.push(r.clone());else{for(e.push(new i(o,r.start.column,o,this.session.getLine(o).length));++o<a;)e.push(this.getLineRange(o,!0));e.push(new i(a,0,a,r.end.column))}0!=n||this.isBackwards()||(e=e.reverse())}this.toSingleRange();for(n=e.length;n--;)this.addRange(e[n])},this.joinSelections=function(){var t=this.rangeList.ranges,e=t[t.length-1],n=i.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],n=i.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)}else{var r=this.session.documentToScreenPosition(this.cursor),o=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(r,o).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(t,e,n){var r=[],o=t.column<e.column;if(o)var a=t.column,s=e.column,u=t.offsetX,c=e.offsetX;else a=e.column,s=t.column,u=e.offsetX,c=t.offsetX;var l,f,h,d=t.row<e.row;if(d)var p=t.row,g=e.row;else p=e.row,g=t.row;a<0&&(a=0),p<0&&(p=0),p==g&&(n=!0);for(var v=p;v<=g;v++){var m=i.fromPoints(this.session.screenToDocumentPosition(v,a,u),this.session.screenToDocumentPosition(v,s,c));if(m.isEmpty()){if(l&&(f=m.end,h=l,f.row==h.row&&f.column==h.column))break;l=m.end}m.cursor=o?m.start:m.end,r.push(m)}if(d&&r.reverse(),!n){for(var y=r.length-1;r[y].isEmpty()&&y>0;)y--;if(y>0)for(var b=0;r[b].isEmpty();)b++;for(var w=y;w>=b;w--)r[w].isEmpty()&&r.splice(w,1)}return r}}.call(o.prototype);var h=t("./editor").Editor;function d(t){t.$multiselectOnSessionChange||(t.$onAddRange=t.$onAddRange.bind(t),t.$onRemoveRange=t.$onRemoveRange.bind(t),t.$onMultiSelect=t.$onMultiSelect.bind(t),t.$onSingleSelect=t.$onSingleSelect.bind(t),t.$multiselectOnSessionChange=e.onSessionChange.bind(t),t.$checkMultiselectChange=t.$checkMultiselectChange.bind(t),t.$multiselectOnSessionChange(t),t.on("changeSession",t.$multiselectOnSessionChange),t.on("mousedown",a),t.commands.addCommands(c.defaultCommands),function(t){if(!t.textInput)return;var e=t.textInput.getElement(),n=!1;function r(e){n&&(t.renderer.setMouseCursor(""),n=!1)}s.addListener(e,"keydown",(function(e){var i=18==e.keyCode&&!(e.ctrlKey||e.shiftKey||e.metaKey);t.$blockSelectEnabled&&i?n||(t.renderer.setMouseCursor("crosshair"),n=!0):n&&r()}),t),s.addListener(e,"keyup",r,t),s.addListener(e,"blur",r,t)}(t))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(t){t.cursor||(t.cursor=t.end);var e=this.getSelectionStyle();return t.marker=this.session.addMarker(t,"ace_selection",e),this.session.$selectionMarkers.push(t),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,t},this.removeSelectionMarker=function(t){if(t.marker){this.session.removeMarker(t.marker);var e=this.session.$selectionMarkers.indexOf(t);-1!=e&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(t){for(var e=this.session.$selectionMarkers,n=t.length;n--;){var r=t[n];if(r.marker){this.session.removeMarker(r.marker);var i=e.indexOf(r);-1!=i&&e.splice(i,1)}}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(t){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(c.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(t){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(c.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(t){var e=t.command,n=t.editor;if(n.multiSelect){if(e.multiSelectAction)"forEach"==e.multiSelectAction?r=n.forEachSelection(e,t.args):"forEachLine"==e.multiSelectAction?r=n.forEachSelection(e,t.args,!0):"single"==e.multiSelectAction?(n.exitMultiSelectMode(),r=e.exec(n,t.args||{})):r=e.multiSelectAction(n,t.args||{});else{var r=e.exec(n,t.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return r}},this.forEachSelection=function(t,e,n){if(!this.inVirtualSelectionMode){var r,i=n&&n.keepOrder,a=1==n||n&&n.$byLines,s=this.session,u=this.selection,c=u.rangeList,l=(i?u:c).ranges;if(!l.length)return t.exec?t.exec(this,e||{}):t(this,e||{});var f=u._eventRegistry;u._eventRegistry={};var h=new o(s);this.inVirtualSelectionMode=!0;for(var d=l.length;d--;){if(a)for(;d>0&&l[d].start.row==l[d-1].end.row;)d--;h.fromOrientedRange(l[d]),h.index=d,this.selection=s.selection=h;var p=t.exec?t.exec(this,e||{}):t(this,e||{});r||void 0===p||(r=p),h.toOrientedRange(l[d])}h.detach(),this.selection=s.selection=u,this.inVirtualSelectionMode=!1,u._eventRegistry=f,u.mergeOverlappingRanges(),u.ranges[0]&&u.fromOrientedRange(u.ranges[0]);var g=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),g&&g.from==g.to&&this.renderer.animateScrolling(g.from),r}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var t="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,n=[],r=0;r<e.length;r++)n.push(this.session.getTextRange(e[r]));var i=this.session.getDocument().getNewLineCharacter();(t=n.join(i)).length==(n.length-1)*i.length&&(t="")}else this.selection.isEmpty()||(t=this.session.getTextRange(this.getSelectionRange()));return t},this.$checkMultiselectChange=function(t,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var r=e==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;r.row!=e.row||this.session.$clipPositionToDocument(r.row,r.column).column!=e.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(t,e,n){if((e=e||{}).needle=t||e.needle,void 0==e.needle){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();e.needle=this.session.getTextRange(r)}this.$search.set(e);var i=this.$search.findAll(this.session);if(!i.length)return 0;var o=this.multiSelect;n||o.toSingleRange(i[0]);for(var a=i.length;a--;)o.addRange(i[a],!0);return r&&o.rangeList.rangeAtPoint(r.start)&&o.addRange(r,!0),i.length},this.selectMoreLines=function(t,e){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,o=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(o.column=this.selection.$desiredColumn);var a,s=this.session.screenToDocumentPosition(o.row+t,o.column);if(n.isEmpty())c=s;else var u=this.session.documentToScreenPosition(r?n.end:n.start),c=this.session.screenToDocumentPosition(u.row+t,u.column);r?(a=i.fromPoints(s,c)).cursor=a.start:(a=i.fromPoints(c,s)).cursor=a.end;if(a.desiredColumn=o.column,this.selection.inMultiSelectMode){if(e)var l=n.cursor}else this.selection.addRange(n);this.selection.addRange(a),l&&this.selection.substractPoint(l)},this.transposeSelections=function(t){for(var e=this.session,n=e.multiSelect,r=n.ranges,i=r.length;i--;){if((s=r[i]).isEmpty()){var o=e.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();var a=[];for(i=r.length;i--;){var s=r[i];a.unshift(e.getTextRange(s))}t<0?a.unshift(a.pop()):a.push(a.shift());for(i=r.length;i--;){o=(s=r[i]).clone();e.replace(s,a[i]),s.start.row=o.start.row,s.start.column=o.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(t,e,n){var r=this.session,i=r.multiSelect.toOrientedRange();if(!i.isEmpty()||((i=r.getWordRange(i.start.row,i.start.column)).cursor=-1==t?i.start:i.end,this.multiSelect.addRange(i),!n)){var o=r.getTextRange(i),a=function(t,e,n){return l.$options.wrap=!0,l.$options.needle=e,l.$options.backwards=-1==n,l.find(t)}(r,o,t);a&&(a.cursor=-1==t?a.start:a.end,this.session.unfold(a),this.multiSelect.addRange(a),this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(i.cursor)}},this.alignCursors=function(){var t=this.session,e=t.multiSelect,n=e.ranges,r=-1,o=n.filter((function(t){if(t.cursor.row==r)return!0;r=t.cursor.row}));if(n.length&&o.length!=n.length-1){o.forEach((function(t){e.substractPoint(t.cursor)}));var a=0,s=1/0,c=n.map((function(e){var n=e.cursor,r=t.getLine(n.row).substr(n.column).search(/\S/g);return-1==r&&(r=0),n.column>a&&(a=n.column),r<s&&(s=r),r}));n.forEach((function(e,n){var r=e.cursor,o=a-r.column,l=c[n]-s;o>l?t.insert(r,u.stringRepeat(" ",o-l)):t.remove(new i(r.row,r.column,r.row,r.column-o+l)),e.start.column=e.end.column=a,e.start.row=e.end.row=r.row,e.cursor=e.end})),e.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var l=this.selection.getRange(),f=l.start.row,h=l.end.row,d=f==h;if(d){var p,g=this.session.getLength();do{p=this.session.getLine(h)}while(/[=:]/.test(p)&&++h<g);do{p=this.session.getLine(f)}while(/[=:]/.test(p)&&--f>0);f<0&&(f=0),h>=g&&(h=g-1)}var v=this.session.removeFullLines(f,h);v=this.$reAlignText(v,d),this.session.insert({row:f,column:0},v.join("\n")+"\n"),d||(l.start.column=0,l.end.column=v[v.length-1].length),this.selection.setRange(l)}},this.$reAlignText=function(t,e){var n,r,i,o=!0,a=!0;return t.map((function(t){var e=t.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?null==n?(n=e[1].length,r=e[2].length,i=e[3].length,e):(n+r+i!=e[1].length+e[2].length+e[3].length&&(a=!1),n!=e[1].length&&(o=!1),n>e[1].length&&(n=e[1].length),r<e[2].length&&(r=e[2].length),i>e[3].length&&(i=e[3].length),e):[t]})).map(e?c:o?a?function(t){return t[2]?s(n+r-t[2].length)+t[2]+s(i)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}:c:function(t){return t[2]?s(n)+t[2]+s(i)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]});function s(t){return u.stringRepeat(" ",t)}function c(t){return t[2]?s(n)+t[2]+s(r-t[2].length+i)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}}}).call(h.prototype),e.onSessionChange=function(t){var e=t.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var n=t.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),e&&(e.multiSelect.on("addRange",this.$onAddRange),e.multiSelect.on("removeRange",this.$onRemoveRange),e.multiSelect.on("multiSelect",this.$onMultiSelect),e.multiSelect.on("singleSelect",this.$onSingleSelect),e.multiSelect.lead.on("change",this.$checkMultiselectChange),e.multiSelect.anchor.on("change",this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},e.MultiSelect=d,t("./config").defineOptions(h.prototype,"editor",{enableMultiselect:{set:function(t){d(this),t?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",a)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",a))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var r=t("../../range").Range,i=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(t,e,n){var r=t.getLine(n);return this.foldingStartMarker.test(r)?"start":"markbeginend"==e&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(t,e,n){return null},this.indentationBlock=function(t,e,n){var i=/\S/,o=t.getLine(e),a=o.search(i);if(-1!=a){for(var s=n||o.length,u=t.getLength(),c=e,l=e;++e<u;){var f=t.getLine(e).search(i);if(-1!=f){if(f<=a){var h=t.getTokenAt(e,0);if(!h||"string"!==h.type)break}l=e}}if(l>c){var d=t.getLine(l).length;return new r(c,s,l,d)}}},this.openingBracketBlock=function(t,e,n,i,o){var a={row:n,column:i+1},s=t.$findClosingBracket(e,a,o);if(s){var u=t.foldWidgets[s.row];return null==u&&(u=t.getFoldWidget(s.row)),"start"==u&&s.row>a.row&&(s.row--,s.column=t.getLine(s.row).length),r.fromPoints(a,s)}},this.closingBracketBlock=function(t,e,n,i,o){var a={row:n,column:i},s=t.$findOpeningBracket(e,a);if(s)return s.column++,a.column--,r.fromPoints(s,a)}}).call(i.prototype)})),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";e.isDark=!1,e.cssClass="ace-tm",e.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',e.$id="ace/theme/textmate",t("../lib/dom").importCssString(e.cssText,e.cssClass)})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var r=t("./lib/dom");function i(t){this.session=t,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(t){var e;return e=this.lineWidgets&&this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0,this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach((function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)})),t},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),this.editor=t,t&&(t.widgetManager=this,t.renderer.on("beforeRender",this.measureWidgets),t.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(t){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off("beforeRender",this.measureWidgets),e.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach((function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))}))}},this.updateOnFold=function(t,e){var n=e.lineWidgets;if(n&&t.action){for(var r=t.data,i=r.start.row,o=r.end.row,a="add"==t.action,s=i+1;s<o;s++)n[s]&&(n[s].hidden=a);n[o]&&(a?n[i]?n[o].hidden=a:n[i]=n[o]:(n[i]==n[o]&&(n[i]=void 0),n[o].hidden=a))}},this.updateOnChange=function(t){var e=this.session.lineWidgets;if(e){var n=t.start.row,r=t.end.row-n;if(0===r);else if("remove"==t.action){var i=e.splice(n+1,r);!e[n]&&i[i.length-1]&&(e[n]=i.pop()),i.forEach((function(t){t&&this.removeLineWidget(t)}),this),this.$updateRows()}else{var o=new Array(r);e[n]&&null!=e[n].column&&t.start.column>e[n].column&&n++,o.unshift(n,0),e.splice.apply(e,o),this.$updateRows()}}},this.$updateRows=function(){var t=this.session.lineWidgets;if(t){var e=!0;t.forEach((function(t,n){if(t)for(e=!1,t.row=n;t.$oldWidget;)t.$oldWidget.row=n,t=t.$oldWidget})),e&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(t){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var e=this.session.lineWidgets[t.row];return e&&(t.$oldWidget=e,e.el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1)),this.session.lineWidgets[t.row]=t,t},this.addLineWidget=function(t){if(this.$registerLineWidget(t),t.session=this.session,!this.editor)return t;var e=this.editor.renderer;t.html&&!t.el&&(t.el=r.createElement("div"),t.el.innerHTML=t.html),t.el&&(r.addCssClass(t.el,"ace_lineWidgetContainer"),t.el.style.position="absolute",t.el.style.zIndex=5,e.container.appendChild(t.el),t._inDocument=!0,t.coverGutter||(t.el.style.zIndex=3),null==t.pixelHeight&&(t.pixelHeight=t.el.offsetHeight)),null==t.rowCount&&(t.rowCount=t.pixelHeight/e.layerConfig.lineHeight);var n=this.session.getFoldAt(t.row,0);if(t.$fold=n,n){var i=this.session.lineWidgets;t.row!=n.end.row||i[n.start.row]?t.hidden=!0:i[n.start.row]=t}return this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows(),this.renderWidgets(null,e),this.onWidgetChanged(t),t},this.removeLineWidget=function(t){if(t._inDocument=!1,t.session=null,t.el&&t.el.parentNode&&t.el.parentNode.removeChild(t.el),t.editor&&t.editor.destroy)try{t.editor.destroy()}catch(n){}if(this.session.lineWidgets){var e=this.session.lineWidgets[t.row];if(e==t)this.session.lineWidgets[t.row]=t.$oldWidget,t.$oldWidget&&this.onWidgetChanged(t.$oldWidget);else for(;e;){if(e.$oldWidget==t){e.$oldWidget=t.$oldWidget;break}e=e.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(t){for(var e=this.session.lineWidgets,n=e&&e[t],r=[];n;)r.push(n),n=n.$oldWidget;return r},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(t,e){var n=this.session._changedWidgets,r=e.layerConfig;if(n&&n.length){for(var i=1/0,o=0;o<n.length;o++){var a=n[o];if(a&&a.el&&a.session==this.session){if(!a._inDocument){if(this.session.lineWidgets[a.row]!=a)continue;a._inDocument=!0,e.container.appendChild(a.el)}a.h=a.el.offsetHeight,a.fixedWidth||(a.w=a.el.offsetWidth,a.screenWidth=Math.ceil(a.w/r.characterWidth));var s=a.h/r.lineHeight;a.coverLine&&(s-=this.session.getRowLineCount(a.row))<0&&(s=0),a.rowCount!=s&&(a.rowCount=s,a.row<i&&(i=a.row))}}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(t,e){var n=e.layerConfig,r=this.session.lineWidgets;if(r){for(var i=Math.min(this.firstRow,n.firstRow),o=Math.max(this.lastRow,n.lastRow,r.length);i>0&&!r[i];)i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,e.$cursorLayer.config=n;for(var a=i;a<=o;a++){var s=r[a];if(s&&s.el)if(s.hidden)s.el.style.top=-100-(s.pixelHeight||0)+"px";else{s._inDocument||(s._inDocument=!0,e.container.appendChild(s.el));var u=e.$cursorLayer.getPixelPosition({row:a,column:0},!0).top;s.coverLine||(u+=n.lineHeight*this.session.getRowLineCount(s.row)),s.el.style.top=u-n.offset+"px";var c=s.coverGutter?0:e.gutterWidth;s.fixedWidth||(c-=e.scrollLeft),s.el.style.left=c+"px",s.fullWidth&&s.screenWidth&&(s.el.style.minWidth=n.width+2*n.padding+"px"),s.fixedWidth?s.el.style.right=e.scrollBar.getWidth()+"px":s.el.style.right=""}}}}}).call(i.prototype),e.LineWidgets=i})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(t,e,n){"use strict";var r=t("../line_widgets").LineWidgets,i=t("../lib/dom"),o=t("../range").Range;e.showErrorMarker=function(t,e){var n=t.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(t));var a=t.getCursorPosition(),s=a.row,u=n.widgetManager.getWidgetsAtRow(s).filter((function(t){return"errorMarker"==t.type}))[0];u?u.destroy():s-=e;var c,l=function(t,e,n){var r=t.getAnnotations().sort(o.comparePoints);if(r.length){var i=function(t,e,n){for(var r=0,i=t.length-1;r<=i;){var o=r+i>>1,a=n(e,t[o]);if(a>0)r=o+1;else{if(!(a<0))return o;i=o-1}}return-(r+1)}(r,{row:e,column:-1},o.comparePoints);i<0&&(i=-i-1),i>=r.length?i=n>0?0:r.length-1:0===i&&n<0&&(i=r.length-1);var a=r[i];if(a&&n){if(a.row===e){do{a=r[i+=n]}while(a&&a.row===e);if(!a)return r.slice()}var s=[];e=a.row;do{s[n<0?"unshift":"push"](a),a=r[i+=n]}while(a&&a.row==e);return s.length&&s}}}(n,s,e);if(l){var f=l[0];a.column=(f.pos&&"number"!=typeof f.column?f.pos.sc:f.column)||0,a.row=f.row,c=t.renderer.$gutterLayer.$annotations[a.row]}else{if(u)return;c={text:["Looks good!"],className:"ace_ok"}}t.session.unfold(a.row),t.selection.moveToPosition(a);var h={row:a.row,fixedWidth:!0,coverGutter:!0,el:i.createElement("div"),type:"errorMarker"},d=h.el.appendChild(i.createElement("div")),p=h.el.appendChild(i.createElement("div"));p.className="error_widget_arrow "+c.className;var g=t.renderer.$cursorLayer.getPixelPosition(a).left;p.style.left=g+t.renderer.gutterWidth-5+"px",h.el.className="error_widget_wrapper",d.className="error_widget "+c.className,d.innerHTML=c.text.join("<br>"),d.appendChild(i.createElement("div"));var v=function(t,e,n){if(0===e&&("esc"===n||"return"===n))return h.destroy(),{command:"null"}};h.destroy=function(){t.$mouseHandler.isMousePressed||(t.keyBinding.removeKeyboardHandler(v),n.widgetManager.removeLineWidget(h),t.off("changeSelection",h.destroy),t.off("changeSession",h.destroy),t.off("mouseup",h.destroy),t.off("change",h.destroy))},t.keyBinding.addKeyboardHandler(v),t.on("changeSelection",h.destroy),t.on("changeSession",h.destroy),t.on("mouseup",h.destroy),t.on("change",h.destroy),t.session.widgetManager.addLineWidget(h),h.el.onmousedown=t.focus.bind(t),t.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},i.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(t,e,r){"use strict";t("./lib/fixoldbrowsers");var i=t("./lib/dom"),o=t("./lib/event"),a=t("./range").Range,s=t("./editor").Editor,u=t("./edit_session").EditSession,c=t("./undomanager").UndoManager,l=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),e.config=t("./config"),e.require=t,e.define=n(102),e.edit=function(t,n){if("string"==typeof t){var r=t;if(!(t=document.getElementById(r)))throw new Error("ace.edit can't find div #"+r)}if(t&&t.env&&t.env.editor instanceof s)return t.env.editor;var a="";if(t&&/input|textarea/i.test(t.tagName)){var u=t;a=u.value,t=i.createElement("pre"),u.parentNode.replaceChild(t,u)}else t&&(a=t.textContent,t.innerHTML="");var c=e.createEditSession(a),f=new s(new l(t),c,n),h={document:c,editor:f,onResize:f.resize.bind(f,null)};return u&&(h.textarea=u),o.addListener(window,"resize",h.onResize),f.on("destroy",(function(){o.removeListener(window,"resize",h.onResize),h.editor.container.env=null})),f.container.env=f.env=h,f},e.createEditSession=function(t,e){var n=new u(t,e);return n.setUndoManager(new c),n},e.Range=a,e.Editor=s,e.EditSession=u,e.UndoManager=c,e.VirtualRenderer=l,e.version=e.config.version})),ace.require(["ace/ace"],(function(e){for(var n in e&&(e.config.init(!0),e.define=ace.define),window.ace||(window.ace=e),e)e.hasOwnProperty(n)&&(window.ace[n]=e[n]);window.ace.default=window.ace,t&&(t.exports=window.ace)}))}).call(this,n(58)(t))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(35),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,f=(3&o)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function h(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function d(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}var p=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,g.prototype.create),i}return r.__extends(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?v(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new p(i,s),c=0,l=Object.keys(r);c<l.length;c++){var f=l[c];"_"!==f.slice(-1)&&(f in u&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),u[f]=r[f])}return u},t}();function v(t,e){return t.replace(m,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var m=/\{\$([^}]+)}/g;function y(t){return JSON.parse(t)}var b=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=y(c(o[0])||""),n=y(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}};var w=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+f+a+n[r]&4294967295;f=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();var x=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function _(){}function O(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.CONSTANTS=i,e.Deferred=f,e.ErrorFactory=g,e.FirebaseError=p,e.Sha1=w,e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new x(t,e);return n.subscribe.bind(n)},e.decode=b,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=O,e.getUA=h,e.isAdmin=function(t){var e=b(t).claims;return"object"===typeof e&&!0===e.admin},e.isBrowser=function(){return"object"===typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id},e.isElectron=function(){return h().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=h();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())},e.isNode=d,e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return h().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=b(t).claims;return!!e&&"object"===typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=b(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=b(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=y,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(O(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(O(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(O(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(41))},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){var n=/^[0-9]+$/,r=function(t,e){var r=n.test(t),i=n.test(e);return r&&i&&(t=+t,e=+e),t===e?0:r&&!i?-1:i&&!r?1:t<e?-1:1};t.exports={compareIdentifiers:r,rcompareIdentifiers:function(t,e){return r(e,t)}}},function(t,e,n){var r=n(32);t.exports=function(t,e,n){return 0===r(t,e,n)}},function(t,e,n){var r=n(26);t.exports=function(t,e,n){var i=new r(t,n),o=new r(e,n);return i.compare(o)||i.compareBuild(o)}},function(t,e,n){var r=n(32);t.exports=function(t,e,n){return r(t,e,n)<0}},function(t,e,n){var r=n(32);t.exports=function(t,e,n){return r(t,e,n)>=0}},function(t,e,n){var r=n(32);t.exports=function(t,e,n){return r(t,e,n)<=0}},function(t,e,n){var r=n(26),i=n(62),o=i.ANY,a=n(33),s=n(63),u=n(61),c=n(86),l=n(88),f=n(87);t.exports=function(t,e,n,h){var d,p,g,v,m;switch(t=new r(t,h),e=new a(e,h),n){case">":d=u,p=l,g=c,v=">",m=">=";break;case"<":d=c,p=f,g=u,v="<",m="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(t,e,h))return!1;for(var y=function(n){var r=e.set[n],a=null,s=null;return r.forEach((function(t){t.semver===o&&(t=new i(">=0.0.0")),a=a||t,s=s||t,d(t.semver,a.semver,h)?a=t:g(t.semver,s.semver,h)&&(s=t)})),a.operator===v||a.operator===m?{v:!1}:s.operator&&s.operator!==v||!p(t,s.semver)?s.operator===m&&g(t,s.semver)?{v:!1}:void 0:{v:!1}},b=0;b<e.set.length;++b){var w=y(b);if("object"===typeof w)return w.v}return!0}},function(t,e,n){"use strict";var r,i=(r=n(104))&&"object"===typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.15.5","app"),t.exports=i},function(t,e,n){"use strict";(function(t){var r=n(2),i=n.n(r),o=n(39),a=n(15),s=n.n(a),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{};function c(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}var l=i.a.createContext||function(t,e){var n,i,a="__create-react-context-"+function(){var t="__global_unique_id__";return u[t]=(u[t]||0)+1}()+"__",l=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).emitter=c(e.props.value),e}Object(o.a)(n,t);var r=n.prototype;return r.getChildContext=function(){var t;return(t={})[a]=this.emitter,t},r.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n,r=this.props.value,i=t.value;((o=r)===(a=i)?0!==o||1/o===1/a:o!==o&&a!==a)?n=0:(n="function"===typeof e?e(r,i):1073741823,0!==(n|=0)&&this.emitter.set(t.value,n))}var o,a},r.render=function(){return this.props.children},n}(r.Component);l.childContextTypes=((n={})[a]=s.a.object.isRequired,n);var f=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,n){0!==((0|t.observedBits)&n)&&t.setState({value:t.getValue()})},t}Object(o.a)(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=void 0===e||null===e?1073741823:e},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=void 0===t||null===t?1073741823:t},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():t},r.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)(this.state.value);var t},n}(r.Component);return f.contextTypes=((i={})[a]=s.a.object,i),{Provider:l,Consumer:f}};e.a=l}).call(this,n(41))},function(t,e,n){var r=n(157);t.exports=d,t.exports.parse=o,t.exports.compile=function(t,e){return s(o(t,e),e)},t.exports.tokensToFunction=s,t.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(t,e){for(var n,r=[],o=0,a=0,s="",l=e&&e.delimiter||"/";null!=(n=i.exec(t));){var f=n[0],h=n[1],d=n.index;if(s+=t.slice(a,d),a=d+f.length,h)s+=h[1];else{var p=t[a],g=n[2],v=n[3],m=n[4],y=n[5],b=n[6],w=n[7];s&&(r.push(s),s="");var x=null!=g&&null!=p&&p!==g,_="+"===b||"*"===b,O="?"===b||"*"===b,k=n[2]||l,S=m||y;r.push({name:v||o++,prefix:g||"",delimiter:k,optional:O,repeat:_,partial:x,asterisk:!!w,pattern:S?c(S):w?".*":"[^"+u(k)+"]+?"})}}return a<t.length&&(s+=t.substr(a)),s&&r.push(s),r}function a(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function s(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"===typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",f(e)));return function(e,i){for(var o="",s=e||{},u=(i||{}).pretty?a:encodeURIComponent,c=0;c<t.length;c++){var l=t[c];if("string"!==typeof l){var f,h=s[l.name];if(null==h){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=u(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");o+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})):u(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');o+=l.prefix+f}}else o+=l}return o}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function l(t,e){return t.keys=e,t}function f(t){return t&&t.sensitive?"":"i"}function h(t,e,n){r(e)||(n=e||n,e=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<t.length;s++){var c=t[s];if("string"===typeof c)a+=u(c);else{var h=u(c.prefix),d="(?:"+c.pattern+")";e.push(c),c.repeat&&(d+="(?:"+h+d+")*"),a+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=u(n.delimiter||"/"),g=a.slice(-p.length)===p;return i||(a=(g?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&g?"":"(?="+p+"|$)",l(new RegExp("^"+a,f(n)),e)}function d(t,e,n){return r(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(t,e)}(t,e):r(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(d(t[i],e,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),e)}(t,e,n):function(t,e,n){return h(o(t,n),e,n)}(t,e,n)}},function(t,e,n){var r=n(45);t.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n(59).SEMVER_SPEC_VERSION,SemVer:n(26),compareIdentifiers:n(83).compareIdentifiers,rcompareIdentifiers:n(83).rcompareIdentifiers,parse:n(46),valid:n(162),clean:n(163),inc:n(164),diff:n(165),major:n(166),minor:n(167),patch:n(168),prerelease:n(169),compare:n(32),rcompare:n(170),compareLoose:n(171),compareBuild:n(85),sort:n(172),rsort:n(173),gt:n(61),lt:n(86),eq:n(84),neq:n(109),gte:n(87),lte:n(88),cmp:n(110),coerce:n(174),Comparator:n(62),Range:n(33),satisfies:n(63),toComparators:n(175),maxSatisfying:n(176),minSatisfying:n(177),minVersion:n(178),validRange:n(179),outside:n(89),gtr:n(180),ltr:n(181),intersects:n(182),simplifyRange:n(183),subset:n(189)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e[0],version:e[1]}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(73);function i(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];o(t,s)}return t}function o(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];Object(r.writeConfig)(t,o,e[o],!0)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t})},,,,function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(t,e,n){(function(t,n){var r="[object Arguments]",i="[object Map]",o="[object Object]",a="[object Set]",s=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[r]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[i]=c["[object Number]"]=c[o]=c["[object RegExp]"]=c[a]=c["[object String]"]=c["[object WeakMap]"]=!1;var l="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,h=l||f||Function("return this")(),d=e&&!e.nodeType&&e,p=d&&"object"==typeof n&&n&&!n.nodeType&&n,g=p&&p.exports===d,v=g&&l.process,m=function(){try{return v&&v.binding&&v.binding("util")}catch(t){}}(),y=m&&m.isTypedArray;function b(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function w(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function x(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var _,O,k=Array.prototype,S=Function.prototype,E=Object.prototype,A=h["__core-js_shared__"],C=S.toString,j=E.hasOwnProperty,T=function(){var t=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),M=E.toString,R=RegExp("^"+C.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=g?h.Buffer:void 0,L=h.Symbol,N=h.Uint8Array,I=E.propertyIsEnumerable,F=k.splice,P=L?L.toStringTag:void 0,$=Object.getOwnPropertySymbols,z=D?D.isBuffer:void 0,B=(_=Object.keys,O=Object,function(t){return _(O(t))}),U=vt(h,"DataView"),W=vt(h,"Map"),H=vt(h,"Promise"),V=vt(h,"Set"),q=vt(h,"WeakMap"),G=vt(Object,"create"),K=wt(U),Y=wt(W),Q=wt(H),X=wt(V),Z=wt(q),J=L?L.prototype:void 0,tt=J?J.valueOf:void 0;function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function it(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new rt;++e<n;)this.add(t[e])}function ot(t){var e=this.__data__=new nt(t);this.size=e.size}function at(t,e){var n=Ot(t),r=!n&&_t(t),i=!n&&!r&&kt(t),o=!n&&!r&&!i&&jt(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var c in t)!e&&!j.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bt(c,u))||s.push(c);return s}function st(t,e){for(var n=t.length;n--;)if(xt(t[n][0],e))return n;return-1}function ut(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":P&&P in Object(t)?function(t){var e=j.call(t,P),n=t[P];try{t[P]=void 0;var r=!0}catch(o){}var i=M.call(t);r&&(e?t[P]=n:delete t[P]);return i}(t):function(t){return M.call(t)}(t)}function ct(t){return Ct(t)&&ut(t)==r}function lt(t,e,n,s,u){return t===e||(null==t||null==e||!Ct(t)&&!Ct(e)?t!==t&&e!==e:function(t,e,n,s,u,c){var l=Ot(t),f=Ot(e),h=l?"[object Array]":yt(t),d=f?"[object Array]":yt(e),p=(h=h==r?o:h)==o,g=(d=d==r?o:d)==o,v=h==d;if(v&&kt(t)){if(!kt(e))return!1;l=!0,p=!1}if(v&&!p)return c||(c=new ot),l||jt(t)?dt(t,e,n,s,u,c):function(t,e,n,r,o,s,u){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new N(t),new N(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return xt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case i:var c=w;case a:var l=1&r;if(c||(c=x),t.size!=e.size&&!l)return!1;var f=u.get(t);if(f)return f==e;r|=2,u.set(t,e);var h=dt(c(t),c(e),r,o,s,u);return u.delete(t),h;case"[object Symbol]":if(tt)return tt.call(t)==tt.call(e)}return!1}(t,e,h,n,s,u,c);if(!(1&n)){var m=p&&j.call(t,"__wrapped__"),y=g&&j.call(e,"__wrapped__");if(m||y){var b=m?t.value():t,_=y?e.value():e;return c||(c=new ot),u(b,_,n,s,c)}}if(!v)return!1;return c||(c=new ot),function(t,e,n,r,i,o){var a=1&n,s=pt(t),u=s.length,c=pt(e).length;if(u!=c&&!a)return!1;var l=u;for(;l--;){var f=s[l];if(!(a?f in e:j.call(e,f)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var d=!0;o.set(t,e),o.set(e,t);var p=a;for(;++l<u;){f=s[l];var g=t[f],v=e[f];if(r)var m=a?r(v,g,f,e,t,o):r(g,v,f,t,e,o);if(!(void 0===m?g===v||i(g,v,n,r,o):m)){d=!1;break}p||(p="constructor"==f)}if(d&&!p){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,s,u,c)}(t,e,n,s,lt,u))}function ft(t){return!(!At(t)||function(t){return!!T&&T in t}(t))&&(St(t)?R:s).test(wt(t))}function ht(t){if(!function(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||E;return t===n}(t))return B(t);var e=[];for(var n in Object(t))j.call(t,n)&&"constructor"!=n&&e.push(n);return e}function dt(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,f=!0,h=2&n?new it:void 0;for(o.set(t,e),o.set(e,t);++l<s;){var d=t[l],p=e[l];if(r)var g=a?r(p,d,l,e,t,o):r(d,p,l,t,e,o);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!b(e,(function(t,e){if(a=e,!h.has(a)&&(d===t||i(d,t,n,r,o)))return h.push(e);var a}))){f=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function pt(t){return function(t,e,n){var r=e(t);return Ot(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Tt,mt)}function gt(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function vt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ft(n)?n:void 0}et.prototype.clear=function(){this.__data__=G?G(null):{},this.size=0},et.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},et.prototype.get=function(t){var e=this.__data__;if(G){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return j.call(e,t)?e[t]:void 0},et.prototype.has=function(t){var e=this.__data__;return G?void 0!==e[t]:j.call(e,t)},et.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=G&&void 0===e?"__lodash_hash_undefined__":e,this},nt.prototype.clear=function(){this.__data__=[],this.size=0},nt.prototype.delete=function(t){var e=this.__data__,n=st(e,t);return!(n<0)&&(n==e.length-1?e.pop():F.call(e,n,1),--this.size,!0)},nt.prototype.get=function(t){var e=this.__data__,n=st(e,t);return n<0?void 0:e[n][1]},nt.prototype.has=function(t){return st(this.__data__,t)>-1},nt.prototype.set=function(t,e){var n=this.__data__,r=st(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},rt.prototype.clear=function(){this.size=0,this.__data__={hash:new et,map:new(W||nt),string:new et}},rt.prototype.delete=function(t){var e=gt(this,t).delete(t);return this.size-=e?1:0,e},rt.prototype.get=function(t){return gt(this,t).get(t)},rt.prototype.has=function(t){return gt(this,t).has(t)},rt.prototype.set=function(t,e){var n=gt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},it.prototype.add=it.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},it.prototype.has=function(t){return this.__data__.has(t)},ot.prototype.clear=function(){this.__data__=new nt,this.size=0},ot.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ot.prototype.get=function(t){return this.__data__.get(t)},ot.prototype.has=function(t){return this.__data__.has(t)},ot.prototype.set=function(t,e){var n=this.__data__;if(n instanceof nt){var r=n.__data__;if(!W||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new rt(r)}return n.set(t,e),this.size=n.size,this};var mt=$?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}($(t),(function(e){return I.call(t,e)})))}:function(){return[]},yt=ut;function bt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||u.test(t))&&t>-1&&t%1==0&&t<e}function wt(t){if(null!=t){try{return C.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function xt(t,e){return t===e||t!==t&&e!==e}(U&&"[object DataView]"!=yt(new U(new ArrayBuffer(1)))||W&&yt(new W)!=i||H&&"[object Promise]"!=yt(H.resolve())||V&&yt(new V)!=a||q&&"[object WeakMap]"!=yt(new q))&&(yt=function(t){var e=ut(t),n=e==o?t.constructor:void 0,r=n?wt(n):"";if(r)switch(r){case K:return"[object DataView]";case Y:return i;case Q:return"[object Promise]";case X:return a;case Z:return"[object WeakMap]"}return e});var _t=ct(function(){return arguments}())?ct:function(t){return Ct(t)&&j.call(t,"callee")&&!I.call(t,"callee")},Ot=Array.isArray;var kt=z||function(){return!1};function St(t){if(!At(t))return!1;var e=ut(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Et(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function At(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ct(t){return null!=t&&"object"==typeof t}var jt=y?function(t){return function(e){return t(e)}}(y):function(t){return Ct(t)&&Et(t.length)&&!!c[ut(t)]};function Tt(t){return null!=(e=t)&&Et(e.length)&&!St(e)?at(t):ht(t);var e}n.exports=function(t,e){return lt(t,e)}}).call(this,n(41),n(58)(t))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});e.editorOptions=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"];e.editorEvents=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"];e.getAceInstance=function(){var e;return"undefined"===typeof window?(t.window={},e=n(79),delete t.window):window.ace?(e=window.ace).acequire=window.ace.require||window.ace.acequire:e=n(79),e};e.debounce=function(t,e){var n=null;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout((function(){t.apply(r,i)}),e)}}}).call(this,n(41))},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(101),a=o.getAceInstance(),s=n(79),u=n(150),c=n(15),l=n(2),f=n(100),h=n(151),d=function(t){function e(e){var n=t.call(this,e)||this;return o.editorEvents.forEach((function(t){n[t]=n[t].bind(n)})),n.debounce=o.debounce,n}return r(e,t),e.prototype.isInShadow=function(t){for(var e=t&&t.parentNode;e;){if("[object ShadowRoot]"===e.toString())return!0;e=e.parentNode}return!1},e.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.className,r=e.onBeforeLoad,i=e.mode,s=e.focus,c=e.theme,l=e.fontSize,f=e.value,d=e.defaultValue,p=e.cursorStart,g=e.showGutter,v=e.wrapEnabled,m=e.showPrintMargin,y=e.scrollMargin,b=void 0===y?[0,0,0,0]:y,w=e.keyboardHandler,x=e.onLoad,_=e.commands,O=e.annotations,k=e.markers,S=e.splits;this.editor=a.edit(this.refEditor),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.setTheme("ace/theme/"+c),r&&r(a);var E=Object.keys(this.props.editorProps),A=new u.Split(this.editor.container,"ace/theme/"+c,S);this.editor.env.split=A,this.splitEditor=A.getEditor(0),this.split=A,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var C=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),A.forEach((function(e,n){for(var r=0;r<E.length;r++)e[E[r]]=t.props.editorProps[E[r]];var s=h(d,n),u=h(f,n,"");e.session.setUndoManager(new a.UndoManager),e.setTheme("ace/theme/"+c),e.renderer.setScrollMargin(b[0],b[1],b[2],b[3]),e.getSession().setMode("ace/mode/"+i),e.setFontSize(l),e.renderer.setShowGutter(g),e.getSession().setUseWrapMode(v),e.setShowPrintMargin(m),e.on("focus",t.onFocus),e.on("blur",t.onBlur),e.on("input",t.onInput),e.on("copy",t.onCopy),e.on("paste",t.onPaste),e.on("change",t.onChange),e.getSession().selection.on("changeSelection",t.onSelectionChange),e.getSession().selection.on("changeCursor",t.onCursorChange),e.session.on("changeScrollTop",t.onScroll),e.setValue(void 0===s?u:s,p);var y=h(O,n,[]),x=h(k,n,[]);e.getSession().setAnnotations(y),x&&x.length>0&&t.handleMarkers(x,e);for(r=0;r<o.editorOptions.length;r++){var S=o.editorOptions[r];C.hasOwnProperty(S)?e.setOption(S,t.props[S]):t.props[S]&&console.warn("ReaceAce: editor option "+S+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}t.handleOptions(t.props,e),Array.isArray(_)&&_.forEach((function(t){"string"===typeof t.exec?e.commands.bindKey(t.bindKey,t.exec):e.commands.addCommand(t)})),w&&e.setKeyboardHandler("ace/keyboard/"+w)})),n&&(this.refEditor.className+=" "+n),s&&this.splitEditor.focus();var j=this.editor.env.split;j.setOrientation("below"===this.props.orientation?j.BELOW:j.BESIDE),j.resize(!0),x&&x(j)},e.prototype.componentDidUpdate=function(t){var e=this,n=t,r=this.props,i=this.editor.env.split;if(r.splits!==n.splits&&i.setSplits(r.splits),r.orientation!==n.orientation&&i.setOrientation("below"===r.orientation?i.BELOW:i.BESIDE),i.forEach((function(t,i){r.mode!==n.mode&&t.getSession().setMode("ace/mode/"+r.mode),r.keyboardHandler!==n.keyboardHandler&&(r.keyboardHandler?t.setKeyboardHandler("ace/keyboard/"+r.keyboardHandler):t.setKeyboardHandler(null)),r.fontSize!==n.fontSize&&t.setFontSize(r.fontSize),r.wrapEnabled!==n.wrapEnabled&&t.getSession().setUseWrapMode(r.wrapEnabled),r.showPrintMargin!==n.showPrintMargin&&t.setShowPrintMargin(r.showPrintMargin),r.showGutter!==n.showGutter&&t.renderer.setShowGutter(r.showGutter);for(var a=0;a<o.editorOptions.length;a++){var s=o.editorOptions[a];r[s]!==n[s]&&t.setOption(s,r[s])}f(r.setOptions,n.setOptions)||e.handleOptions(r,t);var u=h(r.value,i,"");if(t.getValue()!==u){e.silent=!0;var c=t.session.selection.toJSON();t.setValue(u,r.cursorStart),t.session.selection.fromJSON(c),e.silent=!1}var l=h(r.annotations,i,[]),d=h(n.annotations,i,[]);f(l,d)||t.getSession().setAnnotations(l);var p=h(r.markers,i,[]),g=h(n.markers,i,[]);!f(p,g)&&Array.isArray(p)&&e.handleMarkers(p,t)})),r.className!==n.className){var a=this.refEditor.className.trim().split(" ");n.className.trim().split(" ").forEach((function(t){var e=a.indexOf(t);a.splice(e,1)})),this.refEditor.className=" "+r.className+" "+a.join(" ")}r.theme!==n.theme&&i.setTheme("ace/theme/"+r.theme),r.focus&&!n.focus&&this.splitEditor.focus(),r.height===this.props.height&&r.width===this.props.width||this.editor.resize()},e.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},e.prototype.onChange=function(t){if(this.props.onChange&&!this.silent){var e=[];this.editor.env.split.forEach((function(t){e.push(t.getValue())})),this.props.onChange(e,t)}},e.prototype.onSelectionChange=function(t){if(this.props.onSelectionChange){var e=[];this.editor.env.split.forEach((function(t){e.push(t.getSelection())})),this.props.onSelectionChange(e,t)}},e.prototype.onCursorChange=function(t){if(this.props.onCursorChange){var e=[];this.editor.env.split.forEach((function(t){e.push(t.getSelection())})),this.props.onCursorChange(e,t)}},e.prototype.onFocus=function(t){this.props.onFocus&&this.props.onFocus(t)},e.prototype.onInput=function(t){this.props.onInput&&this.props.onInput(t)},e.prototype.onBlur=function(t){this.props.onBlur&&this.props.onBlur(t)},e.prototype.onCopy=function(t){this.props.onCopy&&this.props.onCopy(t)},e.prototype.onPaste=function(t){this.props.onPaste&&this.props.onPaste(t)},e.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},e.prototype.handleOptions=function(t,e){for(var n=Object.keys(t.setOptions),r=0;r<n.length;r++)e.setOption(n[r],t.setOptions[n[r]])},e.prototype.handleMarkers=function(t,e){var n=e.getSession().getMarkers(!0);for(var r in n)n.hasOwnProperty(r)&&e.getSession().removeMarker(n[r].id);for(var r in n=e.getSession().getMarkers(!1))n.hasOwnProperty(r)&&e.getSession().removeMarker(n[r].id);t.forEach((function(t){var n=t.startRow,r=t.startCol,i=t.endRow,o=t.endCol,a=t.className,u=t.type,c=t.inFront,l=void 0!==c&&c,f=new s.Range(n,r,i,o);e.getSession().addMarker(f,a,u,l)}))},e.prototype.updateRef=function(t){this.refEditor=t},e.prototype.render=function(){var t=this.props,e=t.name,n=t.width,r=t.height,o=t.style,a=i({width:n,height:r},o);return l.createElement("div",{ref:this.updateRef,id:e,style:a})},e.propTypes={className:c.string,debounceChangePeriod:c.number,defaultValue:c.arrayOf(c.string),focus:c.bool,fontSize:c.oneOfType([c.number,c.string]),height:c.string,mode:c.string,name:c.string,onBlur:c.func,onChange:c.func,onCopy:c.func,onFocus:c.func,onInput:c.func,onLoad:c.func,onPaste:c.func,onScroll:c.func,orientation:c.string,showGutter:c.bool,splits:c.number,theme:c.string,value:c.arrayOf(c.string),width:c.string,onSelectionChange:c.func,onCursorChange:c.func,onBeforeLoad:c.func,minLines:c.number,maxLines:c.number,readOnly:c.bool,highlightActiveLine:c.bool,tabSize:c.number,showPrintMargin:c.bool,cursorStart:c.number,editorProps:c.object,setOptions:c.object,style:c.object,scrollMargin:c.array,annotations:c.array,markers:c.array,keyboardHandler:c.string,wrapEnabled:c.bool,enableBasicAutocompletion:c.oneOfType([c.bool,c.array]),enableLiveAutocompletion:c.oneOfType([c.bool,c.array]),commands:c.array},e.defaultProps={name:"ace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},e}(l.Component);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(35),a=n(80),s=n(105),u=n(106),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.ErrorFactory("app","Firebase",c),f=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),h=new u.Logger("@firebase/app"),d=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var f=l.value;this._addComponent(f)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){h.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void h.warn(u.join(" "))}c(new s.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw l.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.15.5",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!a.contains(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(s){var u,c,f=s.name;if(n.has(f))return h.debug("There were multiple attempts to register component "+f+"."),"PUBLIC"===s.type?r[f]:null;if(n.set(f,s),"PUBLIC"===s.type){var d=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[f])throw l.create("invalid-app-argument",{appName:f});return t[f]()};void 0!==s.serviceProps&&a.deepExtend(d,s.serviceProps),r[f]=d,t.prototype[f]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,f);return n.apply(this,s.multipleInstances?t:[])}}try{for(var p=o.__values(Object.keys(e)),g=p.next();!g.done;g=p.next()){var v=g.value;e[v]._addComponent(s)}}catch(m){u={error:m}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[f]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(d);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a.deepExtend(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(a.isBrowser()&&void 0!==self.firebase){h.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&h.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&h.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),m.apply(void 0,t)};var y=p;!function(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.7",e),t.registerVersion("fire-js","")}(y),e.default=y,e.firebase=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(35),i=n(80),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService(o);if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(s){if(i)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(f){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),s=a[0],u=a[1],c=this.normalizeInstanceIdentifier(s);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(f){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var s=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=s,e.Provider=a},function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return f})),n.d(e,"setLogLevel",(function(){return h})),n.d(e,"setUserLogHandler",(function(){return d}));var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},f=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!0,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function h(t){a.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},function(t,e,n){"use strict";t.exports=n(158)},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){var r=n(32);t.exports=function(t,e,n){return 0!==r(t,e,n)}},function(t,e,n){var r=n(84),i=n(109),o=n(61),a=n(87),s=n(86),u=n(88);t.exports=function(t,e,n,c){switch(e){case"===":return"object"===typeof t&&(t=t.version),"object"===typeof n&&(n=n.version),t===n;case"!==":return"object"===typeof t&&(t=t.version),"object"===typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return r(t,n,c);case"!=":return i(t,n,c);case">":return o(t,n,c);case">=":return a(t,n,c);case"<":return s(t,n,c);case"<=":return u(t,n,c);default:throw new TypeError("Invalid operator: ".concat(e))}}},function(t,e,n){var r=n(187);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e,n){var r=n(111);t.exports=function(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=r(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}},function(t,e,n){"use strict";(function(t){var r=n(190),i=n(191),o=n(192);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?s(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return U(z(e,t.length-n),t,n,r)}function x(t,e,n,r){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return x(t,e,n,r)}function O(t,e,n,r){return U(B(e),t,n,r)}function k(t,e,n,r){return U(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"===typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return O(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function j(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=$(t[o]);return i}function T(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(t,e,n,r,o){return o||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return I(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return I(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:z(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var P=/[^+\/0-9A-Za-z-_]/g;function $(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function B(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(P,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function U(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(41))},function(t){t.exports=JSON.parse('{"a":"5.13.0"}')},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(4);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(146),i=n(149);e.diff=i.default;var o=n(103);e.split=o.default,e.default=r.default},function(t,e,n){"use strict";function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(108);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(2)),o=(0,r(n(159)).default)(i.default.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"}),"SaveOutlined");e.default=o},function(t){t.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"4.13.1","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"scripts":{"changelog":"conventional-changelog -p angular -r 2","build":"yarn build:only","build:only":"yarn tsc:src && rollup -c","postbuild":"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"find build ! -name \'vega-lite-schema.json\' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup \'yarn tsc:src -w\' \'rollup -c -w\'","watch:site":"concurrently --kill-others -n Typescript,Rollup \'yarn tsc:site -w\' \'rollup -c site/rollup.config.js -w\'","watch:test":"jest --watch"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2","ajv":"^6.12.2","chai":"^4.2.0","cheerio":"^1.0.0-rc.3","codecov":"^3.7.0","concurrently":"^5.2.0","conventional-changelog-cli":"^2.0.34","d3":"^5.16.0","eslint":"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3","jest":"^26.0.1","jest-puppeteer":"^4.4.0","mkdirp":"^1.0.4","prettier":"^2.0.5","puppeteer":"^3.1.0","rollup":"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7","terser":"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1","typescript":"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},"dependencies":{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0","tslib":"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0","yargs":"~15.3.1"},"peerDependencies":{"vega":"^5.12.1"},"jest":{"preset":"jest-puppeteer","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false}}')},function(t,e,n){(function(e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var n,r,i;try{n=Map}catch(u){n=function(){}}try{r=Set}catch(u){r=function(){}}try{i=Promise}catch(u){i=function(){}}function o(a,u,c,l,f){"object"===typeof u&&(c=u.depth,l=u.prototype,f=u.includeNonEnumerable,u=u.circular);var h=[],d=[],p="undefined"!=typeof e;return"undefined"==typeof u&&(u=!0),"undefined"==typeof c&&(c=1/0),function a(c,g){if(null===c)return null;if(0===g)return c;var v,m;if("object"!=typeof c)return c;if(t(c,n))v=new n;else if(t(c,r))v=new r;else if(t(c,i))v=new i((function(t,e){c.then((function(e){t(a(e,g-1))}),(function(t){e(a(t,g-1))}))}));else if(o.__isArray(c))v=[];else if(o.__isRegExp(c))v=new RegExp(c.source,s(c)),c.lastIndex&&(v.lastIndex=c.lastIndex);else if(o.__isDate(c))v=new Date(c.getTime());else{if(p&&e.isBuffer(c))return v=e.allocUnsafe?e.allocUnsafe(c.length):new e(c.length),c.copy(v),v;t(c,Error)?v=Object.create(c):"undefined"==typeof l?(m=Object.getPrototypeOf(c),v=Object.create(m)):(v=Object.create(l),m=l)}if(u){var y=h.indexOf(c);if(-1!=y)return d[y];h.push(c),d.push(v)}for(var b in t(c,n)&&c.forEach((function(t,e){var n=a(e,g-1),r=a(t,g-1);v.set(n,r)})),t(c,r)&&c.forEach((function(t){var e=a(t,g-1);v.add(e)})),c){var w;m&&(w=Object.getOwnPropertyDescriptor(m,b)),w&&null==w.set||(v[b]=a(c[b],g-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);for(b=0;b<x.length;b++){var _=x[b];(!(k=Object.getOwnPropertyDescriptor(c,_))||k.enumerable||f)&&(v[_]=a(c[_],g-1),k.enumerable||Object.defineProperty(v,_,{enumerable:!1}))}}if(f){var O=Object.getOwnPropertyNames(c);for(b=0;b<O.length;b++){var k,S=O[b];(k=Object.getOwnPropertyDescriptor(c,S))&&k.enumerable||(v[S]=a(c[S],g-1),Object.defineProperty(v,S,{enumerable:!1}))}}return v}(a,c)}function a(t){return Object.prototype.toString.call(t)}function s(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return o.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},o.__objToStr=a,o.__isDate=function(t){return"object"===typeof t&&"[object Date]"===a(t)},o.__isArray=function(t){return"object"===typeof t&&"[object Array]"===a(t)},o.__isRegExp=function(t){return"object"===typeof t&&"[object RegExp]"===a(t)},o.__getRegExpFlags=s,o}();t.exports&&(t.exports=n)}).call(this,n(113).Buffer)},function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!==i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}},function(t){t.exports=JSON.parse('{"name":"vega-themes","version":"2.8.3","description":"Themes for stylized Vega and Vega-Lite visualizations.","keywords":["vega","vega-lite","themes","style"],"license":"BSD-3-Clause","author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"contributors":[{"name":"Emily Gu","url":"https://github.com/emilygu"},{"name":"Arvind Satyanarayan","url":"http://arvindsatya.com"},{"name":"Jeffrey Heer","url":"https://idl.cs.washington.edu"},{"name":"Dominik Moritz","url":"https://www.domoritz.de"}],"main":"build/vega-themes.js","module":"build/src/index.js","unpkg":"build/vega-themes.min.js","jsdelivr":"build/vega-themes.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-themes.git"},"scripts":{"prepare":"beemo create-config --silent","clean":"rm -rf build examples/build","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'src/**/*.ts\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","prebuild":"mkdir -p build","build":"tsc && rollup -c","postbuild":"terser build/vega-themes.js -cm > build/vega-themes.min.js","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","serve":"browser-sync start -s -f build examples --serveStatic examples","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'yarn serve\' \'tsc -w\' \'rollup -c -w\'"},"devDependencies":{"@rollup/plugin-json":"^4.0.2","browser-sync":"^2.26.7","concurrently":"^5.1.0","gh-pages":"^2.2.0","rollup":"^2.1.0","terser":"^4.6.7","typescript":"^3.8.3","vega":"^5.10.0","vega-lite":"^4.8.1","vega-lite-dev-config":"^0.5.0"},"peerDependencies":{"vega":"*","vega-lite":"*"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]}}')},function(t){t.exports=JSON.parse('{"name":"vega-tooltip","version":"0.23.0","description":"A tooltip plugin for Vega-Lite and Vega visualizations.","main":"build/vega-tooltip.js","module":"build/src/index.js","unpkg":"build/vega-tooltip.min.js","jsdelivr":"build/vega-tooltip.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-tooltip.git"},"keywords":["vega-lite","vega","tooltip"],"author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"collaborators":["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-tooltip/issues"},"homepage":"https://github.com/vega/vega-tooltip#readme","scripts":{"prepare":"beemo create-config --silent","tsc:src":"tsc -b tsconfig.src.json","build":"yarn tsc:src && rollup -c","clean":"rm -rf build examples/data && rm -f src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","postbuild":"terser build/vega-tooltip.js -c -m -o build/vega-tooltip.min.js","prebuild":"mkdir -p build && yarn copy:data && ./build-style.sh","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'browser-sync start -s -f build examples --serveStatic examples\' \'yarn tsc:src -w\' \'rollup -c -w\'","pretest":"./build-style.sh","test":"jest"},"devDependencies":{"@rollup/plugin-commonjs":"11.1.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^7.1.3","@types/jest":"^25.2.1","browser-sync":"^2.26.7","concurrently":"^5.2.0","gh-pages":"^2.2.0","jest":"^26.0.1","node-sass":"^4.14.1","path":"^0.12.7","rollup":"^2.8.2","terser":"^4.6.13","ts-jest":"^25.5.0","typescript":"^3.8.3","vega-datasets":"^1.30.2","vega-lite-dev-config":"^0.10.0","vega-typings":"^0.16.0"},"dependencies":{"vega-util":"^1.13.2"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]},"jest":{"testURL":"http://localhost/","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["node_modules","<rootDir>/build","src"]}}')},function(t,e,n){"use strict";e.a=function(t,e,n){var r=t.open(e),i=new URL(e).origin,o=40;t.addEventListener("message",(function e(n){n.source===r&&(o=0,t.removeEventListener("message",e,!1))}),!1),setTimeout((function t(){o<=0||(r.postMessage(n,i),setTimeout(t,250),o-=1)}),250)}},function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!==i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}},function(t,e,n){"use strict";n.r(e),n.d(e,"compile",(function(){return Vd})),n.d(e,"extractTransforms",(function(){return Yd})),n.d(e,"normalize",(function(){return cu})),n.d(e,"version",(function(){return Qd}));var r={};n.r(r),n.d(r,"invalidSpec",(function(){return Je})),n.d(r,"FIT_NON_SINGLE",(function(){return tn})),n.d(r,"containerSizeNonSingle",(function(){return en})),n.d(r,"containerSizeNotCompatibleWithAutosize",(function(){return nn})),n.d(r,"droppingFit",(function(){return rn})),n.d(r,"cannotProjectOnChannelWithoutField",(function(){return on})),n.d(r,"cannotProjectAggregate",(function(){return an})),n.d(r,"nearestNotSupportForContinuous",(function(){return sn})),n.d(r,"selectionNotSupported",(function(){return un})),n.d(r,"selectionNotFound",(function(){return cn})),n.d(r,"SCALE_BINDINGS_CONTINUOUS",(function(){return ln})),n.d(r,"LEGEND_BINDINGS_PROJECT_LENGTH",(function(){return fn})),n.d(r,"noSameUnitLookup",(function(){return hn})),n.d(r,"noSuchRepeatedValue",(function(){return dn})),n.d(r,"columnsNotSupportByRowCol",(function(){return pn})),n.d(r,"CONCAT_CANNOT_SHARE_AXIS",(function(){return gn})),n.d(r,"unrecognizedParse",(function(){return vn})),n.d(r,"differentParse",(function(){return mn})),n.d(r,"invalidTransformIgnored",(function(){return yn})),n.d(r,"NO_FIELDS_NEEDS_AS",(function(){return bn})),n.d(r,"customFormatTypeNotAllowed",(function(){return wn})),n.d(r,"encodingOverridden",(function(){return xn})),n.d(r,"projectionOverridden",(function(){return _n})),n.d(r,"REPLACE_ANGLE_WITH_THETA",(function(){return On})),n.d(r,"primitiveChannelDef",(function(){return kn})),n.d(r,"invalidFieldType",(function(){return Sn})),n.d(r,"invalidFieldTypeForCountAggregate",(function(){return En})),n.d(r,"invalidAggregate",(function(){return An})),n.d(r,"missingFieldType",(function(){return Cn})),n.d(r,"droppingColor",(function(){return jn})),n.d(r,"emptyFieldDef",(function(){return Tn})),n.d(r,"latLongDeprecated",(function(){return Mn})),n.d(r,"LINE_WITH_VARYING_SIZE",(function(){return Rn})),n.d(r,"incompatibleChannel",(function(){return Dn})),n.d(r,"invalidEncodingChannel",(function(){return Ln})),n.d(r,"facetChannelShouldBeDiscrete",(function(){return Nn})),n.d(r,"facetChannelDropped",(function(){return In})),n.d(r,"discreteChannelCannotEncode",(function(){return Fn})),n.d(r,"lineWithRange",(function(){return Pn})),n.d(r,"orientOverridden",(function(){return $n})),n.d(r,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return zn})),n.d(r,"RANGE_STEP_DEPRECATED",(function(){return Bn})),n.d(r,"cannotUseScalePropertyWithNonColor",(function(){return Un})),n.d(r,"unaggregateDomainHasNoEffectForRawField",(function(){return Wn})),n.d(r,"unaggregateDomainWithNonSharedDomainOp",(function(){return Hn})),n.d(r,"unaggregatedDomainWithLogScale",(function(){return Vn})),n.d(r,"cannotApplySizeToNonOrientedMark",(function(){return qn})),n.d(r,"scaleTypeNotWorkWithChannel",(function(){return Gn})),n.d(r,"scaleTypeNotWorkWithFieldDef",(function(){return Kn})),n.d(r,"scalePropertyNotWorkWithScaleType",(function(){return Yn})),n.d(r,"scaleTypeNotWorkWithMark",(function(){return Qn})),n.d(r,"stepDropped",(function(){return Xn})),n.d(r,"mergeConflictingProperty",(function(){return Zn})),n.d(r,"mergeConflictingDomainProperty",(function(){return Jn})),n.d(r,"independentScaleMeansIndependentGuide",(function(){return tr})),n.d(r,"domainSortDropped",(function(){return er})),n.d(r,"MORE_THAN_ONE_SORT",(function(){return nr})),n.d(r,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return rr})),n.d(r,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return ir})),n.d(r,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return or})),n.d(r,"INVALID_CHANNEL_FOR_AXIS",(function(){return ar})),n.d(r,"cannotStackRangedMark",(function(){return sr})),n.d(r,"cannotStackNonLinearScale",(function(){return ur})),n.d(r,"stackNonSummativeAggregate",(function(){return cr})),n.d(r,"invalidTimeUnit",(function(){return lr})),n.d(r,"droppedDay",(function(){return fr})),n.d(r,"errorBarCenterAndExtentAreNotNeeded",(function(){return hr})),n.d(r,"errorBarCenterIsUsedWithWrongExtent",(function(){return dr})),n.d(r,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return pr})),n.d(r,"errorBarCenterIsNotNeeded",(function(){return gr})),n.d(r,"errorBand1DNotSupport",(function(){return vr})),n.d(r,"channelRequiredForBinned",(function(){return mr})),n.d(r,"domainRequiredForThresholdScale",(function(){return yr}));var i=n(122),o=n(0),a=n(1),s=n(3);function u(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;Object.create;var c=n(11);Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,t.call(r,e-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var l=n(123),f=n.n(l),h=n(124),d=n.n(h),p=n(44),g=n.n(p);function v(t){return!!t.or}function m(t){return!!t.and}function y(t){return!!t.not}function b(t,e){return y(t)?{not:b(t.not,e)}:m(t)?{and:t.and.map((function(t){return b(t,e)}))}:v(t)?{or:t.or.map((function(t){return b(t,e)}))}:e(t)}var w=d.a,x=f.a;function _(t,e){var n,r={},i=Object(a.a)(e);try{for(i.s();!(n=i.n()).done;){var s=n.value;Object(o.v)(t,s)&&(r[s]=t[s])}}catch(u){i.e(u)}finally{i.f()}return r}function O(t,e){var n,r=Object.assign({},t),i=Object(a.a)(e);try{for(i.s();!(n=i.n()).done;){delete r[n.value]}}catch(o){i.e(o)}finally{i.f()}return r}Set.prototype.toJSON=function(){return"Set(".concat(Object(s.a)(this).map((function(t){return g()(t)})).join(","),")")};var k=g.a;function S(t){if(Object(o.E)(t))return t;var e=Object(o.H)(t)?t:g()(t);if(e.length<250)return e;for(var n=0,r=0;r<e.length;r++){n=(n<<5)-n+e.charCodeAt(r),n&=n}return n}function E(t){return!1===t||null===t}function A(t,e){return t.indexOf(e)>-1}function C(t,e){var n,r=0,i=Object(a.a)(t.entries());try{for(i.s();!(n=i.n()).done;){var o=Object(c.a)(n.value,2),s=o[0];if(e(o[1],s,r++))return!0}}catch(u){i.e(u)}finally{i.f()}return!1}function j(t,e){var n,r=0,i=Object(a.a)(t.entries());try{for(i.s();!(n=i.n()).done;){var o=Object(c.a)(n.value,2),s=o[0];if(!e(o[1],s,r++))return!1}}catch(u){i.e(u)}finally{i.f()}return!0}function T(t,e){var n,r=Object(a.a)(I(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;Object(o.jb)(t,i,e[i],!0)}}catch(s){r.e(s)}finally{r.f()}}function M(t,e){var n,r,i=[],o={},s=Object(a.a)(t);try{for(s.s();!(r=s.n()).done;){var u=r.value;(n=e(u))in o||(o[n]=1,i.push(u))}}catch(c){s.e(c)}finally{s.f()}return i}function R(t,e){var n,r=Object(a.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.has(i))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}function D(t){var e,n=new Set,r=Object(a.a)(t);try{var i=function(){var t,r=e.value,i=Object(o.Y)(r).map((function(t,e){return 0===e?t:"[".concat(t,"]")})),s=i.map((function(t,e){return i.slice(0,e+1).join("")})),u=Object(a.a)(s);try{for(u.s();!(t=u.n()).done;){var c=t.value;n.add(c)}}catch(l){u.e(l)}finally{u.f()}};for(r.s();!(e=r.n()).done;)i()}catch(s){r.e(s)}finally{r.f()}return n}function L(t,e){return void 0===t||void 0===e||R(D(t),D(e))}function N(t){return 0===I(t).length}var I=Object.keys,F=Object.values;function P(t){var e=[];for(var n in t)Object(o.v)(t,n)&&e.push({key:n,value:t[n]});return e}function $(t){return!0===t||!1===t}function z(t){var e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function B(t,e){return y(t)?"!("+B(t.not,e)+")":m(t)?"("+t.and.map((function(t){return B(t,e)})).join(") && (")+")":v(t)?"("+t.or.map((function(t){return B(t,e)})).join(") || (")+")":e(t)}function U(t,e){if(0===e.length)return!0;var n=e.shift();return n in t&&U(t[n],e)&&delete t[n],N(t)}function W(t){return t.charAt(0).toUpperCase()+t.substr(1)}function H(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",n=Object(o.Y)(t),r=[],i=1;i<=n.length;i++){var a="[".concat(n.slice(0,i).map(o.Z).join("]["),"]");r.push("".concat(e).concat(a))}return r.join(" && ")}function V(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum";return"".concat(e,"[").concat(Object(o.Z)(Object(o.Y)(t).join(".")),"]")}function q(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function G(t){return"".concat(Object(o.Y)(t).map(q).join("\\."))}function K(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Y(t){return"".concat(Object(o.Y)(t).join("."))}function Q(t){return t?Object(o.Y)(t).length:0}function X(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];if(void 0!==o)return o}}var Z=42;function J(t){var e=++Z;return t?String(t)+e:e}function tt(t){return function(t){return 0===t.indexOf("__")}(t)?t:"__".concat(t)}function et(t){if(void 0!==t)return(t%360+360)%360}function nt(t){return!!Object(o.E)(t)||!isNaN(t)&&!isNaN(parseFloat(t))}var rt={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};function it(t){return t&&t.condition}var ot=["domain","grid","labels","ticks","title"],at={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},st={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},ut=Object.assign(Object.assign({},st),{style:1,labelExpr:1,encoding:1});function ct(t){return!!ut[t]}I(ut);var lt=n(5),ft=n(6),ht={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},dt=ht.arc,pt=ht.area,gt=ht.bar,vt=ht.image,mt=ht.line,yt=ht.point,bt=ht.rect,wt=ht.rule,xt=ht.text,_t=ht.tick,Ot=ht.trail,kt=ht.circle,St=ht.square,Et=ht.geoshape;function At(t){return A(["line","area","trail"],t)}function Ct(t){return A(["rect","bar","image","arc"],t)}var jt=I(ht);function Tt(t){return t.type}Object(o.db)(jt);var Mt=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),Rt=I({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1}),Dt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Lt={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},Nt={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function It(t){return"mark"in t}var Ft=function(){function t(e,n){Object(lt.a)(this,t),this.name=e,this.run=n}return Object(ft.a)(t,[{key:"hasMatchingType",value:function(t){return!!It(t)&&(Tt(e=t.mark)?e.type:e)===this.name;var e}}]),t}(),Pt=n(4),$t={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},zt={count:1,min:1,max:1};function Bt(t){return!!t&&!!t.argmin}function Ut(t){return!!t&&!!t.argmax}I($t);function Wt(t){return Object(o.H)(t)&&!!$t[t]}var Ht=["count","valid","missing","distinct"];function Vt(t){return Object(o.H)(t)&&A(Ht,t)}var qt=["count","sum","distinct","valid","missing"],Gt=Object(o.db)(["mean","average","median","q1","q3","min","max"]),Kt="row",Yt="column",Qt="x",Xt="y",Zt="x2",Jt="y2",te="radius",ee="theta",ne="theta2",re="color",ie="fill",oe="stroke",ae="shape",se="size",ue={theta:1,theta2:1,radius:1,radius2:1};function ce(t){return t in ue}var le={longitude:1,longitude2:1,latitude:1,latitude2:1};var fe=I(le),he=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),ue),le),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function de(t){return t===re||t===ie||t===oe}var pe={row:1,column:1,facet:1},ge=I(pe),ve=Object.assign(Object.assign({},he),pe),me=I(ve),ye=(ve.order,ve.detail,ve.tooltip,u(ve,["order","detail","tooltip"])),be=(ye.row,ye.column,ye.facet,u(ye,["row","column","facet"]));I(ye),I(be);function we(t){return!!ve[t]}var xe=[Zt,Jt,"latitude2","longitude2",ne,"radius2"];function _e(t){return Oe(t)!==t}function Oe(t){switch(t){case Zt:return Qt;case Jt:return Xt;case"latitude2":return"latitude";case"longitude2":return"longitude";case ne:return ee;case"radius2":return te}return t}function ke(t){if(ce(t))switch(t){case ee:return"startAngle";case ne:return"endAngle";case te:return"outerRadius";case"radius2":return"innerRadius"}return t}function Se(t){switch(t){case Qt:return Zt;case Xt:return Jt;case"latitude":return"latitude2";case"longitude":return"longitude2";case ee:return ne;case te:return"radius2"}}function Ee(t){switch(t){case Qt:case Zt:return"width";case Xt:case Jt:return"height"}}I(he),he.x,he.y,he.x2,he.y2,he.latitude,he.longitude,he.latitude2,he.longitude2,he.theta,he.theta2,he.radius,he.radius2;var Ae=u(he,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Ce=I(Ae),je={x:1,y:1},Te=I(je);function Me(t){return t in je}var Re={theta:1,radius:1},De=I(Re);function Le(t){return"width"===t?Qt:Xt}Ae.text,Ae.tooltip,Ae.href,Ae.url,Ae.description,Ae.detail,Ae.key,Ae.order;var Ne=u(Ae,["text","tooltip","href","url","description","detail","key","order"]),Ie=I(Ne);var Fe=Object.assign(Object.assign(Object.assign({},je),Re),Ne),Pe=I(Fe);function $e(t){return!!Fe[t]}function ze(t,e){return function(t){switch(t){case re:case ie:case oe:case"description":case"detail":case"key":case"tooltip":case"href":case"order":case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"facet":case Kt:case Yt:return Be;case Qt:case Xt:case"latitude":case"longitude":return Ue;case Zt:case Jt:case"latitude2":case"longitude2":return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case se:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case"strokeDash":return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ae:return{point:"always",geoshape:"always"};case"text":return{text:"always"};case"angle":return{point:"always",square:"always",text:"always"};case"url":return{image:"always"};case ee:case te:return{text:"always",arc:"always"};case ne:case"radius2":return{arc:"always"}}}(t)[e]}var Be={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},Ue=u(Be,["geoshape"]);function We(t){switch(t){case Qt:case Xt:case ee:case te:case se:case"angle":case"strokeWidth":case"opacity":case"fillOpacity":case"strokeOpacity":case Zt:case Jt:case ne:case"radius2":return;case"facet":case Kt:case Yt:case ae:case"strokeDash":case"text":case"tooltip":case"href":case"url":case"description":return"discrete";case re:case ie:case oe:return"flexible";case"latitude":case"longitude":case"latitude2":case"longitude2":case"detail":case"key":case"order":return}}function He(t){return Object(o.B)(t)&&(t=la(t,void 0)),"bin"+I(t).map((function(e){return Ke(t[e])?z("_".concat(e,"_").concat(Object.entries(t[e]))):z("_".concat(e,"_").concat(t[e]))})).join("")}function Ve(t){return!0===t||Ge(t)&&!t.binned}function qe(t){return"binned"===t||Ge(t)&&!0===t.binned}function Ge(t){return Object(o.F)(t)}function Ke(t){return null===t||void 0===t?void 0:t.selection}function Ye(t){switch(t){case Kt:case Yt:case se:case re:case ie:case oe:case"strokeWidth":case"opacity":case"fillOpacity":case"strokeOpacity":case ae:return 6;case"strokeDash":return 4;default:return 10}}var Qe=n(69),Xe=n(68);function Ze(t,e,n){return(Ze=Object(Xe.a)()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Object(Qe.a)(i,n.prototype),i}).apply(null,arguments)}function Je(t){return"Invalid specification ".concat(JSON.stringify(t),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}var tn='Autosize "fit" only works for single views and layered views.';function en(t){return"".concat("width"==t?"Width":"Height",' "container" only works for single views and layered views.')}function nn(t){var e="width"==t?"x":"y";return"".concat("width"==t?"Width":"Height",' "container" only works well with autosize "fit" or "fit-').concat(e,'".')}function rn(t){return t?'Dropping "fit-'.concat(t,'" because spec has discrete ').concat(Ee(t),"."):'Dropping "fit" because spec has discrete size.'}function on(t){return'Cannot project a selection on encoding channel "'.concat(t,'", which has no field.')}function an(t,e){return'Cannot project a selection on encoding channel "'.concat(t,'" as it uses an aggregate function ("').concat(e,'").')}function sn(t){return'The "nearest" transform is not supported for '.concat(t," marks.")}function un(t){return"Selection not supported for ".concat(t," yet.")}function cn(t){return'Cannot find a selection named "'.concat(t,'".')}var ln="Scale bindings are currently only supported for scales with unbinned, continuous domains.",fn="Legend bindings are only supported for selections over an individual field or encoding channel.";function hn(t){return'Cannot define and lookup the "'.concat(t,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?"}function dn(t){return'Unknown repeated value "'.concat(t,'".')}function pn(t){return'The "columns" property cannot be used when "'.concat(t,'" has nested row/column.')}var gn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function vn(t){return'Unrecognized parse "'.concat(t,'".')}function mn(t,e,n){return'An ancestor parsed field "'.concat(t,'" as ').concat(n," but a child wants to parse the field as ").concat(e,".")}function yn(t){return"Ignoring an invalid transform: ".concat(k(t),".")}var bn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function wn(t){return"Config.customFormatTypes is not true, thus custom format type and format for channel ".concat(t," are dropped.")}function xn(t){return"Layer's shared ".concat(t.join(",")," channel ").concat(1===t.length?"is":"are"," overriden.")}function _n(t){var e=t.parentProjection,n=t.projection;return"Layer's shared projection ".concat(k(e)," is overridden by a child projection ").concat(k(n),".")}var On="Arc marks uses theta channel rather than angle, replacing angle with theta.";function kn(t,e,n){return"Channel ".concat(t," is a ").concat(e,". Converted to {value: ").concat(k(n),"}.")}function Sn(t){return'Invalid field type "'.concat(t,'".')}function En(t,e){return'Invalid field type "'.concat(t,'" for aggregate: "').concat(e,'", using "quantitative" instead.')}function An(t){return'Invalid aggregation operator "'.concat(t,'".')}function Cn(t,e){return'Missing type for channel "'.concat(t,'", using "').concat(e,'" instead.')}function jn(t,e){var n=e.fill,r=e.stroke;return"Dropping color ".concat(t," as the plot also has ").concat(n&&r?"fill and stroke":n?"fill":"stroke",".")}function Tn(t,e){return"Dropping ".concat(k(t),' from channel "').concat(e,'" since it does not contain any data field, datum, value, or signal.')}function Mn(t,e,n){return"".concat(t,"-encoding with type ").concat(e," is deprecated. Replacing with ").concat(n,"-encoding.")}var Rn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Dn(t,e,n){return"".concat(t,' dropped as it is incompatible with "').concat(e,'"').concat(n?" when ".concat(n):"",".")}function Ln(t){return"".concat(t,"-encoding is dropped as ").concat(t," is not a valid encoding channel.")}function Nn(t){return"".concat(t," encoding should be discrete (ordinal / nominal / binned).")}function In(t){return"Facet encoding dropped as ".concat(t.join(" and ")," ").concat(t.length>1?"are":"is"," also specified.")}function Fn(t,e){return'Using discrete channel "'.concat(t,'" to encode "').concat(e,'" field can be misleading as it does not encode ').concat("ordinal"===e?"order":"magnitude",".")}function Pn(t,e){return"Line mark is for continuous lines and thus cannot be used with ".concat(t&&e?"x2 and y2":t?"x2":"y2",". We will use the rule mark (line segments) instead.")}function $n(t,e){return'Specified orient "'.concat(t,'" overridden with "').concat(e,'".')}var zn="Custom domain scale cannot be unioned with default field-based domain.",Bn='Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.';function Un(t){return'Cannot use the scale property "'.concat(t,'" with non-color channel.')}function Wn(t){return"Using unaggregated domain with raw field has no effect (".concat(k(t),").")}function Hn(t){return'Unaggregated domain not applicable for "'.concat(t,'" since it produces values outside the origin domain of the source data.')}function Vn(t){return"Unaggregated domain is currently unsupported for log scale (".concat(k(t),").")}function qn(t){return'Cannot apply size to non-oriented mark "'.concat(t,'".')}function Gn(t,e,n){return'Channel "'.concat(t,'" does not work with "').concat(e,'" scale. We are using "').concat(n,'" scale instead.')}function Kn(t,e){return'FieldDef does not work with "'.concat(t,'" scale. We are using "').concat(e,'" scale instead.')}function Yn(t,e,n){return"".concat(n,"-scale's \"").concat(e,'" is dropped as it does not work with ').concat(t," scale.")}function Qn(t,e){return'Scale type "'.concat(e,'" does not work with mark "').concat(t,'".')}function Xn(t){return'The step for "'.concat(t,'" is dropped because the ').concat("width"===t?"x":"y"," is continuous.")}function Zn(t,e,n,r){return"Conflicting ".concat(e.toString(),' property "').concat(t.toString(),'" (').concat(k(n)," and ").concat(k(r),"). Using ").concat(k(n),".")}function Jn(t,e,n,r){return"Conflicting ".concat(e.toString(),' property "').concat(t.toString(),'" (').concat(k(n)," and ").concat(k(r),"). Using the union of the two domains.")}function tr(t){return'Setting the scale to be independent for "'.concat(t,'" means we also have to set the guide (axis or legend) to be independent.')}function er(t){return"Dropping sort property ".concat(k(t),' as unioned domains only support boolean or op "count", "min", and "max".')}var nr="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",rr="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",ir="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",or="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",ar="Invalid channel for axis.";function sr(t){return'Cannot stack "'.concat(t,'" if there is already "').concat(t,'2".')}function ur(t){return"Cannot stack non-linear scale (".concat(t,").")}function cr(t){return'Stacking is applied even though the aggregate function is non-summative ("'.concat(t,'").')}function lr(t,e){return"Invalid ".concat(t,": ").concat(k(e),".")}function fr(t){return"Dropping day from datetime ".concat(k(t)," as day cannot be combined with other units.")}function hr(t,e){return"".concat(e?"extent ":"").concat(e&&t?"and ":"").concat(t?"center ":"").concat(e&&t?"are ":"is ","not needed when data are aggregated.")}function dr(t,e,n){return"".concat(t," is not usually used with ").concat(e," for ").concat(n,".")}function pr(t,e){return"Continuous axis should not have customized aggregation function ".concat(t,"; ").concat(e," already agregates the axis.")}function gr(t,e){return"Center is not needed to be specified in ".concat(e," when extent is ").concat(t,".")}function vr(t){return"1D error band does not support ".concat(t,".")}function mr(t){return"Channel ".concat(t,' is required for "binned" bin.')}function yr(t){return"Domain for ".concat(t," is required for threshold scale.")}var br=Object(o.K)(o.e),wr=br;function xr(t){return wr=t}function _r(){return wr=br}function Or(){var t;(t=wr).warn.apply(t,arguments)}function kr(t){if(t&&Object(o.F)(t)){var e,n=Object(a.a)(Lr);try{for(n.s();!(e=n.n()).done;){if(e.value in t)return!0}}catch(r){n.e(r)}finally{n.f()}}return!1}var Sr=["january","february","march","april","may","june","july","august","september","october","november","december"],Er=Sr.map((function(t){return t.substr(0,3)})),Ar=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Cr=Ar.map((function(t){return t.substr(0,3)}));function jr(t,e){var n=[];if(e&&void 0!==t.day&&I(t).length>1&&(Or(r.droppedDay(t)),delete(t=x(t)).day),void 0!==t.year?n.push(t.year):n.push(2012),void 0!==t.month){var i=e?function(t){if(nt(t)&&(t=+t),Object(o.E)(t))return t-1;var e=t.toLowerCase(),n=Sr.indexOf(e);if(-1!==n)return n;var i=e.substr(0,3),a=Er.indexOf(i);if(-1!==a)return a;throw new Error(r.invalidTimeUnit("month",t))}(t.month):t.month;n.push(i)}else if(void 0!==t.quarter){var a=e?function(t){if(nt(t)&&(t=+t),Object(o.E)(t))return t>4&&Or(r.invalidTimeUnit("quarter",t)),t-1;throw new Error(r.invalidTimeUnit("quarter",t))}(t.quarter):t.quarter;n.push(Object(o.E)(a)?3*a:a+"*3")}else n.push(0);if(void 0!==t.date)n.push(t.date);else if(void 0!==t.day){var s=e?function(t){if(nt(t)&&(t=+t),Object(o.E)(t))return t%7;var e=t.toLowerCase(),n=Ar.indexOf(e);if(-1!==n)return n;var i=e.substr(0,3),a=Cr.indexOf(i);if(-1!==a)return a;throw new Error(r.invalidTimeUnit("day",t))}(t.day):t.day;n.push(Object(o.E)(s)?s+1:s+"+1")}else n.push(1);for(var u=0,c=["hours","minutes","seconds","milliseconds"];u<c.length;u++){var l=t[c[u]];n.push("undefined"===typeof l?0:l)}return n}function Tr(t){var e=jr(t,!0).join(", ");return t.utc?"utc(".concat(e,")"):"datetime(".concat(e,")")}function Mr(t){var e=jr(t,!1).join(", ");return t.utc?"utc(".concat(e,")"):"datetime(".concat(e,")")}function Rr(t){var e=jr(t,!0);return t.utc?+new Date(Date.UTC.apply(Date,Object(s.a)(e))):+Ze(Date,Object(s.a)(e))}var Dr={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Lr=I(Dr);function Nr(t){return t.startsWith("utc")}var Ir={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Fr(t){var e,n=[],r=Object(a.a)(Lr);try{for(r.s();!(e=r.n()).done;){var i=e.value;Pr(t,i)&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}function Pr(t,e){var n=t.indexOf(e);return!(n<0)&&(!(n>0&&"seconds"===e&&"i"===t.charAt(n-1))&&(!(t.length>n+3&&"day"===e&&"o"===t.charAt(n+3))&&!(n>0&&"year"===e&&"f"===t.charAt(n-1))))}function $r(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{end:!1},i=r.end,o=H(e),s=Nr(t)?"utc":"";function u(t){return"quarter"===t?"(".concat(s,"quarter(").concat(o,")-1)"):"".concat(s).concat(t,"(").concat(o,")")}var c,l={},f=Object(a.a)(Lr);try{for(f.s();!(c=f.n()).done;){var h=c.value;Pr(t,h)&&(l[h]=u(h),n=h)}}catch(d){f.e(d)}finally{f.f()}return i&&(l[n]+="+1"),Mr(l)}function zr(t){if(t){var e=Fr(t);return"timeUnitSpecifier(".concat(g()(e),", ").concat(g()(Ir),")")}}function Br(t){var e;if(t)return Object(o.H)(t)?e={unit:t}:Object(o.F)(t)&&(e=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),Nr(e.unit)&&(e.utc=!0,e.unit=e.unit.substr(3)),e}function Ur(t){var e=Br(t),n=e.utc,r=u(e,["utc"]);return r.unit?(n?"utc":"")+I(r).map((function(t){return z("".concat("unit"===t?"":"_".concat(t,"_")).concat(r[t]))})).join(""):(n?"utc":"")+"timeunit"+I(r).map((function(t){return z("_".concat(t,"_").concat(r[t]))})).join("")}function Wr(t){return t&&!!t.signal}function Hr(t){return!!t.step}function Vr(t){return!Object(o.A)(t)&&("field"in t&&"data"in t)}var qr=I({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1}),Gr={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Kr=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Yr(t){return t&&!!t.field&&void 0!==t.equal}function Qr(t){return t&&!!t.field&&void 0!==t.lt}function Xr(t){return t&&!!t.field&&void 0!==t.lte}function Zr(t){return t&&!!t.field&&void 0!==t.gt}function Jr(t){return t&&!!t.field&&void 0!==t.gte}function ti(t){if(t&&t.field){if(Object(o.A)(t.range)&&2===t.range.length)return!0;if(Wr(t.range))return!0}return!1}function ei(t){return t&&!!t.field&&(Object(o.A)(t.oneOf)||Object(o.A)(t.in))}function ni(t){return t&&!!t.field&&void 0!==t.valid}function ri(t){return ei(t)||Yr(t)||ti(t)||Qr(t)||Zr(t)||Xr(t)||Jr(t)}function ii(t,e){return da(t,{timeUnit:e,wrapTime:!0})}function oi(t,e){return t.map((function(t){return ii(t,e)}))}function ai(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.field,i=null===(e=Br(t.timeUnit))||void 0===e?void 0:e.unit,o=i?"time("+$r(i,r)+")":Go(t,{expr:"datum"});if(Yr(t))return o+"==="+ii(t.equal,i);if(Qr(t)){var a=t.lt;return"".concat(o,"<").concat(ii(a,i))}if(Zr(t)){var s=t.gt;return"".concat(o,">").concat(ii(s,i))}if(Xr(t)){var u=t.lte;return"".concat(o,"<=").concat(ii(u,i))}if(Jr(t)){var c=t.gte;return"".concat(o,">=").concat(ii(c,i))}if(ei(t))return"indexof([".concat(oi(t.oneOf,i).join(","),"], ").concat(o,") !== -1");if(ni(t))return si(o,t.valid);if(ti(t)){var l=t.range,f=Wr(l)?{signal:"".concat(l.signal,"[0]")}:l[0],h=Wr(l)?{signal:"".concat(l.signal,"[1]")}:l[1];if(null!==f&&null!==h&&n)return"inrange("+o+", ["+ii(f,i)+", "+ii(h,i)+"])";var d=[];return null!==f&&d.push("".concat(o," >= ").concat(ii(f,i))),null!==h&&d.push("".concat(o," <= ").concat(ii(h,i))),d.length>0?d.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(JSON.stringify(t)))}function si(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?"isValid(".concat(t,") && isFinite(+").concat(t,")"):"!isValid(".concat(t,") || !isFinite(+").concat(t,")")}function ui(t){var e;return ri(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:null===(e=Br(t.timeUnit))||void 0===e?void 0:e.unit}):t}var ci={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};var li=ci.quantitative,fi=ci.ordinal,hi=ci.temporal,di=ci.nominal,pi=ci.geojson,gi=I(ci);var vi="linear",mi="log",yi="pow",bi="sqrt",wi="symlog",xi="time",_i="utc",Oi="quantile",ki="quantize",Si="threshold",Ei="point",Ai="band",Ci={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},ji=I(Ci);function Ti(t,e){var n=Ci[t],r=Ci[e];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}var Mi={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Ri(t){return Mi[t]}var Di=["linear","log","pow","sqrt","symlog","time","utc"],Li=Object(o.db)(Di),Ni=Object(o.db)(["linear","log","pow","sqrt","symlog"]);var Ii=Object(o.db)(["quantile","quantize","threshold"]),Fi=Di.concat(["quantile","quantize","threshold","sequential","identity"]),Pi=Object(o.db)(Fi),$i=Object(o.db)(["ordinal","bin-ordinal","point","band"]);function zi(t){return t in $i}function Bi(t){return t in Pi}function Ui(t){return t in Li}function Wi(t){return t in Ii}function Hi(t){return null===t||void 0===t?void 0:t.selection}var Vi={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},qi=(I(Vi),u(Vi,["type","domain","range","scheme"])),Gi=I(qi);!function(){var t,e,n={},r=Object(a.a)(me);try{for(r.s();!(e=r.n()).done;){var i,o=e.value,s=Object(a.a)(gi);try{for(s.s();!(i=s.n()).done;){var u,c=i.value,l=Object(a.a)(ji);try{for(l.s();!(u=l.n()).done;){var f=u.value,h=Zi(o,c);Xi(o,f)&&Qi(f,c)&&(n[h]=null!==(t=n[h])&&void 0!==t?t:[],n[h].push(f))}}catch(d){l.e(d)}finally{l.f()}}}catch(d){s.e(d)}finally{s.f()}}}catch(d){r.e(d)}finally{r.f()}}();function Ki(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!A(["point","band","identity"],t);case"bins":return!A(["point","band","identity","ordinal"],t);case"round":return Ui(t)||"band"===t||"point"===t;case"padding":return Ui(t)||A(["point","band"],t);case"paddingOuter":case"align":return A(["point","band"],t);case"paddingInner":return"band"===t;case"domainMid":case"clamp":return Ui(t);case"nice":return Ui(t)||"quantize"===t||"threshold"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"constant":return"symlog"===t;case"zero":return Bi(t)&&!A(["log","time","utc","threshold","quantile"],t)}}function Yi(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return de(t)?void 0:r.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function Qi(t,e){return A([fi,di],e)?void 0===t||zi(t):e===hi?A([xi,_i,void 0],t):e!==li||A([mi,yi,bi,wi,Oi,ki,Si,vi,void 0],t)}function Xi(t,e){if(!$e(t))return!1;switch(t){case Qt:case Xt:case ee:case te:return Ui(e)||A(["band","point"],e);case se:case"strokeWidth":case"opacity":case"fillOpacity":case"strokeOpacity":case"angle":return Ui(e)||Wi(e)||A(["band","point","ordinal"],e);case re:case ie:case oe:return"band"!==e;case"strokeDash":return"ordinal"===e||Wi(e);case ae:return"ordinal"===e}}function Zi(t,e){return t+"_"+e}function Ji(t){var e=t.channel,n=t.channelDef,r=t.markDef,i=t.scale,o=t.config,a=oo(t);return Lo(n)&&!Vt(n.aggregate)&&i&&Ui(i.get("type"))&&!1===i.get("zero")?to({fieldDef:n,channel:e,markDef:r,ref:a,config:o}):a}function to(t){var e=t.fieldDef,n=t.channel,r=t.markDef,i=t.ref,o=t.config;return At(r.type)||null===_a("invalid",r,o)?i:[eo(e,n),i]}function eo(t,e){var n=no(t,!0),r="y"===Oe(e)?{field:{group:"height"}}:{value:0};return Object.assign({test:n},r)}function no(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return si(Object(o.H)(t)?t:Go(t,{expr:"datum"}),!e)}function ro(t,e,n,r){var i={};if(e&&(i.scale=e),Io(t)){var o=t.datum;kr(o)?i.signal=Tr(o):Wr(o)?i.signal=o.signal:i.value=o}else i.field=Go(t,n);if(r){var a=r.offset,s=r.band;a&&(i.offset=a),s&&(i.band=s)}return i}function io(t){var e=t.scaleName,n=t.fieldOrDatumDef,r=t.fieldOrDatumDef2,i=t.offset,o=t.startSuffix,a=t.band,s=void 0===a?.5:a,u=0<s&&s<1?"datum":void 0,c=Go(n,{expr:u,suffix:o}),l=void 0!==r?Go(r,{expr:u}):Go(n,{suffix:"end",expr:u}),f={};if(0===s||1===s){f.scale=e;var h=0===s?c:l;f.field=h}else{var d="".concat(s," * ").concat(c," + ").concat(1-s," * ").concat(l);f.signal='scale("'.concat(e,'", ').concat(d,")")}return i&&(f.offset=i),f}function oo(t){var e,n=t.channel,i=t.channelDef,a=t.channel2Def,s=t.markDef,u=t.config,c=t.scaleName,l=t.scale,f=t.stack,h=t.offset,d=t.defaultRef,p=t.band;if(i){if($o(i)){if(zo(i)){p=null!==p&&void 0!==p?p:jo({channel:n,fieldDef:i,fieldDef2:a,markDef:s,stack:f,config:u,isMidPoint:!0});var g=i.bin,v=i.timeUnit,m=i.type;if(Ve(g)||p&&v&&m===hi)return f&&f.impute?ro(i,c,{binSuffix:"mid"},{offset:h}):p?io({scaleName:c,fieldOrDatumDef:i,band:p,offset:h}):ro(i,c,ga(i,n)?{binSuffix:"range"}:{},{offset:h});if(qe(g)){if(Lo(a))return io({scaleName:c,fieldOrDatumDef:i,fieldOrDatumDef2:a,band:p,offset:h});var y=n===Qt?Zt:Jt;Or(r.channelRequiredForBinned(y))}}var b=null===l||void 0===l?void 0:l.get("type");return ro(i,c,zi(b)?{binSuffix:"range"}:{},{offset:h,band:"band"===b?null!==(e=null!==p&&void 0!==p?p:i.band)&&void 0!==e?e:.5:void 0})}if(Bo(i)){var w=i.value,x=h?{offset:h}:{};return Object.assign(Object.assign({},ao(n,w)),x)}}return Object(o.D)(d)&&(d=d()),d?Object.assign(Object.assign({},d),h?{offset:h}:{}):d}function ao(t,e){return A(["x","x2"],t)&&"width"===e?{field:{group:"width"}}:A(["y","y2"],t)&&"height"===e?{field:{group:"height"}}:ya(e)}function so(t){return t&&"number"!==t&&"time"!==t}function uo(t,e,n){return"".concat(t,"(").concat(e).concat(n?", ".concat(JSON.stringify(n)):"",")")}function co(t){var e,n,r=t.fieldOrDatumDef,i=t.format,a=t.formatType,s=t.expr,u=t.normalizeStack,c=t.config;if(so(a))return fo({fieldOrDatumDef:r,format:i,formatType:a,expr:s,config:c});var l=lo(r,s,u);if(ha(r)){var f=function(t,e,n,r,i){return!e||n?(n=Object(o.H)(n)?n:r,"".concat(i?"utc":"time","Format(").concat(t,", '").concat(n,"')")):function(t,e,n){if(t){var r=zr(t),i=n||Nr(t);return"".concat(i?"utc":"time","Format(").concat(e,", ").concat(r,")")}}(e,t,i)}(l,Lo(r)?null===(e=Br(r.timeUnit))||void 0===e?void 0:e.unit:void 0,i,c.timeFormat,Uo(r)&&(null===(n=r.scale)||void 0===n?void 0:n.type)===_i);return f?{signal:f}:void 0}return i=go(No(r),i,c),Lo(r)&&Ve(r.bin)?{signal:yo(l,Go(r,{expr:s,binSuffix:"end"}),i,a,c)}:i||"quantitative"===No(r)?{signal:"".concat(vo(l,i))}:{signal:"isValid(".concat(l,") ? ").concat(l,' : ""+').concat(l)}}function lo(t,e,n){return Lo(t)?n?"".concat(Go(t,{expr:e,suffix:"end"}),"-").concat(Go(t,{expr:e,suffix:"start"})):Go(t,{expr:e}):function(t){var e=t.datum;return kr(e)?Tr(e):"".concat(JSON.stringify(e))}(t)}function fo(t){var e=t.fieldOrDatumDef,n=t.format,r=t.formatType,i=t.expr,o=t.normalizeStack,a=t.config,s=t.field;return s=null!==s&&void 0!==s?s:lo(e,i,o),Lo(e)&&Ve(e.bin)?{signal:yo(s,Go(e,{expr:i,binSuffix:"end"}),n,r,a)}:{signal:uo(r,s,n)}}function ho(t,e,n,r,i,o){var a;if(!so(r))return ha(t)?function(t,e,n,r){if(t)return t;if(e)return{signal:zr(e)};return r?void 0:n.timeFormat}(n,Lo(t)?null===(a=Br(t.timeUnit))||void 0===a?void 0:a.unit:void 0,i,o):go(e,n,i)}function po(t,e,n){return t&&(Wr(t)||"number"===t||"time"===t)?t:ha(e)&&"time"!==n&&"utc"!==n?"time":void 0}function go(t,e,n){return Object(o.H)(e)?e:t===li?n.numberFormat:void 0}function vo(t,e){return"format(".concat(t,', "').concat(e||"",'")')}function mo(t,e,n,r){var i;return so(n)?uo(n,t,e):vo(t,null!==(i=Object(o.H)(e)?e:void 0)&&void 0!==i?i:r.numberFormat)}function yo(t,e,n,r,i){var o=mo(t,n,r,i),a=mo(e,n,r,i);return"".concat(si(t,!1),' ? "null" : ').concat(o,' + "').concat(" \u2013 ",'" + ').concat(a)}var bo={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function wo(t){return t in bo}function xo(t){return!!t&&!!t.encoding}function _o(t){return!!t&&("count"===t.op||!!t.field)}function Oo(t){return!!t&&Object(o.A)(t)}function ko(t){return"row"in t||"column"in t}function So(t){return!!t&&"header"in t}function Eo(t){return"facet"in t}function Ao(t){var e=t.field,n=t.timeUnit,r=t.bin,i=t.aggregate;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:e})}function Co(t){return zo(t)&&"sort"in t}function jo(t){var e=t.channel,n=t.fieldDef,r=t.fieldDef2,i=t.markDef,o=t.stack,a=t.config,s=t.isMidPoint;if($o(n)&&void 0!==n.band)return n.band;if(Lo(n)){var u=n.timeUnit,c=n.bin;if(u&&!r)return s?Oa("timeUnitBandPosition",i,a):Ct(i.type)?Oa("timeUnitBand",i,a):0;if(Ve(c))return Ct(i.type)&&!s?1:.5}return(null===o||void 0===o?void 0:o.fieldChannel)===e&&s?.5:void 0}function To(t,e,n,r,i,o){return!!(Ve(e.bin)||e.timeUnit&&zo(e)&&"temporal"===e.type)&&!!jo({channel:t,fieldDef:e,fieldDef2:n,stack:r,markDef:i,config:o})}function Mo(t){return!!t&&"condition"in t}function Ro(t){var e=t&&t.condition;return!!e&&!Object(o.A)(e)&&Lo(e)}function Do(t){var e=t&&t.condition;return!!e&&!Object(o.A)(e)&&$o(e)}function Lo(t){return!!t&&(!!t.field||"count"===t.aggregate)}function No(t){return t&&t.type}function Io(t){return!!t&&"datum"in t}function Fo(t){return zo(t)&&Yo(t)||Po(t)}function Po(t){return Io(t)&&Object(o.E)(t.datum)}function $o(t){return Lo(t)||Io(t)}function zo(t){return!!t&&("field"in t&&"type"in t||"count"===t.aggregate)}function Bo(t){return t&&"value"in t&&"value"in t}function Uo(t){return!!t&&("scale"in t||"sort"in t)}function Wo(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function Ho(t){return!!t&&"legend"in t}function Vo(t){return!!t&&("format"in t||"formatType"in t)}function qo(t){return"op"in t}function Go(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.field,a=i.prefix,s=i.suffix,u="";if(Qo(t))o=tt("count");else{var c;if(!i.nofn)if(qo(t))c=t.op;else{var l=t.bin,f=t.aggregate,h=t.timeUnit;Ve(l)?(c=He(l),s=(null!==(e=i.binSuffix)&&void 0!==e?e:"")+(null!==(n=i.suffix)&&void 0!==n?n:"")):f?Ut(f)?(u='["'.concat(o,'"]'),o="argmax_".concat(f.argmax)):Bt(f)?(u='["'.concat(o,'"]'),o="argmin_".concat(f.argmin)):c=String(f):h&&(c=Ur(h),s=(!A(["range","mid"],i.binSuffix)&&i.binSuffix||"")+(null!==(r=i.suffix)&&void 0!==r?r:""))}c&&(o=o?"".concat(c,"_").concat(o):c)}return s&&(o="".concat(o,"_").concat(s)),a&&(o="".concat(a,"_").concat(o)),i.forAs?Y(o):i.expr?V(o,i.expr)+u:G(o)+u}function Ko(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Lo(t)&&!!t.bin;case"temporal":return!1}throw new Error(r.invalidFieldType(t.type))}function Yo(t){return!Ko(t)}function Qo(t){return"count"===t.aggregate}var Xo=function(t,e){switch(e.fieldTitle){case"plain":return t.field;case"functional":return function(t){var e=t.aggregate,n=t.bin,r=t.timeUnit,i=t.field;if(Ut(e))return"".concat(i," for argmax(").concat(e.argmax,")");if(Bt(e))return"".concat(i," for argmin(").concat(e.argmin,")");var o=Br(r),a=e||(null===o||void 0===o?void 0:o.unit)||(null===o||void 0===o?void 0:o.maxbins)&&"timeunit"||Ve(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}(t);default:return function(t,e){var n,r=t.field,i=t.bin,o=t.timeUnit,a=t.aggregate;if("count"===a)return e.countTitle;if(Ve(i))return"".concat(r," (binned)");if(o){var s=null===(n=Br(o))||void 0===n?void 0:n.unit;if(s)return"".concat(r," (").concat(Fr(s).join("-"),")")}else if(a)return Ut(a)?"".concat(r," for max ").concat(a.argmax):Bt(a)?"".concat(r," for min ").concat(a.argmin):"".concat(W(a)," of ").concat(r);return r}(t,e)}},Zo=Xo;function Jo(t){Zo=t}function ta(){Jo(Xo)}function ea(t,e,n){var r,i,o=n.allowDisabling,a=n.includeDefault,s=void 0===a||a,u=(null!==(r=na(t))&&void 0!==r?r:{}).title;if(!Lo(t))return u;var c=t,l=s?ra(c,e):void 0;return o?X(u,c.title,l):null!==(i=null!==u&&void 0!==u?u:c.title)&&void 0!==i?i:l}function na(t){return Wo(t)&&t.axis?t.axis:Ho(t)&&t.legend?t.legend:So(t)&&t.header?t.header:void 0}function ra(t,e){return Zo(t,e)}function ia(t){var e;if(Vo(t))return{format:t.format,formatType:t.formatType};var n=null!==(e=na(t))&&void 0!==e?e:{};return{format:n.format,formatType:n.formatType}}function oa(t){return Lo(t)?t:Ro(t)?t.condition:void 0}function aa(t){return $o(t)?t:Do(t)?t.condition:void 0}function sa(t,e,n){if(Object(o.H)(t)||Object(o.E)(t)||Object(o.B)(t)){var i=Object(o.H)(t)?"string":Object(o.E)(t)?"number":"boolean";return Or(r.primitiveChannelDef(e,i,t)),{value:t}}return $o(t)?ua(t,e,n):Do(t)?Object.assign(Object.assign({},t),{condition:ua(t.condition,e,n)}):t}function ua(t,e,n){if(Vo(t)){t.format;var i=t.formatType,a=u(t,["format","formatType"]);if(so(i)&&!n.customFormatTypes)return Or(r.customFormatTypeNotAllowed(e)),ua(a,e,n)}else{var s=Wo(t)?"axis":Ho(t)?"legend":So(t)?"header":null;if(s&&t[s]){var c=t[s],l=(c.format,c.formatType),f=u(c,["format","formatType"]);if(so(l)&&!n.customFormatTypes)return Or(r.customFormatTypeNotAllowed(e)),ua(Object.assign(Object.assign({},t),Object(Pt.a)({},s,f)),e,n)}}return Lo(t)?ca(t,e):function(t){var e=t.type;if(e)return t;var n=t.datum;return e=Object(o.E)(n)?"quantitative":Object(o.H)(n)?"nominal":kr(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:e})}(t)}function ca(t,e){var n=t.aggregate,i=t.timeUnit,a=t.bin,s=t.field,c=Object.assign({},t);if(!n||Wt(n)||Ut(n)||Bt(n)||(Or(r.invalidAggregate(n)),delete c.aggregate),i&&(c.timeUnit=Br(i)),s&&(c.field="".concat(s)),Ve(a)&&(c.bin=la(a,e)),qe(a)&&!Me(e)&&Or("Channel ".concat(e,' should not be used with "binned" bin.')),zo(c)){var l=c.type,f=function(t){if(t)switch(t=t.toLowerCase()){case"q":case li:return"quantitative";case"t":case hi:return"temporal";case"o":case fi:return"ordinal";case"n":case di:return"nominal";case pi:return"geojson"}}(l);l!==f&&(c.type=f),"quantitative"!==l&&Vt(n)&&(Or(r.invalidFieldTypeForCountAggregate(l,n)),c.type="quantitative")}else if(!_e(e)){var h=function(t,e){if(t.timeUnit)return"temporal";if(Ve(t.bin))return"quantitative";switch(We(e)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}(c,e);Or(r.missingFieldType(e,h)),c.type=h}if(zo(c)){var d=function(t,e){var n=t.type;if("geojson"===n&&"shape"!==e)return{compatible:!1,warning:"Channel ".concat(e," should not be used with a geojson data.")};switch(e){case Kt:case Yt:case"facet":return Yo(t)?{compatible:!1,warning:r.facetChannelShouldBeDiscrete(e)}:fa;case Qt:case Xt:case re:case ie:case oe:case"text":case"detail":case"key":case"tooltip":case"href":case"url":case"angle":case ee:case te:case"description":return fa;case"longitude":case"longitude2":case"latitude":case"latitude2":return n!==li?{compatible:!1,warning:"Channel ".concat(e," should be used with a quantitative field only, not ").concat(t.type," field.")}:fa;case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case se:case ne:case"radius2":case Zt:case Jt:return"nominal"!==n||t.sort?fa:{compatible:!1,warning:"Channel ".concat(e," should not be used with an unsorted discrete field.")};case"strokeDash":return A(["ordinal","nominal"],t.type)?fa:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case ae:return A(["ordinal","nominal","geojson"],t.type)?fa:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case"order":return"nominal"!==t.type||"sort"in t?fa:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(c,e),p=d.compatible,g=d.warning;p||Or(g)}if(Co(c)&&Object(o.H)(c.sort)){var v=c.sort;if(wo(v))return Object.assign(Object.assign({},c),{sort:{encoding:v}});var m=v.substr(1);if("-"===v.charAt(0)&&wo(m))return Object.assign(Object.assign({},c),{sort:{encoding:m,order:"descending"}})}if(So(c)){var y=c.header,b=y.orient,w=u(y,["orient"]);if(b)return Object.assign(Object.assign({},c),{header:Object.assign(Object.assign({},w),{labelOrient:y.labelOrient||b,titleOrient:y.titleOrient||b})})}return c}function la(t,e){return Object(o.B)(t)?{maxbins:Ye(e)}:"binned"===t?{binned:!0}:t.maxbins||t.step?t:Object.assign(Object.assign({},t),{maxbins:Ye(e)})}var fa={compatible:!0};function ha(t){var e,n=ia(t).formatType;return"time"===n||!n&&((e=t)&&("temporal"===e.type||Lo(e)&&!!e.timeUnit))}function da(t,e){var n,r,i=e.timeUnit,a=e.type,s=e.wrapTime,u=e.undefinedIfExprNotRequired,c=i&&(null===(n=Br(i))||void 0===n?void 0:n.unit),l=c||"temporal"===a;return Wr(t)?r=t.signal:kr(t)?(l=!0,r=Tr(t)):(Object(o.H)(t)||Object(o.E)(t))&&l&&(r="datetime(".concat(JSON.stringify(t),")"),function(t){return!!Dr[t]}(c)&&(Object(o.E)(t)&&t<1e4||Object(o.H)(t)&&isNaN(Date.parse(t)))&&(r=Tr(Object(Pt.a)({},c,t)))),r?s&&l?"time(".concat(r,")"):r:u?void 0:JSON.stringify(t)}function pa(t,e){var n=t.type;return e.map((function(e){var r=da(e,{timeUnit:Lo(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:e}))}function ga(t,e){return Ve(t.bin)?$e(e)&&A(["ordinal","nominal"],t.type):(console.warn("Only call this method for binned field defs."),!1)}function va(t){var e=t.anchor,n=t.frame,r=t.offset,i=t.orient,o=t.color,a=t.subtitleColor,s=t.subtitleFont,c=t.subtitleFontSize,l=t.subtitleFontStyle,f=t.subtitleFontWeight,h=t.subtitleLineHeight,d=t.subtitlePadding,p=u(t,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),g=Object.assign(Object.assign({},p),o?{fill:o}:{}),v=Object.assign(Object.assign(Object.assign(Object.assign({},e?{anchor:e}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a?{subtitleColor:a}:{}),s?{subtitleFont:s}:{}),c?{subtitleFontSize:c}:{}),l?{subtitleFontStyle:l}:{}),f?{subtitleFontWeight:f}:{}),h?{subtitleLineHeight:h}:{}),d?{subtitlePadding:d}:{});return{titleMarkConfig:g,subtitleMarkConfig:_(g,["align","baseline","dx","dy","limit"]),nonMark:v,subtitle:m}}function ma(t){return Object(o.H)(t)||Object(o.A)(t)&&Object(o.H)(t[0])}function ya(t){return Wr(t)?t:void 0!==t?{value:t}:void 0}function ba(t){return Wr(t)?t.signal:Object(o.Z)(t.value)}function wa(t){return Wr(t)?t.signal:null==t?null:Object(o.Z)(t)}function xa(t){var e;return[].concat(t.type,null!==(e=t.style)&&void 0!==e?e:[])}function _a(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.vgChannel,o=r.ignoreVgConfig;return i&&void 0!==e[i]?e[i]:void 0!==e[t]?e[t]:!o||i&&i!==t?Oa(t,e,n,r):void 0}function Oa(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.vgChannel;return X(i?ka(t,e,n.style):void 0,ka(t,e,n.style),i?n[e.type][i]:void 0,n[e.type][t],i?n.mark[i]:n.mark[t])}function ka(t,e,n){return Sa(t,xa(e),n)}function Sa(t,e,n){var r;e=Object(o.i)(e);var i,s=Object(a.a)(e);try{for(s.s();!(i=s.n()).done;){var u=n[i.value];u&&void 0!==u[t]&&(r=u[t])}}catch(c){s.e(c)}finally{s.f()}return r}function Ea(t,e){return Object(o.i)(t).reduce((function(t,n){var r;return t.field.push(Go(n,e)),t.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),t}),{field:[],order:[]})}function Aa(t,e){var n=Object(s.a)(t);return e.forEach((function(t){var e,r=Object(a.a)(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(w(i,t))return}}catch(o){r.e(o)}finally{r.f()}n.push(t)})),n}function Ca(t,e){return w(t,e)||!e?t:t?[].concat(Object(s.a)(Object(o.i)(t)),Object(s.a)(Object(o.i)(e))).join(", "):e}function ja(t,e){var n=t.value,r=e.value;if(null==n||null===r)return{explicit:t.explicit,value:null};if((ma(n)||Wr(n))&&(ma(r)||Wr(r)))return{explicit:t.explicit,value:Ca(n,r)};if(ma(n)||Wr(n))return{explicit:t.explicit,value:n};if(ma(r)||Wr(r))return{explicit:t.explicit,value:r};if(!ma(n)&&!Wr(n)&&!ma(r)&&!Wr(r))return{explicit:t.explicit,value:Aa(n,r)};throw new Error("It should never reach here")}function Ta(t,e){var n=t&&t[e];return!!n&&(Object(o.A)(n)?C(n,(function(t){return!!t.field})):Lo(n)||Ro(n))}function Ma(t){return C(me,(function(e){if(Ta(t,e)){var n=t[e];if(Object(o.A)(n))return C(n,(function(t){return!!t.aggregate}));var r=oa(n);return r&&!!r.aggregate}return!1}))}function Ra(t,e){var n=[],r=[],i=[],o=[],a={};return Na(t,(function(s,c){if(Lo(s)){var l=s.field,f=s.aggregate,h=s.bin,d=s.timeUnit,p=u(s,["field","aggregate","bin","timeUnit"]);if(f||d||h){var g,v=na(s),m=v&&v.title,y=Go(s,{forAs:!0}),b=Object.assign(Object.assign(Object.assign({},m?[]:{title:ea(s,e,{allowDisabling:!0})}),p),{field:y});if(f){if(Ut(f)?(g="argmax",y=Go({op:"argmax",field:f.argmax},{forAs:!0}),b.field="".concat(y,".").concat(l)):Bt(f)?(g="argmin",y=Go({op:"argmin",field:f.argmin},{forAs:!0}),b.field="".concat(y,".").concat(l)):"boxplot"!==f&&"errorbar"!==f&&"errorband"!==f&&(g=f),g){var w={op:g,as:y};l&&(w.field=l),o.push(w)}}else if(n.push(y),zo(s)&&Ve(h)){if(r.push({bin:h,field:l,as:y}),n.push(Go(s,{binSuffix:"end"})),ga(s,c)&&n.push(Go(s,{binSuffix:"range"})),Me(c)){var x={field:y+"_end"};a[c+"2"]=x}b.bin="binned",_e(c)||(b.type=li)}else if(d){i.push({timeUnit:d,field:l,as:y});var _=zo(s)&&s.type!==hi&&"time";_&&("text"===c||"tooltip"===c?b.formatType=_:!function(t){return!!Ae[t]}(c)?Me(c)&&(b.axis=Object.assign({formatType:_},b.axis)):b.legend=Object.assign({formatType:_},b.legend))}a[c]=b}else n.push(l),a[c]=t[c]}else a[c]=t[c]})),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function Da(t,e,n){var i=e.type;return I(t).reduce((function(a,s){if(!we(s))return Or(r.invalidEncodingChannel(s)),a;var u=t[s];if("angle"!==s||"arc"!==i||t.theta||(Or(r.REPLACE_ANGLE_WITH_THETA),s=ee),!function(t,e,n){var r=ze(e,n);if(!r)return!1;if("binned"===r){var i=t[e===Zt?Qt:Xt];return!!(Lo(i)&&Lo(t[e])&&qe(i.bin))}return!0}(t,s,i))return Or(r.incompatibleChannel(s,i)),a;if(s===se&&"line"===i){var c=oa(t[s]);if(null===c||void 0===c?void 0:c.aggregate)return Or(r.LINE_WITH_VARYING_SIZE),a}if(s===re&&(e.filled?"fill"in t:"stroke"in t))return Or(r.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),a;if("detail"===s||"order"===s&&!Object(o.A)(u)&&!Bo(u)||"tooltip"===s&&Object(o.A)(u))u&&(a[s]=Object(o.i)(u).reduce((function(t,e){return Lo(e)?t.push(ca(e,s)):Or(r.emptyFieldDef(e,s)),t}),[]));else{if("tooltip"===s&&null===u)a[s]=null;else if(!Lo(u)&&!Io(u)&&!Bo(u)&&!Mo(u)&&!Wr(u))return Or(r.emptyFieldDef(u,s)),a;a[s]=sa(u,s,n)}return a}),{})}function La(t){var e,n=[],r=Object(a.a)(I(t));try{for(r.s();!(e=r.n()).done;){var i=e.value;if(Ta(t,i)){var s,u=t[i],c=Object(o.i)(u),l=Object(a.a)(c);try{for(l.s();!(s=l.n()).done;){var f=s.value;Lo(f)?n.push(f):Ro(f)&&n.push(f.condition)}}catch(h){l.e(h)}finally{l.f()}}}}catch(h){r.e(h)}finally{r.f()}return n}function Na(t,e,n){if(t){var r,i=Object(a.a)(I(t));try{for(i.s();!(r=i.n()).done;){var s=r.value,u=t[s];if(Object(o.A)(u)){var c,l=Object(a.a)(u);try{for(l.s();!(c=l.n()).done;){var f=c.value;e.call(n,f,s)}}catch(h){l.e(h)}finally{l.f()}}else e.call(n,u,s)}}catch(h){i.e(h)}finally{i.f()}}}function Ia(t,e,n,r){return t?I(t).reduce((function(n,i){var a=t[i];return Object(o.A)(a)?a.reduce((function(t,n){return e.call(r,t,n,i)}),n):e.call(r,n,a,i)}),n):n}function Fa(t,e){return I(e).reduce((function(n,r){switch(r){case Qt:case Xt:case"href":case"description":case"url":case Zt:case Jt:case ee:case ne:case te:case"radius2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case ae:case"angle":case"tooltip":return n;case"order":if("line"===t||"trail"===t)return n;case"detail":case"key":var i=e[r];if(Object(o.A)(i)||Lo(i)){var s,u=Object(a.a)(Object(o.i)(i));try{for(u.s();!(s=u.n()).done;){var c=s.value;c.aggregate||n.push(Go(c,{}))}}catch(f){u.e(f)}finally{u.f()}}return n;case se:if("trail"===t)return n;case re:case ie:case oe:case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeDash":case"strokeWidth":var l=oa(e[r]);return l&&!l.aggregate&&n.push(Go(l,{})),n}}),[])}function Pa(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("tooltip"in n)return{tooltip:n.tooltip};var i=t.map((function(t){var n=t.fieldPrefix,i=t.titlePrefix,o=r?" of ".concat(e.field):"";return{field:n+e.field,type:e.type,title:Wr(i)?{signal:i+'"'.concat(escape(o),'"')}:i+o}}));return{tooltip:[].concat(Object(s.a)(i),Object(s.a)(La(n)))}}function $a(t){var e=t.axis,n=t.title,r=t.field;return e&&void 0!==e.title?void 0:X(n,r)}function za(t,e,n,r,i){var a=n.scale,s=n.axis;return function(u){var c=u.partName,l=u.mark,f=u.positionPrefix,h=u.endPositionPrefix,d=void 0===h?void 0:h,p=u.aria,g=u.extraEncoding,v=void 0===g?{}:g,m=$a(n);return Ba(t,c,i,p,{mark:l,encoding:Object.assign(Object.assign(Object.assign(Object(Pt.a)({},e,Object.assign(Object.assign(Object.assign({field:f+"_"+n.field,type:n.type},void 0!==m?{title:m}:{}),void 0!==a?{scale:a}:{}),void 0!==s?{axis:s}:{})),Object(o.H)(d)?Object(Pt.a)({},e+"2",{field:d+"_"+n.field}):{}),r),v)})}}function Ba(t,e,n,r,i){var a=t.clip,s=t.color,u=t.opacity,c=t.type;return t[e]||void 0===t[e]&&n[e]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[e]),a?{clip:a}:{}),s?{color:s}:{}),u?{opacity:u}:{}),Tt(i.mark)?i.mark:{type:i.mark}),{style:"".concat(c,"-").concat(e)}),Object(o.B)(t[e])?{}:t[e]),!1===r?{aria:r}:{})})]:[]}function Ua(t,e,n){var r=t.encoding,i="vertical"===e?"y":"x",o=r[i],a=r[i+"2"],s=r[i+"Error"],u=r[i+"Error2"];return{continuousAxisChannelDef:Wa(o,n),continuousAxisChannelDef2:Wa(a,n),continuousAxisChannelDefError:Wa(s,n),continuousAxisChannelDefError2:Wa(u,n),continuousAxis:i}}function Wa(t,e){if(t&&t.aggregate){var n=t.aggregate,i=u(t,["aggregate"]);return n!==e&&Or(r.errorBarContinuousAxisHasCustomizedAggregate(n,e)),i}return t}function Ha(t,e){var n=t.mark,r=t.encoding,i=r.x,o=r.y;if(Fo(i)){if(Fo(o)){var a=Lo(i)&&i.aggregate,s=Lo(o)&&o.aggregate;if(a||s!==e){if(s||a!==e){if(a===e&&s===e)throw new Error("Both x and y cannot have aggregate");return Tt(n)&&n.orient?n.orient:"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(Fo(o))return"vertical";throw new Error("Need a valid continuous axis for "+e+"s")}var Va=new Ft("boxplot",Ga);function qa(t){return Object(o.E)(t)?"tukey":t}function Ga(t,e){var n,i,c=e.config,l=t.mark,f=(t.encoding,t.selection),h=(t.projection,u(t,["mark","encoding","selection","projection"])),d=Tt(l)?l:{type:l};f&&Or(r.selectionNotSupported("boxplot"));var p,g=null!==(n=d.extent)&&void 0!==n?n:c.boxplot.extent,v=_a("size",d,c),m=qa(g),y=function(t,e,n){var r=Ha(t,"boxplot"),i=Ua(t,r,"boxplot"),c=i.continuousAxisChannelDef,l=i.continuousAxis,f=c.field,h=qa(e),d=[].concat(Object(s.a)(Ka(f)),[{op:"median",field:f,as:"mid_box_"+f},{op:"min",field:f,as:("min-max"===h?"lower_whisker_":"min_")+f},{op:"max",field:f,as:("min-max"===h?"upper_whisker_":"max_")+f}]),p="min-max"===h||"tukey"===h?[]:[{calculate:'datum["upper_box_'.concat(f,'"] - datum["lower_box_').concat(f,'"]'),as:"iqr_"+f},{calculate:'min(datum["upper_box_'.concat(f,'"] + datum["iqr_').concat(f,'"] * ').concat(e,', datum["max_').concat(f,'"])'),as:"upper_whisker_"+f},{calculate:'max(datum["lower_box_'.concat(f,'"] - datum["iqr_').concat(f,'"] * ').concat(e,', datum["min_').concat(f,'"])'),as:"lower_whisker_"+f}],g=t.encoding,v=l,m=(g[v],function(t){var e,n,r=t.tooltip,i=u(t,["tooltip"]);if(!r)return{filteredEncoding:t};if(Object(o.A)(r)){var s,c=Object(a.a)(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.aggregate?(e||(e=[]),e.push(l)):(n||(n=[]),n.push(l))}}catch(f){c.e(f)}finally{c.f()}e&&(i.tooltip=e)}else r.aggregate?i.tooltip=r:n=r;return Object(o.A)(n)&&1===n.length&&(n=n[0]),{customTooltipWithoutAggregatedField:n,filteredEncoding:i}}(u(g,["symbol"===typeof v?v:v+""]))),y=m.customTooltipWithoutAggregatedField,b=Ra(m.filteredEncoding,n),w=b.bins,x=b.timeUnits,_=b.aggregate,O=b.groupby,k=b.encoding,S="vertical"===r?"horizontal":"vertical",E=r;return{transform:[].concat(Object(s.a)(w),Object(s.a)(x),[{aggregate:[].concat(Object(s.a)(_),Object(s.a)(d)),groupby:O}],p),groupby:O,aggregate:_,continuousAxisChannelDef:c,continuousAxis:l,encodingWithoutContinuousAxis:k,ticksOrient:S,boxOrient:E,customTooltipWithoutAggregatedField:y}}(t,g,c),b=y.transform,w=y.continuousAxisChannelDef,x=y.continuousAxis,_=y.groupby,O=y.aggregate,k=y.encodingWithoutContinuousAxis,S=y.ticksOrient,E=y.boxOrient,A=y.customTooltipWithoutAggregatedField,C=(k.color,k.size),j=u(k,["color","size"]),T=function(t){return za(d,x,w,t,c.boxplot)},M=T(j),R=T(k),D=T(Object.assign(Object.assign({},j),C?{size:C}:{})),L=Pa([{fieldPrefix:"min-max"===m?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===m?"lower_whisker_":"min_",titlePrefix:"Min"}],w,k),N={type:"tick",color:"black",opacity:1,orient:S,invalid:null},I="min-max"===m?L:Pa([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],w,k),F=[].concat(Object(s.a)(M({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:I})),Object(s.a)(M({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:I})),Object(s.a)(M({partName:"ticks",mark:N,positionPrefix:"lower_whisker",aria:!1,extraEncoding:I})),Object(s.a)(M({partName:"ticks",mark:N,positionPrefix:"upper_whisker",aria:!1,extraEncoding:I}))),P=[].concat(Object(s.a)("tukey"!==m?F:[]),Object(s.a)(R({partName:"box",mark:Object.assign(Object.assign({type:"bar"},v?{size:v}:{}),{orient:E,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:L})),Object(s.a)(D({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Object(o.F)(c.boxplot.median)&&c.boxplot.median.color?{color:c.boxplot.median.color}:{}),v?{size:v}:{}),{orient:S,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:L})));if("min-max"!==m){var $='datum["lower_box_'.concat(w.field,'"]'),z='datum["upper_box_'.concat(w.field,'"]'),B="(".concat(z," - ").concat($,")"),U="".concat($," - ").concat(g," * ").concat(B),W="".concat(z," + ").concat(g," * ").concat(B),H='datum["'.concat(w.field,'"]'),V={joinaggregate:Ka(w.field),groupby:_},q=void 0;"tukey"===m&&(q={transform:[{filter:"(".concat(U," <= ").concat(H,") && (").concat(H," <= ").concat(W,")")},{aggregate:[{op:"min",field:w.field,as:"lower_whisker_"+w.field},{op:"max",field:w.field,as:"upper_whisker_"+w.field},{op:"min",field:"lower_box_"+w.field,as:"lower_box_"+w.field},{op:"max",field:"upper_box_"+w.field,as:"upper_box_"+w.field}].concat(Object(s.a)(O)),groupby:_}],layer:F});j.tooltip;var G=u(j,["tooltip"]),K=w.scale,Y=w.axis,Q=$a(w),X=Ba(d,"outliers",c.boxplot,!0,{transform:[{filter:"(".concat(H," < ").concat(U,") || (").concat(H," > ").concat(W,")")}],mark:"point",encoding:Object.assign(Object.assign(Object(Pt.a)({},x,Object.assign(Object.assign(Object.assign({field:w.field,type:w.type},void 0!==Q?{title:Q}:{}),void 0!==K?{scale:K}:{}),void 0!==Y?{axis:Y}:{})),G),A?{tooltip:A}:{})})[0];X&&q?p={transform:[V],layer:[X,q]}:X?(p=X).transform.unshift(V):q&&(p=q).transform.unshift(V)}return p?Object.assign(Object.assign({},h),{layer:[p,{transform:b,layer:P}]}):Object.assign(Object.assign({},h),{transform:(null!==(i=h.transform)&&void 0!==i?i:[]).concat(b),layer:P})}function Ka(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}var Ya=new Ft("errorbar",Qa);function Qa(t,e){var n=e.config,r=Za(t,"errorbar",n),i=r.transform,o=r.continuousAxisChannelDef,a=r.continuousAxis,u=r.encodingWithoutContinuousAxis,c=r.ticksOrient,l=r.markDef,f=r.outerSpec,h=r.tooltipEncoding,d=za(l,a,o,u,n.errorbar),p={type:"tick",orient:c},g=[].concat(Object(s.a)(d({partName:"ticks",mark:p,positionPrefix:"lower",aria:!1,extraEncoding:h})),Object(s.a)(d({partName:"ticks",mark:p,positionPrefix:"upper",aria:!1,extraEncoding:h})),Object(s.a)(d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:h})));return Object.assign(Object.assign(Object.assign({},f),{transform:i}),g.length>1?{layer:g}:Object.assign({},g[0]))}function Xa(t,e){var n=t.encoding;if(function(t){return($o(t.x)||$o(t.y))&&!$o(t.x2)&&!$o(t.y2)&&!$o(t.xError)&&!$o(t.xError2)&&!$o(t.yError)&&!$o(t.yError2)}(n))return{orient:Ha(t,e),inputType:"raw"};var r=function(t){return $o(t.x2)||$o(t.y2)}(n),i=function(t){return $o(t.xError)||$o(t.xError2)||$o(t.yError)||$o(t.yError2)}(n),o=n.x,a=n.y;if(r){if(i)throw new Error("".concat(e," cannot be both type aggregated-upper-lower and aggregated-error"));var s=n.x2,u=n.y2;if($o(s)&&$o(u))throw new Error("".concat(e," cannot have both x2 and y2"));if($o(s)){if(Fo(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in ".concat(e))}if($o(u)){if(Fo(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in ".concat(e))}throw new Error("No ranged axis")}var c=n.xError,l=n.xError2,f=n.yError,h=n.yError2;if($o(l)&&!$o(c))throw new Error("".concat(e," cannot have xError2 without xError"));if($o(h)&&!$o(f))throw new Error("".concat(e," cannot have yError2 without yError"));if($o(c)&&$o(f))throw new Error("".concat(e," cannot have both xError and yError with both are quantiative"));if($o(c)){if(Fo(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if($o(f)){if(Fo(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function Za(t,e,n){var i,o=t.mark,c=t.encoding,l=t.selection,f=(t.projection,u(t,["mark","encoding","selection","projection"])),h=Tt(o)?o:{type:o};l&&Or(r.selectionNotSupported(e));var d=Xa(t,e),p=d.orient,g=d.inputType,v=Ua(t,p,e),m=v.continuousAxisChannelDef,y=v.continuousAxisChannelDef2,b=v.continuousAxisChannelDefError,w=v.continuousAxisChannelDefError2,x=v.continuousAxis,_=function(t,e,n,i,o,s,u,c){var l,f=[],h=[],d=e.field,p=!1;if("raw"===s){var g,v,m,y=t.center?t.center:t.extent?"iqr"===t.extent?"median":"mean":c.errorbar.center,b=t.extent?t.extent:"mean"===y?"stderr":"iqr";if("median"===y!==("iqr"===b)&&Or(r.errorBarCenterIsUsedWithWrongExtent(y,b,u)),"stderr"===b||"stdev"===b)f=[{op:b,field:d,as:"extent_"+d},{op:y,field:d,as:"center_"+d}],h=[{calculate:'datum["center_'.concat(d,'"] + datum["extent_').concat(d,'"]'),as:"upper_"+d},{calculate:'datum["center_'.concat(d,'"] - datum["extent_').concat(d,'"]'),as:"lower_"+d}],l=[{fieldPrefix:"center_",titlePrefix:W(y)},{fieldPrefix:"upper_",titlePrefix:Ja(y,b,"+")},{fieldPrefix:"lower_",titlePrefix:Ja(y,b,"-")}],p=!0;else t.center&&t.extent&&Or(r.errorBarCenterIsNotNeeded(t.extent,u)),"ci"===b?(g="mean",v="ci0",m="ci1"):(g="median",v="q1",m="q3"),f=[{op:v,field:d,as:"lower_"+d},{op:m,field:d,as:"upper_"+d},{op:g,field:d,as:"center_"+d}],l=[{fieldPrefix:"upper_",titlePrefix:ea({field:d,aggregate:m,type:"quantitative"},c,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ea({field:d,aggregate:v,type:"quantitative"},c,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ea({field:d,aggregate:g,type:"quantitative"},c,{allowDisabling:!1})}]}else{(t.center||t.extent)&&Or(r.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),"aggregated-upper-lower"===s?(l=[],h=[{calculate:'datum["'.concat(n.field,'"]'),as:"upper_"+d},{calculate:'datum["'.concat(d,'"]'),as:"lower_"+d}]):"aggregated-error"===s&&(l=[{fieldPrefix:"",titlePrefix:d}],h=[{calculate:'datum["'.concat(d,'"] + datum["').concat(i.field,'"]'),as:"upper_"+d}],o?h.push({calculate:'datum["'.concat(d,'"] + datum["').concat(o.field,'"]'),as:"lower_"+d}):h.push({calculate:'datum["'.concat(d,'"] - datum["').concat(i.field,'"]'),as:"lower_"+d}));var w,x=Object(a.a)(h);try{for(x.s();!(w=x.n()).done;){var _=w.value;l.push({fieldPrefix:_.as.substring(0,6),titlePrefix:K(K(_.calculate,'datum["',""),'"]',"")})}}catch(O){x.e(O)}finally{x.f()}}return{postAggregateCalculates:h,errorBarSpecificAggregate:f,tooltipSummary:l,tooltipTitleWithFieldName:p}}(h,m,y,b,w,g,e,n),O=_.errorBarSpecificAggregate,k=_.postAggregateCalculates,S=_.tooltipSummary,E=_.tooltipTitleWithFieldName,A=c,C=x,j=(A[C],"x"===x?"x2":"y2"),T=(A[j],"x"===x?"xError":"yError"),M=(A[T],"x"===x?"xError2":"yError2"),R=(A[M],Ra(u(A,["symbol"===typeof C?C:C+"","symbol"===typeof j?j:j+"","symbol"===typeof T?T:T+"","symbol"===typeof M?M:M+""]),n)),D=R.bins,L=R.timeUnits,N=R.aggregate,I=R.groupby,F=R.encoding,P=[].concat(Object(s.a)(N),Object(s.a)(O)),$="raw"!==g?[]:I,z=Pa(S,m,F,E);return{transform:[].concat(Object(s.a)(null!==(i=f.transform)&&void 0!==i?i:[]),Object(s.a)(D),Object(s.a)(L),Object(s.a)(0===P.length?[]:[{aggregate:P,groupby:$}]),Object(s.a)(k)),groupby:$,continuousAxisChannelDef:m,continuousAxis:x,encodingWithoutContinuousAxis:F,ticksOrient:"vertical"===p?"horizontal":"vertical",markDef:h,outerSpec:f,tooltipEncoding:z}}function Ja(t,e,n){return W(t)+" "+n+" "+e}var ts=new Ft("errorband",es);function es(t,e){var n=e.config,i=Za(t,"errorband",n),o=i.transform,a=i.continuousAxisChannelDef,u=i.continuousAxis,c=i.encodingWithoutContinuousAxis,l=i.markDef,f=i.outerSpec,h=i.tooltipEncoding,d=l,p=za(d,u,a,c,n.errorband),g=void 0!==t.encoding.x&&void 0!==t.encoding.y,v={type:g?"area":"rect"},m={type:g?"line":"rule"},y=Object.assign(Object.assign({},d.interpolate?{interpolate:d.interpolate}:{}),d.tension&&d.interpolate?{tension:d.tension}:{});return g?(v=Object.assign(Object.assign(Object.assign({},v),y),{ariaRoleDescription:"errorband"}),m=Object.assign(Object.assign({},m),y)):d.interpolate?Or(r.errorBand1DNotSupport("interpolate")):d.tension&&Or(r.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},f),{transform:o,layer:[].concat(Object(s.a)(p({partName:"band",mark:v,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:h})),Object(s.a)(p({partName:"borders",mark:m,positionPrefix:"lower",aria:!1,extraEncoding:h})),Object(s.a)(p({partName:"borders",mark:m,positionPrefix:"upper",aria:!1,extraEncoding:h})))})}var ns={};function rs(t,e,n){var r=new Ft(t,e);ns[t]={normalizer:r,parts:n}}rs("boxplot",Ga,["box","median","outliers","rule","ticks"]),rs("errorbar",Qa,["ticks","rule"]),rs("errorband",es,["band","borders"]);var is=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],os=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],as={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},ss={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},us=(I(ss),{single:{on:"click",fields:["_vgsid_"],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:["_vgsid_"],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}});function cs(t){return!!t&&("legend"===t||!!t.legend)}function ls(t){return cs(t)&&Object(o.F)(t)}function fs(t){return"concat"in t}function hs(t){return"vconcat"in t}function ds(t){return"hconcat"in t}function ps(t){return Object(o.F)(t)&&void 0!==t.step}function gs(t){return t.view||t.width||t.height}var vs=I({align:1,bounds:1,center:1,columns:1,spacing:1});function ms(t,e){var n;return null!==(n=t[e])&&void 0!==n?n:t["width"===e?"continuousWidth":"continuousHeight"]}function ys(t,e){var n=bs(t,e);return ps(n)?n.step:ws}function bs(t,e){var n;return X(null!==(n=t[e])&&void 0!==n?n:t["width"===e?"discreteWidth":"discreteHeight"],{step:t.step})}var ws=20;var xs={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:ws},mark:{color:"#4c78a8",invalid:"filter",timeUnitBand:1},arc:{},area:{},bar:Lt,circle:{},geoshape:{},image:{},line:{},point:{},rect:Nt,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:us,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},_s=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Os={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},ks={blue:_s[0],orange:_s[1],red:_s[2],teal:_s[3],green:_s[4],yellow:_s[5],purple:_s[6],pink:_s[7],brown:_s[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Ss(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{signals:[{name:"color",value:Object(o.F)(t)?Object.assign(Object.assign({},ks),t):ks}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Es(t){return{signals:[{name:"fontSize",value:Object(o.F)(t)?Object.assign(Object.assign({},Os),t):Os}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function As(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function Cs(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=t.font,r=t.fontSize,i=u(t,["color","font","fontSize"]);return Object(o.N)({},xs,n?As(n):{},e?Ss(e):{},r?Es(r):{},i||{})}var js=["view"].concat(Object(s.a)(jt)),Ts=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Ms=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function Rs(t){t=x(t);var e,n=Object(a.a)(Ts);try{for(n.s();!(e=n.n()).done;){delete t[e.value]}}catch(E){n.e(E)}finally{n.f()}if(t.axis)for(var r in t.axis)it(t.axis[r])&&delete t.axis[r];if(t.legend){var i,s=Object(a.a)(is);try{for(s.s();!(i=s.n()).done;){var u=i.value;delete t.legend[u]}}catch(E){s.e(E)}finally{s.f()}}if(t.mark){var c,l=Object(a.a)(Rt);try{for(l.s();!(c=l.n()).done;){var f=c.value;delete t.mark[f]}}catch(E){l.e(E)}finally{l.f()}t.mark.tooltip&&Object(o.F)(t.mark.tooltip)&&delete t.mark.tooltip}var h,d=Object(a.a)(js);try{for(d.s();!(h=d.n()).done;){var p,g=h.value,v=Object(a.a)(Rt);try{for(v.s();!(p=v.n()).done;){var m=p.value;delete t[g][m]}}catch(E){v.e(E)}finally{v.f()}var y=Ms[g];if(y){var b,w=Object(a.a)(y);try{for(w.s();!(b=w.n()).done;){var _=b.value;delete t[g][_]}}catch(E){w.e(E)}finally{w.f()}}Ds(t,g)}}catch(E){d.e(E)}finally{d.f()}var O,k=Object(a.a)(I(ns));try{for(k.s();!(O=k.n()).done;){delete t[O.value]}}catch(E){k.e(E)}finally{k.f()}for(var S in function(t){var e=va(t.title),n=e.titleMarkConfig,r=e.subtitleMarkConfig,i=e.subtitle;N(n)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),n));N(r)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),r));N(i)?delete t.title:t.title=i}(t),t)Object(o.F)(t[S])&&N(t[S])&&delete t[S];return N(t)?void 0:t}function Ds(t,e,n,r){var i=r?t[e][r]:t[e];"view"===e&&(n="cell");var o=Object.assign(Object.assign({},i),t.style[null!==n&&void 0!==n?n:e]);N(o)||(t.style[null!==n&&void 0!==n?n:e]=o),r||delete t[e]}function Ls(t){return"layer"in t}var Ns=n(24);function Is(t,e,n){return(Is="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(Ns.a)(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var Fs=n(8),Ps=n(7),$s=function(){function t(){Object(lt.a)(this,t)}return Object(ft.a)(t,[{key:"map",value:function(t,e){return Eo(t)?this.mapFacet(t,e):function(t){return"repeat"in t}(t)?this.mapRepeat(t,e):ds(t)?this.mapHConcat(t,e):hs(t)?this.mapVConcat(t,e):fs(t)?this.mapConcat(t,e):this.mapLayerOrUnit(t,e)}},{key:"mapLayerOrUnit",value:function(t,e){if(Ls(t))return this.mapLayer(t,e);if(It(t))return this.mapUnit(t,e);throw new Error(r.invalidSpec(t))}},{key:"mapLayer",value:function(t,e){var n=this;return Object.assign(Object.assign({},t),{layer:t.layer.map((function(t){return n.mapLayerOrUnit(t,e)}))})}},{key:"mapHConcat",value:function(t,e){var n=this;return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map((function(t){return n.map(t,e)}))})}},{key:"mapVConcat",value:function(t,e){var n=this;return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map((function(t){return n.map(t,e)}))})}},{key:"mapConcat",value:function(t,e){var n=this,r=t.concat,i=u(t,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map((function(t){return n.map(t,e)}))})}},{key:"mapFacet",value:function(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}},{key:"mapRepeat",value:function(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}}]),t}(),zs={zero:1,center:1,normalize:1};function Bs(t){return t in zs}var Us=new Set([dt,gt,pt,wt,yt,kt,St,mt,xt,_t]),Ws=new Set([gt,pt,dt]);function Hs(t,e){var n,r,i="x"===e?"y":"radius",o=t[e],a=t[i];if(Lo(o)&&Lo(a))if("quantitative"===No(o)&&"quantitative"===No(a)){if(o.stack)return e;if(a.stack)return i;var s=Lo(o)&&!!o.aggregate;if(s!==(Lo(a)&&!!a.aggregate))return s?e:i;var u=null===(n=o.scale)||void 0===n?void 0:n.type,c=null===(r=a.scale)||void 0===r?void 0:r.type;if(u&&"linear"!==u)return i;if(c&&"linear"!==c)return e}else{if("quantitative"===No(o))return e;if("quantitative"===No(a))return i}else{if("quantitative"===No(o))return e;if("quantitative"===No(a))return i}}function Vs(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function qs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Tt(t)?t.type:t;if(!Us.has(i))return null;var s=Hs(e,"x")||Hs(e,"theta");if(!s)return null;var u=e[s],c=Lo(u)?Go(u,{}):void 0,l=Vs(s),f=e[l],h=Lo(f)?Go(f,{}):void 0;h===c&&(h=void 0,f=void 0,l=void 0);var d,p=Ce.reduce((function(t,n){if("tooltip"!==n&&Ta(e,n)){var r,i=e[n],s=Object(a.a)(Object(o.i)(i));try{for(s.s();!(r=s.n()).done;){var u=oa(r.value);if(!u.aggregate){var c=Go(u,{});c&&c===h||t.push({channel:n,fieldDef:u})}}}catch(l){s.e(l)}finally{s.f()}}return t}),[]);if(void 0!==u.stack?d=Object(o.B)(u.stack)?u.stack?"zero":null:u.stack:p.length>0&&Ws.has(i)&&(d="zero"),!d||!Bs(d))return null;if(Ma(e)&&0===p.length)return null;if(u.scale&&u.scale.type&&u.scale.type!==vi){if(n.disallowNonLinearStack)return null;Or(r.cannotStackNonLinearScale(u.scale.type))}return $o(e[Se(s)])?(void 0!==u.stack&&Or(r.cannotStackRangedMark(s)),null):(Lo(u)&&u.aggregate&&!A(qt,u.aggregate)&&Or(r.stackNonSummativeAggregate(u.aggregate)),{groupbyChannel:f?l:void 0,groupbyField:h,fieldChannel:s,impute:null!==u.impute&&At(i),stackBy:p,offset:d})}function Gs(t){t.point,t.line;var e=u(t,["point","line"]);return I(e).length>1?e:e.type}function Ks(t){for(var e=0,n=["line","area","rule","trail"];e<n.length;e++){var r=n[e];t[r]&&(t=Object.assign(Object.assign({},t),Object(Pt.a)({},r,O(t[r],["point","line"]))))}return t}function Ys(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return"transparent"===t.point?{opacity:0}:t.point?Object(o.F)(t.point)?t.point:{}:void 0!==t.point?null:e.point||n.shape?Object(o.F)(e.point)?e.point:{}:void 0}function Qs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.line?!0===t.line?{}:t.line:void 0!==t.line?null:e.line?!0===e.line?{}:e.line:void 0}var Xs=function(){function t(){Object(lt.a)(this,t),this.name="path-overlay"}return Object(ft.a)(t,[{key:"hasMatchingType",value:function(t,e){if(It(t)){var n=t.mark,r=t.encoding,i=Tt(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!Ys(i,e[i.type],r);case"area":return!!Ys(i,e[i.type],r)||!!Qs(i,e[i.type])}}return!1}},{key:"run",value:function(t,e,n){var r=e.config,i=t.selection,o=t.projection,a=t.encoding,s=t.mark,c=u(t,["selection","projection","encoding","mark"]),l=Tt(s)?s:{type:s},f=Ys(l,r[l.type],a),h="area"===l.type&&Qs(l,r[l.type]),d=[Object.assign(Object.assign({},i?{selection:i}:{}),{mark:Gs(Object.assign(Object.assign({},"area"===l.type&&void 0===l.opacity&&void 0===l.fillOpacity?{opacity:.7}:{}),l)),encoding:O(a,["shape"])})],p=qs(l,a),g=a;if(p){var v=p.fieldChannel,m=p.offset;g=Object.assign(Object.assign({},a),Object(Pt.a)({},v,Object.assign(Object.assign({},a[v]),m?{stack:m}:{})))}return h&&d.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"line"},_(l,["clip","interpolate","tension","tooltip"])),h),encoding:g})),f&&d.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},_(l,["clip","tooltip"])),f),encoding:g})),n(Object.assign(Object.assign({},c),{layer:d}),Object.assign(Object.assign({},e),{config:Ks(r)}))}}]),t}(),Zs=function(){function t(){Object(lt.a)(this,t),this.name="RangeStep"}return Object(ft.a)(t,[{key:"hasMatchingType",value:function(t){var e;if(It(t)&&t.encoding){var n,r=Object(a.a)(Te);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=t.encoding[i];if(o&&$o(o)&&(null===(e=null===o||void 0===o?void 0:o.scale)||void 0===e?void 0:e.rangeStep))return!0}}catch(s){r.e(s)}finally{r.f()}}return!1}},{key:"run",value:function(t){var e,n,i={},o=Object.assign({},t.encoding),s=Object(a.a)(Te);try{for(s.s();!(n=s.n()).done;){var c=n.value,l=Ee(c),f=o[c];if(f&&$o(f)&&(null===(e=null===f||void 0===f?void 0:f.scale)||void 0===e?void 0:e.rangeStep)){var h=f.scale,d=u(f,["scale"]),p=h,g=(p.rangeStep,u(p,["rangeStep"]));i[l]={step:h.rangeStep},Or(r.RANGE_STEP_DEPRECATED),o=Object.assign(Object.assign({},o),Object(Pt.a)({},c,Object.assign(Object.assign({},d),N(g)?{}:{scale:g})))}}}catch(v){s.e(v)}finally{s.f()}return Object.assign(Object.assign(Object.assign({},i),t),{encoding:o})}}]),t}();function Js(t,e){return e?ko(t)?ou(t,e):nu(t,e):t}function tu(t,e){return e?ou(t,e):t}function eu(t,e,n){var i,a=e[t];return(i=a)&&!Object(o.H)(i)&&"repeat"in i?a.repeat in n?Object.assign(Object.assign({},e),Object(Pt.a)({},t,n[a.repeat])):void Or(r.noSuchRepeatedValue(a.repeat)):e}function nu(t,e){if(void 0!==(t=eu("field",t,e))){if(null===t)return null;if(Co(t)&&_o(t.sort)){var n=eu("field",t.sort,e);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function ru(t,e){if(Lo(t))return nu(t,e);var n=eu("datum",t,e);return n===t||n.type||(n.type="nominal"),n}function iu(t,e){if(!$o(t)){if(Do(t)){var n=ru(t.condition,e);if(n)return Object.assign(Object.assign({},t),{condition:n});t.condition;return u(t,["condition"])}return t}var r=ru(t,e);return r||(Mo(t)?{condition:t.condition}:void 0)}function ou(t,e){var n={};for(var r in t)if(Object(o.v)(t,r)){var i=t[r];if(Object(o.A)(i))n[r]=i.map((function(t){return iu(t,e)})).filter((function(t){return t}));else{var a=iu(i,e);void 0!==a&&(n[r]=a)}}return n}var au=function(){function t(){Object(lt.a)(this,t),this.name="RuleForRangedLine"}return Object(ft.a)(t,[{key:"hasMatchingType",value:function(t){if(It(t)){var e=t.encoding;if("line"===t.mark){var n,r=Object(a.a)(xe);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=e[Oe(i)];if(e[i]&&(Lo(o)&&!qe(o.bin)||Io(o)))return!0}}catch(s){r.e(s)}finally{r.f()}}}return!1}},{key:"run",value:function(t,e,n){var i=t.encoding;return Or(r.lineWithRange(!!i.x2,!!i.y2)),n(Object.assign(Object.assign({},t),{mark:"rule"}),e)}}]),t}();function su(t){var e=t.parentEncoding,n=t.encoding;if(e&&n){var i=I(e).reduce((function(t,e){return n[e]&&t.push(e),t}),[]);i.length>0&&Or(r.encodingOverridden(i))}var o=Object.assign(Object.assign({},null!==e&&void 0!==e?e:{}),null!==n&&void 0!==n?n:{});return N(o)?void 0:o}function uu(t){var e=t.parentProjection,n=t.projection;return e&&n&&Or(r.projectionOverridden({parentProjection:e,projection:n})),null!==n&&void 0!==n?n:e}function cu(t,e){void 0===e&&(e=Cs(t.config));var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return lu.map(t,{config:e})}(t,e),i=function(t,e,n){var i=e.width,o=e.height,a=It(t)||Ls(t),s={};a?"container"==i&&"container"==o?(s.type="fit",s.contains="padding"):"container"==i?(s.type="fit-x",s.contains="padding"):"container"==o&&(s.type="fit-y",s.contains="padding"):("container"==i&&(Or(r.containerSizeNonSingle("width")),i=void 0),"container"==o&&(Or(r.containerSizeNonSingle("height")),o=void 0));var u=Object.assign(Object.assign(Object.assign({type:"pad"},s),n?fu(n.autosize):{}),fu(t.autosize));"fit"!==u.type||a||(Or(r.FIT_NON_SINGLE),u.type="pad");"container"==i&&"fit"!=u.type&&"fit-x"!=u.type&&Or(r.containerSizeNotCompatibleWithAutosize("width"));"container"==o&&"fit"!=u.type&&"fit-y"!=u.type&&Or(r.containerSizeNotCompatibleWithAutosize("height"));if(w(u,{type:"pad"}))return;return u}(n,{width:t.width,height:t.height,autosize:t.autosize},e);return Object.assign(Object.assign({},n),i?{autosize:i}:{})}var lu=new(function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){var t;return Object(lt.a)(this,n),(t=e.apply(this,arguments)).nonFacetUnitNormalizers=[Va,Ya,ts,new Xs,new au,new Zs],t}return Object(ft.a)(n,[{key:"map",value:function(t,e){if(It(t)){var r=Ta(t.encoding,Kt),i=Ta(t.encoding,Yt),o=Ta(t.encoding,"facet");if(r||i||o)return this.mapFacetedUnit(t,e)}return Is(Object(Ns.a)(n.prototype),"map",this).call(this,t,e)}},{key:"mapUnit",value:function(t,e){var n=e.parentEncoding,r=e.parentProjection,i=Object.assign(Object.assign({},t),{encoding:tu(t.encoding,e.repeater)});if(n||r)return this.mapUnitWithParentEncodingOrProjection(i,e);var o,s=this.mapLayerOrUnit.bind(this),u=Object(a.a)(this.nonFacetUnitNormalizers);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c.hasMatchingType(i,e.config))return c.run(i,e,s)}}catch(l){u.e(l)}finally{u.f()}return i}},{key:"mapRepeat",value:function(t,e){return function(t){return!Object(o.A)(t.repeat)&&t.repeat.layer}(t)?this.mapLayerRepeat(t,e):this.mapNonLayerRepeat(t,e)}},{key:"mapLayerRepeat",value:function(t,e){var n=this,r=t.repeat,i=t.spec,o=u(t,["repeat","spec"]),a=r.row,s=r.column,c=r.layer,l=e.repeater,f=void 0===l?{}:l,h=e.repeaterPrefix,d=void 0===h?"":h;return a||s?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),s?{column:s}:{}),spec:{repeat:{layer:c},spec:i}}),e):Object.assign(Object.assign({},o),{layer:c.map((function(t){var r=Object.assign(Object.assign({},f),{layer:t}),o=(i.name||"")+d+"child__layer_".concat(z(t)),a=n.mapLayerOrUnit(i,Object.assign(Object.assign({},e),{repeater:r,repeaterPrefix:o}));return a.name=o,a}))})}},{key:"mapNonLayerRepeat",value:function(t,e){var n,i=t,s=i.repeat,c=i.spec,l=i.data,f=u(t,["repeat","spec","data"]);!Object(o.A)(s)&&t.columns&&(t=O(t,["columns"]),Or(r.columnsNotSupportByRowCol("repeat")));var h,d=[],p=e.repeater,g=void 0===p?{}:p,v=e.repeaterPrefix,m=void 0===v?"":v,y=!Object(o.A)(s)&&s.row||[g?g.row:null],b=!Object(o.A)(s)&&s.column||[g?g.column:null],w=Object(o.A)(s)&&s||[g?g.repeat:null],x=Object(a.a)(w);try{for(x.s();!(h=x.n()).done;){var _,k=h.value,S=Object(a.a)(y);try{for(S.s();!(_=S.n()).done;){var E,A=_.value,C=Object(a.a)(b);try{for(C.s();!(E=C.n()).done;){var j=E.value,T={repeat:k,row:A,column:j,layer:g.layer},M=(c.name||"")+m+"child__"+(Object(o.A)(s)?"".concat(z(k)):(s.row?"row_".concat(z(A)):"")+(s.column?"column_".concat(z(j)):"")),R=this.map(c,Object.assign(Object.assign({},e),{repeater:T,repeaterPrefix:M}));R.name=M,d.push(O(R,["data"]))}}catch(L){C.e(L)}finally{C.f()}}}catch(L){S.e(L)}finally{S.f()}}}catch(L){x.e(L)}finally{x.f()}var D=Object(o.A)(s)?t.columns:s.column?s.column.length:1;return Object.assign(Object.assign({data:null!==(n=c.data)&&void 0!==n?n:l,align:"all"},f),{columns:D,concat:d})}},{key:"mapFacet",value:function(t,e){return ko(t.facet)&&t.columns&&(t=O(t,["columns"]),Or(r.columnsNotSupportByRowCol("facet"))),Is(Object(Ns.a)(n.prototype),"mapFacet",this).call(this,t,e)}},{key:"mapUnitWithParentEncodingOrProjection",value:function(t,e){var n=t.encoding,r=t.projection,i=e.parentEncoding,o=e.parentProjection,a=e.config,s=uu({parentProjection:o,projection:r}),u=su({parentEncoding:i,encoding:tu(n,e.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),s?{projection:s}:{}),u?{encoding:u}:{}),{config:a})}},{key:"mapFacetedUnit",value:function(t,e){var n=t.encoding,r=n.row,i=n.column,o=n.facet,a=u(n,["row","column","facet"]),s=t.mark,c=t.width,l=t.projection,f=t.height,h=t.view,d=t.selection,p=(t.encoding,u(t,["mark","width","projection","height","view","selection","encoding"])),g=this.getFacetMappingAndLayout({row:r,column:i,facet:o},e),v=g.facetMapping,m=g.layout,y=tu(a,e.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},p),m),{facet:v,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c?{width:c}:{}),f?{height:f}:{}),h?{view:h}:{}),l?{projection:l}:{}),{mark:s,encoding:y}),d?{selection:d}:{})}),e)}},{key:"getFacetMappingAndLayout",value:function(t,e){var n,i=t.row,o=t.column,a=t.facet;if(i||o){a&&Or(r.facetChannelDropped([].concat(Object(s.a)(i?[Kt]:[]),Object(s.a)(o?[Yt]:[]))));for(var c={},l={},f=0,h=[Kt,Yt];f<h.length;f++){var d=h[f],p=t[d];if(p){p.align,p.center,p.spacing,p.columns;var g=u(p,["align","center","spacing","columns"]);c[d]=g;for(var v=0,m=["align","center","spacing"];v<m.length;v++){var y=m[v];void 0!==p[y]&&(l[y]=null!==(n=l[y])&&void 0!==n?n:{},l[y][d]=p[y])}}}return{facetMapping:c,layout:l}}var b=a.align,w=a.center,x=a.spacing,_=a.columns;return{facetMapping:Js(u(a,["align","center","spacing","columns"]),e.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},b?{align:b}:{}),w?{center:w}:{}),x?{spacing:x}:{}),_?{columns:_}:{})}}},{key:"mapLayer",value:function(t,e){var r=e.parentEncoding,i=e.parentProjection,o=u(e,["parentEncoding","parentProjection"]),a=t.encoding,s=t.projection,c=u(t,["encoding","projection"]),l=Object.assign(Object.assign({},o),{parentEncoding:su({parentEncoding:r,encoding:a}),parentProjection:uu({parentProjection:i,projection:s})});return Is(Object(Ns.a)(n.prototype),"mapLayer",this).call(this,c,l)}}]),n}($s));function fu(t){return Object(o.H)(t)?{type:t}:null!==t&&void 0!==t?t:{}}var hu=["background","padding"];function du(t){return hu.reduce((function(e,n){return t&&void 0!==t[n]&&(e[n]=t[n]),e}),{})}var pu=n(21),gu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(lt.a)(this,t),this.explicit=e,this.implicit=n}return Object(ft.a)(t,[{key:"clone",value:function(){return new t(x(this.explicit),x(this.implicit))}},{key:"combine",value:function(){return Object.assign(Object.assign({},this.explicit),this.implicit)}},{key:"get",value:function(t){return X(this.explicit[t],this.implicit[t])}},{key:"getWithExplicit",value:function(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function(t,e){void 0!==e.value&&this.set(t,e.value,e.explicit)}},{key:"set",value:function(t,e,n){return delete this[n?"implicit":"explicit"][t],this[n?"explicit":"implicit"][t]=e,this}},{key:"copyKeyFromSplit",value:function(t,e){void 0!==e.explicit[t]?this.set(t,e.explicit[t],!0):void 0!==e.implicit[t]&&this.set(t,e.implicit[t],!1)}},{key:"copyKeyFromObject",value:function(t,e){void 0!==e[t]&&this.set(t,e[t],!0)}},{key:"copyAll",value:function(t){var e,n=Object(a.a)(I(t.combine()));try{for(n.s();!(e=n.n()).done;){var r=e.value,i=t.getWithExplicit(r);this.setWithExplicit(r,i)}}catch(o){n.e(o)}finally{n.f()}}}]),t}();function vu(t){return{explicit:!0,value:t}}function mu(t){return{explicit:!1,value:t}}function yu(t){return function(e,n,r,i){var o=t(e.value,n.value);return o>0?e:o<0?n:bu(e,n,r,i)}}function bu(t,e,n,i){return t.explicit&&e.explicit&&Or(r.mergeConflictingProperty(n,i,t.value,e.value)),t}function wu(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:bu;return void 0===t||void 0===t.value?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:w(t.value,e.value)?t:i(t,e,n,r)}var xu=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(lt.a)(this,n),(t=e.call(this,r,i)).explicit=r,t.implicit=i,t.parseNothing=o,t}return Object(ft.a)(n,[{key:"clone",value:function(){var t=Is(Object(Ns.a)(n.prototype),"clone",this).call(this);return t.parseNothing=this.parseNothing,t}}]),n}(gu);function _u(t){return"url"in t}function Ou(t){return"values"in t}function ku(t){return"name"in t&&!_u(t)&&!Ou(t)&&!Su(t)}function Su(t){return t&&(Eu(t)||Au(t)||Cu(t))}function Eu(t){return"sequence"in t}function Au(t){return"sphere"in t}function Cu(t){return"graticule"in t}var ju="main";function Tu(t){return"filter"in t}function Mu(t){return"lookup"in t}function Ru(t){return"pivot"in t}function Du(t){return"density"in t}function Lu(t){return"quantile"in t}function Nu(t){return"regression"in t}function Iu(t){return"loess"in t}function Fu(t){return"sample"in t}function Pu(t){return"window"in t}function $u(t){return"joinaggregate"in t}function zu(t){return"flatten"in t}function Bu(t){return"calculate"in t}function Uu(t){return"bin"in t}function Wu(t){return"impute"in t}function Hu(t){return"timeUnit"in t}function Vu(t){return"aggregate"in t}function qu(t){return"stack"in t}function Gu(t){return"fold"in t}var Ku=n(27);function Yu(t,e,n,r){var i=Mo(e)&&e.condition,a=r(e);if(i){var u=Object(o.i)(i).map((function(e){var n=r(e),i=function(t){return t.selection}(e)?sl(t,e.selection):cl(t,e.test);return Object.assign({test:i},n)}));return Object(Pt.a)({},n,[].concat(Object(s.a)(u),Object(s.a)(void 0!==a?[a]:[])))}return void 0!==a?Object(Pt.a)({},n,a):{}}function Qu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=t.encoding[e];return Yu(t,n,e,(function(e){return Xu(e,t.config)}))}function Xu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(t){if(Bo(t))return ya(t.value);if($o(t)){var r=ia(t),i=r.format,o=r.formatType;return co({fieldOrDatumDef:t,format:i,formatType:o,expr:n,config:e})}}}function Zu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.encoding,r=t.markDef,i=t.config,a=t.stack,s=n.tooltip;if(Object(o.A)(s))return{tooltip:tc({tooltip:s},a,i,e)};var u=e.reactiveGeom?"datum.datum":"datum";return Yu(t,s,"tooltip",(function(t){var s=Xu(t,i,u);if(s)return s;if(null!==t){var c=_a("tooltip",r,i);return!0===c&&(c={content:"encoding"}),Object(o.H)(c)?{value:c}:Object(o.F)(c)?"encoding"===c.content?tc(n,a,i,e):{signal:u}:void 0}}))}function Ju(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.reactiveGeom,a={},s=i?"datum.datum":"datum",u=[];function c(r,i){var c,l=Oe(i),f=zo(r)?r:Object.assign(Object.assign({},r),{type:t[l].type}),h=Object(o.i)(ea(f,n,{allowDisabling:!1})).join(", ");if(Me(i)){var d="x"===i?"x2":"y2",p=oa(t[d]);if(qe(f.bin)&&p){var g=Go(f,{expr:s}),v=Go(p,{expr:s}),m=ia(f);c=yo(g,v,m.format,m.formatType,n),a[d]=!0}else if(e&&e.fieldChannel===i&&"normalize"===e.offset){var y=ia(f);c=co({fieldOrDatumDef:f,format:y.format,formatType:y.formatType,expr:s,config:n,normalizeStack:!0}).signal}}c=null!==c&&void 0!==c?c:Xu(f,n,s).signal,u.push({channel:i,key:h,value:c})}Na(t,(function(t,e){Lo(t)?c(t,e):Ro(t)&&c(t.condition,e)}));for(var l={},f=0,h=u;f<h.length;f++){var d=h[f],p=d.channel,g=d.key,v=d.value;a[p]||l[g]||(l[Object(o.Z)(g)]=v)}return l}function tc(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.reactiveGeom,o=Ju(t,e,n,{reactiveGeom:i}),a=P(o).map((function(t){var e=t.key,n=t.value;return"".concat(e,": ").concat(n)}));return a.length>0?{signal:"{".concat(a.join(", "),"}")}:void 0}function ec(t){var e=_a("aria",t.markDef,t.config);return!1===e?{}:Object.assign(Object.assign(Object.assign({},e?{aria:e}:{}),function(t){var e=t.mark,n=t.markDef,r=t.config;if(!1===r.aria)return{};var i=_a("ariaRoleDescription",n,r);if(null!=i)return{ariaRoleDescription:{value:i}};return e in Gr?{}:{ariaRoleDescription:{value:e}}}(t)),function(t){var e=t.encoding,n=t.markDef,r=t.config,i=t.stack,o=e.description;if(o)return Yu(t,o,"description",(function(e){return Xu(e,t.config)}));var a=_a("description",n,r);if(null!=a)return{description:ya(a)};if(!1===r.aria)return{};var s=Ju(e,i,r);if(N(s))return;return{description:{signal:P(s).map((function(t){var e=t.key,n=t.value;return"".concat(e,' + ": " + (').concat(n,")")})).join(' + "; " + ')}}}(t))}function nc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.markDef,i=e.encoding,o=e.config,a=n.vgChannel,s=n.defaultRef,u=n.defaultValue;void 0===s&&void 0!==(u=null!==u&&void 0!==u?u:_a(t,r,o,{vgChannel:a,ignoreVgConfig:!0}))&&(s=ya(u));var c=i[t];return Yu(e,c,null!==a&&void 0!==a?a:t,(function(n){return oo({channel:t,channelDef:n,markDef:r,config:o,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:s})}))}function rc(t){var e,n,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{filled:void 0},s=t.markDef,u=t.encoding,c=t.config,l=s.type,f=null!==(e=a.filled)&&void 0!==e?e:_a("filled",s,c),h=A(["bar","point","circle","square","geoshape"],l)?"transparent":void 0,d=null!==(i=null!==(n=_a(!0===f?"color":void 0,s,c,{vgChannel:"fill"}))&&void 0!==n?n:c.mark[!0===f&&"color"])&&void 0!==i?i:h,p=null!==(o=_a(!1===f?"color":void 0,s,c,{vgChannel:"stroke"}))&&void 0!==o?o:c.mark[!1===f&&"color"],g=f?"fill":"stroke",v=Object.assign(Object.assign({},d?{fill:ya(d)}:{}),p?{stroke:ya(p)}:{});return s.color&&(f?s.fill:s.stroke)&&Or(r.droppingColor("property",{fill:"fill"in s,stroke:"stroke"in s})),Object.assign(Object.assign(Object.assign(Object.assign({},v),nc("color",t,{vgChannel:g,defaultValue:f?d:p})),nc("fill",t,{defaultValue:u.fill?d:void 0})),nc("stroke",t,{defaultValue:u.stroke?p:void 0}))}function ic(t,e){var n=e[function(t){switch(t){case Qt:return"xOffset";case Xt:return"yOffset";case Zt:return"x2Offset";case Jt:return"y2Offset";case ee:return"thetaOffset";case te:return"radiusOffset";case ne:return"theta2Offset";case"radius2":return"radius2Offset"}}(t)];if(n)return n}function oc(t,e,n){var r=n.defaultPos,i=n.vgChannel,o=n.isMidPoint,a=e.encoding,s=e.markDef,u=e.config,c=e.stack,l=a[t],f=a[Se(t)],h=e.scaleName(t),d=e.getScaleComponent(t),p=ic(t,s),g=ac({model:e,defaultPos:r,channel:t,scaleName:h,scale:d}),v=!l&&Me(t)&&(a.latitude||a.longitude)?{field:e.getName(t)}:function(t){var e=t.channel,n=t.channelDef,r=t.isMidPoint,i=t.scaleName,o=t.stack,a=t.offset,s=t.markDef,u=t.config;if($o(n)&&o&&e===o.fieldChannel){if(Lo(n)){var c=jo({channel:e,fieldDef:n,isMidPoint:r,markDef:s,stack:o,config:u});if(void 0!==c)return io({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:c,offset:a})}return ro(n,i,{suffix:"end"},{offset:a})}return Ji(t)}({channel:t,channelDef:l,channel2Def:f,markDef:s,config:u,isMidPoint:o,scaleName:h,scale:d,stack:c,offset:p,defaultRef:g});return v?Object(Pt.a)({},i||t,v):void 0}function ac(t){var e=t.model,n=t.defaultPos,r=t.channel,i=t.scaleName,o=t.scale,a=e.markDef,s=e.config;return function(){var t=Oe(r),u=ke(r),c=_a(r,a,s,{vgChannel:u});if(void 0!==c)return ao(r,c);switch(n){case"zeroOrMin":case"zeroOrMax":if(i){var l=o.get("type");if(A([mi,xi,_i],l));else if(o.domainDefinitelyIncludesZero())return{scale:i,value:0}}if("zeroOrMin"===n)return"y"===t?{field:{group:"height"}}:{value:0};switch(t){case"radius":return{signal:"min(".concat(e.width.signal,",").concat(e.height.signal,")/2")};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":var f=e[Ee(r)];return Object.assign(Object.assign({},f),{mult:.5})}}}var sc={left:"x",center:"xc",right:"x2"},uc={top:"y",middle:"yc",bottom:"y2"};function cc(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle";if("radius"===t||"theta"===t)return ke(t);var i="x"===t?"align":"baseline",o=_a(i,e,n);return"x"===t?sc[o||("top"===r?"left":"center")]:uc[o||r]}function lc(t,e,n){var r=n.defaultPos,i=n.defaultPos2;return n.range?fc(t,e,{defaultPos:r,defaultPos2:i}):oc(t,e,{defaultPos:r})}function fc(t,e,n){var r=n.defaultPos,i=n.defaultPos2,o=e.markDef,a=e.config,s=Se(t),u=Ee(t),c=function(t,e,n){var r,i=t.encoding,o=t.mark,a=t.markDef,s=t.stack,u=t.config,c=Oe(n),l=Ee(n),f=ke(n),h=i[c],d=t.scaleName(c),p=t.getScaleComponent(c),g=ic(n in i||n in a?n:c,t.markDef);if(!h&&("x2"===n||"y2"===n)&&(i.latitude||i.longitude))return Object(Pt.a)({},f,{field:t.getName(n)});var v=function(t){var e=t.channel,n=t.channelDef,r=t.channel2Def,i=t.markDef,o=t.config,a=t.scaleName,s=t.scale,u=t.stack,c=t.offset,l=t.defaultRef;if($o(n)&&u&&e.charAt(0)===u.fieldChannel.charAt(0))return ro(n,a,{suffix:"start"},{offset:c});return Ji({channel:e,channelDef:r,scaleName:a,scale:s,stack:u,markDef:i,config:o,offset:c,defaultRef:l})}({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:u,scaleName:d,scale:p,stack:s,offset:g,defaultRef:void 0});if(void 0!==v)return Object(Pt.a)({},f,v);return hc(n,a)||hc(n,(r={},Object(Pt.a)(r,n,ka(n,a,u.style)),Object(Pt.a)(r,l,ka(l,a,u.style)),r))||hc(n,u[o])||hc(n,u.mark)||Object(Pt.a)({},f,ac({model:t,defaultPos:e,channel:n,scaleName:d,scale:p})())}(e,i,s),l=c[u]?cc(t,o,a):ke(t);return Object.assign(Object.assign({},oc(t,e,{defaultPos:r,vgChannel:l})),c)}function hc(t,e){var n=Ee(t),r=ke(t);return void 0!==e[r]?Object(Pt.a)({},r,ao(t,e[r])):void 0!==e[t]?Object(Pt.a)({},r,ao(t,e[t])):e[n]?Object(Pt.a)({},n,ao(t,e[n])):void 0}function dc(t,e,n){var i,a,s,u,c=t.config,l=t.encoding,f=t.markDef,h=t.stack,d=Se(e),p=Ee(e),g=l[e],v=l[d],m=t.getScaleComponent(e),y=m?m.get("type"):void 0,b=t.scaleName(e),w=f.orient,x=null!==(a=null!==(i=l[p])&&void 0!==i?i:l.size)&&void 0!==a?a:_a("size",f,c,{vgChannel:p}),_="bar"===n&&("x"===e?"vertical"===w:"horizontal"===w);if(Lo(g)&&(Ve(g.bin)||qe(g.bin)||g.timeUnit&&!v)&&!x&&!zi(y)){var O=jo({channel:e,fieldDef:g,stack:h,markDef:f,config:c}),k=null===(s=t.component.axes[e])||void 0===s?void 0:s[0];return function(t){var e,n=t.fieldDef,i=t.fieldDef2,o=t.channel,a=t.band,s=t.scaleName,u=t.markDef,c=t.spacing,l=void 0===c?0:c,f=t.axisTranslate,h=t.reverse,d=t.config,p=Se(o),g=ke(o),v=ke(p),m=ic(o,u);if(Ve(n.bin)||n.timeUnit)return e={},Object(Pt.a)(e,v,gc({channel:o,fieldDef:n,scaleName:s,markDef:u,band:(1-a)/2,offset:pc(p,l,h,f,m),config:d})),Object(Pt.a)(e,g,gc({channel:o,fieldDef:n,scaleName:s,markDef:u,band:1-(1-a)/2,offset:pc(o,l,h,f,m),config:d})),e;if(qe(n.bin)){var y,b,w=ro(n,s,{},{offset:pc(p,l,h,f,m)});if(Lo(i))return y={},Object(Pt.a)(y,v,w),Object(Pt.a)(y,g,ro(i,s,{},{offset:pc(o,l,h,f,m)})),y;if(Ge(n.bin)&&n.bin.step)return b={},Object(Pt.a)(b,v,w),Object(Pt.a)(b,g,{signal:'scale("'.concat(s,'", ').concat(Go(n,{expr:"datum"})," + ").concat(n.bin.step,")"),offset:pc(o,l,h,f,m)}),b}return void Or(r.channelRequiredForBinned(p))}({fieldDef:g,fieldDef2:v,channel:e,markDef:f,scaleName:b,band:O,axisTranslate:null!==(u=null===k||void 0===k?void 0:k.get("translate"))&&void 0!==u?u:.5,spacing:Me(e)?_a("binSpacing",f,c):void 0,reverse:m.get("reverse"),config:c})}return($o(g)&&zi(y)||_)&&!v?function(t,e,n,i){var a,s,u=i.markDef,c=i.encoding,l=i.config,f=i.stack,h=u.orient,d=i.scaleName(n),p=i.getScaleComponent(n),g=Ee(n),v=Se(n),m="horizontal"===h&&"y"===n||"vertical"===h&&"x"===n,y=_a(m?"size":g,u,l,{vgChannel:g});(c.size||void 0!==y)&&(m?s=nc("size",i,{vgChannel:g,defaultValue:y}):Or(r.cannotApplySizeToNonOrientedMark(u.type)));var b=null!==(a=$o(e)?jo({channel:n,fieldDef:e,markDef:u,stack:f,config:l}):void 0)&&void 0!==a?a:1;s=s||Object(Pt.a)({},g,function(t,e,n,r,i,a){if(r){var s=r.get("type");if("point"===s||"band"===s){if(void 0!==i[t].discreteBandSize)return{value:i[t].discreteBandSize};if(s===Ei){var u=r.get("range");return Hr(u)&&Object(o.E)(u.step)?{value:u.step-2}:{value:ws-2}}return{scale:n,band:a}}return{value:i[t].continuousBandSize}}var c=ys(i.view,e),l=X(i[t].discreteBandSize,c-2);return void 0!==l?{value:l}:void 0}(t,g,d,p,l,b));var w="band"!==(null===p||void 0===p?void 0:p.get("type"))||!("band"in s[g]),x=cc(n,u,l,w?"middle":"top"),_=ic(n,u),O=Ji({channel:n,channelDef:e,markDef:u,config:l,scaleName:d,scale:p,stack:f,offset:_,defaultRef:ac({model:i,defaultPos:"mid",channel:n,scaleName:d,scale:p}),band:w?.5:(1-b)/2});if(g)return Object.assign(Object(Pt.a)({},x,O),s);var k,S=ke(v),E=s[g],A=_?Object.assign(Object.assign({},E),{offset:_}):E;return k={},Object(Pt.a)(k,x,O),Object(Pt.a)(k,S,Object(o.A)(O)?[O[0],Object.assign(Object.assign({},O[1]),{offset:A})]:Object.assign(Object.assign({},O),{offset:A})),k}(n,g,e,t):fc(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function pc(t,e,n,r,i){if(ce(t))return 0;var o="x"===t||"y2"===t?-e/2:e/2;if(Wr(n)){var a=wa(i);return{signal:"".concat(n.signal," ? ").concat(r-o).concat(a?"-"+a:""," : ").concat(r+o).concat(a?"+"+a:"")}}if(Wr(i)){var s=r+(n?-o:o);return{signal:"".concat(s||"").concat(n?" - ":s?" + ":"").concat(i.signal)}}return i=i||0,r+(n?-i-o:+i+o)}function gc(t){var e=t.channel,n=t.fieldDef,r=t.scaleName,i=t.markDef,o=t.band,a=t.offset,s=t.config;return to({fieldDef:n,channel:e,markDef:i,ref:io({scaleName:r,fieldOrDatumDef:n,band:o,offset:a}),config:s})}var vc=new Set(["aria"]);function mc(t,e){var n="include"===e.color?rc(t):{},r=n.fill,i=void 0===r?void 0:r,o=n.stroke,a=void 0===o?void 0:o;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(t,e){return qr.reduce((function(n,r){return vc.has(r)||void 0===t[r]||"ignore"===e[r]||(n[r]=ya(t[r])),n}),{})}(t.markDef,e)),yc(t,"fill",i)),yc(t,"stroke",a)),nc("opacity",t)),nc("fillOpacity",t)),nc("strokeOpacity",t)),nc("strokeWidth",t)),nc("strokeDash",t)),Zu(t)),Qu(t,"href")),ec(t))}function yc(t,e,n){var r=t.config,i=t.mark;if("hide"===_a("invalid",t.markDef,r)&&n&&!At(i)){var a=function(t,e){var n=e.invalid,r=void 0!==n&&n,i=e.channels.reduce((function(e,n){var r=t.getScaleComponent(n);if(r){var i=r.get("type"),o=t.vgField(n,{expr:"datum"});o&&Bi(i)&&(e[o]=!0)}return e}),{}),o=I(i);if(o.length>0){var a=r?"||":"&&";return o.map((function(t){return no(t,r)})).join(" ".concat(a," "))}return}(t,{invalid:!0,channels:Pe});if(a)return Object(Pt.a)({},e,[{test:a,value:null}].concat(Object(s.a)(Object(o.i)(n))))}return n?Object(Pt.a)({},e,n):{}}function bc(t){var e=t.config;if(_a("invalid",t.markDef,e)){var n=function(t,e){var n=e.invalid,r=void 0!==n&&n,i=e.channels.reduce((function(e,n){var r=t.getScaleComponent(n);if(r){var i=r.get("type"),o=t.vgField(n,{expr:"datum"});o&&Bi(i)&&(e[o]=!0)}return e}),{}),o=I(i);if(o.length>0){var a=r?"||":"&&";return o.map((function(t){return no(t,r)})).join(" ".concat(a," "))}return}(t,{channels:Te});if(n)return{defined:{signal:n}}}return{}}function wc(t,e){if(void 0!==e)return Object(Pt.a)({},t,ya(e))}var xc={has:function(t){return"interval"!==t.type&&t.nearest},parse:function(t,e){if(e.events){var n,r=Object(a.a)(e.events);try{for(r.s();!(n=r.n()).done;){n.value.markname=t.getName("voronoi")}}catch(i){r.e(i)}finally{r.f()}}},marks:function(t,e,n){var i=e.project.hasChannel,o=i.x,a=i.y,s=t.mark;if(At(s))return Or(r.nearestNotSupportForContinuous(s)),n;var u={name:t.getName("voronoi"),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Zu(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:o||!a?"datum.datum.x || 0":"0"},y:{expr:a||!o?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},c=0,l=!1;return n.forEach((function(e,n){var r,i=null!==(r=e.name)&&void 0!==r?r:"";i===t.component.mark[0].name?c=n:i.indexOf("voronoi")>=0&&(l=!0)})),l||n.splice(c+1,0,u),n}},_c=function(){function t(e,n){Object(lt.a)(this,t),this.debugName=n,this._children=[],this._parent=null,e&&(this.parent=e)}return Object(ft.a)(t,[{key:"clone",value:function(){throw new Error("Cannot clone node")}},{key:"numChildren",value:function(){return this._children.length}},{key:"addChild",value:function(t,e){this._children.indexOf(t)>-1?console.warn("Attempt to add the same child twice."):void 0!==e?this._children.splice(e,0,t):this._children.push(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return this._children.splice(e,1),e}},{key:"remove",value:function(){var t,e=this._parent.removeChild(this),n=Object(a.a)(this._children);try{for(n.s();!(t=n.n()).done;){var r=t.value;r._parent=this._parent,this._parent.addChild(r,e++)}}catch(i){n.e(i)}finally{n.f()}}},{key:"insertAsParentOf",value:function(t){var e=t.parent;e.removeChild(this),this.parent=e,t.parent=this}},{key:"swapWithParent",value:function(){var t,e=this._parent,n=e.parent,r=Object(a.a)(this._children);try{for(r.s();!(t=r.n()).done;){t.value.parent=e}}catch(i){r.e(i)}finally{r.f()}this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=n,e.parent=this}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t,t&&t.addChild(this)}},{key:"children",get:function(){return this._children}}]),t}(),Oc=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r,i,o){var a;return Object(lt.a)(this,n),(a=e.call(this,t,r)).type=i,a.refCounts=o,a._source=a._name=r,a.refCounts&&!(a._name in a.refCounts)&&(a.refCounts[a._name]=0),a}return Object(ft.a)(n,[{key:"clone",value:function(){var t=new this.constructor;return t.debugName="clone_"+this.debugName,t._source=this._source,t._name="clone_"+this._name,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return void 0===this._hash&&(this._hash="Output ".concat(J())),this._hash}},{key:"getSource",value:function(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function(){return!!this.refCounts[this._name]}},{key:"setSource",value:function(t){this._source=t}}]),n}(_c),kc=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).formula=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.formula))}},{key:"merge",value:function(t){for(var e in this.formula=Object.assign({},this.formula),t.formula)this.formula[e]&&!t.formula[e].band||(this.formula[e]=t.formula[e]);var n,r=Object(a.a)(t.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.removeChild(i),i.parent=this}}catch(o){r.e(o)}finally{r.f()}t.remove()}},{key:"producedFields",value:function(){return new Set(F(this.formula).map((function(t){return t.as})))}},{key:"dependentFields",value:function(){return new Set(F(this.formula).map((function(t){return t.field})))}},{key:"hash",value:function(){return"TimeUnit ".concat(S(this.formula))}},{key:"assemble",value:function(){var t,e=[],n=Object(a.a)(F(this.formula));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.field,o=r.as,s=Br(r.timeUnit),c=s.unit,l=s.utc,f=u(s,["unit","utc"]);e.push(Object.assign(Object.assign(Object.assign(Object.assign({field:G(i),type:"timeunit"},c?{units:Fr(c)}:{}),l?{timezone:"utc"}:{}),f),{as:[o,"".concat(o,"_end")]}))}}catch(h){n.e(h)}finally{n.f()}return e}}],[{key:"makeFromEncoding",value:function(t,e){var r=e.reduceFieldDef((function(t,n,r){var i=n.field,o=n.timeUnit,a=Uh(e)?e.encoding[Se(r)]:void 0,s=Uh(e)&&To(r,n,a,e.stack,e.markDef,e.config);if(o){var u=Go(n,{forAs:!0});t[S({as:u,field:i,timeUnit:o})]=Object.assign({as:u,field:i,timeUnit:o},s?{band:!0}:{})}return t}),{});return N(r)?null:new n(t,r)}},{key:"makeFromTransform",value:function(t,e){var r=Object.assign({},e),i=r.timeUnit,o=u(r,["timeUnit"]),a=Br(i),s=Object.assign(Object.assign({},o),{timeUnit:a});return new n(t,Object(Pt.a)({},S(s),s))}}]),n}(_c),Sc=function t(){Object(lt.a)(this,t);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.items=n,this.hasChannel={},this.hasField={}},Ec={has:function(t){return"single"===t.type&&"global"===t.resolve&&t.bind&&"scales"!==t.bind&&!cs(t.bind)},parse:function(t,e,n,r){r.on||delete e.events,r.clear||delete e.clear},topLevelSignals:function(t,e,n){var r=e.name,i=e.project,a=e.bind,s=e.init&&e.init[0],u=xc.has(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((function(t,i){var c,l,f=z("".concat(r,"_").concat(t.field));n.filter((function(t){return t.name===f})).length||n.unshift(Object.assign(Object.assign({name:f},s?{init:zc(s[i])}:{value:null}),{on:e.events?[{events:e.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(u,"[").concat(Object(o.Z)(t.field),"] : null")}]:[],bind:null!==(l=null!==(c=a[t.field])&&void 0!==c?c:a[t.channel])&&void 0!==l?l:a}))})),n},signals:function(t,e,n){var r=e.name,i=e.project,o=n.filter((function(t){return t.name===r+Qc}))[0],a=r+"_tuple_fields",s=i.items.map((function(t){return z("".concat(r,"_").concat(t.field))})),u=s.map((function(t){return"".concat(t," !== null")})).join(" && ");return s.length&&(o.update="".concat(u," ? {fields: ").concat(a,", values: [").concat(s.join(", "),"]} : null")),delete o.value,delete o.on,n}},Ac={has:function(t){return"multi"===t.type&&!!t.toggle},signals:function(t,e,n){return n.concat({name:e.name+"_toggle",value:!1,on:[{events:e.events,update:e.toggle}]})},modifyExpr:function(t,e){var n=e.name+Qc,r=e.name+"_toggle";return"".concat(r," ? null : ").concat(n,", ")+("global"===e.resolve?"".concat(r," ? null : true, "):"".concat(r," ? null : {unit: ").concat(nl(t),"}, "))+"".concat(r," ? ").concat(n," : null")}},Cc={has:function(t){return void 0!==t.clear&&!1!==t.clear},parse:function(t,e,n){n.clear&&(e.clear=Object(o.H)(n.clear)?Object(Ku.a)(n.clear,"scope"):n.clear)},topLevelSignals:function(t,e,n){if(Ec.has(e)){var r,i=Object(a.a)(e.project.items);try{var o=function(){var t=r.value,i=n.findIndex((function(n){return n.name===z("".concat(e.name,"_").concat(t.field))}));-1!==i&&n[i].on.push({events:e.clear,update:"null"})};for(i.s();!(r=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}return n},signals:function(t,e,n){function r(t,r){-1!==t&&n[t].on&&n[t].on.push({events:e.clear,update:r})}if("interval"===e.type){var i,o=Object(a.a)(e.project.items);try{var s=function(){var t=i.value,e=n.findIndex((function(e){return e.name===t.signals.visual}));(r(e,"[0, 0]"),-1===e)&&r(n.findIndex((function(e){return e.name===t.signals.data})),"null")};for(o.s();!(i=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}}else{var u=n.findIndex((function(t){return t.name===e.name+Qc}));r(u,"null"),Ac.has(e)&&r(u=n.findIndex((function(t){return t.name===e.name+"_toggle"})),"false")}return n}},jc={has:function(t){return"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind},parse:function(t,e){var n,i=e.scales=[],o=Object(a.a)(e.project.items);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=s.channel;if($e(u)){var c=t.getScaleComponent(u),l=c?c.get("type"):void 0;if(c&&Bi(l)){var f={selection:e.name,field:s.field};c.set("selectionExtent",f,!0),i.push(s)}else Or(r.SCALE_BINDINGS_CONTINUOUS)}}}catch(h){o.e(h)}finally{o.f()}},topLevelSignals:function(t,e,n){var r=e.scales.filter((function(t){return 0===n.filter((function(e){return e.name===t.signals.data})).length}));if(!t.parent||Mc(t)||0===r.length)return n;var i=n.filter((function(t){return t.name===e.name}))[0],s=i.update;if(s.indexOf(Zc)>=0)i.update="{".concat(r.map((function(t){return"".concat(Object(o.Z)(t.field),": ").concat(t.signals.data)})).join(", "),"}");else{var u,c=Object(a.a)(r);try{for(c.s();!(u=c.n()).done;){var l=u.value,f="".concat(Object(o.Z)(l.field),": ").concat(l.signals.data);s.indexOf(f)<0&&(s="".concat(s.substring(0,s.length-1),", ").concat(f,"}"))}}catch(h){c.e(h)}finally{c.f()}i.update=s}return n.concat(r.map((function(t){return{name:t.signals.data}})))},signals:function(t,e,n){if(t.parent&&!Mc(t)){var r,i=Object(a.a)(e.scales);try{var o=function(){var t=r.value,e=n.filter((function(e){return e.name===t.signals.data}))[0];e.push="outer",delete e.value,delete e.update};for(i.s();!(r=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}return n}};function Tc(t,e){var n=Object(o.Z)(t.scaleName(e));return"domain(".concat(n,")")}function Mc(t){var e;return t.parent&&Vh(t.parent)&&(null!==(e=!t.parent.parent)&&void 0!==e?e:Mc(t.parent.parent))}var Rc={has:function(t){var e="global"===t.resolve&&t.bind&&cs(t.bind),n=1===t.project.items.length&&"_vgsid_"!==t.project.items[0].field;return e&&!n&&Or(r.LEGEND_BINDINGS_PROJECT_LENGTH),e&&n},parse:function(t,e,n,r){var i;if(r.on||delete e.events,r.clear||delete e.clear,r.on||r.clear){var s,u='event.item && indexof(event.item.mark.role, "legend") < 0',c=Object(a.a)(e.events);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.filter=Object(o.i)(null!==(i=l.filter)&&void 0!==i?i:[]),l.filter.indexOf(u)<0&&l.filter.push(u)}}catch(d){c.e(d)}finally{c.f()}}var f=ls(e.bind)?e.bind.legend:"click",h=Object(o.H)(f)?Object(Ku.a)(f,"view"):Object(o.i)(f);e.bind={legend:{merge:h}}},topLevelSignals:function(t,e,n){var r,i=e.name,o=ls(e.bind)&&e.bind.legend,s=function(t){return function(e){var n=x(e);return n.markname=t,n}},u=Object(a.a)(e.project.items);try{var c=function(){var t=r.value;if(!t.hasLegend)return"continue";var a="".concat(z(t.field),"_legend"),u="".concat(i,"_").concat(a);if(0===n.filter((function(t){return t.name===u})).length){var c=o.merge.map(s("".concat(a,"_symbols"))).concat(o.merge.map(s("".concat(a,"_labels")))).concat(o.merge.map(s("".concat(a,"_entries"))));n.unshift(Object.assign(Object.assign({name:u},e.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:o.merge,update:"!event.item || !datum ? null : ".concat(u),force:!0}]}))}};for(u.s();!(r=u.n()).done;)c()}catch(l){u.e(l)}finally{u.f()}return n},signals:function(t,e,n){var r=e.name,i=e.project,o=n.find((function(t){return t.name===r+Qc})),a=r+"_tuple_fields",s=i.items.filter((function(t){return t.hasLegend})).map((function(t){return z("".concat(r,"_").concat(z(t.field),"_legend"))})),u=s.map((function(t){return"".concat(t," !== null")})).join(" && "),c="".concat(u," ? {fields: ").concat(a,", values: [").concat(s.join(", "),"]} : null");e.events&&s.length>0?o.on.push({events:s.map((function(t){return{signal:t}})),update:c}):s.length>0&&(o.update=c,delete o.value,delete o.on);var l=n.find((function(t){return t.name===r+"_toggle"})),f=ls(e.bind)&&e.bind.legend;return l&&(e.events?l.on.push(Object.assign(Object.assign({},l.on[0]),{events:f})):l.on[0].events=f),n}};var Dc="_translate_delta",Lc={has:function(t){return"interval"===t.type&&t.translate},signals:function(t,e,n){var r=e.name,i=jc.has(e),o=r+"_translate_anchor",a=e.project.hasChannel,s=a.x,u=a.y,c=Object(Ku.a)(e.translate,"scope");return i||(c=c.map((function(t){return t.between[0].markname=r+Wc,t}))),n.push({name:o,value:{},on:[{events:c.map((function(t){return t.between[0]})),update:"{x: x(unit), y: y(unit)"+(void 0!==s?", extent_x: "+(i?Tc(t,Qt):"slice(".concat(s.signals.visual,")")):"")+(void 0!==u?", extent_y: "+(i?Tc(t,Xt):"slice(".concat(u.signals.visual,")")):"")+"}"}]},{name:r+Dc,value:{},on:[{events:c,update:"{x: ".concat(o,".x - x(unit), y: ").concat(o,".y - y(unit)}")}]}),void 0!==s&&Nc(t,e,s,"width",n),void 0!==u&&Nc(t,e,u,"height",n),n}};function Nc(t,e,n,r,i){var o,a=e.name,s=a+"_translate_anchor",u=a+Dc,c=n.channel,l=jc.has(e),f=i.filter((function(t){return t.name===n.signals[l?"data":"visual"]}))[0],h=t.getSizeSignalRef(r).signal,d=t.getScaleComponent(c),p=d.get("type"),g=l&&c===Qt?"-":"",v="".concat(s,".extent_").concat(c),m="".concat(g).concat(u,".").concat(c," / ")+(l?"".concat(h):"span(".concat(v,")")),y="".concat(l?"log"===p?"panLog":"pow"===p?"panPow":"panLinear":"panLinear","(").concat(v,", ").concat(m)+(l&&"pow"===p?", ".concat(null!==(o=d.get("exponent"))&&void 0!==o?o:1):"")+")";f.on.push({events:{signal:u},update:l?y:"clampRange(".concat(y,", 0, ").concat(h,")")})}var Ic={has:function(t){return"interval"===t.type&&t.zoom},signals:function(t,e,n){var r=e.name,i=jc.has(e),a=r+"_zoom_delta",s=e.project.hasChannel,u=s.x,c=s.y,l=Object(o.Z)(t.scaleName(Qt)),f=Object(o.Z)(t.scaleName(Xt)),h=Object(Ku.a)(e.zoom,"scope");return i||(h=h.map((function(t){return t.markname=r+Wc,t}))),n.push({name:r+"_zoom_anchor",on:[{events:h,update:i?"{"+[l?"x: invert(".concat(l,", x(unit))"):"",f?"y: invert(".concat(f,", y(unit))"):""].filter((function(t){return!!t})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:h,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==u&&Fc(t,e,u,"width",n),void 0!==c&&Fc(t,e,c,"height",n),n}};function Fc(t,e,n,r,i){var o,a=e.name,s=n.channel,u=jc.has(e),c=i.filter((function(t){return t.name===n.signals[u?"data":"visual"]}))[0],l=t.getSizeSignalRef(r).signal,f=t.getScaleComponent(s),h=f.get("type"),d=u?Tc(t,s):c.name,p=a+"_zoom_delta",g="".concat(a).concat("_zoom_anchor",".").concat(s),v="".concat(u?"log"===h?"zoomLog":"pow"===h?"zoomPow":"zoomLinear":"zoomLinear","(").concat(d,", ").concat(g,", ").concat(p)+(u&&"pow"===h?", ".concat(null!==(o=f.get("exponent"))&&void 0!==o?o:1):"")+")";c.on.push({events:{signal:p},update:u?v:"clampRange(".concat(v,", 0, ").concat(l,")")})}var Pc=[{has:function(){return!0},parse:function(t,e,n){var i,s,u,c=e.name,l=null!==(i=e.project)&&void 0!==i?i:e.project=new Sc,f={},h={},d=new Set,p=function(t,e){for(var n="visual"===e?t.channel:t.field,r=z("".concat(c,"_").concat(n)),i=1;d.has(r);i++)r=z("".concat(c,"_").concat(n,"_").concat(i));return d.add(r),Object(Pt.a)({},e,r)};if(!n.fields&&!n.encodings){var g=t.config.selection[n.type];if(n.init){var v,m=Object(a.a)(Object(o.i)(n.init));try{for(m.s();!(v=m.n()).done;){var y,b=v.value,w=Object(a.a)(I(b));try{for(w.s();!(y=w.n()).done;){var x=y.value;be[x]?(n.encodings||(n.encodings=[])).push(x):"interval"===n.type?(Or('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=g.encodings):(n.fields||(n.fields=[])).push(x)}}catch($){w.e($)}finally{w.f()}}}catch($){m.e($)}finally{m.f()}}else n.encodings=g.encodings,n.fields=g.fields}var _,O=Object(a.a)(null!==(s=n.fields)&&void 0!==s?s:[]);try{for(O.s();!(_=O.n()).done;){var k=_.value,E={type:"E",field:k};E.signals=Object.assign({},p(E,"data")),l.items.push(E),l.hasField[k]=E}}catch($){O.e($)}finally{O.f()}var A,C=Object(a.a)(null!==(u=n.encodings)&&void 0!==u?u:[]);try{for(C.s();!(A=C.n()).done;){var j=A.value,T=t.fieldDef(j);if(T){var M=T.field;if(T.aggregate){Or(r.cannotProjectAggregate(j,T.aggregate));continue}if(!M){Or(r.cannotProjectOnChannelWithoutField(j));continue}if(T.timeUnit){M=t.vgField(j);var R={timeUnit:T.timeUnit,as:M,field:T.field};h[S(R)]=R}if(!f[M]){var D="E";if("interval"===e.type)Bi(t.getScaleComponent(j).get("type"))&&(D="R");else T.bin&&(D="R-RE");var L={field:M,channel:j,type:D};L.signals=Object.assign(Object.assign({},p(L,"data")),p(L,"visual")),l.items.push(f[M]=L),l.hasField[M]=l.hasChannel[j]=f[M]}}else Or(r.cannotProjectOnChannelWithoutField(j))}}catch($){C.e($)}finally{C.f()}if(n.init){var F=function(t){return l.items.map((function(e){return void 0!==t[e.channel]?t[e.channel]:t[e.field]}))};if("interval"===n.type)e.init=F(n.init);else{var P=Object(o.i)(n.init);e.init=P.map(F)}}N(h)||(l.timeUnit=new kc(null,h))},signals:function(t,e,n){var r=e.name+"_tuple_fields";return n.filter((function(t){return t.name===r})).length>0?n:n.concat({name:r,value:e.project.items.map((function(t){t.signals,t.hasLegend;var e=u(t,["signals","hasLegend"]);return e.field=G(e.field),e}))})}},Ac,jc,Rc,Lc,Ic,Ec,xc,Cc];function $c(t,e){var n,r=Object(a.a)(Pc);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.has(t)&&e(i)}}catch(o){r.e(o)}finally{r.f()}}function zc(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.x;if(Object(o.A)(t)){var r=t.map((function(t){return zc(t,e,n)}));return e?"[".concat(r.join(", "),"]"):r}return kr(t)?n(e?Tr(t):Rr(t)):e?n(JSON.stringify(t)):t}function Bc(t,e){return tl(t,(function(n,r){e=r.marks?r.marks(t,n,e):e,$c(n,(function(r){r.marks&&(e=r.marks(t,n,e))}))})),e}function Uc(t){return t.map((function(t){return t.on&&!t.on.length&&delete t.on,t}))}var Wc="_brush",Hc={signals:function(t,e){var n=e.name,r=n+"_tuple_fields",i=jc.has(e),a=[],u=[],c=[];if(e.translate&&!i){var l="!event.item || event.item.mark.name !== ".concat(Object(o.Z)(n+Wc));Vc(e,(function(t,e){var n,r=Object(o.i)(null!==(n=e.between[0].filter)&&void 0!==n?n:e.between[0].filter=[]);return r.indexOf(l)<0&&r.push(l),t}))}e.project.items.forEach((function(n,r){var i=n.channel;if(i===Qt||i===Xt){var l=e.init?e.init[r]:null,f=function(t,e,n,r){var i=n.channel,a=n.signals.visual,u=n.signals.data,c=jc.has(e),l=Object(o.Z)(t.scaleName(i)),f=t.getScaleComponent(i),h=f?f.get("type"):void 0,d=function(t){return"scale(".concat(l,", ").concat(t,")")},p=t.getSizeSignalRef(i===Qt?"width":"height").signal,g="".concat(i,"(unit)"),v=Vc(e,(function(t,e){return[].concat(Object(s.a)(t),[{events:e.between[0],update:"[".concat(g,", ").concat(g,"]")},{events:e,update:"[".concat(a,"[0], clamp(").concat(g,", 0, ").concat(p,")]")}])}));return v.push({events:{signal:e.name+"_scale_trigger"},update:Bi(h)?"[".concat(d("".concat(u,"[0]")),", ").concat(d("".concat(u,"[1]")),"]"):"[0, 0]"}),c?[{name:u,on:[]}]:[Object.assign(Object.assign({name:a},r?{init:zc(r,!0,d)}:{value:[]}),{on:v}),Object.assign(Object.assign({name:u},r?{init:zc(r)}:{}),{on:[{events:{signal:a},update:"".concat(a,"[0] === ").concat(a,"[1] ? null : invert(").concat(l,", ").concat(a,")")}]})]}(t,e,n,l),h=n.signals.data,d=n.signals.visual,p=Object(o.Z)(t.scaleName(i)),g=Bi(t.getScaleComponent(i).get("type"))?"+":"";a.push.apply(a,Object(s.a)(f)),u.push(h),c.push({scaleName:t.scaleName(i),expr:"(!isArray(".concat(h,") || ")+"(".concat(g,"invert(").concat(p,", ").concat(d,")[0] === ").concat(g).concat(h,"[0] && ")+"".concat(g,"invert(").concat(p,", ").concat(d,")[1] === ").concat(g).concat(h,"[1]))")})}else Or("Interval selections only support x and y encoding channels.")})),i||a.push({name:n+"_scale_trigger",value:{},on:[{events:c.map((function(t){return{scale:t.scaleName}})),update:c.map((function(t){return t.expr})).join(" && ")+" ? ".concat(n+"_scale_trigger"," : {}")}]});var f=e.init,h="unit: ".concat(nl(t),", fields: ").concat(r,", values");return a.concat(Object.assign(Object.assign({name:n+Qc},f?{init:"{".concat(h,": ").concat(zc(f),"}")}:{}),{on:[{events:[{signal:u.join(" || ")}],update:u.join(" && ")+" ? {".concat(h,": [").concat(u,"]} : null")}]}))},modifyExpr:function(t,e){return e.name+Qc+", "+("global"===e.resolve?"true":"{unit: ".concat(nl(t),"}"))},marks:function(t,e,n){var r=e.name,i=e.project.hasChannel,c=i.x,l=i.y,f=c&&c.signals.visual,h=l&&l.signals.visual,d="data(".concat(Object(o.Z)(e.name+Yc),")");if(jc.has(e))return n;var p={x:void 0!==c?{signal:"".concat(f,"[0]")}:{value:0},y:void 0!==l?{signal:"".concat(h,"[0]")}:{value:0},x2:void 0!==c?{signal:"".concat(f,"[1]")}:{field:{group:"width"}},y2:void 0!==l?{signal:"".concat(h,"[1]")}:{field:{group:"height"}}};if("global"===e.resolve){var g,v=Object(a.a)(I(p));try{for(v.s();!(g=v.n()).done;){var m=g.value;p[m]=[Object.assign({test:"".concat(d,".length && ").concat(d,"[0].unit === ").concat(nl(t))},p[m]),{value:0}]}}catch(k){v.e(k)}finally{v.f()}}var y=e.mark,b=y.fill,w=y.fillOpacity,x=y.cursor,_=u(y,["fill","fillOpacity","cursor"]),O=I(_).reduce((function(t,e){return t[e]=[{test:[void 0!==c&&"".concat(f,"[0] !== ").concat(f,"[1]"),void 0!==l&&"".concat(h,"[0] !== ").concat(h,"[1]")].filter((function(t){return t})).join(" && "),value:_[e]},{value:null}],t}),{});return[{name:r+Wc+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:b},fillOpacity:{value:w}},update:p}}].concat(Object(s.a)(n),[{name:r+Wc,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},x?{cursor:{value:x}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},p),O)}}])}};function Vc(t,e){return t.events.reduce((function(t,n){return n.between?e(t,n):(Or("".concat(n," is not an ordered event stream for interval selections.")),t)}),[])}function qc(t,e){var n=e.name,r=n+"_tuple_fields",i=e.project,a="(item().isVoronoi ? datum.datum : datum)",s=i.items.map((function(e){var n=t.fieldDef(e.channel);return n&&n.bin?"[".concat(a,"[").concat(Object(o.Z)(t.vgField(e.channel,{})),"], ")+"".concat(a,"[").concat(Object(o.Z)(t.vgField(e.channel,{binSuffix:"end"})),"]]"):"".concat(a,"[").concat(Object(o.Z)(e.field),"]")})).join(", "),u="unit: ".concat(nl(t),", fields: ").concat(r,", values"),c=e.events;return[{name:n+Qc,on:c?[{events:c,update:"datum && item().mark.marktype !== 'group' ? {".concat(u,": [").concat(s,"]} : null"),force:!0}]:[]}]}var Gc={signals:qc,modifyExpr:function(t,e){return e.name+Qc+", "+("global"===e.resolve?"null":"{unit: ".concat(nl(t),"}"))}},Kc={signals:qc,modifyExpr:function(t,e){return e.name+Qc+", "+("global"===e.resolve?"true":"{unit: ".concat(nl(t),"}"))}},Yc="_store",Qc="_tuple",Xc="_modify",Zc="vlSelectionResolve",Jc={single:Kc,multi:Gc,interval:Hc};function tl(t,e){var n=t.component.selection;if(n){var r,i=Object(a.a)(F(n));try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!0===e(o,Jc[o.type]))break}}catch(s){i.e(s)}finally{i.f()}}}function el(t){for(var e=t.parent;e&&!Wh(e);)e=e.parent;return e}function nl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{escape:!0},n=e.escape,r=n?Object(o.Z)(t.name):t.name,i=el(t);if(i){var s,u=i.facet,c=Object(a.a)(ge);try{for(c.s();!(s=c.n()).done;){var l=s.value;u[l]&&(r+=" + '__facet_".concat(l,"_' + (facet[").concat(Object(o.Z)(i.vgField(l)),"])"))}}catch(f){c.e(f)}finally{c.f()}}return r}function rl(t){var e=!1;return tl(t,(function(t){e=e||t.project.items.some((function(t){return"_vgsid_"===t.field}))})),e}var il=n(23);function ol(t){var e=Object(il.f)(t),n=new Set;return e.visit((function(t){"MemberExpression"===t.type&&function t(e){return"MemberExpression"===e.object.type?t(e.object):"datum"===e.object.name}(t)&&n.add(function t(e){var n=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(n.push.apply(n,Object(s.a)(t(e.object))),n.push.apply(n,Object(s.a)(t(e.property)))),n)}(t).slice(1).join("."))})),n}var al=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r,i){var o;return Object(lt.a)(this,n),(o=e.call(this,t)).model=r,o.filter=i,o.expr=cl(o.model,o.filter,Object(pu.a)(o)),o._dependentFields=ol(o.expr),o}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,this.model,x(this.filter))}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"producedFields",value:function(){return new Set}},{key:"assemble",value:function(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function(){return"Filter ".concat(this.expr)}}]),n}(_c);function sl(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"datum",i=[];function a(e){var a=z(e),s=t.getSelectionComponent(a,e),u=Object(o.Z)(a+Yc);if(s.project.timeUnit){var c=null!==n&&void 0!==n?n:t.component.data.raw,l=s.project.timeUnit.clone();c.parent?l.insertAsParentOf(c):c.parent=l}return"none"!==s.empty&&i.push(u),"vlSelectionTest(".concat(u,", ").concat(r)+("global"===s.resolve?")":", ".concat(Object(o.Z)(s.resolve),")"))}var s=B(e,a);return(i.length?"!("+i.map((function(t){return"length(data(".concat(t,"))")})).join(" || ")+") || ":"")+"(".concat(s,")")}function ul(t,e){var n=e.encoding,r=e.field;if(n||r){if(n&&!r){var i=t.project.items.filter((function(t){return t.channel===n}));!i.length||i.length>1?(r=t.project.items[0].field,Or((i.length?"Multiple ":"No ")+"matching ".concat(Object(o.Z)(n)," encoding found for selection ").concat(Object(o.Z)(e.selection),". ")+'Using "field": '.concat(Object(o.Z)(r),"."))):r=i[0].field}}else r=t.project.items[0].field,t.project.items.length>1&&Or('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(Object(o.Z)(r),"."));return"".concat(t.name,"[").concat(Object(o.Z)(r),"]")}function cl(t,e,n){return B(e,(function(e){return Object(o.H)(e)?e:function(t){return null===t||void 0===t?void 0:t.selection}(e)?sl(t,e.selection,n):ai(e)}))}function ll(t,e){if(t)return Object(o.A)(t)&&!ma(t)?t.map((function(t){return ra(t,e)})).join(", "):t}function fl(t,e,n,r){var i,o,a;t.encode=null!==(i=t.encode)&&void 0!==i?i:{},t.encode[e]=null!==(o=t.encode[e])&&void 0!==o?o:{},t.encode[e].update=null!==(a=t.encode[e].update)&&void 0!==a?a:{},t.encode[e].update[n]=r}function hl(t,e,n){var r,i,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},l=t.combine(),f=l.disable,h=l.orient,d=l.scale,p=l.labelExpr,g=l.title,v=l.zindex,m=u(l,["disable","orient","scale","labelExpr","title","zindex"]);if(!f){for(var y in m){var b=at[y],w=m[y];if(b&&b!==e&&"both"!==b)delete m[y];else if(it(w)){var x=w.condition,_=u(w,["condition"]),O=Object(o.i)(x),k=rt[y];if(k){var S=k.vgProp,E=k.part,A=[].concat(Object(s.a)(O.map((function(t){var e=t.test,n=u(t,["test"]);return Object.assign({test:cl(null,e)},n)}))),[_]);fl(m,E,S,A),delete m[y]}else if(null===k){var C={signal:O.map((function(t){var e=t.test,n=u(t,["test"]);return"".concat(cl(null,e)," ? ").concat(ba(n)," : ")})).join("")+ba(_)};m[y]=C}}else if(Wr(w)){var j=rt[y];if(j){var T=j.vgProp,M=j.part;fl(m,M,T,w),delete m[y]}}}if("grid"===e){if(!m.grid)return;if(m.encode){var R=m.encode.grid;m.encode=Object.assign({},R?{grid:R}:{}),N(m.encode)&&delete m.encode}return Object.assign(Object.assign({scale:d,orient:h},m),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:X(v,0)})}if(c.header||!t.mainExtracted){if(void 0!==p){var D=p;(null===(i=null===(r=m.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&Wr(m.encode.labels.update.text)&&(D=K(p,"datum.label",m.encode.labels.update.text.signal)),fl(m,"labels","text",{signal:D})}if(null===m.labelAlign&&delete m.labelAlign,m.encode){var L,I=Object(a.a)(ot);try{for(I.s();!(L=I.n()).done;){var F=L.value;t.hasAxisPart(F)||delete m.encode[F]}}catch($){I.e($)}finally{I.f()}N(m.encode)&&delete m.encode}var P=ll(g,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:d,orient:h,grid:!1},P?{title:P}:{}),m),!1===n.aria?{aria:!1}:{}),{zindex:X(v,0)})}}}function dl(t){var e,n=t.component.axes,r=[],i=Object(a.a)(Te);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(n[o]){var s,u=Object(a.a)(n[o]);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(!c.get("disable")&&!c.get("gridScale")){var l="x"===o?"height":"width",f=t.getSizeSignalRef(l).signal;l!==f&&r.push({name:l,update:f})}}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return r}var pl={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},gl={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},vl=I(pl),ml=I(gl);function yl(t,e,n,r){return Object.assign.apply(null,[{}].concat(Object(s.a)(t.map((function(t){if("axisOrient"===t){var i,o="x"===n?"bottom":"left",u=e["x"===n?"axisBottom":"axisLeft"]||{},c=e["x"===n?"axisTop":"axisRight"]||{},l=new Set([].concat(Object(s.a)(I(u)),Object(s.a)(I(c)))),f={},h=Object(a.a)(l.values());try{for(h.s();!(i=h.n()).done;){var d=i.value;f[d]={signal:"".concat(r.signal,' === "').concat(o,'" ? ').concat(wa(u[d])," : ").concat(wa(c[d]))}}}catch(p){h.e(p)}finally{h.f()}return f}return e[t]})))))}function bl(t,e,n,r){var i="band"===e?["axisDiscrete","axisBand"]:"point"===e?["axisDiscrete","axisPoint"]:e in Ni?["axisQuantitative"]:"time"===e||"utc"===e?["axisTemporal"]:[],o="x"===t?"axisX":"axisY",a=Wr(n)?"axisOrient":"axis"+W(n),u=[].concat(i,Object(s.a)(i.map((function(t){return o+t.substr(4)})))),c=["axis",a,o];return{vlOnlyAxisConfig:yl(u,r,t,n),vgAxisConfig:yl(c,r,t,n),axisConfigStyle:wl([].concat(c,Object(s.a)(u)),r)}}function wl(t,e){var n,r,i=[{}],s=Object(a.a)(t);try{for(s.s();!(r=s.n()).done;){var u=null===(n=e[r.value])||void 0===n?void 0:n.style;if(u){u=Object(o.i)(u);var c,l=Object(a.a)(u);try{for(l.s();!(c=l.n()).done;){var f=c.value;i.push(e.style[f])}}catch(h){l.e(h)}finally{l.f()}}}}catch(h){s.e(h)}finally{s.f()}return Object.assign.apply(null,i)}function xl(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=Sa(t,n,e.style);if(void 0!==o)return{configFrom:"style",configValue:o};for(var a=0,s=["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"];a<s.length;a++){var u=s[a];if(void 0!==(null===(r=i[u])||void 0===r?void 0:r[t]))return{configFrom:u,configValue:i[u][t]}}return{}}var _l={scale:function(t){var e=t.model,n=t.channel;return e.scaleName(n)},format:function(t){var e=t.fieldOrDatumDef,n=t.config,r=t.axis,i=r.format,o=r.formatType;return ho(e,e.type,i,o,n,!0)},formatType:function(t){var e=t.axis,n=t.fieldOrDatumDef,r=t.scaleType,i=e.formatType;return po(i,n,r)},grid:function(t){var e,n=t.fieldOrDatumDef,r=t.axis,i=t.scaleType;return(!Lo(n)||!qe(n.bin))&&(null!==(e=r.grid)&&void 0!==e?e:function(t,e){return!zi(t)&&Lo(e)&&!Ve(null===e||void 0===e?void 0:e.bin)}(i,n))},gridScale:function(t){return function(t,e){var n="x"===e?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n);return}(t.model,t.channel)},labelAlign:function(t){var e=t.axis,n=t.labelAngle,r=t.orient,i=t.channel;return e.labelAlign||Sl(n,r,i)},labelAngle:function(t){return t.labelAngle},labelBaseline:function(t){var e=t.axis,n=t.labelAngle,r=t.orient,i=t.channel;return e.labelBaseline||kl(n,r,i)},labelFlush:function(t){var e,n=t.axis,r=t.fieldOrDatumDef,i=t.channel;return null!==(e=n.labelFlush)&&void 0!==e?e:function(t,e){if("x"===e&&A(["quantitative","temporal"],t))return!0;return}(r.type,i)},labelOverlap:function(t){var e,n=t.axis,r=t.fieldOrDatumDef,i=t.scaleType;return null!==(e=n.labelOverlap)&&void 0!==e?e:function(t,e){if("nominal"!==t)return"log"!==e||"greedy";return}(r.type,i)},orient:function(t){return t.orient},tickCount:function(t){var e,n=t.channel,r=t.model,i=t.axis,o=t.fieldOrDatumDef,a=t.scaleType,s="x"===n?"width":"y"===n?"height":void 0,u=s?r.getSizeSignalRef(s):void 0;return null!==(e=i.tickCount)&&void 0!==e?e:function(t){var e,n=t.fieldOrDatumDef,r=t.scaleType,i=t.size;if(!t.values&&!zi(r)&&"log"!==r){if(Lo(n)){if(Ve(n.bin))return{signal:"ceil(".concat(i.signal,"/10)")};if(n.timeUnit&&A(["month","hours","day","quarter"],null===(e=Br(n.timeUnit))||void 0===e?void 0:e.unit))return}return{signal:"ceil(".concat(i.signal,"/40)")}}return}({fieldOrDatumDef:o,scaleType:a,size:u,values:i.values})},title:function(t){var e=t.axis,n=t.model,r=t.channel;if(void 0!==e.title)return e.title;var i=El(n,r);if(void 0!==i)return i;var o=n.typedFieldDef(r),a="x"===r?"x2":"y2",s=n.fieldDef(a);return Aa(o?[Ao(o)]:[],Lo(s)?[Ao(s)]:[])},values:function(t){return function(t,e){var n=t.values;if(Object(o.A)(n))return pa(e,n);if(Wr(n))return n;return}(t.axis,t.fieldOrDatumDef)},zindex:function(t){var e,n=t.axis,r=t.fieldOrDatumDef,i=t.mark;return null!==(e=n.zindex)&&void 0!==e?e:function(t,e){if("rect"===t&&Ko(e))return 1;return 0}(i,r)}};function Ol(t){return"(((".concat(t.signal," % 360) + 360) % 360)")}function kl(t,e,n,r){if(void 0!==t){if("x"===n){if(Wr(t)){var i=Ol(t),o=Wr(e)?"(".concat(e.signal,' === "top")'):"top"===e;return{signal:"(45 < ".concat(i," && ").concat(i," < 135) || (225 < ").concat(i," && ").concat(i,' < 315) ? "middle" :')+"(".concat(i," <= 45 || 315 <= ").concat(i,") === ").concat(o,' ? "bottom" : "top"')}}if(45<t&&t<135||225<t&&t<315)return"middle";if(Wr(e)){var a=t<=45||315<=t?"===":"!==";return{signal:"".concat(e.signal," ").concat(a,' "top" ? "bottom" : "top"')}}return(t<=45||315<=t)===("top"===e)?"bottom":"top"}if(Wr(t)){var s=Ol(t),u=Wr(e)?"(".concat(e.signal,' === "left")'):"left"===e,c=r?'"middle"':"null";return{signal:"".concat(s," <= 45 || 315 <= ").concat(s," || (135 <= ").concat(s," && ").concat(s," <= 225) ? ").concat(c," : (45 <= ").concat(s," && ").concat(s," <= 135) === ").concat(u,' ? "top" : "bottom"')}}if(t<=45||315<=t||135<=t&&t<=225)return r?"middle":null;if(Wr(e)){var l=45<=t&&t<=135?"===":"!==";return{signal:"".concat(e.signal," ").concat(l,' "left" ? "top" : "bottom"')}}return(45<=t&&t<=135)===("left"===e)?"top":"bottom"}}function Sl(t,e,n){if(void 0!==t){var r="x"===n,i=r?0:90,o=r?"bottom":"left";if(Wr(t)){var a=Ol(t),s=Wr(e)?"(".concat(e.signal,' === "').concat(o,'")'):e===o;return{signal:"(".concat(i?"("+a+" + 90)":a," % 180 === 0) ? ").concat(r?null:'"center"'," :")+"(".concat(i," < ").concat(a," && ").concat(a," < ").concat(180+i,") === ").concat(s,' ? "left" : "right"')}}if((t+i)%180===0)return r?null:"center";if(Wr(e)){var u=i<t&&t<180+i?"===":"!==",c="".concat(e.signal," ").concat(u,' "').concat(o,'"');return{signal:"".concat(c,' ? "left" : "right"')}}return(i<t&&t<180+i)===(e===o)?"left":"right"}}function El(t,e){var n="x"===e?"x2":"y2",r=t.fieldDef(e),i=t.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?Ca(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}var Al=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i._dependentFields=ol(i.transform.calculate),i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.as])}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function(){return"Calculate ".concat(S(this.transform))}}],[{key:"parseAllForSortIndex",value:function(t,e){return e.forEachFieldDef((function(e,r){if(Uo(e)&&Oo(e.sort)){var i=e.field,o=e.timeUnit,a=e.sort,s=a.map((function(t,e){return"".concat(ai({field:i,timeUnit:o,equal:t})," ? ").concat(e," : ")})).join("")+a.length;t=new n(t,{calculate:s,as:Cl(e,r,{forAs:!0})})}})),t}}]),n}(_c);function Cl(t,e,n){return Go(t,Object.assign({prefix:e,suffix:"sort_index"},null!==n&&void 0!==n?n:{}))}function jl(t,e){return A(["top","bottom"],e)?"column":A(["left","right"],e)||"row"===t?"row":"column"}function Tl(t,e,n,r){var i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return X(((null===e||void 0===e?void 0:e.header)||{})[t],i[t],n.header[t])}function Ml(t,e,n,r){var i,o={},s=Object(a.a)(t);try{for(s.s();!(i=s.n()).done;){var u=i.value,c=Tl(u,e,n,r);void 0!==c&&(o[u]=c)}}catch(l){s.e(l)}finally{s.f()}return o}var Rl=["row","column"],Dl=["header","footer"];function Ll(t,e){var n=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,o=Ml(["titleAnchor","titleAngle","titleOrient"],i,r,e),a=o.titleAnchor,s=o.titleAngle,u=jl(e,o.titleOrient),c=et(s);return{name:"".concat(e,"-title"),type:"group",role:"".concat(u,"-title"),title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===e?{orient:"left"}:{}),{style:"guide-title"}),Il(c,u)),Nl(u,c,a)),Wl(r,i,e,vl,pl))}}function Nl(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle";switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}var r=Sl(e,"row"===t?"left":"top","row"===t?"y":"x");return r?{align:r}:{}}function Il(t,e){var n=kl(t,"row"===e?"left":"top","row"===e?"y":"x",!0);return n?{baseline:n}:{}}function Fl(t,e){var n,r=t.component.layoutHeaders[e],i=[],o=Object(a.a)(Dl);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(r[s]){var u,c=Object(a.a)(r[s]);try{for(c.s();!(u=c.n()).done;){var l=zl(t,e,s,r,u.value);null!=l&&i.push(l)}}catch(f){c.e(f)}finally{c.f()}}}}catch(f){o.e(f)}finally{o.f()}return i}function Pl(t,e){var n,r=t.sort;return _o(r)?{field:Go(r,{expr:"datum"}),order:null!==(n=r.order)&&void 0!==n?n:"ascending"}:Object(o.A)(r)?{field:Cl(t,e,{expr:"datum"}),order:"ascending"}:{field:Go(t,{expr:"datum"}),order:null!==r&&void 0!==r?r:"ascending"}}function $l(t,e,n){var r=Ml(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t,n,e),i=r.format,o=r.formatType,a=r.labelAngle,s=r.labelAnchor,u=r.labelOrient,c=r.labelExpr,l=co({fieldOrDatumDef:t,format:i,formatType:o,expr:"parent",config:n}).signal,f=jl(e,u);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:c?K(K(c,"datum.label",l),"datum.value",Go(t,{expr:"parent"})):l}},"row"===e?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Il(a,f)),Nl(f,a,s)),Wl(n,t,e,ml,gl))}function zl(t,e,n,r,i){if(i){var o=null,a=r.facetFieldDef,s=t.config?t.config:void 0;if(a&&i.labels){var u=Ml(["labelOrient"],a,s,e).labelOrient;("row"===e&&!A(["top","bottom"],u)||"column"===e&&!A(["left","right"],u))&&(o=$l(a,e,s))}var c=Wh(t)&&!ko(t.facet),l=i.axes,f=(null===l||void 0===l?void 0:l.length)>0;if(o||f){var h="row"===e?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("".concat(e,"_").concat(n)),type:"group",role:"".concat(e,"-").concat(n)},r.facetFieldDef?{from:{data:t.getName(e+"_domain")},sort:Pl(a,e)}:{}),f&&c?{from:{data:t.getName("facet_domain_".concat(e))}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:Object(Pt.a)({},h,i.sizeSignal)}}:{}),f?{axes:l}:{})}}return null}var Bl={column:{start:0,end:1},row:{start:1,end:0}};function Ul(t,e){return Bl[e][t]}function Wl(t,e,n,r,i){var o,s={},u=Object(a.a)(r);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(i[c]){var l=Tl(c,e,t,n);void 0!==l&&(s[i[c]]=l)}}}catch(f){u.e(f)}finally{u.f()}return s}function Hl(t){return[].concat(Object(s.a)(Vl(t,"width")),Object(s.a)(Vl(t,"height")),Object(s.a)(Vl(t,"childWidth")),Object(s.a)(Vl(t,"childHeight")))}function Vl(t,e){var n="width"===e?"x":"y",r=t.component.layoutSize.get(e);if(!r||"merged"===r)return[];var i=t.getSizeSignalRef(e).signal;if("step"===r){var o=t.getScaleComponent(n);if(o){var a=o.get("type"),s=o.get("range");if(zi(a)&&Hr(s)){var u=t.scaleName(n);if(Wh(t.parent))if("independent"===t.parent.component.resolve.scale[n])return[ql(u,s)];return[ql(u,s),{name:i,update:Gl(u,o,"domain('".concat(u,"').length"))}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){var c=i.endsWith("width"),l=c?"containerSize()[0]":"containerSize()[1]",f=ms(t.config.view,c?"width":"height"),h="isFinite(".concat(l,") ? ").concat(l," : ").concat(f);return[{name:i,init:h,on:[{update:h,events:"window:resize"}]}]}return[{name:i,value:r}]}function ql(t,e){return{name:t+"_step",value:e.step}}function Gl(t,e,n){var r=e.get("type"),i=e.get("padding"),o=X(e.get("paddingOuter"),i),a=e.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,"bandspace(".concat(n,", ").concat(a,", ").concat(o,") * ").concat(t,"_step")}function Kl(t){return"childWidth"===t?"width":"childHeight"===t?"height":t}function Yl(t,e){return I(t).reduce((function(n,r){var i=t[r];return Object.assign(Object.assign({},n),Yu(e,i,r,(function(t){return Wr(t)?t:{value:t.value}})))}),{})}function Ql(t,e){if(Vh(e)||Wh(e))return"shared";if(Hh(e))return Me(t)?"independent":"shared";throw new Error("invalid model type for resolve")}function Xl(t,e){var n=t.scale[e],i=Me(e)?"axis":"legend";return"independent"===n?("shared"===t[i][e]&&Or(r.independentScaleMeansIndependentGuide(e)),"independent"):t[i][e]||"shared"}var Zl=Object.assign(Object.assign({},ss),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),Jl=I(Zl),tf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return n}(gu),ef={symbols:function(t,e){var n,r,i,s,u,c=e.fieldOrDatumDef,l=e.model,f=e.channel,h=e.legendCmpt;if("symbol"!==e.legendType)return;var d=l.markDef,p=l.encoding,g=l.config,v=l.mark,m=d.filled&&"trail"!==v,y=Object.assign(Object.assign({},function(t,e,n){var r,i=Object(a.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=Oa(o,e.markDef,e.config);void 0!==s&&(t[o]=ya(s))}}catch(u){i.e(u)}finally{i.f()}return t}({},l,Mt)),rc(l,{filled:m})),b=null!==(n=nf(p.opacity))&&void 0!==n?n:d.opacity;if(y.fill)if("fill"===f||m&&f===re)delete y.fill;else if(y.fill.field)h.get("symbolFillColor")?delete y.fill:(y.fill=ya(null!==(r=g.legend.symbolBaseFillColor)&&void 0!==r?r:"black"),y.fillOpacity=ya(null!==b&&void 0!==b?b:1));else if(Object(o.A)(y.fill)){var w=null!==(u=null!==(s=rf(null!==(i=p.fill)&&void 0!==i?i:p.color))&&void 0!==s?s:d.fill)&&void 0!==u?u:m&&d.color;w&&(y.fill=ya(w))}if(y.stroke)if("stroke"===f||!m&&f===re)delete y.stroke;else if(y.stroke.field)delete y.stroke;else if(Object(o.A)(y.stroke)){var x=X(rf(p.stroke||p.color),d.stroke,m?d.color:void 0);x&&(y.stroke={value:x})}if("opacity"!==f){var _=Lo(c)&&af(l,h,c);_?y.opacity=[Object.assign({test:_},ya(null!==b&&void 0!==b?b:1)),ya(g.legend.unselectedOpacity)]:b&&(y.opacity=ya(b))}return N(y=Object.assign(Object.assign({},y),t))?void 0:y},gradient:function(t,e){var n=e.model;if("gradient"!==e.legendType)return;var r={},i=nf(n.encoding.opacity)||n.markDef.opacity;i&&(r.opacity=ya(i));return N(r=Object.assign(Object.assign({},r),t))?void 0:r},labels:function(t,e){var n=e.fieldOrDatumDef,r=e.model,i=e.channel,o=e.legendCmpt,a=r.legend(i)||{},s=r.config,u=Lo(n)?af(r,o,n):void 0,c=u?[{test:u,value:1},{value:s.legend.unselectedOpacity}]:void 0,l=a.format,f=a.formatType,h=so(f)?fo({fieldOrDatumDef:n,field:"datum.value",format:l,formatType:f,config:s}):void 0,d=Object.assign(Object.assign(Object.assign({},c?{opacity:c}:{}),h?{text:h}:{}),t);return N(d)?void 0:d},entries:function(t,e){var n=e.legendCmpt.get("selections");return(null===n||void 0===n?void 0:n.length)?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}};function nf(t){return of(t,(function(t,e){return Math.max(t,e.value)}))}function rf(t){return of(t,(function(t,e){return X(t,e.value)}))}function of(t,e){return function(t){var e=t&&t.condition;return!!e&&(Object(o.A)(e)||Bo(e))}(t)?Object(o.i)(t.condition).reduce(e,t.value):Bo(t)?t.value:void 0}function af(t,e,n){var r=e.get("selections");if(null===r||void 0===r?void 0:r.length){var i=Object(o.Z)(n.field);return r.map((function(t){var e=Object(o.Z)(z(t)+Yc);return"(!length(data(".concat(e,")) || (").concat(t,"[").concat(i,"] && indexof(").concat(t,"[").concat(i,"], datum.value) >= 0))")})).join(" || ")}}var sf={direction:function(t){return t.direction},format:function(t){var e=t.fieldOrDatumDef,n=t.legend,r=t.config,i=n.format,o=n.formatType;return ho(e,e.type,i,o,r,!1)},formatType:function(t){var e=t.legend,n=t.fieldOrDatumDef,r=t.scaleType,i=e.formatType;return po(i,n,r)},gradientLength:function(t){var e,n,r=t.legend,i=t.legendConfig;return null!==(n=null!==(e=r.gradientLength)&&void 0!==e?e:i.gradientLength)&&void 0!==n?n:function(t){var e=t.legendConfig,n=t.model,r=t.direction,i=t.orient,o=t.scaleType,a=e.gradientHorizontalMaxLength,s=e.gradientHorizontalMinLength,u=e.gradientVerticalMaxLength,c=e.gradientVerticalMinLength;if(Ui(o))return"horizontal"===r?"top"===i||"bottom"===i?lf(n,"width",s,a):s:lf(n,"height",c,u);return}(t)},labelOverlap:function(t){var e,n,r=t.legend,i=t.legendConfig,o=t.scaleType;return null!==(n=null!==(e=r.labelOverlap)&&void 0!==e?e:i.labelOverlap)&&void 0!==n?n:function(t){if(A(["quantile","threshold","log"],t))return"greedy";return}(o)},symbolType:function(t){var e,n=t.legend,r=t.markDef,i=t.channel,o=t.encoding;return null!==(e=n.symbolType)&&void 0!==e?e:function(t,e,n,r){var i;if("shape"!==e){var o=null!==(i=rf(n))&&void 0!==i?i:r;if(o)return o}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(r.type,i,o.shape,r.shape)},title:function(t){return ea(t.fieldOrDatumDef,t.config,{allowDisabling:!0})},type:function(t){var e=t.legendType,n=t.scaleType;if(de(t.channel)&&Ui(n)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:function(t){var e=t.fieldOrDatumDef;return function(t,e){var n=t.values;if(Object(o.A)(n))return pa(e,n);if(Wr(n))return n;return}(t.legend,e)}};function uf(t){return X(t.legend.type,function(t){var e=t.channel,n=t.timeUnit,r=t.scaleType;if(de(e)){if(A(["quarter","month","day"],n))return"symbol";if(Ui(r))return"gradient"}return"symbol"}(t))}function cf(t){var e,n,r=t.legendConfig,i=t.legendType,o=t.orient;return null!==(n=null!==(e=t.legend.direction)&&void 0!==e?e:r[i?"gradientDirection":"symbolDirection"])&&void 0!==n?n:function(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===e?"horizontal":void 0}}(o,i)}function lf(t,e,n,r){var i=t.getSizeSignalRef(e).signal;return{signal:"clamp(".concat(i,", ").concat(n,", ").concat(r,")")}}function ff(t){var e=Uh(t)?function(t){for(var e=t.encoding,n={},r=0,i=[re].concat(Object(s.a)(os));r<i.length;r++){var o=i[r],a=aa(e[o]);a&&t.getScaleComponent(o)&&(o===ae&&Lo(a)&&a.type===pi||(n[o]=df(t,o)))}return n}(t):function(t){var e,n=t.component,r=n.legends,i=n.resolve,o=Object(a.a)(t.children);try{for(o.s();!(e=o.n()).done;){var s=e.value;ff(s);var u,c=Object(a.a)(I(s.component.legends));try{for(c.s();!(u=c.n()).done;){var l=u.value;i.legend[l]=Xl(t.component.resolve,l),"shared"===i.legend[l]&&(r[l]=pf(r[l],s.component.legends[l]),r[l]||(i.legend[l]="independent",delete r[l]))}}catch(m){c.e(m)}finally{c.f()}}}catch(m){o.e(m)}finally{o.f()}var f,h=Object(a.a)(I(r));try{for(h.s();!(f=h.n()).done;){var d,p=f.value,g=Object(a.a)(t.children);try{for(g.s();!(d=g.n()).done;){var v=d.value;v.component.legends[p]&&("shared"===i.legend[p]&&delete v.component.legends[p])}}catch(m){g.e(m)}finally{g.f()}}}catch(m){h.e(m)}finally{h.f()}return r}(t);return t.component.legends=e,e}function hf(t,e,n,r){switch(e){case"disable":return void 0!==n;case"values":return!!(null===n||void 0===n?void 0:n.values);case"title":if("title"===e&&t===(null===r||void 0===r?void 0:r.title))return!0}return t===(n||{})[e]}function df(t,e){var n,r,i,o=t.legend(e),s=t.markDef,u=t.encoding,c=t.config,l=c.legend,f=new tf({},function(t,e){var n=t.scaleName(e);if("trail"===t.mark){if("color"===e)return{stroke:n};if("size"===e)return{strokeWidth:n}}return"color"===e?t.markDef.filled?{fill:n}:{stroke:n}:Object(Pt.a)({},e,n)}(t,e));!function(t,e,n){var r,i=null===(r=t.fieldDef(e))||void 0===r?void 0:r.field;tl(t,(function(t){var r,o,a=null!==(r=t.project.hasField[i])&&void 0!==r?r:t.project.hasChannel[e];if(a&&Rc.has(t)){var s=null!==(o=n.get("selections"))&&void 0!==o?o:[];s.push(t.name),n.set("selections",s,!1),a.hasLegend=!0}}))}(t,e,f);var h=void 0!==o?!o:l.disable;if(f.set("disable",h,void 0!==o),h)return f;o=o||{};var d,p=t.getScaleComponent(e).get("type"),g=aa(u[e]),v=Lo(g)?null===(n=Br(g.timeUnit))||void 0===n?void 0:n.unit:void 0,m=o.orient||c.legend.orient||"right",y=uf({legend:o,channel:e,timeUnit:v,scaleType:p}),b={legend:o,channel:e,model:t,markDef:s,encoding:u,fieldOrDatumDef:g,legendConfig:l,config:c,scaleType:p,orient:m,legendType:y,direction:cf({legend:o,legendType:y,orient:m,legendConfig:l})},w=Object(a.a)(Jl);try{for(w.s();!(d=w.n()).done;){var x=d.value,_=x in sf?sf[x](b):o[x];if(void 0!==_){var O=hf(_,x,o,t.fieldDef(e));(O||void 0===c.legend[x])&&f.set(x,_,O)}}}catch(D){w.e(D)}finally{w.f()}for(var k=null!==(r=null===o||void 0===o?void 0:o.encoding)&&void 0!==r?r:{},S=f.get("selections"),E={},A={fieldOrDatumDef:g,model:t,channel:e,legendCmpt:f,legendType:y},C=0,j=["labels","legend","title","symbols","gradient","entries"];C<j.length;C++){var T=j[C],M=Yl(null!==(i=k[T])&&void 0!==i?i:{},t),R=T in ef?ef[T](M,A):M;void 0===R||N(R)||(E[T]=Object.assign(Object.assign(Object.assign({},(null===S||void 0===S?void 0:S.length)&&Lo(g)?{name:"".concat(z(g.field),"_legend_").concat(T)}:{}),(null===S||void 0===S?void 0:S.length)?{interactive:!!S}:{}),{update:R}))}return N(E)||f.set("encode",E,!!(null===o||void 0===o?void 0:o.encoding)),f}function pf(t,e){var n,r,i,o;if(!t)return e.clone();var s=t.getWithExplicit("orient"),u=e.getWithExplicit("orient");if(!s.explicit||!u.explicit||s.value===u.value){var c,l=!1,f=Object(a.a)(Jl);try{var h=function(){var n=c.value,r=wu(t.getWithExplicit(n),e.getWithExplicit(n),n,"legend",(function(t,e){switch(n){case"symbolType":return function(t,e){if("circle"===e.value)return e;return t}(t,e);case"title":return ja(t,e);case"type":return l=!0,mu("symbol")}return bu(t,e,n,"legend")}));t.setWithExplicit(n,r)};for(f.s();!(c=f.n()).done;)h()}catch(d){f.e(d)}finally{f.f()}return l&&((null===(r=null===(n=t.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)&&U(t.implicit,["encode","gradient"]),(null===(o=null===(i=t.explicit)||void 0===i?void 0:i.encode)||void 0===o?void 0:o.gradient)&&U(t.explicit,["encode","gradient"])),t}}function gf(t,e,n,r){var i,o,a;t.encode=null!==(i=t.encode)&&void 0!==i?i:{},t.encode[e]=null!==(o=t.encode[e])&&void 0!==o?o:{},t.encode[e].update=null!==(a=t.encode[e].update)&&void 0!==a?a:{},t.encode[e].update[n]=r}function vf(t){var e,n=t.component.legends,r={},i=Object(a.a)(I(n));try{for(i.s();!(e=i.n()).done;){var o=e.value,s=t.getScaleComponent(o),c=k(s.get("domains"));if(r[c]){var l,f=Object(a.a)(r[c]);try{for(f.s();!(l=f.n()).done;){pf(l.value,n[o])||r[c].push(n[o])}}catch(h){f.e(h)}finally{f.f()}}else r[c]=[n[o].clone()]}}catch(h){i.e(h)}finally{i.f()}return F(r).flat().map((function(e){return function(t,e){var n,r,i,o=t.combine(),s=o.disable,c=o.labelExpr,l=(o.selections,u(o,["disable","labelExpr","selections"]));if(s)return;!1===e.aria&&void 0==l.aria&&(l.aria=!1);if(null===(n=l.encode)||void 0===n?void 0:n.symbols){var f=l.encode.symbols.update;!f.fill||"transparent"===f.fill.value||f.stroke||l.stroke||(f.stroke={value:"transparent"});var d,p=Object(a.a)(os);try{for(p.s();!(d=p.n()).done;){var g=d.value;l[g]&&delete f[g]}}catch(h){p.e(h)}finally{p.f()}}l.title||delete l.title;if(void 0!==c){var v=c;(null===(i=null===(r=l.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&Wr(l.encode.labels.update.text)&&(v=K(c,"datum.label",l.encode.labels.update.text.signal)),gf(l,"labels","text",{signal:v})}for(var m in l){var y=l[m];if(Wr(y)){var b=as[m];if(b){var w=b.vgProp,x=b.part;gf(l,x,w,y),delete l[m]}}}return l}(e,t.config)})).filter((function(t){return void 0!==t}))}function mf(t){return Vh(t)||Hh(t)?function(t){return t.children.reduce((function(t,e){return t.concat(e.assembleProjections())}),yf(t))}(t):yf(t)}function yf(t){var e=t.component.projection;if(!e||e.merged)return[];var n=e.combine(),r=n.name;if(e.data){var i={signal:"[".concat(e.size.map((function(t){return t.signal})).join(", "),"]")},o=e.data.reduce((function(e,n){var r=Wr(n)?n.signal:"data('".concat(t.lookupDataSource(n),"')");return A(e,r)||e.push(r),e}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:o.length>1?"[".concat(o.join(", "),"]"):o[0]}},n)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}var bf=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],wf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r,i,o){var a;return Object(lt.a)(this,n),(a=e.call(this,Object.assign({},r),{name:t})).specifiedProjection=r,a.size=i,a.data=o,a.merged=!1,a}return Object(ft.a)(n,[{key:"isFit",get:function(){return!!this.data}}]),n}(gu);function xf(t){t.component.projection=Uh(t)?function(t){var e;if(t.hasProjection){var n=t.specifiedProjection,r=!(n&&(null!=n.scale||null!=n.translate)),i=r?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,o=r?function(t){for(var e=[],n=t.encoding,r=0,i=[["longitude","latitude"],["longitude2","latitude2"]];r<i.length;r++){var o=i[r];(aa(n[o[0]])||aa(n[o[1]]))&&e.push({signal:t.getName("geojson_".concat(e.length))})}t.channelHasField(ae)&&t.typedFieldDef(ae).type===pi&&e.push({signal:t.getName("geojson_".concat(e.length))});0===e.length&&e.push(t.requestDataName(ju));return e}(t):void 0;return new wf(t.projectionName(!0),Object.assign(Object.assign({},null!==(e=t.config.projection)&&void 0!==e?e:{}),null!==n&&void 0!==n?n:{}),i,o)}return}(t):function(t){if(0===t.children.length)return;var e,n,r=Object(a.a)(t.children);try{for(r.s();!(n=r.n()).done;){xf(n.value)}}catch(g){r.e(g)}finally{r.f()}var i=j(t.children,(function(t){var n=t.component.projection;if(n){if(e){var r=function(t,e){var n=j(bf,(function(n){return!Object(o.v)(t.explicit,n)&&!Object(o.v)(e.explicit,n)||!(!Object(o.v)(t.explicit,n)||!Object(o.v)(e.explicit,n)||k(t.get(n))!==k(e.get(n)))}));if(k(t.size)===k(e.size)){if(n)return t;if(k(t.explicit)===k({}))return e;if(k(e.explicit)===k({}))return t}return null}(e,n);return r&&(e=r),!!r}return e=n,!0}return!0}));if(e&&i){var u,c=t.projectionName(!0),l=new wf(c,e.specifiedProjection,e.size,x(e.data)),f=Object(a.a)(t.children);try{for(f.s();!(u=f.n()).done;){var h=u.value,d=h.component.projection;if(d){var p;if(d.isFit)(p=l.data).push.apply(p,Object(s.a)(h.component.projection.data));h.renameProjection(d.get("name"),c),d.merged=!0}}}catch(g){f.e(g)}finally{f.f()}return l}return}(t)}var _f=n(64),Of=n(72),kf=n(38),Sf=n(65);function Ef(t,e){return"".concat(He(t),"_").concat(e)}function Af(t,e,n){var r,i=Ef(null!==(r=la(n,void 0))&&void 0!==r?r:{},e);return t.getName("".concat(i,"_bins"))}function Cf(t,e,n){var r,i;r=function(t){return"as"in t}(t)?Object(o.H)(t.as)?[t.as,"".concat(t.as,"_end")]:[t.as[0],t.as[1]]:[Go(t,{forAs:!0}),Go(t,{binSuffix:"end",forAs:!0})];var a=Object.assign({},la(e,void 0)),s=Ef(a,t.field),u=function(t,e){return{signal:t.getName("".concat(e,"_bins")),extentSignal:t.getName("".concat(e,"_extent"))}}(n,s),c=u.signal,l=u.extentSignal;if(Ke(a.extent)){var f=a.extent,h=f.selection;i=ul(n.getSelectionComponent(z(h),h),f),delete a.extent}return{key:s,binComponent:Object.assign(Object.assign(Object.assign({bin:a,field:t.field,as:[r]},c?{signal:c}:{}),l?{extentSignal:l}:{}),i?{span:i}:{})}}var jf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).bins=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.bins))}},{key:"merge",value:function(t,e){var n,r=Object(a.a)(I(t.bins));try{for(r.s();!(n=r.n()).done;){var i=n.value;i in this.bins?(e(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=M([].concat(Object(s.a)(this.bins[i].as),Object(s.a)(t.bins[i].as)),S)):this.bins[i]=t.bins[i]}}catch(l){r.e(l)}finally{r.f()}var o,u=Object(a.a)(t.children);try{for(u.s();!(o=u.n()).done;){var c=o.value;t.removeChild(c),c.parent=this}}catch(l){u.e(l)}finally{u.f()}t.remove()}},{key:"producedFields",value:function(){return new Set(F(this.bins).map((function(t){return t.as})).flat(2))}},{key:"dependentFields",value:function(){return new Set(F(this.bins).map((function(t){return t.field})))}},{key:"hash",value:function(){return"Bin ".concat(S(this.bins))}},{key:"assemble",value:function(){return F(this.bins).flatMap((function(t){var e,n=[],r=(e=t.as,Object(_f.a)(e)||Object(Of.a)(e)||Object(kf.a)(e)||Object(Sf.a)()),i=r[0],o=r.slice(1),s=t.bin,c=s.extent,l=u(s,["extent"]),f=Object.assign(Object.assign(Object.assign({type:"bin",field:G(t.field),as:i,signal:t.signal},Ke(c)?{extent:null}:{extent:c}),t.span?{span:{signal:"span(".concat(t.span,")")}}:{}),l);!c&&t.extentSignal&&(n.push({type:"extent",field:G(t.field),signal:t.extentSignal}),f.extent={signal:t.extentSignal}),n.push(f);var h,d=Object(a.a)(o);try{for(d.s();!(h=d.n()).done;)for(var p=h.value,g=0;g<2;g++)n.push({type:"formula",expr:Go({field:i[g]},{expr:"datum"}),as:p[g]})}catch(v){d.e(v)}finally{d.f()}return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n}))}}],[{key:"makeFromEncoding",value:function(t,e){var r=e.reduceFieldDef((function(t,n,r){if(zo(n)&&Ve(n.bin)){var i=Cf(n,n.bin,e),o=i.key,a=i.binComponent;t[o]=Object.assign(Object.assign(Object.assign({},a),t[o]),function(t,e,n,r){var i,o;if(ga(e,n)){var a=Uh(t)&&null!==(o=null!==(i=t.axis(n))&&void 0!==i?i:t.legend(n))&&void 0!==o?o:{},s=Go(e,{expr:"datum"}),u=Go(e,{expr:"datum",binSuffix:"end"});return{formulaAs:Go(e,{binSuffix:"range",forAs:!0}),formula:yo(s,u,a.format,a.formatType,r)}}return{}}(e,n,r,e.config))}return t}),{});return N(r)?null:new n(t,r)}},{key:"makeFromTransform",value:function(t,e,r){var i=Cf(e,e.bin,r),o=i.key,a=i.binComponent;return new n(t,Object(Pt.a)({},o,a))}}]),n}(_c),Tf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t){var r,i;if(Object(lt.a)(this,n),r=e.call(this,null),Su(t=null!==t&&void 0!==t?t:{name:"source"})||(i=t.format?Object.assign({},O(t.format,["parse"])):{}),Ou(t))r._data={values:t.values};else if(_u(t)){if(r._data={url:t.url},!i.type){var o=/(?:\.([^.]+))?$/.exec(t.url)[1];A(["json","csv","tsv","dsv","topojson"],o)||(o="json"),i.type=o}}else Au(t)?r._data={values:[{type:"Sphere"}]}:(ku(t)||Su(t))&&(r._data={});return r._generator=Su(t),t.name&&(r._name=t.name),i&&!N(i)&&(r._data.format=i),r}return Object(ft.a)(n,[{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"hasName",value:function(){return!!this._name}},{key:"remove",value:function(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}},{key:"data",get:function(){return this._data}},{key:"isGenerator",get:function(){return this._generator}},{key:"dataName",get:function(){return this._name},set:function(t){this._name=t}},{key:"parent",set:function(t){throw new Error("Source nodes have to be roots.")}}]),n}(_c);function Mf(t){var e,n=Object(a.a)(t);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,o=Object(a.a)(i.children);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(s.parent!==i)return console.error("Dataflow graph is inconsistent.",i,s),!1}}catch(u){o.e(u)}finally{o.f()}if(!Mf(i.children))return!1}}catch(u){n.e(u)}finally{n.f()}return!0}var Rf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).params=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"hash",value:function(){return"Graticule ".concat(S(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),n}(_c),Df=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).params=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){var t;return new Set([null!==(t=this.params.as)&&void 0!==t?t:"data"])}},{key:"hash",value:function(){return"Hash ".concat(S(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"sequence"},this.params)}}]),n}(_c);function Lf(t){return t instanceof Tf||t instanceof Rf||t instanceof Df}var Nf=function(){function t(){Object(lt.a)(this,t),this._mutated=!1}return Object(ft.a)(t,[{key:"setMutated",value:function(){this._mutated=!0}},{key:"mutatedFlag",get:function(){return this._mutated}}]),t}(),If=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){var t;return Object(lt.a)(this,n),(t=e.call(this))._continue=!1,t}return Object(ft.a)(n,[{key:"setContinue",value:function(){this._continue=!0}},{key:"reset",value:function(){}},{key:"optimizeNextFromLeaves",value:function(t){if(Lf(t))return!1;var e=t.parent;return this.run(t).continueFlag&&this.optimizeNextFromLeaves(e),this.mutatedFlag}},{key:"continueFlag",get:function(){return this._continue}},{key:"flags",get:function(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}},set:function(t){var e=t.continueFlag,n=t.mutatedFlag;e&&this.setContinue(),n&&this.setMutated()}}]),n}(Nf),Ff=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return n}(Nf);function Pf(t,e,n,r){var i=Uh(r)?r.encoding[Se(e)]:void 0;if(zo(n)&&Uh(r)&&To(e,n,i,r.stack,r.markDef,r.config))t.add(Go(n,{})),t.add(Go(n,{suffix:"end"})),n.bin&&ga(n,e)&&t.add(Go(n,{binSuffix:"range"}));else if(e in le){var o=function(t){switch(t){case"latitude":return"y";case"latitude2":return"y2";case"longitude":return"x";case"longitude2":return"x2"}}(e);t.add(r.getName(o))}else t.add(Go(n));return t}var $f=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r,i){var o;return Object(lt.a)(this,n),(o=e.call(this,t)).dimensions=r,o.measures=i,o}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,new Set(this.dimensions),x(this.measures))}},{key:"merge",value:function(t){return function(t,e){if(t.size!==e.size)return!1;var n,r=Object(a.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e.has(i))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}(this.dimensions,t.dimensions)?(function(t,e){var n,r,i=Object(a.a)(I(e));try{for(i.s();!(r=i.n()).done;){var o,u=r.value,c=e[u],l=Object(a.a)(I(c));try{for(l.s();!(o=l.n()).done;){var f=o.value;u in t?t[u][f]=new Set([].concat(Object(s.a)(null!==(n=t[u][f])&&void 0!==n?n:[]),Object(s.a)(c[f]))):t[u]=Object(Pt.a)({},f,c[f])}}catch(h){l.e(h)}finally{l.f()}}}catch(h){i.e(h)}finally{i.f()}}(this.measures,t.measures),!0):(function(){var t;(t=wr).debug.apply(t,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function(t){t.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function(){return new Set([].concat(Object(s.a)(this.dimensions),Object(s.a)(I(this.measures))))}},{key:"producedFields",value:function(){var t,e=new Set,n=Object(a.a)(I(this.measures));try{for(n.s();!(t=n.n()).done;){var r,i=t.value,o=Object(a.a)(I(this.measures[i]));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=this.measures[i][s];0===u.size?e.add("".concat(s,"_").concat(i)):u.forEach(e.add,e)}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}return e}},{key:"hash",value:function(){return"Aggregate ".concat(S({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function(){var t,e=[],n=[],r=[],i=Object(a.a)(I(this.measures));try{for(i.s();!(t=i.n()).done;){var o,u=t.value,c=Object(a.a)(I(this.measures[u]));try{for(c.s();!(o=c.n()).done;){var l,f=o.value,h=Object(a.a)(this.measures[u][f]);try{for(h.s();!(l=h.n()).done;){var d=l.value;r.push(d),e.push(f),n.push("*"===u?null:G(u))}}catch(p){h.e(p)}finally{h.f()}}}catch(p){c.e(p)}finally{c.f()}}}catch(p){i.e(p)}finally{i.f()}return{type:"aggregate",groupby:Object(s.a)(this.dimensions).map(G),ops:e,fields:n,as:r}}},{key:"groupBy",get:function(){return this.dimensions}}],[{key:"makeFromEncoding",value:function(t,e){var r=!1;e.forEachFieldDef((function(t){t.aggregate&&(r=!0)}));var i={},o=new Set;return r?(e.forEachFieldDef((function(t,n){var r,a,s,u,c=t.aggregate,l=t.field;if(c)if("count"===c)i["*"]=null!==(r=i["*"])&&void 0!==r?r:{},i["*"].count=new Set([Go(t,{forAs:!0})]);else{if(Bt(c)||Ut(c)){var f=Bt(c)?"argmin":"argmax",h=c[f];i[h]=null!==(a=i[h])&&void 0!==a?a:{},i[h][f]=new Set([Go({op:f,field:h},{forAs:!0})])}else i[l]=null!==(s=i[l])&&void 0!==s?s:{},i[l][c]=new Set([Go(t,{forAs:!0})]);$e(n)&&"unaggregated"===e.scaleDomain(n)&&(i[l]=null!==(u=i[l])&&void 0!==u?u:{},i[l].min=new Set([Go({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Go({field:l,aggregate:"max"},{forAs:!0})]))}else Pf(o,n,t,e)})),o.size+I(i).length===0?null:new n(t,o,i)):null}},{key:"makeFromTransform",value:function(t,e){var r,i,o,s,u=new Set,c={},l=Object(a.a)(e.aggregate);try{for(l.s();!(s=l.n()).done;){var f=s.value,h=f.op,d=f.field,p=f.as;h&&("count"===h?(c["*"]=null!==(r=c["*"])&&void 0!==r?r:{},c["*"].count=new Set([p||Go(f,{forAs:!0})])):(c[d]=null!==(i=c[d])&&void 0!==i?i:{},c[d][h]=new Set([p||Go(f,{forAs:!0})])))}}catch(y){l.e(y)}finally{l.f()}var g,v=Object(a.a)(null!==(o=e.groupby)&&void 0!==o?o:[]);try{for(v.s();!(g=v.n()).done;){var m=g.value;u.add(m)}}catch(y){v.e(y)}finally{v.f()}return u.size+I(c).length===0?null:new n(t,u,c)}}]),n}(_c),zf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r,i,u){var c;Object(lt.a)(this,n),(c=e.call(this,t)).model=r,c.name=i,c.data=u;var l,f=Object(a.a)(ge);try{for(f.s();!(l=f.n()).done;){var h=l.value,d=r.facet[h];if(d){var p=d.bin,g=d.sort;c[h]=Object.assign({name:r.getName("".concat(h,"_domain")),fields:[Go(d)].concat(Object(s.a)(Ve(p)?[Go(d,{binSuffix:"end"})]:[]))},_o(g)?{sortField:g}:Object(o.A)(g)?{sortIndexField:Cl(d,h)}:{})}}}catch(v){f.e(v)}finally{f.f()}return c.childModel=r.child,c}return Object(ft.a)(n,[{key:"hash",value:function(){var t,e="Facet",n=Object(a.a)(ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;this[r]&&(e+=" ".concat(r.charAt(0),":").concat(S(this[r])))}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"dependentFields",value:function(){var t,e=new Set(this.fields),n=Object(a.a)(ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;this[r]&&(this[r].sortField&&e.add(this[r].sortField.field),this[r].sortIndexField&&e.add(this[r].sortIndexField))}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"producedFields",value:function(){return new Set}},{key:"getSource",value:function(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function(){var t,e={},n=Object(a.a)(Te);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this.childModel.component.scales[r];if(i&&!i.merged){var o=i.get("type"),s=i.get("range");if(zi(o)&&Hr(s)){var u=Oh(kh(this.childModel,r));u?e[r]=u:Or("Unknown field for ".concat(r,". Cannot calculate view size."))}}}}catch(c){n.e(c)}finally{n.f()}return e}},{key:"assembleRowColumnHeaderData",value:function(t,e,n){var r={row:"y",column:"x"}[t],i=[],o=[],a=[];n&&n[r]&&(e?(i.push("distinct_".concat(n[r])),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push("distinct_".concat(n[r])));var s=this[t],u=s.sortField,c=s.sortIndexField;if(u){var l=u.op,f=void 0===l?"min":l,h=u.field;i.push(h),o.push(f),a.push(Go(u,{forAs:!0}))}else c&&(i.push(c),o.push("max"),a.push(c));return{name:this[t].name,source:null!==e&&void 0!==e?e:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},i.length?{fields:i,ops:o,as:a}:{})]}}},{key:"assembleFacetHeaderData",value:function(t){var e,n,r,i=this.model.layout.columns,o=this.model.component.layoutHeaders,s=[],u={},c=Object(a.a)(Rl);try{for(c.s();!(r=c.n()).done;){var l,f=r.value,h=Object(a.a)(Dl);try{for(h.s();!(l=h.n()).done;){var d,p=l.value,g=null!==(e=o[f]&&o[f][p])&&void 0!==e?e:[],v=Object(a.a)(g);try{for(v.s();!(d=v.n()).done;){if((null===(n=d.value.axes)||void 0===n?void 0:n.length)>0){u[f]=!0;break}}}catch(x){v.e(x)}finally{v.f()}}}catch(x){h.e(x)}finally{h.f()}if(u[f]){var m='length(data("'.concat(this.facet.name,'"))'),y="row"===f?i?{signal:"ceil(".concat(m," / ").concat(i,")")}:1:i?{signal:"min(".concat(m,", ").concat(i,")")}:{signal:m};s.push({name:"".concat(this.facet.name,"_").concat(f),transform:[{type:"sequence",start:0,stop:y}]})}}}catch(x){c.e(x)}finally{c.f()}var b=u.row,w=u.column;return(b||w)&&s.unshift(this.assembleRowColumnHeaderData("facet",null,t)),s}},{key:"assemble",value:function(){var t,e,n=[],r=null,i=this.getChildIndependentFieldsWithStep(),o=this.column,a=this.row,u=this.facet;if(o&&a&&(i.x||i.y)){r="cross_".concat(this.column.name,"_").concat(this.row.name);var c=[].concat(null!==(t=i.x)&&void 0!==t?t:[],null!==(e=i.y)&&void 0!==e?e:[]),l=c.map((function(){return"distinct"}));n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:c,ops:l}]})}for(var f=0,h=[Yt,Kt];f<h.length;f++){var d=h[f];this[d]&&n.push(this.assembleRowColumnHeaderData(d,r,i))}if(u){var p=this.assembleFacetHeaderData(i);p&&n.push.apply(n,Object(s.a)(p))}return n}},{key:"fields",get:function(){var t,e,n=[],r=Object(a.a)(ge);try{for(r.s();!(e=r.n()).done;){var i=e.value;(null===(t=this[i])||void 0===t?void 0:t.fields)&&n.push.apply(n,Object(s.a)(this[i].fields))}}catch(o){r.e(o)}finally{r.f()}return n}}]),n}(_c);function Bf(t){return"'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]?t.slice(1,-1):t}function Uf(t,e){var n=H(t);if("number"===e)return"toNumber(".concat(n,")");if("boolean"===e)return"toBoolean(".concat(n,")");if("string"===e)return"toString(".concat(n,")");if("date"===e)return"toDate(".concat(n,")");if("flatten"===e)return n;if(0===e.indexOf("date:")){var i=Bf(e.slice(5,e.length));return"timeParse(".concat(n,",'").concat(i,"')")}if(0===e.indexOf("utc:")){var o=Bf(e.slice(4,e.length));return"utcParse(".concat(n,",'").concat(o,"')")}return Or(r.unrecognizedParse(e)),null}function Wf(t){var e={};return function t(e,n){if(y(e))t(e.not,n);else if(m(e)){var r,i=Object(a.a)(e.and);try{for(i.s();!(r=i.n()).done;){t(r.value,n)}}catch(u){i.e(u)}finally{i.f()}}else if(v(e)){var o,s=Object(a.a)(e.or);try{for(s.s();!(o=s.n()).done;){t(o.value,n)}}catch(u){s.e(u)}finally{s.f()}}else n(e)}(t.filter,(function(t){var n;if(ri(t)){var r=null;Yr(t)?r=t.equal:ti(t)?r=t.range[0]:ei(t)&&(r=(null!==(n=t.oneOf)&&void 0!==n?n:t.in)[0]),r&&(kr(r)?e[t.field]="date":Object(o.E)(r)?e[t.field]="number":Object(o.H)(r)&&(e[t.field]="string")),t.timeUnit&&(e[t.field]="date")}})),e}function Hf(t){var e={};function n(t){var n;ha(t)?e[t.field]="date":"quantitative"===t.type&&(n=t.aggregate,Object(o.H)(n)&&A(["min","max"],n))?e[t.field]="number":Q(t.field)>1?t.field in e||(e[t.field]="flatten"):Uo(t)&&_o(t.sort)&&Q(t.sort.field)>1&&(t.sort.field in e||(e[t.sort.field]="flatten"))}if((Uh(t)||Wh(t))&&t.forEachFieldDef((function(e,r){if(zo(e))n(e);else{var i=Oe(r),o=t.fieldDef(i);n(Object.assign(Object.assign({},e),{type:o.type}))}})),Uh(t)){var r=t.mark,i=t.markDef,a=t.encoding;if(At(r)&&!t.encoding.order){var s=a["horizontal"===i.orient?"y":"x"];Lo(s)&&"quantitative"===s.type&&!(s.field in e)&&(e[s.field]="number")}}return e}var Vf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t))._parse=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this._parse))}},{key:"hash",value:function(){return"Parse ".concat(S(this._parse))}},{key:"merge",value:function(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}},{key:"assembleFormatParse",value:function(){var t,e={},n=Object(a.a)(I(this._parse));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this._parse[r];1===Q(r)&&(e[r]=i)}}catch(o){n.e(o)}finally{n.f()}return e}},{key:"producedFields",value:function(){return new Set(I(this._parse))}},{key:"dependentFields",value:function(){return new Set(I(this._parse))}},{key:"assembleTransforms",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return I(this._parse).filter((function(t){return!e||Q(t)>1})).map((function(e){var n=Uf(e,t._parse[e]);return n?{type:"formula",expr:n,as:Y(e)}:null})).filter((function(t){return null!==t}))}},{key:"parse",get:function(){return this._parse}}],[{key:"makeExplicit",value:function(t,e,n){var r={},i=e.data;return!Su(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(t,r,{},n)}},{key:"makeWithAncestors",value:function(t,e,i,o){var s,u=Object(a.a)(I(i));try{for(u.s();!(s=u.n()).done;){var c=s.value,l=o.getWithExplicit(c);void 0!==l.value&&(l.explicit||l.value===i[c]||"derived"===l.value||"flatten"===i[c]?delete i[c]:Or(r.differentParse(c,i[c],l.value)))}}catch(x){u.e(x)}finally{u.f()}var f,h=Object(a.a)(I(e));try{for(h.s();!(f=h.n()).done;){var d=f.value,p=o.get(d);void 0!==p&&(p===e[d]?delete e[d]:Or(r.differentParse(d,e[d],p)))}}catch(x){h.e(x)}finally{h.f()}var g=new gu(e,i);o.copyAll(g);var v,m={},y=Object(a.a)(I(g.combine()));try{for(y.s();!(v=y.n()).done;){var b=v.value,w=g.get(b);null!==w&&(m[b]=w)}}catch(x){y.e(x)}finally{y.f()}return 0===I(m).length||o.parseNothing?null:new n(t,m)}}]),n}(_c),qf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t){return Object(lt.a)(this,n),e.call(this,t)}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null)}}]),Object(ft.a)(n,[{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set(["_vgsid_"])}},{key:"hash",value:function(){return"Identifier"}},{key:"assemble",value:function(){return{type:"identifier",as:"_vgsid_"}}}]),n}(_c),Gf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"addDimensions",value:function(t){this.transform.groupby=M(this.transform.groupby.concat(t),(function(t){return t}))}},{key:"dependentFields",value:function(){var t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map((function(t){return t.field})).filter((function(t){return void 0!==t})).forEach(t.add,t),t}},{key:"producedFields",value:function(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function(t){var e;return null!==(e=t.as)&&void 0!==e?e:Go(t)}},{key:"hash",value:function(){return"JoinAggregateTransform ".concat(S(this.transform))}},{key:"assemble",value:function(){var t,e=[],n=[],r=[],i=Object(a.a)(this.transform.joinaggregate);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push(o.op),r.push(this.getDefaultName(o)),e.push(void 0===o.field?null:o.field)}}catch(u){i.e(u)}finally{i.f()}var s=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:e},void 0!==s?{groupby:s}:{})}}]),n}(_c);var Kf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t))._stack=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this._stack))}},{key:"addDimensions",value:function(t){var e;(e=this._stack.facetby).push.apply(e,Object(s.a)(t))}},{key:"dependentFields",value:function(){var t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}},{key:"producedFields",value:function(){return new Set(this._stack.as)}},{key:"hash",value:function(){return"Stack ".concat(S(this._stack))}},{key:"getGroupbyFields",value:function(){var t=this._stack,e=t.dimensionFieldDef,n=t.impute,r=t.groupby;return e?e.bin?n?[Go(e,{binSuffix:"mid"})]:[Go(e,{}),Go(e,{binSuffix:"end"})]:[Go(e)]:null!==r&&void 0!==r?r:[]}},{key:"assemble",value:function(){var t=[],e=this._stack,n=e.facetby,r=e.dimensionFieldDef,i=e.stackField,o=e.stackby,a=e.sort,u=e.offset,c=e.impute,l=e.as;if(c&&r){var f=r.band,h=void 0===f?.5:f;r.bin&&t.push({type:"formula",expr:"".concat(h,"*")+Go(r,{expr:"datum"})+"+".concat(1-h,"*")+Go(r,{expr:"datum",binSuffix:"end"}),as:Go(r,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:i,groupby:[].concat(Object(s.a)(o),Object(s.a)(n)),key:Go(r,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[].concat(Object(s.a)(this.getGroupbyFields()),Object(s.a)(n)),field:i,sort:a,as:l,offset:u}),t}},{key:"stack",get:function(){return this._stack}}],[{key:"makeFromTransform",value:function(t,e){var r=e.stack,i=e.groupby,s=e.as,u=e.offset,c=void 0===u?"zero":u,l=[],f=[];if(void 0!==e.sort){var h,d=Object(a.a)(e.sort);try{for(d.s();!(h=d.n()).done;){var p=h.value;l.push(p.field),f.push(X(p.order,"ascending"))}}catch(g){d.e(g)}finally{d.f()}}return new n(t,{stackField:r,groupby:i,offset:c,sort:{field:l,order:f},facetby:[],as:function(t){return Object(o.A)(t)&&t.every((function(t){return Object(o.H)(t)}))&&t.length>1}(s)?s:Object(o.H)(s)?[s,s+"_end"]:[e.stack+"_start",e.stack+"_end"]})}},{key:"makeFromEncoding",value:function(t,e){var r=e.stack,i=e.encoding;if(!r)return null;var a,s=r.groupbyChannel,u=r.fieldChannel,c=r.offset,l=r.impute;s&&(a=oa(i[s]));var f,h=function(t){return t.stack.stackBy.reduce((function(t,e){var n=Go(e.fieldDef);return n&&t.push(n),t}),[])}(e),d=e.encoding.order;return f=Object(o.A)(d)||Lo(d)?Ea(d):h.reduce((function(t,e){return t.field.push(e),t.order.push("y"===u?"descending":"ascending"),t}),{field:[],order:[]}),new n(t,{dimensionFieldDef:a,stackField:e.vgField(u),facetby:[],stackby:h,sort:f,offset:c,impute:l,as:[e.vgField(u,{suffix:"start",forAs:!0}),e.vgField(u,{suffix:"end",forAs:!0})]})}}]),n}(_c),Yf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"addDimensions",value:function(t){this.transform.groupby=M(this.transform.groupby.concat(t),(function(t){return t}))}},{key:"dependentFields",value:function(){var t,e,n=new Set;return(null!==(t=this.transform.groupby)&&void 0!==t?t:[]).forEach(n.add,n),(null!==(e=this.transform.sort)&&void 0!==e?e:[]).forEach((function(t){return n.add(t.field)})),this.transform.window.map((function(t){return t.field})).filter((function(t){return void 0!==t})).forEach(n.add,n),n}},{key:"producedFields",value:function(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function(t){var e;return null!==(e=t.as)&&void 0!==e?e:Go(t)}},{key:"hash",value:function(){return"WindowTransform ".concat(S(this.transform))}},{key:"assemble",value:function(){var t,e,n=[],r=[],i=[],o=[],s=Object(a.a)(this.transform.window);try{for(s.s();!(e=s.n()).done;){var u=e.value;r.push(u.op),i.push(this.getDefaultName(u)),o.push(void 0===u.param?null:u.param),n.push(void 0===u.field?null:u.field)}}catch(y){s.e(y)}finally{s.f()}var c=this.transform.frame,l=this.transform.groupby;if(c&&null===c[0]&&null===c[1]&&r.every((function(t){return Wt(t)})))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:n},void 0!==l?{groupby:l}:{});var f=[],h=[];if(void 0!==this.transform.sort){var d,p=Object(a.a)(this.transform.sort);try{for(p.s();!(d=p.n()).done;){var g=d.value;f.push(g.field),h.push(null!==(t=g.order)&&void 0!==t?t:"ascending")}}catch(y){p.e(y)}finally{p.f()}}var v={field:f,order:h},m=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:o,as:i,ops:r,fields:n,sort:v},void 0!==m?{ignorePeers:m}:{}),void 0!==l?{groupby:l}:{}),void 0!==c?{frame:c}:{})}}]),n}(_c),Qf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return Object(ft.a)(n,[{key:"run",value:function(t){var e=t.parent;if(t instanceof Vf){if(Lf(e))return this.flags;if(e.numChildren()>1)return this.setContinue(),this.flags;if(e instanceof Vf)this.setMutated(),e.merge(t);else{if(L(e.producedFields(),t.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),t.swapWithParent()}}return this.setContinue(),this.flags}}]),n}(If),Xf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return Object(ft.a)(n,[{key:"mergeNodes",value:function(t,e){var n,r=e.shift(),i=Object(a.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.removeChild(o),o.parent=r,o.remove()}}catch(s){i.e(s)}finally{i.f()}}},{key:"run",value:function(t){for(var e=t.children.map((function(t){return t.hash()})),n={},r=0;r<e.length;r++)void 0===n[e[r]]?n[e[r]]=[t.children[r]]:n[e[r]].push(t.children[r]);var i,o=Object(a.a)(I(n));try{for(o.s();!(i=o.n()).done;){var s=i.value;n[s].length>1&&(this.setMutated(),this.mergeNodes(t,n[s]))}}catch(f){o.e(f)}finally{o.f()}var u,c=Object(a.a)(t.children);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.run(l)}}catch(f){c.e(f)}finally{c.f()}return this.mutatedFlag}}]),n}(Ff),Zf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return Object(ft.a)(n,[{key:"run",value:function(t){return t instanceof Oc||t.numChildren()>0||t instanceof zf||(this.setMutated(),t.remove()),this.flags}}]),n}(If),Jf=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){var t;return Object(lt.a)(this,n),(t=e.apply(this,arguments)).fields=new Set,t.prev=null,t}return Object(ft.a)(n,[{key:"run",value:function(t){if(this.setContinue(),t instanceof kc){var e=t.producedFields();R(e,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([].concat(Object(s.a)(this.fields),Object(s.a)(e))),this.prev=t}return this.flags}},{key:"reset",value:function(){this.fields.clear()}}]),n}(If),th=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return Object(ft.a)(n,[{key:"run",value:function(t){this.setContinue();var e,n=t.parent.children.filter((function(t){return t instanceof kc})),r=n.pop(),i=Object(a.a)(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;this.setMutated(),r.merge(o)}}catch(s){i.e(s)}finally{i.f()}return this.flags}}]),n}(If);function eh(t){if(t instanceof zf)if(1!==t.numChildren()||t.children[0]instanceof Oc){var e=t.model.component.data.main;!function t(e){if(e instanceof Oc&&e.type===ju&&1===e.numChildren()){var n=e.children[0];n instanceof zf||(n.swapWithParent(),t(e))}}(e);var n,r=(u=t,function t(e){if(!(e instanceof zf)){var n=e.clone();if(n instanceof Oc){var r=uh+n.getSource();n.setSource(r),u.model.component.data.outputNodes[r]=n}else(n instanceof $f||n instanceof Kf||n instanceof Yf||n instanceof Gf)&&n.addDimensions(u.fields);var i,o=Object(a.a)(e.children.flatMap(t));try{for(o.s();!(i=o.n()).done;)i.value.parent=n}catch(s){o.e(s)}finally{o.f()}return[n]}return e.children.flatMap(t)}),i=t.children.map(r).flat(),o=Object(a.a)(i);try{for(o.s();!(n=o.n()).done;){n.value.parent=e}}catch(c){o.e(c)}finally{o.f()}}else{var s=t.children[0];(s instanceof $f||s instanceof Kf||s instanceof Yf||s instanceof Gf)&&s.addDimensions(t.fields),s.swapWithParent(),eh(t)}else t.children.map(eh);var u}var nh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.call(this)}return Object(ft.a)(n,[{key:"run",value:function(t){t instanceof Oc&&!t.isRequired()&&(this.setMutated(),t.remove());var e,n=Object(a.a)(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.run(r)}}catch(i){n.e(i)}finally{n.f()}return this.mutatedFlag}}]),n}(Ff),rh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t){var r;return Object(lt.a)(this,n),(r=e.call(this)).requiresSelectionId=t&&rl(t),r}return Object(ft.a)(n,[{key:"run",value:function(t){t instanceof qf&&(this.requiresSelectionId&&(Lf(t.parent)||t.parent instanceof $f||t.parent instanceof Vf)||(this.setMutated(),t.remove()));var e,n=Object(a.a)(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.run(r)}}catch(i){n.e(i)}finally{n.f()}return this.mutatedFlag}}]),n}(Ff),ih=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return Object(ft.a)(n,[{key:"run",value:function(t){var e=t.parent,n=Object(s.a)(e.children),r=e.children.filter((function(t){return t instanceof Vf}));if(e.numChildren()>1&&r.length>=1){var i,o={},u=new Set,c=Object(a.a)(r);try{for(c.s();!(i=c.n()).done;){var l,f=i.value.parse,h=Object(a.a)(I(f));try{for(h.s();!(l=h.n()).done;){var d=l.value;d in o?o[d]!==f[d]&&u.add(d):o[d]=f[d]}}catch(O){h.e(O)}finally{h.f()}}}catch(O){c.e(O)}finally{c.f()}var p,g=Object(a.a)(u);try{for(g.s();!(p=g.n()).done;){delete o[p.value]}}catch(O){g.e(O)}finally{g.f()}if(!N(o)){this.setMutated();var v,m=new Vf(e,o),y=Object(a.a)(n);try{for(y.s();!(v=y.n()).done;){var b=v.value;if(b instanceof Vf){var w,x=Object(a.a)(I(o));try{for(x.s();!(w=x.n()).done;){var _=w.value;delete b.parse[_]}}catch(O){x.e(O)}finally{x.f()}}e.removeChild(b),b.parent=m,b instanceof Vf&&0===I(b.parse).length&&b.remove()}}catch(O){y.e(O)}finally{y.f()}}}return this.setContinue(),this.flags}}]),n}(If),oh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return Object(ft.a)(n,[{key:"run",value:function(t){var e,n=t.parent,r=n.children.filter((function(t){return t instanceof $f})),i={},o=Object(a.a)(r);try{for(o.s();!(e=o.n()).done;){var s=e.value,u=S(s.groupBy);u in i||(i[u]=[]),i[u].push(s)}}catch(v){o.e(v)}finally{o.f()}var c,l=Object(a.a)(I(i));try{for(l.s();!(c=l.n()).done;){var f=i[c.value];if(f.length>1){var h,d=f.pop(),p=Object(a.a)(f);try{for(p.s();!(h=p.n()).done;){var g=h.value;d.merge(g)&&(n.removeChild(g),g.parent=d,g.remove(),this.setMutated())}}catch(v){p.e(v)}finally{p.f()}}}}catch(v){l.e(v)}finally{l.f()}return this.setContinue(),this.flags}}]),n}(If),ah=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t){var r;return Object(lt.a)(this,n),(r=e.call(this)).model=t,r}return Object(ft.a)(n,[{key:"run",value:function(t){var e,n=t.parent,r=!(Lf(n)||n instanceof al||n instanceof Vf||n instanceof qf),i=[],o=[],s=Object(a.a)(n.children);try{for(s.s();!(e=s.n()).done;){var u=e.value;u instanceof jf&&(r&&!L(n.producedFields(),u.dependentFields())?i.push(u):o.push(u))}}catch(m){s.e(m)}finally{s.f()}if(i.length>0){var c,l=i.pop(),f=Object(a.a)(i);try{for(f.s();!(c=f.n()).done;){var h=c.value;l.merge(h,this.model.renameSignal.bind(this.model))}}catch(m){f.e(m)}finally{f.f()}this.setMutated(),n instanceof jf?n.merge(l,this.model.renameSignal.bind(this.model)):l.swapWithParent()}if(o.length>1){var d,p=o.pop(),g=Object(a.a)(o);try{for(g.s();!(d=g.n()).done;){var v=d.value;p.merge(v,this.model.renameSignal.bind(this.model))}}catch(m){g.e(m)}finally{g.f()}this.setMutated()}return this.setContinue(),this.flags}}]),n}(If),sh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return Object(ft.a)(n,[{key:"run",value:function(t){var e=t.parent,n=Object(s.a)(e.children);if(!C(n,(function(t){return t instanceof Oc}))||e.numChildren()<=1)return this.setContinue(),this.flags;var r,i,o=[],u=Object(a.a)(n);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(c instanceof Oc){for(var l=c;1===l.numChildren();){var f=l.children[0];if(!(f instanceof Oc))break;l=f}o.push.apply(o,Object(s.a)(l.children)),r?(e.removeChild(c),c.parent=r.parent,r.parent.removeChild(r),r.parent=l,this.setMutated()):r=l}else o.push(c)}}catch(g){u.e(g)}finally{u.f()}if(o.length){this.setMutated();var h,d=Object(a.a)(o);try{for(d.s();!(h=d.n()).done;){var p=h.value;p.parent.removeChild(p),p.parent=r}}catch(g){d.e(g)}finally{d.f()}}return this.setContinue(),this.flags}}]),n}(If),uh="scale_";function ch(t){var e=[];function n(t){if(0===t.numChildren())e.push(t);else{var r,i=Object(a.a)(t.children);try{for(i.s();!(r=i.n()).done;){n(r.value)}}catch(o){i.e(o)}finally{i.f()}}}var r,i=Object(a.a)(t);try{for(i.s();!(r=i.n()).done;){n(r.value)}}catch(o){i.e(o)}finally{i.f()}return e}function lh(t){return t}function fh(t,e){return e.map((function(e){if(t instanceof If){var n=t.optimizeNextFromLeaves(e);return t.reset(),n}return t.run(e)})).some(lh)}function hh(t,e){var n=t.sources,r=new Set;return r.add(fh(new nh,n)),r.add(fh(new rh(e),n)),n=n.filter((function(t){return t.numChildren()>0})),r.add(fh(new Zf,ch(n))),n=n.filter((function(t){return t.numChildren()>0})),r.add(fh(new Qf,ch(n))),r.add(fh(new ah(e),ch(n))),r.add(fh(new Jf,ch(n))),r.add(fh(new ih,ch(n))),r.add(fh(new oh,ch(n))),r.add(fh(new th,ch(n))),r.add(fh(new Xf,n)),r.add(fh(new sh,ch(n))),t.sources=n,r.has(!0)}function dh(t,e){Mf(t.sources);for(var n=0,r=0,i=0;i<5&&hh(t,e);i++)n++;t.sources.map(eh);for(var o=0;o<5&&hh(t,e);o++)r++;Mf(t.sources),5===Math.max(n,r)&&Or("Maximum optimization runs(".concat(5,") reached."))}var ph=function(){function t(e){Object(lt.a)(this,t),Object.defineProperty(this,"signal",{enumerable:!0,get:e})}return Object(ft.a)(t,null,[{key:"fromName",value:function(e,n){return new t((function(){return e(n)}))}}]),t}();function gh(t){Uh(t)?function(t){var e,n=t.component.scales,r=Object(a.a)(I(n));try{for(r.s();!(e=r.n()).done;){var i=e.value,o=vh(t,i);if(n[i].setWithExplicit("domains",o),wh(t,i),t.component.data.isFaceted){for(var s=t;!Wh(s)&&s.parent;)s=s.parent;if("shared"===s.component.resolve.scale[i]){var u,c=Object(a.a)(o.value);try{for(c.s();!(u=c.n()).done;){var l=u.value;Vr(l)&&(l.data=uh+l.data.replace(uh,""))}}catch(f){c.e(f)}finally{c.f()}}}}}catch(f){r.e(f)}finally{r.f()}}(t):function(t){var e,n=Object(a.a)(t.children);try{for(n.s();!(e=n.n()).done;){gh(e.value)}}catch(p){n.e(p)}finally{n.f()}var r,i=t.component.scales,o=Object(a.a)(I(i));try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=void 0,l=null,f=Object(a.a)(t.children);try{for(f.s();!(s=f.n()).done;){var h=s.value.component.scales[u];if(h){c=void 0===c?h.getWithExplicit("domains"):wu(c,h.getWithExplicit("domains"),"domains","scale",_h);var d=h.get("selectionExtent");l&&d&&l.selection!==d.selection&&Or("The same selection must be used to override scale domains in a layered view."),l=d}}}catch(p){f.e(p)}finally{f.f()}i[u].setWithExplicit("domains",c),l&&i[u].set("selectionExtent",l,!0)}}catch(p){o.e(p)}finally{o.f()}}(t)}function vh(t,e){var n=t.getScaleComponent(e).get("type"),r=t.encoding,i=function(t,e,n,r){if("unaggregated"===t){var i=xh(e,n),o=i.valid,a=i.reason;if(!o)return void Or(a)}else if(void 0===t&&r.useUnaggregatedDomain){if(xh(e,n).valid)return"unaggregated"}return t}(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return i!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign(Object.assign({},t.specifiedScales[e]),{domain:i})),"x"===e&&aa(r.x2)?aa(r.x)?wu(yh(n,i,t,"x"),yh(n,i,t,"x2"),"domain","scale",_h):yh(n,i,t,"x2"):"y"===e&&aa(r.y2)?aa(r.y)?wu(yh(n,i,t,"y"),yh(n,i,t,"y2"),"domain","scale",_h):yh(n,i,t,"y2"):yh(n,i,t,e)}function mh(t,e,n){var r,i=null===(r=Br(n))||void 0===r?void 0:r.unit;return"temporal"===e||i?function(t,e,n){return t.map((function(t){var r=da(t,{timeUnit:n,type:e});return{signal:"{data: ".concat(r,"}")}}))}(t,e,i):[t]}function yh(t,e,n,r){var i=aa(n.encoding[r]),a=i.type,u=i.timeUnit;if(function(t){return t&&t.unionWith}(e)){var c=yh(t,void 0,n,r),l=mh(e.unionWith,a,u);return vu([].concat(Object(s.a)(c.value),Object(s.a)(l)))}if(Wr(e))return vu([e]);if(e&&"unaggregated"!==e&&!Hi(e))return vu(mh(e,a,u));var f=n.stack;if(f&&r===f.fieldChannel){if("normalize"===f.offset)return mu([[0,1]]);var h=n.requestDataName(ju);return mu([{data:h,field:n.vgField(r,{suffix:"start"})},{data:h,field:n.vgField(r,{suffix:"end"})}])}var d=$e(r)&&Lo(i)?function(t,e,n){if(!zi(n))return;var r=t.fieldDef(e),i=r.sort;if(Oo(i))return{op:"min",field:Cl(r,e),order:"ascending"};var o=t.stack,a=o?[].concat(Object(s.a)(o.groupbyField?[o.groupbyField]:[]),Object(s.a)(o.stackBy.map((function(t){return t.fieldDef.field})))):void 0;if(_o(i)){var u=o&&!A(a,i.field);return bh(i,u)}if(xo(i)){var c=i.encoding,l=i.order,f=t.fieldDef(c),h=f.aggregate,d=f.field,p=o&&!A(a,d);if(Bt(h)||Ut(h))return bh({field:Go(f),order:l},p);if(Wt(h)||!h)return bh({op:h,field:d,order:l},p)}else{if("descending"===i)return{op:"min",field:t.vgField(e),order:"descending"};if(A(["ascending",void 0],i))return!0}return}(n,r,t):void 0;if(Io(i))return mu(mh([i.datum],a,u));var p=i;if("unaggregated"===e){var g=n.requestDataName(ju),v=i.field;return mu([{data:g,field:Go({field:v,aggregate:"min"})},{data:g,field:Go({field:v,aggregate:"max"})}])}if(Ve(p.bin)){if(zi(t))return mu("bin-ordinal"===t?[]:[{data:$(d)?n.requestDataName(ju):n.requestDataName("raw"),field:n.vgField(r,ga(p,r)?{binSuffix:"range"}:{}),sort:!0!==d&&Object(o.F)(d)?d:{field:n.vgField(r,{}),op:"min"}}]);var m=p.bin;if(Ve(m)){var y=Af(n,p.field,m);return mu([new ph((function(){var t=n.getSignalName(y);return"[".concat(t,".start, ").concat(t,".stop]")}))])}return mu([{data:n.requestDataName(ju),field:n.vgField(r,{})}])}if(p.timeUnit&&A(["time","utc"],t)&&To(r,p,Uh(n)?n.encoding[Se(r)]:void 0,n.stack,n.markDef,n.config)){var b=n.requestDataName(ju);return mu([{data:b,field:n.vgField(r)},{data:b,field:n.vgField(r,{suffix:"end"})}])}return mu(d?[{data:$(d)?n.requestDataName(ju):n.requestDataName("raw"),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(ju),field:n.vgField(r)}])}function bh(t,e){var n=t.op,r=t.field,i=t.order;return Object.assign(Object.assign({op:null!==n&&void 0!==n?n:e?"sum":"min"},r?{field:G(r)}:{}),i?{order:i}:{})}function wh(t,e){var n,r=t.component.scales[e],i=t.specifiedScales[e].domain,o=null===(n=t.fieldDef(e))||void 0===n?void 0:n.bin,a=Hi(i)&&i,s=Ge(o)&&Ke(o.extent)&&o.extent;(a||s)&&r.set("selectionExtent",null!==a&&void 0!==a?a:s,!0)}function xh(t,e){var n=t.aggregate,i=t.type;return n?Object(o.H)(n)&&!Gt[n]?{valid:!1,reason:r.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===i&&"log"===e?{valid:!1,reason:r.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:r.unaggregateDomainHasNoEffectForRawField(t)}}function _h(t,e,n,i){return t.explicit&&e.explicit&&Or(r.mergeConflictingDomainProperty(n,i,t.value,e.value)),{explicit:t.explicit,value:[].concat(Object(s.a)(t.value),Object(s.a)(e.value))}}function Oh(t){if(Vr(t)&&Object(o.H)(t.field))return t.field;if(function(t){return!Object(o.A)(t)&&("fields"in t&&!("data"in t))}(t)){var e,n,i=Object(a.a)(t.fields);try{for(i.s();!(n=i.n()).done;){var s=n.value;if(Vr(s)&&Object(o.H)(s.field))if(e){if(e!==s.field)return Or(r.FACETED_INDEPENDENT_DIFFERENT_SOURCES),e}else e=s.field}}catch(c){i.e(c)}finally{i.f()}return Or(r.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),e}if(function(t){return!Object(o.A)(t)&&("fields"in t&&"data"in t)}(t)){Or(r.FACETED_INDEPENDENT_SAME_SOURCE);var u=t.fields[0];return Object(o.H)(u)?u:void 0}}function kh(t,e){return function(t){var e=M(t.map((function(t){if(Vr(t)){t.sort;return u(t,["sort"])}return t})),S),n=M(t.map((function(t){if(Vr(t)){var e=t.sort;return void 0===e||$(e)||("op"in e&&"count"===e.op&&delete e.field,"ascending"===e.order&&delete e.order),e}})).filter((function(t){return void 0!==t})),S);if(0!==e.length){if(1===e.length){var i=t[0];if(Vr(i)&&n.length>0){var a=n[0];if(n.length>1)Or(r.MORE_THAN_ONE_SORT),a=!0;else if(Object(o.F)(a)&&"field"in a){var s=a.field;i.field===s&&(a=!a.order||{order:a.order})}return Object.assign(Object.assign({},i),{sort:a})}return i}var c,l=M(n.map((function(t){return $(t)||!("op"in t)||t.op in zt?t:(Or(r.domainSortDropped(t)),!0)})),S);1===l.length?c=l[0]:l.length>1&&(Or(r.MORE_THAN_ONE_SORT),c=!0);var f=M(t.map((function(t){return Vr(t)?t.data:null})),(function(t){return t}));return 1===f.length&&null!==f[0]?Object.assign({data:f[0],fields:e.map((function(t){return t.field}))},c?{sort:c}:{}):Object.assign({fields:e},c?{sort:c}:{})}}(t.component.scales[e].get("domains").map((function(e){return Vr(e)&&(e.data=t.lookupDataSource(e.data)),e})))}function Sh(t){return Vh(t)||Hh(t)?t.children.reduce((function(t,e){return t.concat(Sh(e))}),Eh(t)):Eh(t)}function Eh(t){return I(t.component.scales).reduce((function(e,n){var r=t.component.scales[n];if(r.merged)return e;var i,o=r.combine(),a=o.name,s=o.type,c=o.selectionExtent,l=(o.domains,o.range,o.reverse),f=u(o,["name","type","selectionExtent","domains","range","reverse"]),h=function(t,e,n){if(Me(n)&&Hr(t))return{step:{signal:e+"_step"}};return t}(o.range,a,n);c&&(i=function(t,e){var n=e.selection;return{signal:ul(t.getSelectionComponent(n,z(n)),e)}}(t,c));var d=kh(t,n);return e.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:a,type:s},d?{domain:d}:{}),i?{domainRaw:i}:{}),{range:h}),void 0!==l?{reverse:l}:{}),f)),e}),[])}var Ah=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,{},{name:t})).merged=!1,i.setWithExplicit("type",r),i}return Object(ft.a)(n,[{key:"domainDefinitelyIncludesZero",value:function(){return!1!==this.get("zero")||C(this.get("domains"),(function(t){return Object(o.A)(t)&&2===t.length&&t[0]<=0&&t[1]>=0}))}}]),n}(gu),Ch=["range","scheme"];function jh(t){return"x"===t?"width":"y"===t?"height":void 0}function Th(t,e){var n=t.fieldDef(e);if(n&&n.bin&&Ve(n.bin)){var r=Af(t,n.field,n.bin),i=jh(e),o=t.getName(i);return new ph((function(){var e=t.getSignalName(r),n="(".concat(e,".stop - ").concat(e,".start) / ").concat(e,".step");return"".concat(t.getSignalName(o)," / (").concat(n,")")}))}}function Mh(t,e){var n,i=e.specifiedScales[t],s=e.size,u=e.getScaleComponent(t).get("type"),c=Object(a.a)(Ch);try{for(c.s();!(n=c.n()).done;){var l=n.value;if(void 0!==i[l]){var f=Ki(u,l),h=Yi(t,l);if(f)if(h)Or(h);else switch(l){case"range":return Object(o.A)(i.range)&&Me(t)?vu(i.range.map((function(t){if("width"===t||"height"===t){var n=e.getName(t),r=e.getSignalName.bind(e);return ph.fromName(r,n)}return t}))):vu(i.range);case"scheme":return vu(Rh(i[l]))}else Or(r.scalePropertyNotWorkWithScaleType(u,l,t))}}}catch(g){c.e(g)}finally{c.f()}if(t===Qt||t===Xt){var d=t===Qt?"width":"height",p=s[d];if(ps(p)){if(zi(u))return vu({step:p.step});Or(r.stepDropped(d))}}return mu(function(t,e){var n=e.size,i=e.config,a=e.mark,s=e.encoding,u=e.getSignalName.bind(e),c=aa(s[t]).type,l=e.getScaleComponent(t).get("type"),f=e.specifiedScales[t],h=f.domain,d=f.domainMid;switch(t){case Qt:case Xt:if(A(["point","band"],l))if(t!==Qt||n.width){if(t===Xt&&!n.height){var p=bs(i.view,"height");if(ps(p))return p}}else{var g=bs(i.view,"width");if(ps(g))return g}var v=jh(t),m=e.getName(v);return t===Xt&&Bi(l)?[ph.fromName(u,m),0]:[0,ph.fromName(u,m)];case se:var y=e.component.scales[t].get("zero"),b=function t(e,n,i){if(n)return Wr(n)?{signal:"".concat(n.signal," ? 0 : ").concat(t(e,!1,i))}:0;switch(e){case"bar":case"tick":return i.scale.minBandSize;case"line":case"trail":case"rule":return i.scale.minStrokeWidth;case"text":return i.scale.minFontSize;case"point":case"square":case"circle":return i.scale.minSize}throw new Error(r.incompatibleChannel("size",e))}(a,y,i),w=function(t,e,n,i){var a={x:Th(n,"x"),y:Th(n,"y")};switch(t){case"bar":case"tick":if(void 0!==i.scale.maxBandSize)return i.scale.maxBandSize;var s=Dh(e,a,i.view);return Object(o.E)(s)?s-1:new ph((function(){return"".concat(s.signal," - 1")}));case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":if(i.scale.maxSize)return i.scale.maxSize;var u=Dh(e,a,i.view);return Object(o.E)(u)?Math.pow(.95*u,2):new ph((function(){return"pow(".concat(.95," * ").concat(u.signal,", 2)")}))}throw new Error(r.incompatibleChannel("size",t))}(a,n,e,i);return Wi(l)?function(t,e,n){var r=function(){var r=wa(e),i=wa(t),o="(".concat(r," - ").concat(i,") / (").concat(n," - 1)");return"sequence(".concat(i,", ").concat(r," + ").concat(o,", ").concat(o,")")};return Wr(e)?new ph(r):{signal:r()}}(b,w,function(t,e,n,i){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return void 0!==n&&Object(o.A)(n)?n.length+1:(Or(r.domainRequiredForThresholdScale(i)),3)}}(l,i,h,t)):[b,w];case ee:return[0,2*Math.PI];case"angle":return[0,360];case te:return[0,new ph((function(){var t=e.getSignalName("width"),n=e.getSignalName("height");return"min(".concat(t,",").concat(n,")/2")}))];case"strokeWidth":return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case"strokeDash":return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ae:return"symbol";case re:case ie:case oe:return"ordinal"===l?"nominal"===c?"category":"ordinal":void 0!==d?"diverging":"rect"===a||"geoshape"===a?"heatmap":"ramp";case"opacity":case"fillOpacity":case"strokeOpacity":return[i.scale.minOpacity,i.scale.maxOpacity]}throw new Error("Scale range undefined for channel ".concat(t))}(t,e))}function Rh(t){return function(t){return!Object(o.H)(t)&&!!t.name}(t)?Object.assign({scheme:t.name},O(t,["name"])):{scheme:t}}function Dh(t,e,n){var r=ps(t.width)?t.width.step:ys(n,"width"),i=ps(t.height)?t.height.step:ys(n,"height");return e.x||e.y?new ph((function(){var t=[e.x?e.x.signal:r,e.y?e.y.signal:i];return"min(".concat(t.join(", "),")")})):Math.min(r,i)}function Lh(t,e){Uh(t)?function(t,e){var n,i=t.component.scales,o=t.config,s=t.encoding,u=t.markDef,c=t.specifiedScales,l=Object(a.a)(I(i));try{for(l.s();!(n=l.n()).done;){var f=n.value,h=c[f],d=i[f],p=t.getScaleComponent(f),g=aa(s[f]),v=h[e],m=p.get("type"),y=p.get("padding"),b=p.get("paddingInner"),w=Ki(m,e),x=Yi(f,e);if(void 0!==v&&(w?x&&Or(x):Or(r.scalePropertyNotWorkWithScaleType(m,e,f))),w&&void 0===x)if(void 0!==v)d.copyKeyFromObject(e,h);else{var _=e in Nh?Nh[e]({model:t,channel:f,fieldOrDatumDef:g,scaleType:m,scalePadding:y,scalePaddingInner:b,domain:h.domain,markDef:u,config:o}):o.scale[e];void 0!==_&&d.set(e,_,!1)}}}catch(O){l.e(O)}finally{l.f()}}(t,e):Fh(t,e)}var Nh={bins:function(t){var e=t.model,n=t.fieldOrDatumDef;return Lo(n)?function(t,e){var n=e.bin;if(Ve(n)){var r=Af(t,e.field,n);return new ph((function(){return t.getSignalName(r)}))}if(qe(n)&&Ge(n)&&void 0!==n.step)return{step:n.step};return}(e,n):void 0},interpolate:function(t){return function(t,e){if(A([re,ie,oe],t)&&"nominal"!==e)return"hcl";return}(t.channel,t.fieldOrDatumDef.type)},nice:function(t){return function(t,e,n){var r;if((null===(r=oa(n))||void 0===r?void 0:r.bin)||A([xi,_i],t))return;return e in je||void 0}(t.scaleType,t.channel,t.fieldOrDatumDef)},padding:function(t){var e=t.channel,n=t.scaleType,r=t.fieldOrDatumDef,i=t.markDef,o=t.config;return function(t,e,n,r,i,o){if(t in je){if(Ui(e)){if(void 0!==n.continuousPadding)return n.continuousPadding;var a=i.type,s=i.orient;if("bar"===a&&(!Lo(r)||!r.bin&&!r.timeUnit)&&("vertical"===s&&"x"===t||"horizontal"===s&&"y"===t))return o.continuousBandSize}if(e===Ei)return n.pointPadding}return}(e,n,o.scale,r,i,o.bar)},paddingInner:function(t){var e=t.scalePadding,n=t.channel,r=t.markDef,i=t.config;return function(t,e,n,r){if(void 0!==t)return;if(e in je){var i=r.bandPaddingInner,o=r.barBandPaddingInner,a=r.rectBandPaddingInner;return X(i,"bar"===n?o:a)}return}(e,n,r.type,i.scale)},paddingOuter:function(t){var e=t.scalePadding,n=t.channel,r=t.scaleType,i=t.markDef,o=t.scalePaddingInner,a=t.config;return function(t,e,n,r,i,o){if(void 0!==t)return;if(e in je){if(n===Ai)return X(o.bandPaddingOuter,Wr(i)?{signal:"".concat(i.signal,"/2")}:i/2)}return}(e,n,r,i.type,o,a.scale)},reverse:function(t){var e=t.fieldOrDatumDef,n=t.scaleType,r=t.channel,i=t.config;return function(t,e,n,r){if("x"===n&&void 0!==r.xReverse)return Bi(t)&&"descending"===e?Wr(r.xReverse)?{signal:"!".concat(r.xReverse.signal)}:!r.xReverse:r.xReverse;if(Bi(t)&&"descending"===e)return!0;return}(n,Lo(e)?e.sort:void 0,r,i.scale)},zero:function(t){return function(t,e,n,r,i){if(n&&"unaggregated"!==n&&Bi(i)){if(Object(o.A)(n)){var a=n[0],u=n[n.length-1];if(a<=0&&u>=0)return!0}return!1}if("size"===t&&"quantitative"===e.type&&!Wi(i))return!0;if((!Lo(e)||!e.bin)&&A([].concat(Object(s.a)(Te),Object(s.a)(De)),t)){var c=r.orient;return!A(["bar","area","line","trail"],r.type)||!("horizontal"===c&&"y"===t||"vertical"===c&&"x"===t)}return!1}(t.channel,t.fieldOrDatumDef,t.domain,t.markDef,t.scaleType)}};function Ih(t){Uh(t)?function(t){var e,n=t.component.scales,r=Object(a.a)(Pe);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=n[i];if(o){var s=Mh(i,t);o.setWithExplicit("range",s)}}}catch(u){r.e(u)}finally{r.f()}}(t):Fh(t,"range")}function Fh(t,e){var n,r=t.component.scales,i=Object(a.a)(t.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;"range"===e?Ih(o):Lh(o,e)}}catch(p){i.e(p)}finally{i.f()}var s,u=Object(a.a)(I(r));try{for(u.s();!(s=u.n()).done;){var c,l=s.value,f=void 0,h=Object(a.a)(t.children);try{for(h.s();!(c=h.n()).done;){var d=c.value.component.scales[l];if(d)f=wu(f,d.getWithExplicit(e),e,"scale",yu((function(t,n){switch(e){case"range":return t.step&&n.step?t.step-n.step:0}return 0})))}}catch(p){h.e(p)}finally{h.f()}r[l].setWithExplicit(e,f)}}catch(p){u.e(p)}finally{u.f()}}function Ph(t,e,n,i){var o=function(t,e,n){var i;switch(e.type){case"nominal":case"ordinal":if(de(t)||"discrete"===We(t))return"shape"===t&&"ordinal"===e.type&&Or(r.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(t in je){if(A(["rect","bar","image","rule"],n))return"band"}else if("arc"===n&&t in Re)return"band";return void 0!==e.band||Wo(e)&&(null===(i=e.axis)||void 0===i?void 0:i.tickBand)?"band":"point";case"temporal":return de(t)?"time":"discrete"===We(t)?(Or(r.discreteChannelCannotEncode(t,"temporal")),"ordinal"):Lo(e)&&e.timeUnit&&Br(e.timeUnit).utc?"utc":"time";case"quantitative":return de(t)?Lo(e)&&Ve(e.bin)?"bin-ordinal":"linear":"discrete"===We(t)?(Or(r.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(r.invalidFieldType(e.type))}(e,n,i),a=t.type;return $e(e)?void 0!==a?Xi(e,a)?Lo(n)&&!Qi(a,n.type)?(Or(r.scaleTypeNotWorkWithFieldDef(a,o)),o):a:(Or(r.scaleTypeNotWorkWithChannel(e,a,o)),o):o:null}function $h(t){Uh(t)?t.component.scales=function(t){var e=t.encoding,n=t.mark;return Pe.reduce((function(r,i){var o=aa(e[i]);if(o&&n===Et&&i===ae&&o.type===pi)return r;var a=o&&o.scale;if(o&&null!==a&&!1!==a){var s=Ph(a=null!==a&&void 0!==a?a:{},i,o,n);r[i]=new Ah(t.scaleName(i+"",!0),{value:s,explicit:a.type===s})}return r}),{})}(t):t.component.scales=function(t){var e,n,r=t.component.scales={},i={},o=t.component.resolve,s=Object(a.a)(t.children);try{for(s.s();!(n=s.n()).done;){var u=n.value;$h(u);var c,l=Object(a.a)(I(u.component.scales));try{for(l.s();!(c=l.n()).done;){var f=c.value;if(o.scale[f]=null!==(e=o.scale[f])&&void 0!==e?e:Ql(f,t),"shared"===o.scale[f]){var h=i[f],d=u.component.scales[f].getWithExplicit("type");h?Ti(h.value,d.value)?i[f]=wu(h,d,"type","scale",zh):(o.scale[f]="independent",delete i[f]):i[f]=d}}}catch(O){l.e(O)}finally{l.f()}}}catch(O){s.e(O)}finally{s.f()}var p,g=Object(a.a)(I(i));try{for(g.s();!(p=g.n()).done;){var v=p.value,m=t.scaleName(v,!0),y=i[v];r[v]=new Ah(m,y);var b,w=Object(a.a)(t.children);try{for(w.s();!(b=w.n()).done;){var x=b.value,_=x.component.scales[v];_&&(x.renameScale(_.get("name"),m),_.merged=!0)}}catch(O){w.e(O)}finally{w.f()}}}catch(O){g.e(O)}finally{g.f()}return r}(t)}var zh=yu((function(t,e){return Ri(t)-Ri(e)}));var Bh=function(){function t(){Object(lt.a)(this,t),this.nameMap={}}return Object(ft.a)(t,[{key:"rename",value:function(t,e){this.nameMap[t]=e}},{key:"has",value:function(t){return void 0!==this.nameMap[t]}},{key:"get",value:function(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}]),t}();function Uh(t){return"unit"===(null===t||void 0===t?void 0:t.type)}function Wh(t){return"facet"===(null===t||void 0===t?void 0:t.type)}function Hh(t){return"concat"===(null===t||void 0===t?void 0:t.type)}function Vh(t){return"layer"===(null===t||void 0===t?void 0:t.type)}var qh=function(){function t(e,n,r,i,s,u,c){var l,f,h=this;Object(lt.a)(this,t),this.type=n,this.parent=r,this.config=s,this.view=c,this.children=[],this.correctDataNames=function(t){return t.from&&t.from.data&&(t.from.data=h.lookupDataSource(t.from.data)),t.from&&t.from.facet&&t.from.facet.data&&(t.from.facet.data=h.lookupDataSource(t.from.facet.data)),t},this.parent=r,this.config=s,this.name=null!==(l=e.name)&&void 0!==l?l:i,this.title=ma(e.title)?{text:e.title}:e.title,this.scaleNameMap=r?r.scaleNameMap:new Bh,this.projectionNameMap=r?r.projectionNameMap:new Bh,this.signalNameMap=r?r.signalNameMap:new Bh,this.data=e.data,this.description=e.description,this.transforms=(null!==(f=e.transform)&&void 0!==f?f:[]).map((function(t){return Tu(t)?{filter:b(t.filter,ui)}:t})),this.layout="layer"===n||"unit"===n?{}:function(t,e,n){var r,i,s=n[e],u={},c=s.spacing,l=s.columns;void 0!==c&&(u.spacing=c),void 0!==l&&(Eo(t)&&!ko(t.facet)||fs(t))&&(u.columns=l),hs(t)&&(u.columns=1);var f,h=Object(a.a)(vs);try{for(h.s();!(f=h.n()).done;){var d=f.value;if(void 0!==t[d])if("spacing"===d){var p=t[d];u[d]=Object(o.E)(p)?p:{row:null!==(r=p.row)&&void 0!==r?r:c,column:null!==(i=p.column)&&void 0!==i?i:c}}else u[d]=t[d]}}catch(g){h.e(g)}finally{h.f()}return u}(e,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Eo(e)||r&&r.component.data.isFaceted&&void 0===e.data},layoutSize:new gu,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},u?x(u):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object(ft.a)(t,[{key:"parse",value:function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function(){!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.ignoreRange;$h(t),gh(t);var r,i=Object(a.a)(Gi);try{for(i.s();!(r=i.n()).done;){var o=r.value;Lh(t,o)}}catch(s){i.e(s)}finally{i.f()}n||Ih(t)}(this)}},{key:"parseProjection",value:function(){xf(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function(){ff(this)}},{key:"assembleGroupStyle",value:function(){var t,e;if("unit"===this.type||"layer"===this.type)return null!==(e=null===(t=this.view)||void 0===t?void 0:t.style)&&void 0!==e?e:"cell"}},{key:"assembleEncodeFromView",value:function(t){t.style;var e,n=u(t,["style"]),r={},i=Object(a.a)(I(n));try{for(i.s();!(e=i.n()).done;){var o=e.value,s=n[o];void 0!==s&&(r[o]=ya(s))}}catch(c){i.e(c)}finally{i.f()}return r}},{key:"assembleGroupEncodeEntry",value:function(t){var e={};return this.view&&(e=this.assembleEncodeFromView(this.view)),t||(this.description&&(e.description=ya(this.description)),"unit"!==this.type&&"layer"!==this.type)?N(e)?void 0:e:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==e&&void 0!==e?e:{})}},{key:"assembleLayout",value:function(){if(this.layout){var t=this.layout,e=t.spacing,n=u(t,["spacing"]),r=this.component,i=this.config,o=function(t,e){var n,r={},i=Object(a.a)(ge);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=t[o];if(null===s||void 0===s?void 0:s.facetFieldDef){var u=Ml(["titleAnchor","titleOrient"],s.facetFieldDef,e,o),c=u.titleAnchor,l=jl(o,u.titleOrient),f=Ul(c,l);void 0!==f&&(r[l]=f)}}}catch(h){i.e(h)}finally{i.f()}return N(r)?void 0:r}(r.layoutHeaders,i);return Object.assign(Object.assign(Object.assign({padding:e},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}}},{key:"assembleDefaultLayout",value:function(){return{}}},{key:"assembleHeaderMarks",value:function(){var t,e=this.component.layoutHeaders,n=[],r=Object(a.a)(ge);try{for(r.s();!(t=r.n()).done;){var i=t.value;e[i].title&&n.push(Ll(this,i))}}catch(c){r.e(c)}finally{r.f()}var o,s=Object(a.a)(Rl);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.concat(Fl(this,u))}}catch(c){s.e(c)}finally{s.f()}return n}},{key:"assembleAxes",value:function(){return function(t,e){var n=t.x,r=void 0===n?[]:n,i=t.y,o=void 0===i?[]:i;return[].concat(Object(s.a)(r.map((function(t){return hl(t,"grid",e)}))),Object(s.a)(o.map((function(t){return hl(t,"grid",e)}))),Object(s.a)(r.map((function(t){return hl(t,"main",e)}))),Object(s.a)(o.map((function(t){return hl(t,"main",e)})))).filter((function(t){return t}))}(this.component.axes,this.config)}},{key:"assembleLegends",value:function(){return vf(this)}},{key:"assembleProjections",value:function(){return mf(this)}},{key:"assembleTitle",value:function(){var t,e,n,r=null!==(t=this.title)&&void 0!==t?t:{},i=r.encoding,o=u(r,["encoding"]),a=Object.assign(Object.assign(Object.assign({},va(this.config.title).nonMark),o),i?{encode:{update:i}}:{});if(a.text)return A(["unit","layer"],this.type)?A(["middle",void 0],a.anchor)&&(a.frame=null!==(e=a.frame)&&void 0!==e?e:"group"):a.anchor=null!==(n=a.anchor)&&void 0!==n?n:"start",N(a)?void 0:a}},{key:"assembleGroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};(t=t.concat(this.assembleSignals())).length>0&&(e.signals=t);var n=this.assembleLayout();n&&(e.layout=n),e.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||Wh(this.parent)?Sh(this):[];r.length>0&&(e.scales=r);var i=this.assembleAxes();i.length>0&&(e.axes=i);var o=this.assembleLegends();return o.length>0&&(e.legends=o),e}},{key:"getName",value:function(t){return z((this.name?this.name+"_":"")+t)}},{key:"requestDataName",value:function(t){var e,n=this.getName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(null!==(e=r[n])&&void 0!==e?e:0)+1,n}},{key:"getSizeSignalRef",value:function(t){if(Wh(this.parent)){var e=Le(Kl(t)),n=this.component.scales[e];if(n&&!n.merged){var r=n.get("type"),i=n.get("range");if(zi(r)&&Hr(i)){var o=n.get("name"),a=Oh(kh(this,e));return a?{signal:Gl(o,n,Go({aggregate:"distinct",field:a},{expr:"datum"}))}:(Or("Unknown field for ".concat(e,". Cannot calculate view size.")),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}},{key:"lookupDataSource",value:function(t){var e=this.component.data.outputNodes[t];return e?e.getSource():t}},{key:"getSignalName",value:function(t){return this.signalNameMap.get(t)}},{key:"renameSignal",value:function(t,e){this.signalNameMap.rename(t,e)}},{key:"renameScale",value:function(t,e){this.scaleNameMap.rename(t,e)}},{key:"renameProjection",value:function(t,e){this.projectionNameMap.rename(t,e)}},{key:"scaleName",value:function(t,e){return e?this.getName(t):we(t)&&$e(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}},{key:"projectionName",value:function(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");var e=this.component.scales[t];return e&&!e.merged?e:this.parent?this.parent.getScaleComponent(t):void 0}},{key:"getSelectionComponent",value:function(t,e){var n=this.component.selection[t];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(t,e)),!n)throw new Error(r.selectionNotFound(e));return n}},{key:"hasAxisOrientSignalRef",value:function(){var t,e;return(null===(t=this.component.axes.x)||void 0===t?void 0:t.some((function(t){return t.hasOrientSignalRef()})))||(null===(e=this.component.axes.y)||void 0===e?void 0:e.some((function(t){return t.hasOrientSignalRef()})))}},{key:"width",get:function(){return this.getSizeSignalRef("width")}},{key:"height",get:function(){return this.getSizeSignalRef("height")}}]),t}(),Gh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return Object(ft.a)(n,[{key:"vgField",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fieldDef(t);if(n)return Go(n,e)}},{key:"reduceFieldDef",value:function(t,e){return Ia(this.getMapping(),(function(e,n,r){var i=oa(n);return i?t(e,i,r):e}),e)}},{key:"forEachFieldDef",value:function(t,e){Na(this.getMapping(),(function(e,n){var r=oa(e);r&&t(r,n)}),e)}}]),n}(qh),Kh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i,o,a,s;Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i.transform=x(r);var u=null!==(o=i.transform.as)&&void 0!==o?o:[void 0,void 0];return i.transform.as=[null!==(a=u[0])&&void 0!==a?a:"value",null!==(s=u[1])&&void 0!==s?s:"density"],i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.density].concat(Object(s.a)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"DensityTransform ".concat(S(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.density,n=u(t,["density"]);return Object.assign({type:"kde",field:e},n)}}]),n}(_c),Yh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).filter=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,Object.assign({},this.filter))}},{key:"dependentFields",value:function(){return new Set(I(this.filter))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"FilterInvalid ".concat(S(this.filter))}},{key:"assemble",value:function(){var t=this,e=I(this.filter).reduce((function(e,n){var r=t.filter[n],i=Go(r,{expr:"datum"});return null!==r&&("temporal"===r.type?e.push("(isDate(".concat(i,") || (isValid(").concat(i,") && isFinite(+").concat(i,")))")):"quantitative"===r.type&&(e.push("isValid(".concat(i,")")),e.push("isFinite(+".concat(i,")")))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}],[{key:"make",value:function(t,e){var r=e.config,i=e.mark;if("filter"!==_a("invalid",e.markDef,r))return null;var o=e.reduceFieldDef((function(t,n,r){var o=$e(r)&&e.getScaleComponent(r);o&&(Bi(o.get("type"))&&"count"!==n.aggregate&&!At(i)&&(t[n.field]=n));return t}),{});return I(o).length?new n(t,o):null}}]),n}(_c),Qh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i.transform=x(r);var o=i.transform,a=o.flatten,s=o.as,u=void 0===s?[]:s;return i.transform.as=a.map((function(t,e){var n;return null!==(n=u[e])&&void 0!==n?n:t})),i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(this.parent,x(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.flatten)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FlattenTransform ".concat(S(this.transform))}},{key:"assemble",value:function(){var t=this.transform;return{type:"flatten",fields:t.flatten,as:t.as}}}]),n}(_c),Xh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i,o,a,s;Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i.transform=x(r);var u=null!==(o=i.transform.as)&&void 0!==o?o:[void 0,void 0];return i.transform.as=[null!==(a=u[0])&&void 0!==a?a:"key",null!==(s=u[1])&&void 0!==s?s:"value"],i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.fold)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FoldTransform ".concat(S(this.transform))}},{key:"assemble",value:function(){var t=this.transform;return{type:"fold",fields:t.fold,as:t.as}}}]),n}(_c),Zh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r,i,o){var a;return Object(lt.a)(this,n),(a=e.call(this,t)).fields=r,a.geojson=i,a.signal=o,a}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.fields),this.geojson,this.signal)}},{key:"dependentFields",value:function(){var t,e=(null!==(t=this.fields)&&void 0!==t?t:[]).filter(o.H);return new Set([].concat(Object(s.a)(this.geojson?[this.geojson]:[]),Object(s.a)(e)))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(S(this.fields))}},{key:"assemble",value:function(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}],[{key:"parseAll",value:function(t,e){if(e.component.projection&&!e.component.projection.isFit)return t;for(var r=0,i=0,o=[["longitude","latitude"],["longitude2","latitude2"]];i<o.length;i++){var a=o[i].map((function(t){var n=aa(e.encoding[t]);return Lo(n)?n.field:Io(n)?{expr:"".concat(n.datum)}:Bo(n)?{expr:"".concat(n.value)}:void 0}));(a[0]||a[1])&&(t=new n(t,a,null,e.getName("geojson_".concat(r++))))}if(e.channelHasField(ae)){var s=e.typedFieldDef(ae);s.type===pi&&(t=new n(t,null,s.field,e.getName("geojson_".concat(r++))))}return t}}]),n}(_c),Jh=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r,i,o){var a;return Object(lt.a)(this,n),(a=e.call(this,t)).projection=r,a.fields=i,a.as=o,a}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,this.projection,x(this.fields),x(this.as))}},{key:"dependentFields",value:function(){return new Set(this.fields.filter(o.H))}},{key:"producedFields",value:function(){return new Set(this.as)}},{key:"hash",value:function(){return"Geopoint ".concat(this.projection," ").concat(S(this.fields)," ").concat(S(this.as))}},{key:"assemble",value:function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function(t,e){if(!e.projectionName())return t;for(var r=0,i=[["longitude","latitude"],["longitude2","latitude2"]];r<i.length;r++){var o=i[r],a=o.map((function(t){var n=aa(e.encoding[t]);return Lo(n)?n.field:Io(n)?{expr:"".concat(n.datum)}:Bo(n)?{expr:"".concat(n.value)}:void 0})),s="longitude2"===o[0]?"2":"";(a[0]||a[1])&&(t=new n(t,e.projectionName(),a,[e.getName("x"+s),e.getName("y"+s)]))}return t}}]),n}(_c),td=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.impute,this.transform.key].concat(Object(s.a)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set([this.transform.impute])}},{key:"processSequence",value:function(t){var e=t.start,n=void 0===e?0:e,r=t.stop,i=t.step,o=[n,r].concat(Object(s.a)(i?[i]:[])).join(",");return{signal:"sequence(".concat(o,")")}}},{key:"hash",value:function(){return"Impute ".concat(S(this.transform))}},{key:"assemble",value:function(){var t,e=this.transform,n=e.impute,r=e.key,i=e.keyvals,o=e.method,a=e.groupby,s=e.value,u=e.frame,c=void 0===u?[null,null]:u,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:n,key:r},i?{keyvals:(t=i,void 0!==(null===t||void 0===t?void 0:t.stop)?this.processSequence(i):i)}:{}),{method:"value"}),a?{groupby:a}:{}),{value:o&&"value"!==o?null:s});return o&&"value"!==o?[l,Object.assign({type:"window",as:["imputed_".concat(n,"_value")],ops:[o],fields:[n],frame:c,ignorePeers:!1},a?{groupby:a}:{}),{type:"formula",expr:"datum.".concat(n," === null ? datum.imputed_").concat(n,"_value : datum.").concat(n),as:n}]:[l]}}],[{key:"makeFromTransform",value:function(t,e){return new n(t,e)}},{key:"makeFromEncoding",value:function(t,e){var r=e.encoding,i=r.x,o=r.y;if(Lo(i)&&Lo(o)){var a=i.impute?i:o.impute?o:void 0;if(void 0===a)return;var s=i.impute?o:o.impute?i:void 0,u=a.impute,c=u.method,l=u.value,f=u.frame,h=u.keyvals,d=Fa(e.mark,r);return new n(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:s.field},c?{method:c}:{}),void 0!==l?{value:l}:{}),f?{frame:f}:{}),void 0!==h?{keyvals:h}:{}),d.length?{groupby:d}:{}))}return null}}]),n}(_c),ed=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i,o,a,s;Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i.transform=x(r);var u=null!==(o=i.transform.as)&&void 0!==o?o:[void 0,void 0];return i.transform.as=[null!==(a=u[0])&&void 0!==a?a:r.on,null!==(s=u[1])&&void 0!==s?s:r.loess],i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.loess,this.transform.on].concat(Object(s.a)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"LoessTransform ".concat(S(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.loess,n=t.on,r=u(t,["loess","on"]);return Object.assign({type:"loess",x:n,y:e},r)}}]),n}(_c),nd=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r,i){var o;return Object(lt.a)(this,n),(o=e.call(this,t)).transform=r,o.secondary=i,o}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform),this.secondary)}},{key:"dependentFields",value:function(){return new Set([this.transform.lookup])}},{key:"producedFields",value:function(){return new Set(this.transform.as?Object(o.i)(this.transform.as):this.transform.from.fields)}},{key:"hash",value:function(){return"Lookup ".concat(S({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function(){var t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Object(o.i)(this.transform.as)}:{});else{var e=this.transform.as;Object(o.H)(e)||(Or(r.NO_FIELDS_NEEDS_AS),e="_lookup"),t={as:[e]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function(t,e,i,o){var a=e.component.data.sources,s=i.from,u=null;if(function(t){return"data"in t}(s)){var c=yd(s.data,a);c||(c=new Tf(s.data),a.push(c));var l=e.getName("lookup_".concat(o));u=new Oc(c,l,"lookup",e.component.data.outputNodeRefCounts),e.component.data.outputNodes[l]=u}else if(function(t){return"selection"in t}(s)){var f=s.selection;if(i=Object.assign({as:f},i),!(u=e.getSelectionComponent(z(f),f).materialized))throw new Error(r.noSameUnitLookup(f))}return new n(t,i,u.getSource())}}]),n}(_c),rd=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i,o,a,s;Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i.transform=x(r);var u=null!==(o=i.transform.as)&&void 0!==o?o:[void 0,void 0];return i.transform.as=[null!==(a=u[0])&&void 0!==a?a:"prob",null!==(s=u[1])&&void 0!==s?s:"value"],i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.quantile].concat(Object(s.a)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"QuantileTransform ".concat(S(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.quantile,n=u(t,["quantile"]);return Object.assign({type:"quantile",field:e},n)}}]),n}(_c),id=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i,o,a,s;Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i.transform=x(r);var u=null!==(o=i.transform.as)&&void 0!==o?o:[void 0,void 0];return i.transform.as=[null!==(a=u[0])&&void 0!==a?a:r.on,null!==(s=u[1])&&void 0!==s?s:r.regression],i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.regression,this.transform.on].concat(Object(s.a)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"RegressionTransform ".concat(S(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.regression,n=t.on,r=u(t,["regression","on"]);return Object.assign({type:"regression",x:n,y:e},r)}}]),n}(_c),od=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"addDimensions",value:function(t){var e;this.transform.groupby=M((null!==(e=this.transform.groupby)&&void 0!==e?e:[]).concat(t),(function(t){return t}))}},{key:"producedFields",value:function(){}},{key:"dependentFields",value:function(){var t;return new Set([this.transform.pivot,this.transform.value].concat(Object(s.a)(null!==(t=this.transform.groupby)&&void 0!==t?t:[])))}},{key:"hash",value:function(){return"PivotTransform ".concat(S(this.transform))}},{key:"assemble",value:function(){var t=this.transform,e=t.pivot,n=t.value,r=t.groupby,i=t.limit,o=t.op;return Object.assign(Object.assign(Object.assign({type:"pivot",field:e,value:n},void 0!==i?{limit:i}:{}),void 0!==o?{op:o}:{}),void 0!==r?{groupby:r}:{})}}]),n}(_c),ad=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r){var i;return Object(lt.a)(this,n),(i=e.call(this,t)).transform=r,i}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(null,x(this.transform))}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"SampleTransform ".concat(S(this.transform))}},{key:"assemble",value:function(){return{type:"sample",size:this.transform.sample}}}]),n}(_c);function sd(t){var e=0;return function n(r,i){var o,u,c;if(r instanceof Tf&&(r.isGenerator||_u(r.data)||(t.push(i),i={name:null,source:i.name,transform:[]})),r instanceof Vf&&(r.parent instanceof Tf&&!i.source?(i.format=Object.assign(Object.assign({},null!==(o=i.format)&&void 0!==o?o:{}),{parse:r.assembleFormatParse()}),(u=i.transform).push.apply(u,Object(s.a)(r.assembleTransforms(!0)))):(c=i.transform).push.apply(c,Object(s.a)(r.assembleTransforms()))),r instanceof zf){i.name||(i.name="data_".concat(e++)),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source;var l,f=Object(a.a)(r.assemble());try{for(f.s();!(l=f.n()).done;){var h=l.value;t.push(h)}}catch(m){f.e(m)}finally{f.f()}}else{var d;if((r instanceof Rf||r instanceof Df||r instanceof Yh||r instanceof al||r instanceof Al||r instanceof Jh||r instanceof Zh||r instanceof $f||r instanceof nd||r instanceof Yf||r instanceof Gf||r instanceof Xh||r instanceof Qh||r instanceof Kh||r instanceof ed||r instanceof rd||r instanceof id||r instanceof qf||r instanceof ad||r instanceof od)&&i.transform.push(r.assemble()),r instanceof jf||r instanceof kc||r instanceof td||r instanceof Kf)(d=i.transform).push.apply(d,Object(s.a)(r.assemble()));if(r instanceof Oc)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof Oc)r.setSource(i.name);else{if(i.name||(i.name="data_".concat(e++)),r.setSource(i.name),1===r.numChildren())t.push(i),i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof Oc&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(r.children[0],i);break;default:i.name||(i.name="data_".concat(e++));var p=i.name;!i.source||i.transform.length>0?t.push(i):p=i.source;var g,v=Object(a.a)(r.children);try{for(v.s();!(g=v.n()).done;){n(g.value,{name:null,source:p,transform:[]})}}catch(m){v.e(m)}finally{v.f()}}}}}function ud(t,e){var n,r,i,o=[],s=sd(o),u=0,l=Object(a.a)(t.sources);try{for(l.s();!(i=l.n()).done;){var f=i.value;f.hasName()||(f.dataName="source_".concat(u++));var h=f.assemble();s(f,h)}}catch(M){l.e(M)}finally{l.f()}for(var d=0,p=o;d<p.length;d++){var g=p[d];0===g.transform.length&&delete g.transform}var v,m=0,y=Object(a.a)(o.entries());try{for(y.s();!(v=y.n()).done;){var b=Object(c.a)(v.value,2),w=b[0],x=b[1];0!==(null!==(n=x.transform)&&void 0!==n?n:[]).length||x.source||o.splice(m++,0,o.splice(w,1)[0])}}catch(M){y.e(M)}finally{y.f()}for(var _=0,O=o;_<O.length;_++){var k,S=O[_],E=Object(a.a)(null!==(r=S.transform)&&void 0!==r?r:[]);try{for(E.s();!(k=E.n()).done;){var A=k.value;"lookup"===A.type&&(A.from=t.outputNodes[A.from].getSource())}}catch(M){E.e(M)}finally{E.f()}}for(var C=0,j=o;C<j.length;C++){var T=j[C];T.name in e&&(T.values=e[T.name])}return o}function cd(t,e){var n,r=t.facet,i=t.config,a=t.child,s=t.component;if(t.channelHasField(e)){var u=r[e],c=Tl("title",null,i,e),l=ea(u,i,{allowDisabling:!0,includeDefault:void 0===c||!!c});a.component.layoutHeaders[e].title&&(l=Object(o.A)(l)?l.join(", "):l,l+=" / "+a.component.layoutHeaders[e].title,a.component.layoutHeaders[e].title=null);var f=Tl("labelOrient",u,i,e),h=X((null!==(n=u.header)&&void 0!==n?n:{}).labels,i.header.labels,!0),d=A(["bottom","right"],f)?"footer":"header";s.layoutHeaders[e]=Object(Pt.a)({title:l,facetFieldDef:u},d,"facet"===e?[]:[ld(t,e,h)])}}function ld(t,e,n){var r="row"===e?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function fd(t,e){var n,r,i=t.child;if(i.component.axes[e]){var o=t.component,s=o.layoutHeaders,u=o.resolve;if(u.axis[e]=Xl(u,e),"shared"===u.axis[e]){var c,l="x"===e?"column":"row",f=s[l],h=Object(a.a)(i.component.axes[e]);try{for(h.s();!(c=h.n()).done;){var d=c.value,p="top"===(r=d.get("orient"))||"left"===r||Wr(r)?"header":"footer";f[p]=null!==(n=f[p])&&void 0!==n?n:[ld(t,l,!1)];var g=hl(d,"main",t.config,{header:!0});g&&f[p][0].axes.push(g),d.mainExtracted=!0}}catch(v){h.e(v)}finally{h.f()}}}}function hd(t){dd(t);var e=1===t.layout.columns?"width":"childWidth",n=void 0===t.layout.columns?"height":"childHeight";pd(t,e),pd(t,n)}function dd(t){var e,n=Object(a.a)(t.children);try{for(n.s();!(e=n.n()).done;){e.value.parseLayoutSize()}}catch(r){n.e(r)}finally{n.f()}}function pd(t,e){var n,r,i=Kl(e),o=Le(i),s=t.component.resolve,u=t.component.layoutSize,c=Object(a.a)(t.children);try{for(c.s();!(r=c.n()).done;){var l=r.value.component.layoutSize.getWithExplicit(i),f=s.scale[o];if("independent"===f&&"step"===l.value){n=void 0;break}if(n){if("independent"===f&&n.value!==l.value){n=void 0;break}n=wu(n,l,i,"")}else n=l}}catch(g){c.e(g)}finally{c.f()}if(n){var h,d=Object(a.a)(t.children);try{for(d.s();!(h=d.n()).done;){var p=h.value;t.renameSignal(p.getName(i),t.getName(e)),p.component.layoutSize.set(i,"merged",!1)}}catch(g){d.e(g)}finally{d.f()}u.setWithExplicit(e,n)}else u.setWithExplicit(e,{explicit:!1,value:void 0})}function gd(t,e){var n="width"===e?"x":"y",r=t.config,i=t.getScaleComponent(n);if(i){var o=i.get("type"),a=i.get("range");if(zi(o)){var s=bs(r.view,e);return Hr(a)||ps(s)?"step":s}return ms(r.view,e)}if(t.hasProjection||"arc"===t.mark)return ms(r.view,e);var u=bs(r.view,e);return ps(u)?u.step:u}function vd(t,e,n){return Go(e,Object.assign({suffix:"by_".concat(Go(t))},null!==n&&void 0!==n?n:{}))}var md=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r,i,o){var a;return Object(lt.a)(this,n),(a=e.call(this,t,"facet",r,i,o,t.resolve)).child=Hd(t.spec,Object(pu.a)(a),a.getName("child"),void 0,o),a.children=[a.child],a.facet=a.initFacet(t.facet,o),a}return Object(ft.a)(n,[{key:"initFacet",value:function(t,e){return ko(t)?Ia(t,(function(t,n,i){return A([Kt,Yt],i)?void 0===n.field?(Or(r.emptyFieldDef(n,i)),t):(t[i]=sa(n,i,e),t):(Or(r.incompatibleChannel(i,"facet")),t)}),{}):{facet:sa(t,"facet",e)}}},{key:"channelHasField",value:function(t){return!!this.facet[t]}},{key:"fieldDef",value:function(t){return this.facet[t]}},{key:"parseData",value:function(){this.component.data=wd(this),this.child.parseData()}},{key:"parseLayoutSize",value:function(){dd(this)}},{key:"parseSelections",value:function(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function(){this.child.parseAxesAndHeaders(),function(t){var e,n=Object(a.a)(ge);try{for(n.s();!(e=n.n()).done;){cd(t,e.value)}}catch(r){n.e(r)}finally{n.f()}fd(t,"x"),fd(t,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.child.assembleSelectionTopLevelSignals(t)}},{key:"assembleSignals",value:function(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function(t){return this.child.assembleSelectionData(t)}},{key:"getHeaderLayoutMixins",value:function(){var t,e,n,r,i={},o=Object(a.a)(ge);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=Object(a.a)(Dl);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=this.component.layoutHeaders[u],h=f[l],d=f.facetFieldDef;if(d){var p=Tl("titleOrient",d,this.config,u);if(A(["right","bottom"],p)){var g=jl(u,p);i.titleAnchor=null!==(t=i.titleAnchor)&&void 0!==t?t:{},i.titleAnchor[g]="end"}}if(null===h||void 0===h?void 0:h[0]){var v="row"===u?"height":"width",m="header"===l?"headerBand":"footerBand";"facet"===u||this.child.component.layoutSize.get(v)||(i[m]=null!==(e=i[m])&&void 0!==e?e:{},i[m][u]=.5),f.title&&(i.offset=null!==(n=i.offset)&&void 0!==n?n:{},i.offset["row"===u?"rowTitle":"columnTitle"]=10)}}}catch(y){c.e(y)}finally{c.f()}}}catch(y){o.e(y)}finally{o.f()}return i}},{key:"assembleDefaultLayout",value:function(){var t=this.facet,e=t.column,n=t.row,r=e?this.columnDistinctSignal():n?1:void 0,i="all";return(n||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}},{key:"assembleLayoutSignals",value:function(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function(){if(!(this.parent&&this.parent instanceof n)){var t=this.getName("column_domain");return{signal:"length(data('".concat(t,"'))")}}}},{key:"assembleGroup",value:function(t){return this.parent&&this.parent instanceof n?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:Go(this.facet.column,{prefix:"distinct"})}}}}:{}),Is(Object(Ns.a)(n.prototype),"assembleGroup",this).call(this,t)):Is(Object(Ns.a)(n.prototype),"assembleGroup",this).call(this,t)}},{key:"getCardinalityAggregateForChild",value:function(){var t=[],e=[],r=[];if(this.child instanceof n){if(this.child.channelHasField("column")){var i=Go(this.child.facet.column);t.push(i),e.push("distinct"),r.push("distinct_".concat(i))}}else{var o,s=Object(a.a)(Te);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=this.child.component.scales[u];if(c&&!c.merged){var l=c.get("type"),f=c.get("range");if(zi(l)&&Hr(f)){var h=Oh(kh(this.child,u));h?(t.push(h),e.push("distinct"),r.push("distinct_".concat(h))):Or("Unknown field for ".concat(u,". Cannot calculate view size."))}}}}catch(d){s.e(d)}finally{s.f()}}return{fields:t,ops:e,as:r}}},{key:"assembleFacet",value:function(){var t,e=this.component.data.facetRoot,n=e.name,r=e.data,i=this.facet,s=i.row,u=i.column,c=this.getCardinalityAggregateForChild(),l=c.fields,f=c.ops,h=c.as,d=[],p=Object(a.a)(ge);try{for(p.s();!(t=p.n()).done;){var g=t.value,v=this.facet[g];if(v){d.push(Go(v));var m=v.bin,y=v.sort;if(Ve(m)&&d.push(Go(v,{binSuffix:"end"})),_o(y)){var b=y.field,w=y.op,x=void 0===w?"min":w,_=vd(v,y);s&&u?(l.push(_),f.push("max"),h.push(_)):(l.push(b),f.push(x),h.push(_))}else if(Object(o.A)(y)){var O=Cl(v,g);l.push(O),f.push("max"),h.push(O)}}}}catch(S){p.e(S)}finally{p.f()}var k=!!s&&!!u;return Object.assign({name:n,data:r,groupby:d},k||l.length>0?{aggregate:Object.assign(Object.assign({},k?{cross:k}:{}),l.length?{fields:l,ops:f,as:h}:{})}:{})}},{key:"facetSortFields",value:function(t){var e=this.facet[t];return e?_o(e.sort)?[vd(e,e.sort,{expr:"datum"})]:Object(o.A)(e.sort)?[Cl(e,t,{expr:"datum"})]:[Go(e,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function(t){var e=this.facet[t];if(e){var n=e.sort;return[(_o(n)?n.order:!Object(o.A)(n)&&n)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function(){var t=this.facet,e=this.config;if(t.facet)return $l(t.facet,"facet",e);var n,r={row:["top","bottom"],column:["left","right"]},i=Object(a.a)(Rl);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(t[o]){var s=Tl("labelOrient",t[o],e,o);if(A(r[o],s))return $l(t[o],o,e)}}}catch(u){i.e(u)}finally{i.f()}}},{key:"assembleMarks",value:function(){var t=this,e=this.child,n=function(t){var e,n=[],r=sd(n),i=Object(a.a)(t.children);try{for(i.s();!(e=i.n()).done;){r(e.value,{source:t.name,name:null,transform:[]})}}catch(o){i.e(o)}finally{i.f()}return n}(this.component.data.facetRoot),r=e.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||e.assembleTitle(),s=e.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},i?{title:i}:{}),s?{style:s}:{}),{from:{facet:this.assembleFacet()},sort:{field:ge.map((function(e){return t.facetSortFields(e)})).flat(),order:ge.map((function(e){return t.facetSortOrder(e)})).flat()}}),n.length>0?{data:n}:{}),r?{encode:{update:r}}:{}),e.assembleGroup(function(t,e){if(t.component.selection&&I(t.component.selection).length){var n=Object(o.Z)(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:Object(Ku.a)("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(n,").datum")}]})}return Uc(e)}(this,[])))]}},{key:"getMapping",value:function(){return this.facet}}]),n}(Gh);function yd(t,e){var n,r,i,o,s,u,c,l,f,h,d,p=Object(a.a)(e);try{for(p.s();!(d=p.n()).done;){var g=d.value,v=g.data;if((!t.name||!g.hasName()||t.name===g.dataName)&&((!(null===(n=t.format)||void 0===n?void 0:n.mesh)||!(null===(r=v.format)||void 0===r?void 0:r.feature))&&(!(null===(i=t.format)||void 0===i?void 0:i.feature)&&!(null===(o=v.format)||void 0===o?void 0:o.feature)||(null===(s=t.format)||void 0===s?void 0:s.feature)===(null===(u=v.format)||void 0===u?void 0:u.feature))&&(!(null===(c=t.format)||void 0===c?void 0:c.mesh)&&!(null===(l=v.format)||void 0===l?void 0:l.mesh)||(null===(f=t.format)||void 0===f?void 0:f.mesh)===(null===(h=v.format)||void 0===h?void 0:h.mesh))))if(Ou(t)&&Ou(v)){if(w(t.values,v.values))return g}else if(_u(t)&&_u(v)){if(t.url===v.url)return g}else if(ku(t)&&t.name===g.dataName)return g}}catch(m){p.e(m)}finally{p.f()}return null}function bd(t,e){if(t.data||!t.parent){if(null===t.data){var n=new Tf({values:[]});return e.push(n),n}var r=yd(t.data,e);if(r)return Su(t.data)||(r.data.format=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];T(t,null!==a&&void 0!==a?a:{})}return t}({},t.data.format,r.data.format)),!r.hasName()&&t.data.name&&(r.dataName=t.data.name),r;var i=new Tf(t.data);return e.push(i),i}return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function wd(t){var e,n,i,o,s,u,c,l,f,h,d=bd(t,t.component.data.sources),p=t.component.data,g=p.outputNodes,v=p.outputNodeRefCounts,m=t.parent?t.parent.component.data.ancestorParse.clone():new xu,y=t.data;Su(y)?(Eu(y)?d=new Df(d,y.sequence):Cu(y)&&(d=new Rf(d,y.graticule)),m.parseNothing=!0):null===(null===(e=null===y||void 0===y?void 0:y.format)||void 0===e?void 0:e.parse)&&(m.parseNothing=!0),d=null!==(n=Vf.makeExplicit(d,t,m))&&void 0!==n?n:d,d=new qf(d);var b=t.parent&&Vh(t.parent);(Uh(t)||Wh(t))&&b&&(d=null!==(i=jf.makeFromEncoding(d,t))&&void 0!==i?i:d),t.transforms.length>0&&(d=function(t,e,n){var i,o,s,u=0,c=Object(a.a)(e.transforms);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=void 0,h=void 0;if(Bu(l))h=t=new Al(t,l),f="derived";else if(Tu(l)){var d=Wf(l);h=t=null!==(i=Vf.makeWithAncestors(t,{},d,n))&&void 0!==i?i:t,t=new al(t,e,l.filter)}else if(Uu(l))h=t=jf.makeFromTransform(t,l,e),f="number";else if(Hu(l)){f="date",void 0===n.getWithExplicit(l.field).value&&(t=new Vf(t,Object(Pt.a)({},l.field,f)),n.set(l.field,f,!1)),h=t=kc.makeFromTransform(t,l)}else if(Vu(l))h=t=$f.makeFromTransform(t,l),f="number",rl(e)&&(t=new qf(t));else if(Mu(l))h=t=nd.make(t,e,l,u++),f="derived";else if(Pu(l))h=t=new Yf(t,l),f="number";else if($u(l))h=t=new Gf(t,l),f="number";else if(qu(l))h=t=Kf.makeFromTransform(t,l),f="derived";else if(Gu(l))h=t=new Xh(t,l),f="derived";else if(zu(l))h=t=new Qh(t,l),f="derived";else if(Ru(l))h=t=new od(t,l),f="derived";else if(Fu(l))t=new ad(t,l);else if(Wu(l))h=t=td.makeFromTransform(t,l),f="derived";else if(Du(l))h=t=new Kh(t,l),f="derived";else if(Lu(l))h=t=new rd(t,l),f="derived";else if(Nu(l))h=t=new id(t,l),f="derived";else{if(!Iu(l)){Or(r.invalidTransformIgnored(l));continue}h=t=new ed(t,l),f="derived"}if(h&&void 0!==f){var p,g=Object(a.a)(null!==(o=h.producedFields())&&void 0!==o?o:[]);try{for(g.s();!(p=g.n()).done;){var v=p.value;n.set(v,f,!1)}}catch(m){g.e(m)}finally{g.f()}}}}catch(m){c.e(m)}finally{c.f()}return t}(d,t,m));var w=function(t){var e={};if(Uh(t)&&t.component.selection){var n,r=Object(a.a)(I(t.component.selection));try{for(r.s();!(n=r.n()).done;){var i,o=n.value,s=t.component.selection[o],u=Object(a.a)(s.project.items);try{for(u.s();!(i=u.n()).done;){var c=i.value;!c.channel&&Q(c.field)>1&&(e[c.field]="flatten")}}catch(l){u.e(l)}finally{u.f()}}}catch(l){r.e(l)}finally{r.f()}}return e}(t),x=Hf(t);d=null!==(o=Vf.makeWithAncestors(d,{},Object.assign(Object.assign({},w),x),m))&&void 0!==o?o:d,Uh(t)&&(d=Zh.parseAll(d,t),d=Jh.parseAll(d,t)),(Uh(t)||Wh(t))&&(b||(d=null!==(s=jf.makeFromEncoding(d,t))&&void 0!==s?s:d),d=null!==(u=kc.makeFromEncoding(d,t))&&void 0!==u?u:d,d=Al.parseAllForSortIndex(d,t));var _=t.getName("raw"),O=new Oc(d,_,"raw",v);if(g[_]=O,d=O,Uh(t)){var k=$f.makeFromEncoding(d,t);k&&(d=k,rl(t)&&(d=new qf(d))),d=null!==(c=td.makeFromEncoding(d,t))&&void 0!==c?c:d,d=null!==(l=Kf.makeFromEncoding(d,t))&&void 0!==l?l:d}Uh(t)&&(d=null!==(f=Yh.make(d,t))&&void 0!==f?f:d);var S=t.getName(ju),E=new Oc(d,S,ju,v);g[S]=E,d=E,Uh(t)&&function(t,e){tl(t,(function(n){var r=n.name,i=t.getName("lookup_".concat(r));t.component.data.outputNodes[i]=n.materialized=new Oc(new al(e,t,{selection:r}),i,"lookup",t.component.data.outputNodeRefCounts)}))}(t,E);var A=null;if(Wh(t)){var C=t.getName("facet");d=null!==(h=function(t,e){var n=e.row,r=e.column;if(n&&r){for(var i=null,o=0,a=[n,r];o<a.length;o++){var s=a[o];if(_o(s.sort)){var u=s.sort,c=u.field,l=u.op;t=i=new Gf(t,{joinaggregate:[{op:void 0===l?"min":l,field:c,as:vd(s,s.sort,{forAs:!0})}],groupby:[Go(s)]})}}return i}return null}(d,t.facet))&&void 0!==h?h:d,A=new zf(d,t,C,E.getSource()),g[C]=A}return Object.assign(Object.assign({},t.component.data),{outputNodes:g,outputNodeRefCounts:v,raw:O,main:E,facetRoot:A,ancestorParse:m})}var xd=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,i,o,a){var s,u,c,l,f;return Object(lt.a)(this,n),s=e.call(this,t,"concat",i,o,a,t.resolve),"shared"!==(null===(c=null===(u=t.resolve)||void 0===u?void 0:u.axis)||void 0===c?void 0:c.x)&&"shared"!==(null===(f=null===(l=t.resolve)||void 0===l?void 0:l.axis)||void 0===f?void 0:f.y)||Or(r.CONCAT_CANNOT_SHARE_AXIS),s.children=s.getChildren(t).map((function(t,e){return Hd(t,Object(pu.a)(s),s.getName("concat_"+e),void 0,a)})),s}return Object(ft.a)(n,[{key:"parseData",value:function(){this.component.data=wd(this);var t,e=Object(a.a)(this.children);try{for(e.s();!(t=e.n()).done;){t.value.parseData()}}catch(n){e.e(n)}finally{e.f()}}},{key:"parseSelections",value:function(){this.component.selection={};var t,e=Object(a.a)(this.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.parseSelections();var r,i=Object(a.a)(I(n.component.selection));try{for(i.s();!(r=i.n()).done;){var o=r.value;this.component.selection[o]=n.component.selection[o]}}catch(s){i.e(s)}finally{i.f()}}}catch(s){e.e(s)}finally{e.f()}}},{key:"parseMarkGroup",value:function(){var t,e=Object(a.a)(this.children);try{for(e.s();!(t=e.n()).done;){t.value.parseMarkGroup()}}catch(n){e.e(n)}finally{e.f()}}},{key:"parseAxesAndHeaders",value:function(){var t,e=Object(a.a)(this.children);try{for(e.s();!(t=e.n()).done;){t.value.parseAxesAndHeaders()}}catch(n){e.e(n)}finally{e.f()}}},{key:"getChildren",value:function(t){return hs(t)?t.vconcat:ds(t)?t.hconcat:t.concat}},{key:"parseLayoutSize",value:function(){hd(this)}},{key:"parseAxisGroup",value:function(){return null}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionTopLevelSignals(t)}),t)}},{key:"assembleSignals",value:function(){return this.children.forEach((function(t){return t.assembleSignals()})),[]}},{key:"assembleLayoutSignals",value:function(){var t,e=Hl(this),n=Object(a.a)(this.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push.apply(e,Object(s.a)(r.assembleLayoutSignals()))}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"assembleSelectionData",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionData(t)}),t)}},{key:"assembleMarks",value:function(){return this.children.map((function(t){var e=t.assembleTitle(),n=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},e?{title:e}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup())}))}},{key:"assembleDefaultLayout",value:function(){var t=this.layout.columns;return Object.assign(Object.assign({},null!=t?{columns:t}:{}),{bounds:"full",align:"each"})}}]),n}(qh);var _d=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},st),{labelExpr:1,encode:1}),Od=I(_d),kd=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(lt.a)(this,n),(t=e.call(this)).explicit=r,t.implicit=i,t.mainExtracted=o,t}return Object(ft.a)(n,[{key:"clone",value:function(){return new n(x(this.explicit),x(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!(!1===(e=this.get(t))||null===e));var e}},{key:"hasOrientSignalRef",value:function(){return Wr(this.explicit.orient)}}]),n}(gu);var Sd={bottom:"top",top:"bottom",left:"right",right:"left"};function Ed(t,e){if(!t)return e.map((function(t){return t.clone()}));if(t.length===e.length){for(var n=t.length,r=0;r<n;r++){var i=t[r],o=e[r];if(!!i!==!!o)return;if(i&&o){var a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;t[r]=Ad(i,o)}}return t}}function Ad(t,e){var n,r=Object(a.a)(Od);try{var i=function(){var r=n.value,i=wu(t.getWithExplicit(r),e.getWithExplicit(r),r,"axis",(function(t,e){switch(r){case"title":return ja(t,e);case"gridScale":return{explicit:t.explicit,value:X(t.value,e.value)}}return bu(t,e,r,"axis")}));t.setWithExplicit(r,i)};for(r.s();!(n=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}return t}function Cd(t,e,n,r,i){if("disable"===e)return void 0!==n;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(Wr(n.labelAngle)?n.labelAngle:et(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===El(r,i))return!0}return t===n[e]}var jd=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Td(t,e){var n,r,i,o=e.axis(t),s=new kd,u=aa(e.encoding[t]),c=e.mark,l=e.config,f=(null===o||void 0===o?void 0:o.orient)||(null===(n=l["x"===t?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(r=l.axis)||void 0===r?void 0:r.orient)||function(t){return"x"===t?"bottom":"left"}(t),h=e.getScaleComponent(t).get("type"),d=bl(t,h,f,e.config),p=void 0!==o?!o:xl("disable",l,null===o||void 0===o?void 0:o.style,d).configValue;if(s.set("disable",p,void 0!==o),p)return s;var g,v=function(t,e,n,r,i){var o=null===e||void 0===e?void 0:e.labelAngle;if(void 0!==o)return Wr(o)?o:et(o);var a=xl("labelAngle",t.config,null===e||void 0===e?void 0:e.style,i).configValue;return void 0!==a?et(a):n===Qt&&A([di,fi],r.type)?270:void 0}(e,o=o||{},t,u,d),m={fieldOrDatumDef:u,axis:o,channel:t,model:e,scaleType:h,orient:f,labelAngle:v,mark:c,config:l},y=Object(a.a)(Od);try{for(y.s();!(g=y.n()).done;){var b=g.value,w=b in _l?_l[b](m):ct(b)?o[b]:void 0,x=void 0!==w,_=Cd(w,b,o,e,t);if(x&&_)s.set(b,w,_);else{var O=ct(b)&&"values"!==b?xl(b,e.config,o.style,d):{},k=O.configValue,S=void 0===k?void 0:k,E=O.configFrom,C=void 0===E?void 0:E,j=void 0!==S;x&&!j?s.set(b,w,_):("vgAxisConfig"!==C||jd.has(b)&&j||it(S)||Wr(S))&&s.set(b,S,!1)}}}catch(R){y.e(R)}finally{y.f()}var T=null!==(i=o.encoding)&&void 0!==i?i:{},M=ot.reduce((function(n,r){var i;if(!s.hasAxisPart(r))return n;var o=Yl(null!==(i=T[r])&&void 0!==i?i:{},e),a="labels"===r?function(t,e,n){var r,i=t.encoding,o=t.config,a=null!==(r=aa(i[e]))&&void 0!==r?r:aa(i[Se(e)]),s=t.axis(e)||{},u=s.format,c=s.formatType;return so(c)?Object.assign({text:fo({fieldOrDatumDef:a,field:"datum.value",format:u,formatType:c,config:o})},n):n}(e,t,o):o;return void 0===a||N(a)||(n[r]={update:a}),n}),{});return N(M)||s.set("encode",M,!!o.encoding||void 0!==o.labelAngle),s}function Md(t){var e,n=t.encoding,i=t.size,o=Object(a.a)(Te);try{for(o.s();!(e=o.n()).done;){var s=e.value,u=Ee(s);ps(i[u])&&Fo(n[s])&&(delete i[u],Or(r.stepDropped(u)))}}catch(c){o.e(c)}finally{o.f()}return i}function Rd(t,e,n,i){var o=i.graticule,s=Tt(t)?Object.assign({},t):{type:t},u=_a("orient",s,n);if(s.orient=function(t,e,n){switch(t){case yt:case kt:case St:case xt:case bt:case vt:return}var r=e.x,i=e.y,o=e.x2,a=e.y2;switch(t){case gt:if(Lo(r)&&(qe(r.bin)||Lo(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Lo(i)&&(qe(i.bin)||Lo(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(Lo(r)&&r.type===li&&!Ve(r.bin)||Po(r)))return"horizontal";if(!a&&(Lo(i)&&i.type===li&&!Ve(i.bin)||Po(i)))return"vertical"}case wt:if(o&&(!Lo(r)||!qe(r.bin))&&a&&(!Lo(i)||!qe(i.bin)))return;case pt:if(a)return Lo(i)&&qe(i.bin)?"horizontal":"vertical";if(o)return Lo(r)&&qe(r.bin)?"vertical":"horizontal";if(t===wt){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case mt:case _t:var s=Fo(r),u=Fo(i);if(s&&!u)return"tick"!==t?"horizontal":"vertical";if(!s&&u)return"tick"!==t?"vertical":"horizontal";if(s&&u){var c=r,l=i,f=c.type===hi,h=l.type===hi;return f&&!h?"tick"!==t?"vertical":"horizontal":!f&&h?"tick"!==t?"horizontal":"vertical":!c.aggregate&&l.aggregate?"tick"!==t?"vertical":"horizontal":c.aggregate&&!l.aggregate?"tick"!==t?"horizontal":"vertical":n||"vertical"}return n||void 0}return"vertical"}(s.type,e,u),void 0!==u&&u!==s.orient&&Or(r.orientOverridden(s.orient,u)),"bar"===s.type&&s.orient){var c=_a("cornerRadiusEnd",s,n);if(void 0!==c){var l,f="horizontal"===s.orient&&e.x2||"vertical"===s.orient&&e.y2?["cornerRadius"]:Dt[s.orient],h=Object(a.a)(f);try{for(h.s();!(l=h.n()).done;){s[l.value]=c}}catch(d){h.e(d)}finally{h.f()}void 0!==s.cornerRadiusEnd&&delete s.cornerRadiusEnd}}return void 0===_a("opacity",s,n)&&(s.opacity=function(t,e){if(A([yt,_t,kt,St],t)&&!Ma(e))return.7;return}(s.type,e)),void 0===s.filled&&(s.filled=!o&&function(t,e){var n=Oa("filled",t,e),r=t.type;return X(n,r!==yt&&r!==mt&&r!==wt)}(s,n)),void 0===_a("cursor",s,n)&&(s.cursor=function(t,e,n){if(e.href||t.href||_a("href",t,n))return"pointer";return t.cursor}(s,e,n)),s}function Dd(t,e){t.config;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),oc("x",t,{defaultPos:"mid"})),oc("y",t,{defaultPos:"mid"})),nc("size",t)),nc("angle",t)),function(t,e,n){if(n)return{shape:{value:n}};return nc("shape",t)}(t,0,e))}function Ld(t){var e,n=t.config,r=t.markDef,i=r.orient,a="horizontal"===i?"width":"height",s=t.getScaleComponent("horizontal"===i?"x":"y"),u=null!==(e=_a("size",r,n,{vgChannel:a}))&&void 0!==e?e:n.tick.bandSize;if(void 0!==u)return u;var c=s?s.get("range"):void 0;return c&&Hr(c)&&Object(o.E)(c.step)?3*c.step/4:3*ys(n.view,a)/4}var Nd={arc:{vgMark:"arc",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),oc("x",t,{defaultPos:"mid"})),oc("y",t,{defaultPos:"mid"})),dc(t,"radius","arc")),dc(t,"theta","arc"))}},area:{vgMark:"area",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),lc("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===t.markDef.orient})),lc("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===t.markDef.orient})),bc(t))}},bar:{vgMark:"rect",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),dc(t,"x","bar")),dc(t,"y","bar"))}},circle:{vgMark:"symbol",encodeEntry:function(t){return Dd(t,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function(t){return Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}))},postEncodingTransform:function(t){var e=t.encoding.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},e&&Lo(e)&&e.type===pi?{field:Go(e,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),dc(t,"x","image")),dc(t,"y","image")),Qu(t,"url"))}},line:{vgMark:"line",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),oc("x",t,{defaultPos:"mid"})),oc("y",t,{defaultPos:"mid"})),nc("size",t,{vgChannel:"strokeWidth"})),bc(t))}},point:{vgMark:"symbol",encodeEntry:function(t){return Dd(t)}},rect:{vgMark:"rect",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),dc(t,"x","rect")),dc(t,"y","rect"))}},rule:{vgMark:"rule",encodeEntry:function(t){var e=t.markDef.orient;return t.encoding.x||t.encoding.y||t.encoding.latitude||t.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),lc("x",t,{defaultPos:"horizontal"===e?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==e})),lc("y",t,{defaultPos:"vertical"===e?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==e})),nc("size",t,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:function(t){return Dd(t,"square")}},text:{vgMark:"text",encodeEntry:function(t){var e=t.config;t.encoding;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},mc(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),oc("x",t,{defaultPos:"mid"})),oc("y",t,{defaultPos:"mid"})),Qu(t)),nc("size",t,{vgChannel:"fontSize"})),nc("angle",t)),wc("align",function(t,e,n){if(void 0===_a("align",t,n))return"center";return}(t.markDef,0,e))),wc("baseline",function(t,e,n){if(void 0===_a("baseline",t,n))return"middle";return}(t.markDef,0,e))),oc("radius",t,{defaultPos:null,isMidPoint:!0})),oc("theta",t,{defaultPos:null,isMidPoint:!0}))}},tick:{vgMark:"rect",encodeEntry:function(t){var e=t.config,n=t.markDef,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),oc("x",t,{defaultPos:"mid",vgChannel:"xc"})),oc("y",t,{defaultPos:"mid",vgChannel:"yc"})),nc("size",t,{defaultValue:Ld(t),vgChannel:i})),Object(Pt.a)({},o,ya(_a("thickness",n,e))))}},trail:{vgMark:"trail",encodeEntry:function(t){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},mc(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),oc("x",t,{defaultPos:"mid"})),oc("y",t,{defaultPos:"mid"})),nc("size",t)),bc(t))}}};function Id(t){return A([mt,pt,Ot],t.mark)?function(t){var e=Fa(t.mark,t.encoding),n=Pd(t,{fromPrefix:e.length>0?"faceted_path_":""});return e.length>0?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:"faceted_path_"+t.requestDataName(ju),data:t.requestDataName(ju),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}(t):A([gt],t.mark)?function(t){var e=Kr.some((function(e){return _a(e,t.markDef,t.config)}));if(t.stack&&!t.fieldDef("size")&&e){var n,r,i=Pd(t,{fromPrefix:"stack_group_"}),o=Object(c.a)(i,1)[0],u=t.scaleName(t.stack.fieldChannel),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.vgField(t.stack.fieldChannel,e)},f=function(t,e){var n=[l({prefix:"min",suffix:"start",expr:e}),l({prefix:"max",suffix:"start",expr:e}),l({prefix:"min",suffix:"end",expr:e}),l({prefix:"max",suffix:"end",expr:e})];return"".concat(t,"(").concat(n.map((function(t){return"scale('".concat(u,"',").concat(t,")")})).join(","),")")};"x"===t.stack.fieldChannel?(n=Object.assign(Object.assign({},_(o.encode.update,["y","yc","y2","height"].concat(Object(s.a)(Kr)))),{x:{signal:f("min","datum")},x2:{signal:f("max","datum")},clip:{value:!0}}),r={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},o.encode.update=Object.assign(Object.assign({},O(o.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(n=Object.assign(Object.assign({},_(o.encode.update,["x","xc","x2","width"])),{y:{signal:f("min","datum")},y2:{signal:f("max","datum")},clip:{value:!0}}),r={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},o.encode.update=Object.assign(Object.assign({},O(o.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));var h,d=Object(a.a)(Kr);try{for(d.s();!(h=d.n()).done;){var p=h.value,g=Oa(p,t.markDef,t.config);o.encode.update[p]?(n[p]=o.encode.update[p],delete o.encode.update[p]):g&&(n[p]=ya(g)),g&&(o.encode.update[p]={value:0})}}catch(y){d.e(y)}finally{d.f()}var v=t.fieldDef(t.stack.groupbyChannel),m=Go(v)?[Go(v)]:[];((null===v||void 0===v?void 0:v.bin)||(null===v||void 0===v?void 0:v.timeUnit))&&m.push(Go(v,{binSuffix:"end"}));return(n=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((function(e,n){if(o.encode.update[n])return Object.assign(Object.assign({},e),Object(Pt.a)({},n,o.encode.update[n]));var r=Oa(n,t.markDef,t.config);return void 0!==r?Object.assign(Object.assign({},e),Object(Pt.a)({},n,ya(r))):e}),n)).stroke&&(n.strokeForeground={value:!0},n.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(ju),name:"stack_group_"+t.requestDataName(ju),groupby:m,aggregate:{fields:[l({suffix:"start"}),l({suffix:"start"}),l({suffix:"end"}),l({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:n},marks:[{type:"group",encode:{update:r},marks:[o]}]}]}return Pd(t)}(t):Pd(t)}function Fd(t){var e=t.encoding,n=t.stack,r=t.mark,i=t.markDef,a=t.config,s=e.order;if(!(!Object(o.A)(s)&&Bo(s)&&E(s.value)||!s&&E(_a("order",i,a)))){if((Object(o.A)(s)||Lo(s))&&!n)return Ea(s,{expr:"datum"});if(At(r)){var u="horizontal"===i.orient?"y":"x",c=e[u];if(Lo(c)){var l=c.sort;return Object(o.A)(l)?{field:Go(c,{prefix:u,suffix:"sort_index",expr:"datum"})}:_o(l)?{field:Go({aggregate:Ma(t.encoding)?l.op:void 0,field:l.field},{expr:"datum"})}:xo(l)?{field:Go(t.fieldDef(l.encoding),{expr:"datum"}),order:l.order}:null===l?void 0:{field:Go(c,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}function Pd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},n=t.mark,r=t.markDef,i=t.config,o=X(r.clip,$d(t),zd(t)),a=xa(r),s=t.encoding.key,u=Fd(t),c=Bd(t),l=_a("aria",r,i),f=Nd[n].postEncodingTransform?Nd[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:Nd[n].vgMark},o?{clip:!0}:{}),a?{style:a}:{}),s?{key:s.field}:{}),u?{sort:u}:{}),c||{}),!1===l?{aria:l}:{}),{from:{data:e.fromPrefix+t.requestDataName(ju)},encode:{update:Nd[n].encodeEntry(t)}}),f?{transform:f}:{})]}function $d(t){var e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return!!(e&&e.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}function zd(t){var e=t.component.projection;return!(!e||e.isFit)||void 0}function Bd(t){if(!t.component.selection)return null;for(var e=I(t.component.selection).length,n=e,r=t.parent;r&&0===n;)n=I(r.component.selection).length,r=r.parent;return n?{interactive:e>0}:null}var Ud=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,r,i){var o,a,s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4?arguments[4]:void 0;Object(lt.a)(this,n),(o=e.call(this,t,"unit",r,i,c,void 0,gs(t)?t.view:void 0)).specifiedScales={},o.specifiedAxes={},o.specifiedLegends={},o.specifiedProjection={},o.selection={},o.children=[];var l=Tt(t.mark)?t.mark.type:t.mark;o.markDef=Rd(t.mark,null!==(a=t.encoding)&&void 0!==a?a:{},c,{graticule:t.data&&Cu(t.data)});var f=o.encoding=Da(null!==(s=t.encoding)&&void 0!==s?s:{},o.markDef,c);return o.size=Md({encoding:f,size:gs(t)?Object.assign(Object.assign(Object.assign({},u),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):u}),o.stack=qs(l,f),o.specifiedScales=o.initScales(l,f),o.specifiedAxes=o.initAxes(f),o.specifiedLegends=o.initLegend(f),o.specifiedProjection=t.projection,o.selection=t.selection,o}return Object(ft.a)(n,[{key:"scaleDomain",value:function(t){var e=this.specifiedScales[t];return e?e.domain:void 0}},{key:"axis",value:function(t){return this.specifiedAxes[t]}},{key:"legend",value:function(t){return this.specifiedLegends[t]}},{key:"initScales",value:function(t,e){return Pe.reduce((function(t,n){var r,i=aa(e[n]);return i&&(t[n]=null!==(r=i.scale)&&void 0!==r?r:{}),t}),{})}},{key:"initAxes",value:function(t){return Te.reduce((function(e,n){var r=t[n];if($o(r)||n===Qt&&$o(t.x2)||n===Xt&&$o(t.y2)){var i=$o(r)?r.axis:void 0;e[n]=i?Object.assign({},i):i}return e}),{})}},{key:"initLegend",value:function(t){return Ie.reduce((function(e,n){var r=aa(t[n]);if(r&&function(t){switch(t){case re:case ie:case oe:case se:case ae:case"opacity":case"strokeWidth":case"strokeDash":return!0;case"fillOpacity":case"strokeOpacity":case"angle":return!1}}(n)){var i=r.legend;e[n]=i?Object.assign({},i):i}return e}),{})}},{key:"parseData",value:function(){this.component.data=wd(this)}},{key:"parseLayoutSize",value:function(){!function(t){var e,n=t.size,r=t.component,i=Object(a.a)(Te);try{for(i.s();!(e=i.n()).done;){var o=Ee(e.value);if(n[o]){var s=n[o];r.layoutSize.set(o,ps(s)?"step":s,!0)}else{var u=gd(t,o);r.layoutSize.set(o,u,!1)}}}catch(c){i.e(c)}finally{i.f()}}(this)}},{key:"parseSelections",value:function(){this.component.selection=function(t,e){var n,r,i={},s=t.config.selection,c=Object(a.a)(I(null!==e&&void 0!==e?e:{}));try{var l=function(){var a=r.value,c=x(e[a]),l=s[c.type],f=(l.fields,l.encodings,u(l,["fields","encodings"]));for(var h in f)"encodings"===h&&c.fields||"fields"===h&&c.encodings||("mark"===h&&(c[h]=Object.assign(Object.assign({},f[h]),c[h])),void 0!==c[h]&&!0!==c[h]||(c[h]=null!==(n=f[h])&&void 0!==n?n:c[h]));var d=z(a),p=i[d]=Object.assign(Object.assign({},c),{name:d,events:Object(o.H)(c.on)?Object(Ku.a)(c.on,"scope"):x(c.on)});$c(p,(function(n){n.has(p)&&n.parse&&n.parse(t,p,c,e[a])}))};for(c.s();!(r=c.n()).done;)l()}catch(f){c.e(f)}finally{c.f()}return i}(this,this.selection)}},{key:"parseMarkGroup",value:function(){this.component.mark=Id(this)}},{key:"parseAxesAndHeaders",value:function(){var t;this.component.axes=(t=this,Te.reduce((function(e,n){return t.component.scales[n]&&(e[n]=[Td(n,t)]),e}),{}))}},{key:"assembleSelectionTopLevelSignals",value:function(t){return function(t,e){var n=!1;return tl(t,(function(r,i){var a=r.name,s=Object(o.Z)(a+Yc);if(0===e.filter((function(t){return t.name===a})).length){var u="global"===r.resolve?"union":r.resolve,c="multi"===r.type?", true)":")";e.push({name:r.name,update:"".concat(Zc,"(").concat(s,", ").concat(Object(o.Z)(u)).concat(c)})}n=!0,i.topLevelSignals&&(e=i.topLevelSignals(t,r,e)),$c(r,(function(n){n.topLevelSignals&&(e=n.topLevelSignals(t,r,e))}))})),n&&0===e.filter((function(t){return"unit"===t.name})).length&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),Uc(e)}(this,t)}},{key:"assembleSignals",value:function(){return[].concat(Object(s.a)(dl(this)),Object(s.a)((e=[],tl(t=this,(function(n,r){var i,a=n.name,u=r.modifyExpr(t,n);(i=e).push.apply(i,Object(s.a)(r.signals(t,n))),$c(n,(function(r){r.signals&&(e=r.signals(t,n,e)),r.modifyExpr&&(u=r.modifyExpr(t,n,u))})),e.push({name:a+Xc,on:[{events:{signal:n.name+Qc},update:"modify(".concat(Object(o.Z)(n.name+Yc),", ").concat(u,")")}]})})),Uc(e))));var t,e}},{key:"assembleSelectionData",value:function(t){return function(t,e){var n=Object(s.a)(e);return tl(t,(function(e){var r={name:e.name+Yc};if(e.init){var i=e.project.items.map((function(t){t.signals;return u(t,["signals"])})),o=e.init.map((function(t){return zc(t,!1)}));r.values="interval"===e.type?[{unit:nl(t,{escape:!1}),fields:i,values:o}]:o.map((function(e){return{unit:nl(t,{escape:!1}),fields:i,values:e}}))}n.filter((function(t){return t.name===e.name+Yc})).length||n.push(r)})),n}(this,t)}},{key:"assembleLayout",value:function(){return null}},{key:"assembleLayoutSignals",value:function(){return Hl(this)}},{key:"assembleMarks",value:function(){var t,e=null!==(t=this.component.mark)&&void 0!==t?t:[];return this.parent&&Vh(this.parent)||(e=Bc(this,e)),e.map(this.correctDataNames)}},{key:"getMapping",value:function(){return this.encoding}},{key:"channelHasField",value:function(t){return Ta(this.encoding,t)}},{key:"fieldDef",value:function(t){return oa(this.encoding[t])}},{key:"typedFieldDef",value:function(t){var e=this.fieldDef(t);return zo(e)?e:null}},{key:"hasProjection",get:function(){var t=this.encoding,e=this.mark===Et,n=t&&fe.some((function(e){return $o(t[e])}));return e||n}},{key:"mark",get:function(){return this.markDef.type}}]),n}(Gh),Wd=function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(t,i,o,a,s){var u;Object(lt.a)(this,n),u=e.call(this,t,"layer",i,o,s,t.resolve,t.view);var c=Object.assign(Object.assign(Object.assign({},a),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});return u.children=t.layer.map((function(t,e){if(Ls(t))return new n(t,Object(pu.a)(u),u.getName("layer_"+e),c,s);if(It(t))return new Ud(t,Object(pu.a)(u),u.getName("layer_"+e),c,s);throw new Error(r.invalidSpec(t))})),u}return Object(ft.a)(n,[{key:"parseData",value:function(){this.component.data=wd(this);var t,e=Object(a.a)(this.children);try{for(e.s();!(t=e.n()).done;){t.value.parseData()}}catch(n){e.e(n)}finally{e.f()}}},{key:"parseLayoutSize",value:function(){var t;dd(t=this),pd(t,"width"),pd(t,"height")}},{key:"parseSelections",value:function(){this.component.selection={};var t,e=Object(a.a)(this.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.parseSelections();var r,i=Object(a.a)(I(n.component.selection));try{for(i.s();!(r=i.n()).done;){var o=r.value;this.component.selection[o]=n.component.selection[o]}}catch(s){i.e(s)}finally{i.f()}}}catch(s){e.e(s)}finally{e.f()}}},{key:"parseMarkGroup",value:function(){var t,e=Object(a.a)(this.children);try{for(e.s();!(t=e.n()).done;){t.value.parseMarkGroup()}}catch(n){e.e(n)}finally{e.f()}}},{key:"parseAxesAndHeaders",value:function(){!function(t){var e,n,r=t.component,i=r.axes,o=r.resolve,s={top:0,bottom:0,right:0,left:0},u=Object(a.a)(t.children);try{for(u.s();!(n=u.n()).done;){var c=n.value;c.parseAxesAndHeaders();var l,f=Object(a.a)(I(c.component.axes));try{for(f.s();!(l=f.n()).done;){var h=l.value;o.axis[h]=Xl(t.component.resolve,h),"shared"===o.axis[h]&&(i[h]=Ed(i[h],c.component.axes[h]),i[h]||(o.axis[h]="independent",delete i[h]))}}catch(j){f.e(j)}finally{f.f()}}}catch(j){u.e(j)}finally{u.f()}var d,p=Object(a.a)(Te);try{for(p.s();!(d=p.n()).done;){var g,v=d.value,m=Object(a.a)(t.children);try{for(m.s();!(g=m.n()).done;){var y=g.value;if(y.component.axes[v]){if("independent"===o.axis[v]){i[v]=(null!==(e=i[v])&&void 0!==e?e:[]).concat(y.component.axes[v]);var b,w=Object(a.a)(y.component.axes[v]);try{for(w.s();!(b=w.n()).done;){var x=b.value,_=x.getWithExplicit("orient"),O=_.value,k=_.explicit;if(!Wr(O)){if(s[O]>0&&!k){var S=Sd[O];s[O]>s[S]&&x.set("orient",S,!1)}s[O]++}}}catch(j){w.e(j)}finally{w.f()}}delete y.component.axes[v]}}}catch(j){m.e(j)}finally{m.f()}if("independent"===o.axis[v]&&i[v]&&i[v].length>1){var E,A=Object(a.a)(i[v]);try{for(A.s();!(E=A.n()).done;){var C=E.value;C.get("grid")&&!C.explicit.grid&&(C.implicit.grid=!1)}}catch(j){A.e(j)}finally{A.f()}}}}catch(j){p.e(j)}finally{p.f()}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionTopLevelSignals(t)}),t)}},{key:"assembleSignals",value:function(){return this.children.reduce((function(t,e){return t.concat(e.assembleSignals())}),dl(this))}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce((function(t,e){return t.concat(e.assembleLayoutSignals())}),Hl(this))}},{key:"assembleSelectionData",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionData(t)}),t)}},{key:"assembleTitle",value:function(){var t=Is(Object(Ns.a)(n.prototype),"assembleTitle",this).call(this);if(t)return t;var e,r=Object(a.a)(this.children);try{for(r.s();!(e=r.n()).done;){if(t=e.value.assembleTitle())return t}}catch(i){r.e(i)}finally{r.f()}}},{key:"assembleLayout",value:function(){return null}},{key:"assembleMarks",value:function(){return function(t,e){var n,r=Object(a.a)(t.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;Uh(i)&&(e=Bc(i,e))}}catch(o){r.e(o)}finally{r.f()}return e}(this,this.children.flatMap((function(t){return t.assembleMarks()})))}},{key:"assembleLegends",value:function(){return this.children.reduce((function(t,e){return t.concat(e.assembleLegends())}),vf(this))}}]),n}(qh);function Hd(t,e,n,i,o){if(Eo(t))return new md(t,e,n,o);if(Ls(t))return new Wd(t,e,n,i,o);if(It(t))return new Ud(t,e,n,i,o);if(function(t){return hs(t)||ds(t)||fs(t)}(t))return new xd(t,e,n,o);throw new Error(r.invalidSpec(t))}function Vd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.logger&&xr(e.logger),e.fieldTitle&&Jo(e.fieldTitle);try{var n=Cs(Object(o.N)(e.config,t.config)),r=cu(t,n),i=Hd(r,null,"",void 0,n);i.parse(),dh(i.component.data,i);var a=Gd(i,qd(t,r.autosize,n,i),t.datasets,t.usermeta);return{spec:a,normalized:r}}finally{e.logger&&_r(),e.fieldTitle&&ta()}}function qd(t,e,n,i){var a,s=i.component.layoutSize.get("width"),u=i.component.layoutSize.get("height");if(void 0===e?(e={type:"pad"},i.hasAxisOrientSignalRef()&&(e.resize=!0)):Object(o.H)(e)&&(e={type:e}),s&&u&&("fit"===(a=e.type)||"fit-x"===a||"fit-y"===a))if("step"===s&&"step"===u)Or(r.droppingFit()),e.type="pad";else if("step"===s||"step"===u){var c="step"===s?"width":"height";Or(r.droppingFit(Le(c)));var l="width"===c?"height":"width";e.type=function(t){return t?"fit-".concat(Le(t)):"fit"}(l)}return Object.assign(Object.assign(Object.assign({},1===I(e).length&&e.type?"pad"===e.type?{}:{autosize:e.type}:{autosize:e}),du(n)),du(t))}function Gd(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=t.config?Rs(t.config):void 0,o=[].concat(t.assembleSelectionData([]),ud(t.component.data,n)),a=t.assembleProjections(),u=t.assembleTitle(),c=t.assembleGroupStyle(),l=t.assembleGroupEncodeEntry(!0),f=t.assembleLayoutSignals();return f=f.filter((function(t){return"width"!==t.name&&"height"!==t.name||void 0===t.value||(e[t.name]=+t.value,!1)})),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),e),u?{title:u}:{}),c?{style:c}:{}),l?{encode:{update:l}}:{}),{data:o}),a.length>0?{projections:a}:{}),t.assembleGroup([].concat(Object(s.a)(f),Object(s.a)(t.assembleSelectionTopLevelSignals([]))))),i?{config:i}:{}),r?{usermeta:r}:{})}var Kd=new(function(t){Object(Ps.a)(n,t);var e=Object(Fs.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return Object(ft.a)(n,[{key:"mapUnit",value:function(t,e){var n=e.config;if(t.encoding){var r=t.encoding,i=t.transform,o=Ra(r,n),a=o.bins,u=o.timeUnits,c=o.aggregate,l=o.groupby,f=o.encoding,h=[].concat(Object(s.a)(i||[]),Object(s.a)(a),Object(s.a)(u),Object(s.a)(0===c.length?[]:[{aggregate:c,groupby:l}]));return Object.assign(Object.assign(Object.assign({},t),h.length>0?{transform:h}:{}),{encoding:f})}return t}}]),n}($s));function Yd(t,e){return Kd.map(t,{config:e})}var Qd=i.version},function(t,e,n){"use strict";n.r(e),n.d(e,"dark",(function(){return i})),n.d(e,"excel",(function(){return o})),n.d(e,"fivethirtyeight",(function(){return a})),n.d(e,"ggplot2",(function(){return s})),n.d(e,"latimes",(function(){return l})),n.d(e,"quartz",(function(){return f})),n.d(e,"vox",(function(){return h})),n.d(e,"urbaninstitute",(function(){return p})),n.d(e,"googlecharts",(function(){return g})),n.d(e,"version",(function(){return v}));var r=n(125),i={background:"#333",title:{color:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}},o={background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},a={arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},bar:{binSpacing:2,fill:"#30a2da",stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},s={group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},u="Benton Gothic Bold, sans-serif",c={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},l={background:"#ffffff",title:{anchor:"start",color:"#000000",font:u,fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:u,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:u,titleFontSize:13,titleFontWeight:"normal"},range:{category:c["category-6"],diverging:c["fireandice-6"],heatmap:c["fire-7"],ordinal:c["fire-7"],ramp:c["fire-7"]}},f={background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},h={background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},d={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},p={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:"Lato"},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:"Lato",labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:"Lato"},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:"Lato",labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:"Lato",titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:"Lato",symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:"Lato",orient:"right",offset:10},view:{stroke:"transparent"},range:{category:d["six-groups-cat-1"],diverging:d["diverging-colors"],heatmap:d["diverging-colors"],ordinal:d["six-groups-seq"],ramp:d["shades-blue"]},area:{fill:"#1696d2"},rect:{fill:"#1696d2"},line:{color:"#1696d2",stroke:"#1696d2",strokeWidth:5},trail:{color:"#1696d2",stroke:"#1696d2",strokeWidth:0,size:1},path:{stroke:"#1696d2",strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:"#1696d2",fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:"#1696d2",stroke:null}},arc:{fill:"#1696d2"},shape:{stroke:"#1696d2"},symbol:{fill:"#1696d2",size:30}},g={arc:{fill:"#3366CC"},area:{fill:"#3366CC"},path:{stroke:"#3366CC"},rect:{fill:"#3366CC"},shape:{stroke:"#3366CC"},symbol:{stroke:"#3366CC"},circle:{fill:"#3366CC"},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:"Arial, sans-serif",fontSize:12},"guide-title":{font:"Arial, sans-serif",fontSize:12},"group-title":{font:"Arial, sans-serif",fontSize:12}},title:{font:"Arial, sans-serif",fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},v=r.version},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(126),i=n(5),o=n(6),a="vg-tooltip-element",s={offsetX:10,offsetY:10,id:a,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};var u=n(1),c=n(0),l=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function f(t,e){return JSON.stringify(t,function(t){var e=[];return function(n,r){if("object"!==typeof r||null===r)return r;var i=e.indexOf(this)+1;return e.length=i,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}(e))}var h=function(){function t(e){Object(i.a)(this,t),this.options=Object.assign(Object.assign({},s),e);var n=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace(a,t)}(n);var o=document.head;o.childNodes.length>0?o.insertBefore(r,o.childNodes[0]):o.appendChild(r)}this.el=document.getElementById(n),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",n),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}return Object(o.a)(t,[{key:"tooltipHandler",value:function(t,e,n,r){if(null!=r&&""!==r){this.el.innerHTML=function(t,e,n){if(Object(c.A)(t))return"[".concat(t.map((function(t){return e(Object(c.H)(t)?t:f(t,n))})).join(", "),"]");if(Object(c.F)(t)){var r="",i=t,o=i.title,a=i.image,s=l(i,["title","image"]);o&&(r+="<h2>".concat(e(o),"</h2>")),a&&(r+='<img src="'.concat(e(a),'">'));var h=Object.keys(s);if(h.length>0){r+="<table>";var d,p=Object(u.a)(h);try{for(p.s();!(d=p.n()).done;){var g=d.value,v=s[g];void 0!==v&&(Object(c.F)(v)&&(v=f(v,n)),r+='<tr><td class="key">'.concat(e(g),':</td><td class="value">').concat(e(v),"</td></tr>"))}}catch(m){p.e(m)}finally{p.f()}r+="</table>"}return r||"{}"}return e(t)}(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var i=function(t,e,n,r){var i=t.clientX+n;i+e.width>window.innerWidth&&(i=+t.clientX-n-e.width);var o=t.clientY+r;return o+e.height>window.innerHeight&&(o=+t.clientY-r-e.height),{x:i,y:o}}(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),o=i.x,a=i.y;this.el.setAttribute("style","top: ".concat(a,"px; left: ").concat(o,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),t}();r.version},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(19);function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var o=n(2),a=n.n(o),s=n(31);n(15);function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function c(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var l=n(28);a.a.Component;var f=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).history=Object(s.b)(e.props),e}return i(e,t),e.prototype.render=function(){return a.a.createElement(r.c,{history:this.history,children:this.props.children})},e}(a.a.Component);var h=function(t,e){return"function"===typeof t?t(e):t},d=function(t,e){return"string"===typeof t?Object(s.c)(t,null,null,e):t},p=function(t){return t},g=a.a.forwardRef;"undefined"===typeof g&&(g=p);var v=g((function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,o=c(t,["innerRef","navigate","onClick"]),s=o.target,l=u({},o,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||s&&"_self"!==s||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),r())}});return l.ref=p!==g&&e||n,a.a.createElement("a",l)}));var m=g((function(t,e){var n=t.component,i=void 0===n?v:n,o=t.replace,s=t.to,f=t.innerRef,m=c(t,["component","replace","to","innerRef"]);return a.a.createElement(r.e.Consumer,null,(function(t){t||Object(l.a)(!1);var n=t.history,r=d(h(s,t.location),t.location),c=r?n.createHref(r):"",v=u({},m,{href:c,navigate:function(){var e=h(s,t.location);(o?n.replace:n.push)(e)}});return p!==g?v.ref=e||f:v.innerRef=f,a.a.createElement(i,v)}))})),y=function(t){return t},b=a.a.forwardRef;"undefined"===typeof b&&(b=y);b((function(t,e){var n=t["aria-current"],i=void 0===n?"page":n,o=t.activeClassName,s=void 0===o?"active":o,f=t.activeStyle,p=t.className,g=t.exact,v=t.isActive,w=t.location,x=t.sensitive,_=t.strict,O=t.style,k=t.to,S=t.innerRef,E=c(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.a.createElement(r.e.Consumer,null,(function(t){t||Object(l.a)(!1);var n=w||t.location,o=d(h(k,n),n),c=o.pathname,A=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=A?Object(r.f)(n.pathname,{path:A,exact:g,sensitive:x,strict:_}):null,j=!!(v?v(C,n):C),T=j?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return t})).join(" ")}(p,s):p,M=j?u({},O,{},f):O,R=u({"aria-current":j&&i||null,className:T,style:M,to:o},E);return y!==b?R.ref=e||S:R.innerRef=S,a.a.createElement(m,R)}))}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var r={};n.r(r),n.d(r,"JsonPatchError",(function(){return g})),n.d(r,"deepClone",(function(){return v})),n.d(r,"getValueByPointer",(function(){return b})),n.d(r,"applyOperation",(function(){return w})),n.d(r,"applyPatch",(function(){return x})),n.d(r,"applyReducer",(function(){return _})),n.d(r,"validator",(function(){return O})),n.d(r,"validate",(function(){return k})),n.d(r,"_areEquals",(function(){return S}));var i={};n.r(i),n.d(i,"unobserve",(function(){return j})),n.d(i,"observe",(function(){return T})),n.d(i,"generate",(function(){return M})),n.d(i,"compare",(function(){return D}));var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=Object.prototype.hasOwnProperty;function s(t,e){return a.call(t,e)}function u(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);e=[];for(var r in t)s(t,r)&&e.push(r);return e}function c(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function l(t){for(var e,n=0,r=t.length;n<r;){if(!((e=t.charCodeAt(n))>=48&&e<=57))return!1;n++}return!0}function f(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function h(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function d(t,e){var n=[t];for(var r in e){var i="object"===typeof e[r]?JSON.stringify(e[r],null,2):e[r];"undefined"!==typeof i&&n.push(r+": "+i)}return n.join("\n")}var p=function(t){function e(e,n,r,i,o){var a=this.constructor,s=t.call(this,d(e,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=d(e,{name:n,index:r,operation:i,tree:o}),s}return o(e,t),e}(Error),g=p,v=c,m={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){var r=b(n,this.path);r&&(r=c(r));var i=w(n,{op:"remove",path:this.from}).removed;return w(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){var r=b(n,this.from);return w(n,{op:"add",path:this.path,value:c(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:S(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},y={add:function(t,e,n){return l(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){return{newDocument:n,removed:t.splice(e,1)[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:m.move,copy:m.copy,test:m.test,_get:m._get};function b(t,e){if(""==e)return t;var n={op:"_get",path:e};return w(t,n),n.value}function w(t,e,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(e,0,t,e.path):O(e,0)),""===e.path){var a={newDocument:t};if("add"===e.op)return a.newDocument=e.value,a;if("replace"===e.op)return a.newDocument=e.value,a.removed=t,a;if("move"===e.op||"copy"===e.op)return a.newDocument=b(t,e.from),"move"===e.op&&(a.removed=t),a;if("test"===e.op){if(a.test=S(t,e.value),!1===a.test)throw new g("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return a.newDocument=t,a}if("remove"===e.op)return a.removed=t,a.newDocument=null,a;if("_get"===e.op)return e.value=t,a;if(n)throw new g("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return a}r||(t=c(t));var s=(e.path||"").split("/"),u=t,f=1,d=s.length,p=void 0,v=void 0,w=void 0;for(w="function"==typeof n?n:O;;){if(v=s[f],i&&"__proto__"==v)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===p&&(void 0===u[v]?p=s.slice(0,f).join("/"):f==d-1&&(p=e.path),void 0!==p&&w(e,0,t,p)),f++,Array.isArray(u)){if("-"===v)v=u.length;else{if(n&&!l(v))throw new g("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);l(v)&&(v=~~v)}if(f>=d){if(n&&"add"===e.op&&v>u.length)throw new g("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);if(!1===(a=y[e.op].call(e,u,v,t)).test)throw new g("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return a}}else if(v&&-1!=v.indexOf("~")&&(v=h(v)),f>=d){if(!1===(a=m[e.op].call(e,u,v,t)).test)throw new g("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return a}u=u[v]}}function x(t,e,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(e))throw new g("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=c(t));for(var o=new Array(e.length),a=0,s=e.length;a<s;a++)o[a]=w(t,e[a],n,!0,i,a),t=o[a].newDocument;return o.newDocument=t,o}function _(t,e,n){var r=w(t,e);if(!1===r.test)throw new g("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function O(t,e,n,r){if("object"!==typeof t||null===t||Array.isArray(t))throw new g("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(!m[t.op])throw new g("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n);if("string"!==typeof t.path)throw new g("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new g('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if(("move"===t.op||"copy"===t.op)&&"string"!==typeof t.from)throw new g("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new g("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&function t(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return!0}else if("object"===typeof e){var i=u(e),o=i.length;for(n=0;n<o;n++)if(t(e[i[n]]))return!0}return!1}(t.value))throw new g("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n)if("add"==t.op){var i=t.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new g("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==r)throw new g("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if("move"===t.op||"copy"===t.op){var a=k([{op:"_get",path:t.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new g("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}function k(t,e,n){try{if(!Array.isArray(t))throw new g("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)x(c(e),c(t),n||!0);else{n=n||O;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof g)return i;throw i}}function S(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n,r,i,o=Array.isArray(t),a=Array.isArray(e);if(o&&a){if((r=t.length)!=e.length)return!1;for(n=r;0!==n--;)if(!S(t[n],e[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(t);if((r=s.length)!==Object.keys(e).length)return!1;for(n=r;0!==n--;)if(!e.hasOwnProperty(s[n]))return!1;for(n=r;0!==n--;)if(!S(t[i=s[n]],e[i]))return!1;return!0}return t!==t&&e!==e}var E=new WeakMap,A=function(t){this.observers=new Map,this.obj=t},C=function(t,e){this.callback=t,this.observer=e};function j(t,e){e.unobserve()}function T(t,e){var n,r=function(t){return E.get(t)}(t);if(r){var i=function(t,e){return t.observers.get(e)}(r,e);n=i&&i.observer}else r=new A(t),E.set(t,r);if(n)return n;if(n={},r.value=c(t),e){n.callback=e,n.next=null;var o=function(){M(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!==typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return n.patches=[],n.object=t,n.unobserve=function(){M(n),clearTimeout(n.next),function(t,e){t.observers.delete(e.callback)}(r,n),"undefined"!==typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(e,new C(e,n)),n}function M(t,e){void 0===e&&(e=!1);var n=E.get(t.object);R(n.value,t.object,t.patches,"",e),t.patches.length&&x(n.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function R(t,e,n,r,i){if(e!==t){"function"===typeof e.toJSON&&(e=e.toJSON());for(var o=u(e),a=u(t),l=!1,h=a.length-1;h>=0;h--){var d=t[g=a[h]];if(!s(e,g)||void 0===e[g]&&void 0!==d&&!1===Array.isArray(e))Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+f(g),value:c(d)}),n.push({op:"remove",path:r+"/"+f(g)}),l=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}),!0);else{var p=e[g];"object"==typeof d&&null!=d&&"object"==typeof p&&null!=p?R(d,p,n,r+"/"+f(g),i):d!==p&&(!0,i&&n.push({op:"test",path:r+"/"+f(g),value:c(d)}),n.push({op:"replace",path:r+"/"+f(g),value:c(p)}))}}if(l||o.length!=a.length)for(h=0;h<o.length;h++){var g;s(t,g=o[h])||void 0===e[g]||n.push({op:"add",path:r+"/"+f(g),value:c(e[g])})}}}function D(t,e,n){void 0===n&&(n=!1);var r=[];return R(t,e,r,"",n),r}Object.assign({},r,i,{JsonPatchError:p,deepClone:c,escapePathComponent:f,unescapePathComponent:h})},function(t,e,n){"use strict";function r(t){for(var e="https://material-ui.com/production-error/?code="+t,n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+t+"; visit "+e+" for the full message."}n.d(e,"a",(function(){return r}))},,,,,,function(t,e,n){"use strict";var r=n(99),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,v="function"===typeof Symbol&&Symbol.iterator;function m(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||y}function x(){}function _(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||y}w.prototype.isReactComponent={},w.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(m(85));this.updater.enqueueSetState(this,t,e,"setState")},w.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},x.prototype=w.prototype;var O=_.prototype=new x;O.constructor=_,r(O,w.prototype),O.isPureReactComponent=!0;var k={current:null},S=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)S.call(e,r)&&!E.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:k.current}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var j=/\/+/g,T=[];function M(t,e,n,r){if(T.length){var i=T.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function R(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>T.length&&T.push(t)}function D(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+L(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=n+L(s=e[c],c);u+=t(s,l,r,i)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=v&&e[v]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=t(s=s.value,l=n+L(s,c++),r,i);else if("object"===s)throw r=""+e,Error(m(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function L(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function N(t,e){t.func.call(t.context,e,t.count++)}function I(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?F(t,r,n,(function(t){return t})):null!=t&&(C(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(j,"$&/")+"/")+n)),r.push(t))}function F(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(j,"$&/")+"/"),D(t,I,e=M(e,o,r,i)),R(e)}var P={current:null};function $(){var t=P.current;if(null===t)throw Error(m(321));return t}var z={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return F(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;D(t,N,e=M(null,null,e,n)),R(e)},count:function(t){return D(t,(function(){return null}),null)},toArray:function(t){var e=[];return F(t,e,null,(function(t){return t})),e},only:function(t){if(!C(t))throw Error(m(143));return t}},e.Component=w,e.Fragment=s,e.Profiler=c,e.PureComponent=_,e.StrictMode=u,e.Suspense=d,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(m(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=k.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)S.call(e,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=A,e.createFactory=function(t){var e=A.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:h,render:t}},e.isValidElement=C,e.lazy=function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return $().useCallback(t,e)},e.useContext=function(t,e){return $().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return $().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return $().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return $().useLayoutEffect(t,e)},e.useMemo=function(t,e){return $().useMemo(t,e)},e.useReducer=function(t,e,n){return $().useReducer(t,e,n)},e.useRef=function(t){return $().useRef(t)},e.useState=function(t){return $().useState(t)},e.version="16.13.1"},function(t,e,n){"use strict";var r=n(2),i=n(99),o=n(142);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}var u=!1,c=null,l=!1,f=null,h={onError:function(t){u=!0,c=t}};function d(t,e,n,r,i,o,a,l,f){u=!1,c=null,s.apply(h,arguments)}var p=null,g=null,v=null;function m(t,e,n){var r=t.type||"unknown-event";t.currentTarget=v(n),function(t,e,n,r,i,o,s,h,p){if(d.apply(this,arguments),u){if(!u)throw Error(a(198));var g=c;u=!1,c=null,l||(l=!0,f=g)}}(r,e,void 0,t),t.currentTarget=null}var y=null,b={};function w(){if(y)for(var t in b){var e=b[t],n=y.indexOf(t);if(!(-1<n))throw Error(a(96,t));if(!_[n]){if(!e.extractEvents)throw Error(a(97,t));for(var r in _[n]=e,n=e.eventTypes){var i=void 0,o=n[r],s=e,u=r;if(O.hasOwnProperty(u))throw Error(a(99,u));O[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&x(c[i],s,u);i=!0}else o.registrationName?(x(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,t))}}}}function x(t,e,n){if(k[t])throw Error(a(100,t));k[t]=e,S[t]=e.eventTypes[n].dependencies}var _=[],O={},k={},S={};function E(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!b.hasOwnProperty(e)||b[e]!==r){if(b[e])throw Error(a(102,e));b[e]=r,n=!0}}n&&w()}var A=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,j=null,T=null;function M(t){if(t=g(t)){if("function"!==typeof C)throw Error(a(280));var e=t.stateNode;e&&(e=p(e),C(t.stateNode,t.type,e))}}function R(t){j?T?T.push(t):T=[t]:j=t}function D(){if(j){var t=j,e=T;if(T=j=null,M(t),e)for(t=0;t<e.length;t++)M(e[t])}}function L(t,e){return t(e)}function N(t,e,n,r,i){return t(e,n,r,i)}function I(){}var F=L,P=!1,$=!1;function z(){null===j&&null===T||(I(),D())}function B(t,e,n){if($)return t(e,n);$=!0;try{return F(t,e,n)}finally{$=!1,z()}}var U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W=Object.prototype.hasOwnProperty,H={},V={};function q(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){G[t]=new q(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];G[e]=new q(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){G[t]=new q(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){G[t]=new q(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){G[t]=new q(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){G[t]=new q(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){G[t]=new q(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){G[t]=new q(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){G[t]=new q(t,5,!1,t.toLowerCase(),null,!1)}));var K=/[\-:]([a-z])/g;function Y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(K,Y);G[e]=new q(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(K,Y);G[e]=new q(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(K,Y);G[e]=new q(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){G[t]=new q(t,1,!1,t.toLowerCase(),null,!1)})),G.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){G[t]=new q(t,1,!1,t.toLowerCase(),null,!0)}));var Q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(t,e,n,r){var i=G.hasOwnProperty(e)?G[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!W.call(V,t)||!W.call(H,t)&&(U.test(t)?V[t]=!0:(H[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}Q.hasOwnProperty("ReactCurrentDispatcher")||(Q.ReactCurrentDispatcher={current:null}),Q.hasOwnProperty("ReactCurrentBatchConfig")||(Q.ReactCurrentBatchConfig={suspense:null});var Z=/^(.*)[\\\/]/,J="function"===typeof Symbol&&Symbol.for,tt=J?Symbol.for("react.element"):60103,et=J?Symbol.for("react.portal"):60106,nt=J?Symbol.for("react.fragment"):60107,rt=J?Symbol.for("react.strict_mode"):60108,it=J?Symbol.for("react.profiler"):60114,ot=J?Symbol.for("react.provider"):60109,at=J?Symbol.for("react.context"):60110,st=J?Symbol.for("react.concurrent_mode"):60111,ut=J?Symbol.for("react.forward_ref"):60112,ct=J?Symbol.for("react.suspense"):60113,lt=J?Symbol.for("react.suspense_list"):60120,ft=J?Symbol.for("react.memo"):60115,ht=J?Symbol.for("react.lazy"):60116,dt=J?Symbol.for("react.block"):60121,pt="function"===typeof Symbol&&Symbol.iterator;function gt(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=pt&&t[pt]||t["@@iterator"])?t:null}function vt(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case ct:return"Suspense";case lt:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case at:return"Context.Consumer";case ot:return"Context.Provider";case ut:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ft:return vt(t.type);case dt:return vt(t.render);case ht:if(t=1===t._status?t._result:null)return vt(t)}return null}function mt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=vt(t.type);n=null,r&&(n=vt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Z,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function yt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function bt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function wt(t){t._valueTracker||(t._valueTracker=function(t){var e=bt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function xt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function _t(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Ot(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=yt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function kt(t,e){null!=(e=e.checked)&&X(t,"checked",e,!1)}function St(t,e){kt(t,e);var n=yt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?At(t,e.type,n):e.hasOwnProperty("defaultValue")&&At(t,e.type,yt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Et(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function At(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Ct(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function jt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Tt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:yt(n)}}function Rt(t,e){var n=yt(e.value),r=yt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Dt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Lt="http://www.w3.org/1999/xhtml",Nt="http://www.w3.org/2000/svg";function It(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ft(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?It(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Pt,$t=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==Nt||"innerHTML"in t)t.innerHTML=e;else{for((Pt=Pt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function zt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Bt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ut={animationend:Bt("Animation","AnimationEnd"),animationiteration:Bt("Animation","AnimationIteration"),animationstart:Bt("Animation","AnimationStart"),transitionend:Bt("Transition","TransitionEnd")},Wt={},Ht={};function Vt(t){if(Wt[t])return Wt[t];if(!Ut[t])return t;var e,n=Ut[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ht)return Wt[t]=n[e];return t}A&&(Ht=document.createElement("div").style,"AnimationEvent"in window||(delete Ut.animationend.animation,delete Ut.animationiteration.animation,delete Ut.animationstart.animation),"TransitionEvent"in window||delete Ut.transitionend.transition);var qt=Vt("animationend"),Gt=Vt("animationiteration"),Kt=Vt("animationstart"),Yt=Vt("transitionend"),Qt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xt=new("function"===typeof WeakMap?WeakMap:Map);function Zt(t){var e=Xt.get(t);return void 0===e&&(e=new Map,Xt.set(t,e)),e}function Jt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function te(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ee(t){if(Jt(t)!==t)throw Error(a(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Jt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ee(i),t;if(o===r)return ee(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function re(t,e){if(null==e)throw Error(a(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ie(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var oe=null;function ae(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)m(t,e[r],n[r]);else e&&m(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function se(t){if(null!==t&&(oe=re(oe,t)),t=oe,oe=null,t){if(ie(t,ae),oe)throw Error(a(95));if(l)throw t=f,l=!1,f=null,t}}function ue(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ce(t){if(!A)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}var le=[];function fe(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>le.length&&le.push(t)}function he(t,e,n,r){if(le.length){var i=le.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function de(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=An(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ue(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<_.length;u++){var c=_[u];c&&(c=c.extractEvents(r,e,o,i,a))&&(s=re(s,c))}se(s)}}function pe(t,e,n){if(!n.has(t)){switch(t){case"scroll":Ke(e,"scroll",!0);break;case"focus":case"blur":Ke(e,"focus",!0),Ke(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ce(t)&&Ke(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Qt.indexOf(t)&&Ge(t,e)}n.set(t,null)}}var ge,ve,me,ye=!1,be=[],we=null,xe=null,_e=null,Oe=new Map,ke=new Map,Se=[],Ee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ae="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ce(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function je(t,e){switch(t){case"focus":case"blur":we=null;break;case"dragenter":case"dragleave":xe=null;break;case"mouseover":case"mouseout":_e=null;break;case"pointerover":case"pointerout":Oe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ke.delete(e.pointerId)}}function Te(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Ce(e,n,r,i,o),null!==e&&(null!==(e=Cn(e))&&ve(e)),t):(t.eventSystemFlags|=r,t)}function Me(t){var e=An(t.target);if(null!==e){var n=Jt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=te(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){me(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Re(t){if(null!==t.blockedOn)return!1;var e=Ze(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Cn(e);return null!==n&&ve(n),t.blockedOn=e,!1}return!0}function De(t,e,n){Re(t)&&n.delete(e)}function Le(){for(ye=!1;0<be.length;){var t=be[0];if(null!==t.blockedOn){null!==(t=Cn(t.blockedOn))&&ge(t);break}var e=Ze(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:be.shift()}null!==we&&Re(we)&&(we=null),null!==xe&&Re(xe)&&(xe=null),null!==_e&&Re(_e)&&(_e=null),Oe.forEach(De),ke.forEach(De)}function Ne(t,e){t.blockedOn===e&&(t.blockedOn=null,ye||(ye=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Le)))}function Ie(t){function e(e){return Ne(e,t)}if(0<be.length){Ne(be[0],t);for(var n=1;n<be.length;n++){var r=be[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==we&&Ne(we,t),null!==xe&&Ne(xe,t),null!==_e&&Ne(_e,t),Oe.forEach(e),ke.forEach(e),n=0;n<Se.length;n++)(r=Se[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Se.length&&null===(n=Se[0]).blockedOn;)Me(n),null===n.blockedOn&&Se.shift()}var Fe={},Pe=new Map,$e=new Map,ze=["abort","abort",qt,"animationEnd",Gt,"animationIteration",Kt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Yt,"transitionEnd","waiting","waiting"];function Be(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},$e.set(r,e),Pe.set(r,o),Fe[i]=o}}Be("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Be("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Be(ze,2);for(var Ue="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We=0;We<Ue.length;We++)$e.set(Ue[We],0);var He=o.unstable_UserBlockingPriority,Ve=o.unstable_runWithPriority,qe=!0;function Ge(t,e){Ke(e,t,!1)}function Ke(t,e,n){var r=$e.get(e);switch(void 0===r?2:r){case 0:r=Ye.bind(null,e,1,t);break;case 1:r=Qe.bind(null,e,1,t);break;default:r=Xe.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Ye(t,e,n,r){P||I();var i=Xe,o=P;P=!0;try{N(i,t,e,n,r)}finally{(P=o)||z()}}function Qe(t,e,n,r){Ve(He,Xe.bind(null,t,e,n,r))}function Xe(t,e,n,r){if(qe)if(0<be.length&&-1<Ee.indexOf(t))t=Ce(null,t,e,n,r),be.push(t);else{var i=Ze(t,e,n,r);if(null===i)je(t,r);else if(-1<Ee.indexOf(t))t=Ce(i,t,e,n,r),be.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return we=Te(we,t,e,n,r,i),!0;case"dragenter":return xe=Te(xe,t,e,n,r,i),!0;case"mouseover":return _e=Te(_e,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Oe.set(o,Te(Oe.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ke.set(o,Te(ke.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){je(t,r),t=he(t,r,null,e);try{B(de,t)}finally{fe(t)}}}}function Ze(t,e,n,r){if(null!==(n=An(n=ue(r)))){var i=Jt(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=te(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=he(t,r,n,e);try{B(de,t)}finally{fe(t)}return null}var Je={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function en(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||Je.hasOwnProperty(t)&&Je[t]?(""+e).trim():e+"px"}function nn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Je).forEach((function(t){tn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Je[e]=Je[t]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(t,e){if(e){if(rn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62,""))}}function an(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Lt;function un(t,e){var n=Zt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=S[e];for(var r=0;r<e.length;r++)pe(e[r],t,n)}function cn(){}function ln(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function fn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hn(t,e){var n,r=fn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=fn(r)}}function dn(){for(var t=window,e=ln();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=ln((t=e.contentWindow).document)}return e}function pn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var gn=null,vn=null;function mn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function yn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var bn="function"===typeof setTimeout?setTimeout:void 0,wn="function"===typeof clearTimeout?clearTimeout:void 0;function xn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function _n(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var On=Math.random().toString(36).slice(2),kn="__reactInternalInstance$"+On,Sn="__reactEventHandlers$"+On,En="__reactContainere$"+On;function An(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[En]||n[kn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=_n(t);null!==t;){if(n=t[kn])return n;t=_n(t)}return e}n=(t=n).parentNode}return null}function Cn(t){return!(t=t[kn]||t[En])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function jn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function Tn(t){return t[Sn]||null}function Mn(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Rn(t,e){var n=t.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}function Dn(t,e,n){(e=Rn(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Ln(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Mn(e);for(e=n.length;0<e--;)Dn(n[e],"captured",t);for(e=0;e<n.length;e++)Dn(n[e],"bubbled",t)}}function Nn(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Rn(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function In(t){t&&t.dispatchConfig.registrationName&&Nn(t._targetInst,null,t)}function Fn(t){ie(t,Ln)}var Pn=null,$n=null,zn=null;function Bn(){if(zn)return zn;var t,e,n=$n,r=n.length,i="value"in Pn?Pn.value:Pn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return zn=i.slice(t,1<e?1-e:void 0)}function Un(){return!0}function Wn(){return!1}function Hn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Un:Wn,this.isPropagationStopped=Wn,this}function Vn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function qn(t){if(!(t instanceof this))throw Error(a(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Gn(t){t.eventPool=[],t.getPooled=Vn,t.release=qn}i(Hn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){this.isPersistent=Un},isPersistent:Wn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Wn,this._dispatchInstances=this._dispatchListeners=null}}),Hn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Hn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,Gn(n),n},Gn(Hn);var Kn=Hn.extend({data:null}),Yn=Hn.extend({data:null}),Qn=[9,13,27,32],Xn=A&&"CompositionEvent"in window,Zn=null;A&&"documentMode"in document&&(Zn=document.documentMode);var Jn=A&&"TextEvent"in window&&!Zn,tr=A&&(!Xn||Zn&&8<Zn&&11>=Zn),er=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(t,e){switch(t){case"keyup":return-1!==Qn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var ar=!1;var sr={eventTypes:nr,extractEvents:function(t,e,n,r){var i;if(Xn)t:{switch(t){case"compositionstart":var o=nr.compositionStart;break t;case"compositionend":o=nr.compositionEnd;break t;case"compositionupdate":o=nr.compositionUpdate;break t}o=void 0}else ar?ir(t,n)&&(o=nr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=nr.compositionStart);return o?(tr&&"ko"!==n.locale&&(ar||o!==nr.compositionStart?o===nr.compositionEnd&&ar&&(i=Bn()):($n="value"in(Pn=r)?Pn.value:Pn.textContent,ar=!0)),o=Kn.getPooled(o,e,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),Fn(o),i=o):i=null,(t=Jn?function(t,e){switch(t){case"compositionend":return or(e);case"keypress":return 32!==e.which?null:(rr=!0,er);case"textInput":return(t=e.data)===er&&rr?null:t;default:return null}}(t,n):function(t,e){if(ar)return"compositionend"===t||!Xn&&ir(t,e)?(t=Bn(),zn=$n=Pn=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tr&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Yn.getPooled(nr.beforeInput,e,n,r)).data=t,Fn(e)):e=null,null===i?e:null===e?i:[i,e]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ur[t.type]:"textarea"===e}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function fr(t,e,n){return(t=Hn.getPooled(lr.change,t,e,n)).type="change",R(n),Fn(t),t}var hr=null,dr=null;function pr(t){se(t)}function gr(t){if(xt(jn(t)))return t}function vr(t,e){if("change"===t)return e}var mr=!1;function yr(){hr&&(hr.detachEvent("onpropertychange",br),dr=hr=null)}function br(t){if("value"===t.propertyName&&gr(dr))if(t=fr(dr,t,ue(t)),P)se(t);else{P=!0;try{L(pr,t)}finally{P=!1,z()}}}function wr(t,e,n){"focus"===t?(yr(),dr=n,(hr=e).attachEvent("onpropertychange",br)):"blur"===t&&yr()}function xr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return gr(dr)}function _r(t,e){if("click"===t)return gr(e)}function Or(t,e){if("input"===t||"change"===t)return gr(e)}A&&(mr=ce("input")&&(!document.documentMode||9<document.documentMode));var kr={eventTypes:lr,_isInputEventSupported:mr,extractEvents:function(t,e,n,r){var i=e?jn(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=vr;else if(cr(i))if(mr)a=Or;else{a=xr;var s=wr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=_r);if(a&&(a=a(t,e)))return fr(a,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&At(i,"number",i.value)}},Sr=Hn.extend({view:null,detail:null}),Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ar(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Er[t])&&!!e[t]}function Cr(){return Ar}var jr=0,Tr=0,Mr=!1,Rr=!1,Dr=Sr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Cr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=jr;return jr=t.screenX,Mr?"mousemove"===t.type?t.screenX-e:0:(Mr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Tr;return Tr=t.screenY,Rr?"mousemove"===t.type?t.screenY-e:0:(Rr=!0,0)}}),Lr=Dr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Nr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ir={eventTypes:Nr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=e,null!==(e=(e=n.relatedTarget||n.toElement)?An(e):null)&&(e!==Jt(e)||5!==e.tag&&6!==e.tag)&&(e=null)):a=null;if(a===e)return null;if("mouseout"===t||"mouseover"===t)var s=Dr,u=Nr.mouseLeave,c=Nr.mouseEnter,l="mouse";else"pointerout"!==t&&"pointerover"!==t||(s=Lr,u=Nr.pointerLeave,c=Nr.pointerEnter,l="pointer");if(t=null==a?o:jn(a),o=null==e?o:jn(e),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=t,u.relatedTarget=o,(n=s.getPooled(c,e,n,r)).type=l+"enter",n.target=o,n.relatedTarget=t,l=e,(r=a)&&l)t:{for(c=l,a=0,t=s=r;t;t=Mn(t))a++;for(t=0,e=c;e;e=Mn(e))t++;for(;0<a-t;)s=Mn(s),a--;for(;0<t-a;)c=Mn(c),t--;for(;a--;){if(s===c||s===c.alternate)break t;s=Mn(s),c=Mn(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(a=r.alternate)||a!==c);)s.push(r),r=Mn(r);for(r=[];l&&l!==c&&(null===(a=l.alternate)||a!==c);)r.push(l),l=Mn(l);for(l=0;l<s.length;l++)Nn(s[l],"bubbled",u);for(l=r.length;0<l--;)Nn(r[l],"captured",n);return 0===(64&i)?[u]:[u,n]}};var Fr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},Pr=Object.prototype.hasOwnProperty;function $r(t,e){if(Fr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Pr.call(e,n[r])||!Fr(t[n[r]],e[n[r]]))return!1;return!0}var zr=A&&"documentMode"in document&&11>=document.documentMode,Br={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ur=null,Wr=null,Hr=null,Vr=!1;function qr(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Vr||null==Ur||Ur!==ln(n)?null:("selectionStart"in(n=Ur)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Hr&&$r(Hr,n)?null:(Hr=n,(t=Hn.getPooled(Br.select,Wr,t,e)).type="select",t.target=Ur,Fn(t),t))}var Gr={eventTypes:Br,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Zt(i),o=S.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?jn(e):window,t){case"focus":(cr(i)||"true"===i.contentEditable)&&(Ur=i,Wr=e,Hr=null);break;case"blur":Hr=Wr=Ur=null;break;case"mousedown":Vr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Vr=!1,qr(n,r);case"selectionchange":if(zr)break;case"keydown":case"keyup":return qr(n,r)}return null}},Kr=Hn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Yr=Hn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qr=Sr.extend({relatedTarget:null});function Xr(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Zr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=Sr.extend({key:function(t){if(t.key){var e=Zr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Xr(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Jr[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Cr,charCode:function(t){return"keypress"===t.type?Xr(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Xr(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ei=Dr.extend({dataTransfer:null}),ni=Sr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Cr}),ri=Hn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Dr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Fe,extractEvents:function(t,e,n,r){var i=Pe.get(t);if(!i)return null;switch(t){case"keypress":if(0===Xr(n))return null;case"keydown":case"keyup":t=ti;break;case"blur":case"focus":t=Qr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case qt:case Gt:case Kt:t=Kr;break;case Yt:t=ri;break;case"scroll":t=Sr;break;case"wheel":t=ii;break;case"copy":case"cut":case"paste":t=Yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Lr;break;default:t=Hn}return Fn(e=t.getPooled(i,e,n,r)),e}};if(y)throw Error(a(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),p=Tn,g=Cn,v=jn,E({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Ir,ChangeEventPlugin:kr,SelectEventPlugin:Gr,BeforeInputEventPlugin:sr});var ai=[],si=-1;function ui(t){0>si||(t.current=ai[si],ai[si]=null,si--)}function ci(t,e){si++,ai[si]=t.current,t.current=e}var li={},fi={current:li},hi={current:!1},di=li;function pi(t,e){var n=t.type.contextTypes;if(!n)return li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function gi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function vi(){ui(hi),ui(fi)}function mi(t,e,n){if(fi.current!==li)throw Error(a(168));ci(fi,e),ci(hi,n)}function yi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,vt(e)||"Unknown",o));return i({},n,{},r)}function bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,di=fi.current,ci(fi,t),ci(hi,hi.current),!0}function wi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=yi(t,e,di),r.__reactInternalMemoizedMergedChildContext=t,ui(hi),ui(fi),ci(fi,t)):ui(hi),ci(hi,n)}var xi=o.unstable_runWithPriority,_i=o.unstable_scheduleCallback,Oi=o.unstable_cancelCallback,ki=o.unstable_requestPaint,Si=o.unstable_now,Ei=o.unstable_getCurrentPriorityLevel,Ai=o.unstable_ImmediatePriority,Ci=o.unstable_UserBlockingPriority,ji=o.unstable_NormalPriority,Ti=o.unstable_LowPriority,Mi=o.unstable_IdlePriority,Ri={},Di=o.unstable_shouldYield,Li=void 0!==ki?ki:function(){},Ni=null,Ii=null,Fi=!1,Pi=Si(),$i=1e4>Pi?Si:function(){return Si()-Pi};function zi(){switch(Ei()){case Ai:return 99;case Ci:return 98;case ji:return 97;case Ti:return 96;case Mi:return 95;default:throw Error(a(332))}}function Bi(t){switch(t){case 99:return Ai;case 98:return Ci;case 97:return ji;case 96:return Ti;case 95:return Mi;default:throw Error(a(332))}}function Ui(t,e){return t=Bi(t),xi(t,e)}function Wi(t,e,n){return t=Bi(t),_i(t,e,n)}function Hi(t){return null===Ni?(Ni=[t],Ii=_i(Ai,qi)):Ni.push(t),Ri}function Vi(){if(null!==Ii){var t=Ii;Ii=null,Oi(t)}qi()}function qi(){if(!Fi&&null!==Ni){Fi=!0;var t=0;try{var e=Ni;Ui(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Ni=null}catch(n){throw null!==Ni&&(Ni=Ni.slice(t+1)),_i(Ai,Vi),n}finally{Fi=!1}}}function Gi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function Ki(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Yi={current:null},Qi=null,Xi=null,Zi=null;function Ji(){Zi=Xi=Qi=null}function to(t){var e=Yi.current;ui(Yi),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function no(t,e){Qi=t,Zi=Xi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Ta=!0),t.firstContext=null)}function ro(t,e){if(Zi!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Zi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Xi){if(null===Qi)throw Error(a(308));Xi=e,Qi.dependencies={expirationTime:0,firstContext:e,responders:null}}else Xi=Xi.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function so(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function co(t,e){var n=t.alternate;null!==n&&ao(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function lo(t,e,n,r){var o=t.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=t.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==a){u=a.next;var c=o.baseState,l=0,f=null,h=null,d=null;if(null!==u)for(var p=u;;){if((s=p.expirationTime)<r){var g={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(h=d=g,f=c):d=d.next=g,s>l&&(l=s)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),ou(s,p.suspenseConfig);t:{var v=t,m=p;switch(s=e,g=n,m.tag){case 1:if("function"===typeof(v=m.payload)){c=v.call(g,c,s);break t}c=v;break t;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null===(s="function"===typeof(v=m.payload)?v.call(g,c,s):v)||void 0===s)break t;c=i({},c,s);break t;case 2:io=!0}}null!==p.callback&&(t.effectTag|=32,null===(s=o.effects)?o.effects=[p]:s.push(p))}if(null===(p=p.next)||p===u){if(null===(s=o.shared.pending))break;p=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===d?f=c:d.next=h,o.baseState=f,o.baseQueue=d,au(l),t.expirationTime=l,t.memoizedState=c}}function fo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var ho=Q.ReactCurrentBatchConfig,po=(new r.Component).refs;function go(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var vo={isMounted:function(t){return!!(t=t._reactInternalFiber)&&Jt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=qs(),i=ho.suspense;(i=so(r=Gs(r,t,i),i)).payload=e,void 0!==n&&null!==n&&(i.callback=n),uo(t,i),Ks(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=qs(),i=ho.suspense;(i=so(r=Gs(r,t,i),i)).tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),uo(t,i),Ks(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=qs(),r=ho.suspense;(r=so(n=Gs(n,t,r),r)).tag=2,void 0!==e&&null!==e&&(r.callback=e),uo(t,r),Ks(t,n)}};function mo(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!$r(n,r)||!$r(i,o))}function yo(t,e,n){var r=!1,i=li,o=e.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=gi(e)?di:fi.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?pi(t,i):li),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=vo,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function bo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vo.enqueueReplaceState(e,e.state,null)}function wo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=po,oo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=gi(e)?di:fi.current,i.context=pi(t,o)),lo(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(go(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&vo.enqueueReplaceState(i,i.state,null),lo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var xo=Array.isArray;function _o(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===po&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Oo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function ko(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Eu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=ju(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=_o(t,e,n),r.return=t,r):((r=Au(n.type,n.key,n.props,null,t.mode,r)).ref=_o(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Tu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function f(t,e,n,r,o){return null===e||7!==e.tag?((e=Cu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=ju(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=Au(e.type,e.key,e.props,null,t.mode,n)).ref=_o(t,null,e),n.return=t,n;case et:return(e=Tu(e,t.mode,n)).return=t,e}if(xo(e)||gt(e))return(e=Cu(e,t.mode,n,null)).return=t,e;Oo(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?f(t,e,n.props.children,r,i):c(t,e,n,r):null;case et:return n.key===i?l(t,e,n,r):null}if(xo(n)||gt(n))return null!==i?null:f(t,e,n,r,null);Oo(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?f(e,t,r.props.children,i,r.key):c(e,t,r,i);case et:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(xo(r)||gt(r))return f(e,t=t.get(n)||null,r,i,null);Oo(e,r)}return null}function g(i,a,s,u){for(var c=null,l=null,f=a,g=a=0,v=null;null!==f&&g<s.length;g++){f.index>g?(v=f,f=null):v=f.sibling;var m=d(i,f,s[g],u);if(null===m){null===f&&(f=v);break}t&&f&&null===m.alternate&&e(i,f),a=o(m,a,g),null===l?c=m:l.sibling=m,l=m,f=v}if(g===s.length)return n(i,f),c;if(null===f){for(;g<s.length;g++)null!==(f=h(i,s[g],u))&&(a=o(f,a,g),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);g<s.length;g++)null!==(v=p(f,i,g,s[g],u))&&(t&&null!==v.alternate&&f.delete(null===v.key?g:v.key),a=o(v,a,g),null===l?c=v:l.sibling=v,l=v);return t&&f.forEach((function(t){return e(i,t)})),c}function v(i,s,u,c){var l=gt(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,g=s,v=s=0,m=null,y=u.next();null!==g&&!y.done;v++,y=u.next()){g.index>v?(m=g,g=null):m=g.sibling;var b=d(i,g,y.value,c);if(null===b){null===g&&(g=m);break}t&&g&&null===b.alternate&&e(i,g),s=o(b,s,v),null===f?l=b:f.sibling=b,f=b,g=m}if(y.done)return n(i,g),l;if(null===g){for(;!y.done;v++,y=u.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,v),null===f?l=y:f.sibling=y,f=y);return l}for(g=r(i,g);!y.done;v++,y=u.next())null!==(y=p(g,i,v,y.value,c))&&(t&&null!==y.alternate&&g.delete(null===y.key?v:y.key),s=o(y,s,v),null===f?l=y:f.sibling=y,f=y);return t&&g.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===nt&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case tt:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===nt){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=_o(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===nt?((r=Cu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Au(o.type,o.key,o.props,null,t.mode,u)).ref=_o(t,r,o),u.return=t,t=u)}return s(t);case et:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Tu(o,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=ju(o,t.mode,u)).return=t,t=r),s(t);if(xo(o))return g(t,r,o,u);if(gt(o))return v(t,r,o,u);if(l&&Oo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(a(152,t.displayName||t.name||"Component"))}return n(t,r)}}var So=ko(!0),Eo=ko(!1),Ao={},Co={current:Ao},jo={current:Ao},To={current:Ao};function Mo(t){if(t===Ao)throw Error(a(174));return t}function Ro(t,e){switch(ci(To,e),ci(jo,t),ci(Co,Ao),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ft(null,"");break;default:e=Ft(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ui(Co),ci(Co,e)}function Do(){ui(Co),ui(jo),ui(To)}function Lo(t){Mo(To.current);var e=Mo(Co.current),n=Ft(e,t.type);e!==n&&(ci(jo,t),ci(Co,n))}function No(t){jo.current===t&&(ui(Co),ui(jo))}var Io={current:0};function Fo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Po(t,e){return{responder:t,props:e}}var $o=Q.ReactCurrentDispatcher,zo=Q.ReactCurrentBatchConfig,Bo=0,Uo=null,Wo=null,Ho=null,Vo=!1;function qo(){throw Error(a(321))}function Go(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fr(t[n],e[n]))return!1;return!0}function Ko(t,e,n,r,i,o){if(Bo=o,Uo=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,$o.current=null===t||null===t.memoizedState?ma:ya,t=n(r,i),e.expirationTime===Bo){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Ho=Wo=null,e.updateQueue=null,$o.current=ba,t=n(r,i)}while(e.expirationTime===Bo)}if($o.current=va,e=null!==Wo&&null!==Wo.next,Bo=0,Ho=Wo=Uo=null,Vo=!1,e)throw Error(a(300));return t}function Yo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ho?Uo.memoizedState=Ho=t:Ho=Ho.next=t,Ho}function Qo(){if(null===Wo){var t=Uo.alternate;t=null!==t?t.memoizedState:null}else t=Wo.next;var e=null===Ho?Uo.memoizedState:Ho.next;if(null!==e)Ho=e,Wo=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Wo=t).memoizedState,baseState:Wo.baseState,baseQueue:Wo.baseQueue,queue:Wo.queue,next:null},null===Ho?Uo.memoizedState=Ho=t:Ho=Ho.next=t}return Ho}function Xo(t,e){return"function"===typeof e?e(t):e}function Zo(t){var e=Qo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=Wo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.expirationTime;if(l<Bo){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,l>Uo.expirationTime&&(Uo.expirationTime=l,au(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ou(l,c.suspenseConfig),r=c.eagerReducer===t?c.eagerState:t(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,Fr(r,e.memoizedState)||(Ta=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Jo(t){var e=Qo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);Fr(o,e.memoizedState)||(Ta=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ta(t){var e=Yo();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:t}).dispatch=ga.bind(null,Uo,t),[e.memoizedState,t]}function ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Uo.updateQueue)?(e={lastEffect:null},Uo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function na(){return Qo().memoizedState}function ra(t,e,n,r){var i=Yo();Uo.effectTag|=t,i.memoizedState=ea(1|e,n,void 0,void 0===r?null:r)}function ia(t,e,n,r){var i=Qo();r=void 0===r?null:r;var o=void 0;if(null!==Wo){var a=Wo.memoizedState;if(o=a.destroy,null!==r&&Go(r,a.deps))return void ea(e,n,o,r)}Uo.effectTag|=t,i.memoizedState=ea(1|e,n,o,r)}function oa(t,e){return ra(516,4,t,e)}function aa(t,e){return ia(516,4,t,e)}function sa(t,e){return ia(4,2,t,e)}function ua(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ca(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ia(4,2,ua.bind(null,e,t),n)}function la(){}function fa(t,e){return Yo().memoizedState=[t,void 0===e?null:e],t}function ha(t,e){var n=Qo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Go(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function da(t,e){var n=Qo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Go(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pa(t,e,n){var r=zi();Ui(98>r?98:r,(function(){t(!0)})),Ui(97<r?97:r,(function(){var r=zo.suspense;zo.suspense=void 0===e?null:e;try{t(!1),n()}finally{zo.suspense=r}}))}function ga(t,e,n){var r=qs(),i=ho.suspense;i={expirationTime:r=Gs(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===Uo||null!==o&&o===Uo)Vo=!0,i.expirationTime=Bo,Uo.expirationTime=Bo;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Fr(s,a))return}catch(u){}Ks(t,r)}}var va={readContext:ro,useCallback:qo,useContext:qo,useEffect:qo,useImperativeHandle:qo,useLayoutEffect:qo,useMemo:qo,useReducer:qo,useRef:qo,useState:qo,useDebugValue:qo,useResponder:qo,useDeferredValue:qo,useTransition:qo},ma={readContext:ro,useCallback:fa,useContext:ro,useEffect:oa,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ra(4,2,ua.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ra(4,2,t,e)},useMemo:function(t,e){var n=Yo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yo();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=ga.bind(null,Uo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Yo().memoizedState=t},useState:ta,useDebugValue:la,useResponder:Po,useDeferredValue:function(t,e){var n=ta(t),r=n[0],i=n[1];return oa((function(){var n=zo.suspense;zo.suspense=void 0===e?null:e;try{i(t)}finally{zo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ta(!1),n=e[0];return e=e[1],[fa(pa.bind(null,e,t),[e,t]),n]}},ya={readContext:ro,useCallback:ha,useContext:ro,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:da,useReducer:Zo,useRef:na,useState:function(){return Zo(Xo)},useDebugValue:la,useResponder:Po,useDeferredValue:function(t,e){var n=Zo(Xo),r=n[0],i=n[1];return aa((function(){var n=zo.suspense;zo.suspense=void 0===e?null:e;try{i(t)}finally{zo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Zo(Xo),n=e[0];return e=e[1],[ha(pa.bind(null,e,t),[e,t]),n]}},ba={readContext:ro,useCallback:ha,useContext:ro,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:da,useReducer:Jo,useRef:na,useState:function(){return Jo(Xo)},useDebugValue:la,useResponder:Po,useDeferredValue:function(t,e){var n=Jo(Xo),r=n[0],i=n[1];return aa((function(){var n=zo.suspense;zo.suspense=void 0===e?null:e;try{i(t)}finally{zo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Jo(Xo),n=e[0];return e=e[1],[ha(pa.bind(null,e,t),[e,t]),n]}},wa=null,xa=null,_a=!1;function Oa(t,e){var n=ku(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function ka(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Sa(t){if(_a){var e=xa;if(e){var n=e;if(!ka(t,e)){if(!(e=xn(n.nextSibling))||!ka(t,e))return t.effectTag=-1025&t.effectTag|2,_a=!1,void(wa=t);Oa(wa,n)}wa=t,xa=xn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,_a=!1,wa=t}}function Ea(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;wa=t}function Aa(t){if(t!==wa)return!1;if(!_a)return Ea(t),_a=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!yn(e,t.memoizedProps))for(e=xa;e;)Oa(t,e),e=xn(e.nextSibling);if(Ea(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){xa=xn(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}xa=null}}else xa=wa?xn(t.stateNode.nextSibling):null;return!0}function Ca(){xa=wa=null,_a=!1}var ja=Q.ReactCurrentOwner,Ta=!1;function Ma(t,e,n,r){e.child=null===t?Eo(e,null,n,r):So(e,t.child,n,r)}function Ra(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=Ko(t,e,n,r,o,i),null===t||Ta?(e.effectTag|=1,Ma(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Ka(t,e,i))}function Da(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Su(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Au(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,La(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:$r)(i,r)&&t.ref===e.ref)?Ka(t,e,o):(e.effectTag|=1,(t=Eu(a,r)).ref=e.ref,t.return=e,e.child=t)}function La(t,e,n,r,i,o){return null!==t&&$r(t.memoizedProps,r)&&t.ref===e.ref&&(Ta=!1,i<o)?(e.expirationTime=t.expirationTime,Ka(t,e,o)):Ia(t,e,n,r,o)}function Na(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Ia(t,e,n,r,i){var o=gi(n)?di:fi.current;return o=pi(e,o),no(e,i),n=Ko(t,e,n,r,o,i),null===t||Ta?(e.effectTag|=1,Ma(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Ka(t,e,i))}function Fa(t,e,n,r,i){if(gi(n)){var o=!0;bi(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),yo(e,n,r),wo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ro(c):c=pi(e,c=gi(n)?di:fi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&bo(e,a,r,c),io=!1;var h=e.memoizedState;a.state=h,lo(e,r,a,i),u=e.memoizedState,s!==r||h!==u||hi.current||io?("function"===typeof l&&(go(e,n,l,r),u=e.memoizedState),(s=io||mo(e,n,s,r,h,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.effectTag|=4)):("function"===typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,ao(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:Ki(e.type,s),u=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=ro(c):c=pi(e,c=gi(n)?di:fi.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&bo(e,a,r,c),io=!1,u=e.memoizedState,a.state=u,lo(e,r,a,i),h=e.memoizedState,s!==r||u!==h||hi.current||io?("function"===typeof l&&(go(e,n,l,r),h=e.memoizedState),(l=io||mo(e,n,s,r,u,h,c))?(f||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof a.componentDidUpdate&&(e.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return Pa(t,e,n,r,o,i)}function Pa(t,e,n,r,i,o){Na(t,e);var a=0!==(64&e.effectTag);if(!r&&!a)return i&&wi(e,n,!1),Ka(t,e,o);r=e.stateNode,ja.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=So(e,t.child,null,o),e.child=So(e,null,s,o)):Ma(t,e,s,o),e.memoizedState=r.state,i&&wi(e,n,!0),e.child}function $a(t){var e=t.stateNode;e.pendingContext?mi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&mi(0,e.context,!1),Ro(t,e.containerInfo)}var za,Ba,Ua,Wa={dehydrated:null,retryTime:0};function Ha(t,e,n){var r,i=e.mode,o=e.pendingProps,a=Io.current,s=!1;if((r=0!==(64&e.effectTag))||(r=0!==(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ci(Io,1&a),null===t){if(void 0!==o.fallback&&Sa(e),s){if(s=o.fallback,(o=Cu(null,i,0,null)).return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Cu(s,i,n,null)).return=e,o.sibling=n,e.memoizedState=Wa,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Eo(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,s){if(o=o.fallback,(n=Eu(t,t.pendingProps)).return=e,0===(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Eu(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=Wa,e.child=n,i}return n=So(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,(o=Cu(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Cu(s,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=Wa,e.child=o,n}return e.memoizedState=null,e.child=So(e,t,o.children,n)}function Va(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),eo(t.return,e)}function qa(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Ga(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ma(t,e,r.children,n),0!==(2&(r=Io.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Va(t,n);else if(19===t.tag)Va(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ci(Io,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Fo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qa(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Fo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qa(e,!0,n,null,o,e.lastEffect);break;case"together":qa(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Ka(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&au(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Eu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Eu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ya(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qa(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return gi(e.type)&&vi(),null;case 3:return Do(),ui(hi),ui(fi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Aa(e)||(e.effectTag|=4),null;case 5:No(e),n=Mo(To.current);var o=e.type;if(null!==t&&null!=e.stateNode)Ba(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Mo(Co.current),Aa(e)){r=e.stateNode,o=e.type;var s=e.memoizedProps;switch(r[kn]=e,r[Sn]=s,o){case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(t=0;t<Qt.length;t++)Ge(Qt[t],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"form":Ge("reset",r),Ge("submit",r);break;case"details":Ge("toggle",r);break;case"input":Ot(r,s),Ge("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r),un(n,"onChange");break;case"textarea":Mt(r,s),Ge("invalid",r),un(n,"onChange")}for(var u in on(o,s),t=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"===typeof c?r.textContent!==c&&(t=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(t=["children",""+c]):k.hasOwnProperty(u)&&null!=c&&un(n,u)}switch(o){case"input":wt(r),Et(r,s,!0);break;case"textarea":wt(r),Dt(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=cn)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===sn&&(t=It(o)),t===sn?"script"===o?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[kn]=e,t[Sn]=r,za(t,e),e.stateNode=t,u=an(o,r),o){case"iframe":case"object":case"embed":Ge("load",t),c=r;break;case"video":case"audio":for(c=0;c<Qt.length;c++)Ge(Qt[c],t);c=r;break;case"source":Ge("error",t),c=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),c=r;break;case"form":Ge("reset",t),Ge("submit",t),c=r;break;case"details":Ge("toggle",t),c=r;break;case"input":Ot(t,r),c=_t(t,r),Ge("invalid",t),un(n,"onChange");break;case"option":c=Ct(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Ge("invalid",t),un(n,"onChange");break;case"textarea":Mt(t,r),c=Tt(t,r),Ge("invalid",t),un(n,"onChange");break;default:c=r}on(o,c);var l=c;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?nn(t,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&$t(t,f):"children"===s?"string"===typeof f?("textarea"!==o||""!==f)&&zt(t,f):"number"===typeof f&&zt(t,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(k.hasOwnProperty(s)?null!=f&&un(n,s):null!=f&&X(t,s,f,u))}switch(o){case"input":wt(t),Et(t,r,!1);break;case"textarea":wt(t),Dt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+yt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?jt(t,!!r.multiple,n,!1):null!=r.defaultValue&&jt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(t.onclick=cn)}mn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Ua(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=Mo(To.current),Mo(Co.current),Aa(e)?(n=e.stateNode,r=e.memoizedProps,n[kn]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[kn]=e,e.stateNode=n)}return null;case 13:return ui(Io),r=e.memoizedState,0!==(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Aa(e):(r=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=o,o.nextEffect=s):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Io.current)?As===ws&&(As=xs):(As!==ws&&As!==xs||(As=_s),0!==Rs&&null!==ks&&(Du(ks,Es),Lu(ks,Rs)))),(n||r)&&(e.effectTag|=4),null);case 4:return Do(),null;case 10:return to(e),null;case 17:return gi(e.type)&&vi(),null;case 19:if(ui(Io),null===(r=e.memoizedState))return null;if(o=0!==(64&e.effectTag),null===(s=r.rendering)){if(o)Ya(r,!1);else if(As!==ws||null!==t&&0!==(64&t.effectTag))for(s=e.child;null!==s;){if(null!==(t=Fo(s))){for(e.effectTag|=64,Ya(r,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return ci(Io,1&Io.current|2),e.child}s=s.sibling}}else{if(!o)if(null!==(t=Fo(s))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Ya(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*$i()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,Ya(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(n=r.last)?n.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=$i()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=$i(),n.sibling=null,e=Io.current,ci(Io,o?1&e|2:1&e),n):null}throw Error(a(156,e.tag))}function Xa(t){switch(t.tag){case 1:gi(t.type)&&vi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Do(),ui(hi),ui(fi),0!==(64&(e=t.effectTag)))throw Error(a(285));return t.effectTag=-4097&e|64,t;case 5:return No(t),null;case 13:return ui(Io),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return ui(Io),null;case 4:return Do(),null;case 10:return to(t),null;default:return null}}function Za(t,e){return{value:t,source:e,stack:mt(e)}}za=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ba=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s,u,c=e.stateNode;switch(Mo(Co.current),t=null,n){case"input":a=_t(c,a),r=_t(c,r),t=[];break;case"option":a=Ct(c,a),r=Ct(c,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=Tt(c,a),r=Tt(c,r),t=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(c.onclick=cn)}for(s in on(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(k.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(t||(t=[]),t.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(s,l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(t=t||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(k.hasOwnProperty(s)?(null!=l&&un(o,s),t||c===l||(t=[])):(t=t||[]).push(s,l))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Ua=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var Ja="function"===typeof WeakSet?WeakSet:Set;function ts(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=mt(n)),null!==n&&vt(n.type),e=e.value,null!==t&&1===t.tag&&vt(t.type);try{console.error(e)}catch(i){setTimeout((function(){throw i}))}}function es(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){yu(t,n)}else e.current=null}function ns(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Ki(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function is(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function os(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:Ki(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&fo(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}fo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&mn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ie(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(t,e,n){switch("function"===typeof _u&&_u(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Ui(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(o){yu(i,o)}}t=t.next}while(t!==r)}))}break;case 1:es(e),"function"===typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){yu(t,n)}}(e,n);break;case 5:es(e);break;case 4:ls(t,e,n)}}function ss(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&ss(e)}function us(t){return 5===t.tag||3===t.tag||4===t.tag}function cs(t){t:{for(var e=t.return;null!==e;){if(us(e)){var n=e;break t}e=e.return}throw Error(a(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(zt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||us(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=cn));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function ls(t,e,n){for(var r,i,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag){t:for(var u=t,c=o,l=n,f=c;;)if(as(u,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break t;for(;null===f.sibling;){if(null===f.return||f.return===c)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function fs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Sn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&kt(n,r),an(t,i),e=an(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?nn(n,u):"dangerouslySetInnerHTML"===s?$t(n,u):"children"===s?zt(n,u):X(n,s,u,e)}switch(t){case"input":St(n,r);break;case"textarea":Rt(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?jt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?jt(n,!!r.multiple,r.defaultValue,!0):jt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Ie(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Ls=$i()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=void 0!==(i=t.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=en("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void hs(e);case 19:return void hs(e);case 17:return}throw Error(a(163))}function hs(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ja),e.forEach((function(e){var r=wu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(t,e,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Is||(Is=!0,Fs=r),ts(t,e)},n}function gs(t,e,n){(n=so(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return ts(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ps?Ps=new Set([this]):Ps.add(this),ts(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var vs,ms=Math.ceil,ys=Q.ReactCurrentDispatcher,bs=Q.ReactCurrentOwner,ws=0,xs=3,_s=4,Os=0,ks=null,Ss=null,Es=0,As=ws,Cs=null,js=1073741823,Ts=1073741823,Ms=null,Rs=0,Ds=!1,Ls=0,Ns=null,Is=!1,Fs=null,Ps=null,$s=!1,zs=null,Bs=90,Us=null,Ws=0,Hs=null,Vs=0;function qs(){return 0!==(48&Os)?1073741821-($i()/10|0):0!==Vs?Vs:Vs=1073741821-($i()/10|0)}function Gs(t,e,n){if(0===(2&(e=e.mode)))return 1073741823;var r=zi();if(0===(4&e))return 99===r?1073741823:1073741822;if(0!==(16&Os))return Es;if(null!==n)t=Gi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Gi(t,150,100);break;case 97:case 96:t=Gi(t,5e3,250);break;case 95:t=2;break;default:throw Error(a(326))}return null!==ks&&t===Es&&--t,t}function Ks(t,e){if(50<Ws)throw Ws=0,Hs=null,Error(a(185));if(null!==(t=Ys(t,e))){var n=zi();1073741823===e?0!==(8&Os)&&0===(48&Os)?Js(t):(Xs(t),0===Os&&Vi()):Xs(t),0===(4&Os)||98!==n&&99!==n||(null===Us?Us=new Map([[t,e]]):(void 0===(n=Us.get(t))||n>e)&&Us.set(t,e))}}function Ys(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(ks===i&&(au(e),As===_s&&Du(i,Es)),Lu(i,e)),i}function Qs(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Ru(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Xs(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Hi(Js.bind(null,t));else{var e=Qs(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=qs();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Ri&&Oi(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Hi(Js.bind(null,t)):Wi(r,Zs.bind(null,t),{timeout:10*(1073741821-e)-$i()}),t.callbackNode=e}}}function Zs(t,e){if(Vs=0,e)return Nu(t,e=qs()),Xs(t),null;var n=Qs(t);if(0!==n){if(e=t.callbackNode,0!==(48&Os))throw Error(a(327));if(gu(),t===ks&&n===Es||nu(t,n),null!==Ss){var r=Os;Os|=16;for(var i=iu();;)try{uu();break}catch(u){ru(t,u)}if(Ji(),Os=r,ys.current=i,1===As)throw e=Cs,nu(t,n),Du(t,n),Xs(t),e;if(null===Ss)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=As,ks=null,r){case ws:case 1:throw Error(a(345));case 2:Nu(t,2<n?2:n);break;case xs:if(Du(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=fu(i)),1073741823===js&&10<(i=Ls+500-$i())){if(Ds){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,nu(t,n);break}}if(0!==(o=Qs(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=bn(hu.bind(null,t),i);break}hu(t);break;case _s:if(Du(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=fu(i)),Ds&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,nu(t,n);break}if(0!==(i=Qs(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==Ts?r=10*(1073741821-Ts)-$i():1073741823===js?r=0:(r=10*(1073741821-js)-5e3,0>(r=(i=$i())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ms(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=bn(hu.bind(null,t),r);break}hu(t);break;case 5:if(1073741823!==js&&null!==Ms){o=js;var s=Ms;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=$i()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Du(t,n),t.timeoutHandle=bn(hu.bind(null,t),r);break}}hu(t);break;default:throw Error(a(329))}if(Xs(t),t.callbackNode===e)return Zs.bind(null,t)}}return null}function Js(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!==(48&Os))throw Error(a(327));if(gu(),t===ks&&e===Es||nu(t,e),null!==Ss){var n=Os;Os|=16;for(var r=iu();;)try{su();break}catch(i){ru(t,i)}if(Ji(),Os=n,ys.current=r,1===As)throw n=Cs,nu(t,e),Du(t,e),Xs(t),n;if(null!==Ss)throw Error(a(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,ks=null,hu(t),Xs(t)}return null}function tu(t,e){var n=Os;Os|=1;try{return t(e)}finally{0===(Os=n)&&Vi()}}function eu(t,e){var n=Os;Os&=-2,Os|=8;try{return t(e)}finally{0===(Os=n)&&Vi()}}function nu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,wn(n)),null!==Ss)for(n=Ss.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vi();break;case 3:Do(),ui(hi),ui(fi);break;case 5:No(r);break;case 4:Do();break;case 13:case 19:ui(Io);break;case 10:to(r)}n=n.return}ks=t,Ss=Eu(t.current,null),Es=e,As=ws,Cs=null,Ts=js=1073741823,Ms=null,Rs=0,Ds=!1}function ru(t,e){for(;;){try{if(Ji(),$o.current=va,Vo)for(var n=Uo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Bo=0,Ho=Wo=Uo=null,Vo=!1,null===Ss||null===Ss.return)return As=1,Cs=e,Ss=null;t:{var i=t,o=Ss.return,a=Ss,s=e;if(e=Es,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!==(1&Io.current),f=o;do{var h;if(h=13===f.tag){var d=f.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var p=f.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!l)}}if(h){var g=f.updateQueue;if(null===g){var v=new Set;v.add(u),f.updateQueue=v}else g.add(u);if(0===(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var m=so(1073741823,null);m.tag=2,uo(a,m)}a.expirationTime=1073741823;break t}s=void 0,a=e;var y=i.pingCache;if(null===y?(y=i.pingCache=new ds,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(a)){s.add(a);var b=bu.bind(null,i,u,a);u.then(b,b)}f.effectTag|=4096,f.expirationTime=e;break t}f=f.return}while(null!==f);s=Error((vt(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+mt(a))}5!==As&&(As=2),s=Za(s,a),f=o;do{switch(f.tag){case 3:u=s,f.effectTag|=4096,f.expirationTime=e,co(f,ps(f,u,e));break t;case 1:u=s;var w=f.type,x=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Ps||!Ps.has(x)))){f.effectTag|=4096,f.expirationTime=e,co(f,gs(f,u,e));break t}}f=f.return}while(null!==f)}Ss=lu(Ss)}catch(_){e=_;continue}break}}function iu(){var t=ys.current;return ys.current=va,null===t?va:t}function ou(t,e){t<js&&2<t&&(js=t),null!==e&&t<Ts&&2<t&&(Ts=t,Ms=e)}function au(t){t>Rs&&(Rs=t)}function su(){for(;null!==Ss;)Ss=cu(Ss)}function uu(){for(;null!==Ss&&!Di();)Ss=cu(Ss)}function cu(t){var e=vs(t.alternate,t,Es);return t.memoizedProps=t.pendingProps,null===e&&(e=lu(t)),bs.current=null,e}function lu(t){Ss=t;do{var e=Ss.alternate;if(t=Ss.return,0===(2048&Ss.effectTag)){if(e=Qa(e,Ss,Es),1===Es||1!==Ss.childExpirationTime){for(var n=0,r=Ss.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ss.childExpirationTime=n}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Ss.firstEffect),null!==Ss.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Ss.firstEffect),t.lastEffect=Ss.lastEffect),1<Ss.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Ss:t.firstEffect=Ss,t.lastEffect=Ss))}else{if(null!==(e=Xa(Ss)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Ss.sibling))return e;Ss=t}while(null!==Ss);return As===ws&&(As=5),null}function fu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function hu(t){var e=zi();return Ui(99,du.bind(null,t,e)),null}function du(t,e){do{gu()}while(null!==zs);if(0!==(48&Os))throw Error(a(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=fu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===ks&&(Ss=ks=null,Es=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Os;Os|=32,bs.current=null,gn=qe;var s=dn();if(pn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{u.nodeType,f.nodeType}catch(E){u=null;break t}var h=0,d=-1,p=-1,g=0,v=0,m=s,y=null;e:for(;;){for(var b;m!==u||0!==l&&3!==m.nodeType||(d=h+l),m!==f||0!==c&&3!==m.nodeType||(p=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(b=m.firstChild);)y=m,m=b;for(;;){if(m===s)break e;if(y===u&&++g===l&&(d=h),y===f&&++v===c&&(p=h),null!==(b=m.nextSibling))break;y=(m=y).parentNode}m=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;vn={activeElementDetached:null,focusedElem:s,selectionRange:u},qe=!1,Ns=i;do{try{pu()}catch(E){if(null===Ns)throw Error(a(330));yu(Ns,E),Ns=Ns.nextEffect}}while(null!==Ns);Ns=i;do{try{for(s=t,u=e;null!==Ns;){var w=Ns.effectTag;if(16&w&&zt(Ns.stateNode,""),128&w){var x=Ns.alternate;if(null!==x){var _=x.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&w){case 2:cs(Ns),Ns.effectTag&=-3;break;case 6:cs(Ns),Ns.effectTag&=-3,fs(Ns.alternate,Ns);break;case 1024:Ns.effectTag&=-1025;break;case 1028:Ns.effectTag&=-1025,fs(Ns.alternate,Ns);break;case 4:fs(Ns.alternate,Ns);break;case 8:ls(s,l=Ns,u),ss(l)}Ns=Ns.nextEffect}}catch(E){if(null===Ns)throw Error(a(330));yu(Ns,E),Ns=Ns.nextEffect}}while(null!==Ns);if(_=vn,x=dn(),w=_.focusedElem,u=_.selectionRange,x!==w&&w&&w.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(w.ownerDocument.documentElement,w)){null!==u&&pn(w)&&(x=u.start,void 0===(_=u.end)&&(_=x),"selectionStart"in w?(w.selectionStart=x,w.selectionEnd=Math.min(_,w.value.length)):(_=(x=w.ownerDocument||document)&&x.defaultView||window).getSelection&&(_=_.getSelection(),l=w.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!_.extend&&s>u&&(l=u,u=s,s=l),l=hn(w,s),f=hn(w,u),l&&f&&(1!==_.rangeCount||_.anchorNode!==l.node||_.anchorOffset!==l.offset||_.focusNode!==f.node||_.focusOffset!==f.offset)&&((x=x.createRange()).setStart(l.node,l.offset),_.removeAllRanges(),s>u?(_.addRange(x),_.extend(f.node,f.offset)):(x.setEnd(f.node,f.offset),_.addRange(x))))),x=[];for(_=w;_=_.parentNode;)1===_.nodeType&&x.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<x.length;w++)(_=x[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}qe=!!gn,vn=gn=null,t.current=n,Ns=i;do{try{for(w=t;null!==Ns;){var O=Ns.effectTag;if(36&O&&os(w,Ns.alternate,Ns),128&O){x=void 0;var k=Ns.ref;if(null!==k){var S=Ns.stateNode;switch(Ns.tag){case 5:x=S;break;default:x=S}"function"===typeof k?k(x):k.current=x}}Ns=Ns.nextEffect}}catch(E){if(null===Ns)throw Error(a(330));yu(Ns,E),Ns=Ns.nextEffect}}while(null!==Ns);Ns=null,Li(),Os=o}else t.current=n;if($s)$s=!1,zs=t,Bs=e;else for(Ns=i;null!==Ns;)e=Ns.nextEffect,Ns.nextEffect=null,Ns=e;if(0===(e=t.firstPendingTime)&&(Ps=null),1073741823===e?t===Hs?Ws++:(Ws=0,Hs=t):Ws=0,"function"===typeof xu&&xu(n.stateNode,r),Xs(t),Is)throw Is=!1,t=Fs,Fs=null,t;return 0!==(8&Os)||Vi(),null}function pu(){for(;null!==Ns;){var t=Ns.effectTag;0!==(256&t)&&ns(Ns.alternate,Ns),0===(512&t)||$s||($s=!0,Wi(97,(function(){return gu(),null}))),Ns=Ns.nextEffect}}function gu(){if(90!==Bs){var t=97<Bs?97:Bs;return Bs=90,Ui(t,vu)}}function vu(){if(null===zs)return!1;var t=zs;if(zs=null,0!==(48&Os))throw Error(a(331));var e=Os;for(Os|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(r){if(null===t)throw Error(a(330));yu(t,r)}n=t.nextEffect,t.nextEffect=null,t=n}return Os=e,Vi(),!0}function mu(t,e,n){uo(t,e=ps(t,e=Za(n,e),1073741823)),null!==(t=Ys(t,1073741823))&&Xs(t)}function yu(t,e){if(3===t.tag)mu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){mu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ps||!Ps.has(r))){uo(n,t=gs(n,t=Za(e,t),1073741823)),null!==(n=Ys(n,1073741823))&&Xs(n);break}}n=n.return}}function bu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),ks===t&&Es===n?As===_s||As===xs&&1073741823===js&&$i()-Ls<500?nu(t,Es):Ds=!0:Ru(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Xs(t)))}function wu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=Gs(e=qs(),t,null)),null!==(t=Ys(t,e))&&Xs(t)}vs=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||hi.current)Ta=!0;else{if(r<n){switch(Ta=!1,e.tag){case 3:$a(e),Ca();break;case 5:if(Lo(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:gi(e.type)&&bi(e);break;case 4:Ro(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,ci(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Ha(t,e,n):(ci(Io,1&Io.current),null!==(e=Ka(t,e,n))?e.sibling:null);ci(Io,1&Io.current);break;case 19:if(r=e.childExpirationTime>=n,0!==(64&t.effectTag)){if(r)return Ga(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),ci(Io,Io.current),!r)return null}return Ka(t,e,n)}Ta=!1}}else Ta=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=pi(e,fi.current),no(e,n),i=Ko(null,e,r,t,i,n),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,gi(r)){var o=!0;bi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&go(e,r,s,t),i.updater=vo,e.stateNode=i,i._reactInternalFiber=e,wo(e,r,t,n),e=Pa(null,e,r,!0,o,n)}else e.tag=0,Ma(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"===typeof t)return Su(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===ut)return 11;if(t===ft)return 14}return 2}(i),t=Ki(i,t),o){case 0:e=Ia(null,e,i,t,n);break t;case 1:e=Fa(null,e,i,t,n);break t;case 11:e=Ra(null,e,i,t,n);break t;case 14:e=Da(null,e,i,Ki(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ia(t,e,r,i=e.elementType===r?i:Ki(r,i),n);case 1:return r=e.type,i=e.pendingProps,Fa(t,e,r,i=e.elementType===r?i:Ki(r,i),n);case 3:if($a(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,ao(t,e),lo(e,r,null,n),(r=e.memoizedState.element)===i)Ca(),e=Ka(t,e,n);else{if((i=e.stateNode.hydrate)&&(xa=xn(e.stateNode.containerInfo.firstChild),wa=e,i=_a=!0),i)for(n=Eo(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ma(t,e,r,n),Ca();e=e.child}return e;case 5:return Lo(e),null===t&&Sa(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,yn(r,i)?s=null:null!==o&&yn(r,o)&&(e.effectTag|=16),Na(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Ma(t,e,s,n),e=e.child),e;case 6:return null===t&&Sa(e),null;case 13:return Ha(t,e,n);case 4:return Ro(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=So(e,null,r,n):Ma(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Ra(t,e,r,i=e.elementType===r?i:Ki(r,i),n);case 7:return Ma(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ma(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(ci(Yi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=Fr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!hi.current){e=Ka(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=so(n,null)).tag=2,uo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),eo(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Ma(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.effectTag|=1,Ma(t,e,r,n),e.child;case 14:return o=Ki(i=e.type,e.pendingProps),Da(t,e,i,o=Ki(i.type,o),r,n);case 15:return La(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,gi(r)?(t=!0,bi(e)):t=!1,no(e,n),yo(e,r,i),wo(e,r,i,n),Pa(null,e,r,!0,t,n);case 19:return Ga(t,e,n)}throw Error(a(156,e.tag))};var xu=null,_u=null;function Ou(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ku(t,e,n,r){return new Ou(t,e,n,r)}function Su(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Eu(t,e){var n=t.alternate;return null===n?((n=ku(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Au(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Su(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case nt:return Cu(n.children,i,o,e);case st:s=8,i|=7;break;case rt:s=8,i|=1;break;case it:return(t=ku(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=o,t;case ct:return(t=ku(13,n,e,i)).type=ct,t.elementType=ct,t.expirationTime=o,t;case lt:return(t=ku(19,n,e,i)).elementType=lt,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case ot:s=10;break t;case at:s=9;break t;case ut:s=11;break t;case ft:s=14;break t;case ht:s=16,r=null;break t;case dt:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=ku(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Cu(t,e,n,r){return(t=ku(7,t,r,e)).expirationTime=n,t}function ju(t,e,n){return(t=ku(6,t,null,e)).expirationTime=n,t}function Tu(t,e,n){return(e=ku(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Ru(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Du(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Lu(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Nu(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Iu(t,e,n,r){var i=e.current,o=qs(),s=ho.suspense;o=Gs(o,i,s);t:if(n){e:{if(Jt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(gi(c)){n=yi(n,c,u);break t}}n=u}else n=li;return null===e.context?e.context=n:e.pendingContext=n,(e=so(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),uo(i,e),Ks(i,o),o}function Fu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Pu(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function $u(t,e){Pu(t,e),(t=t.alternate)&&Pu(t,e)}function zu(t,e,n){var r=new Mu(t,e,n=null!=n&&!0===n.hydrate),i=ku(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,oo(i),t[En]=r.current,n&&0!==e&&function(t,e){var n=Zt(e);Ee.forEach((function(t){pe(t,e,n)})),Ae.forEach((function(t){pe(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function Bu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Uu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=Fu(a);s.call(t)}}Iu(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new zu(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=Fu(a);u.call(t)}}eu((function(){Iu(e,a,t,i)}))}return Fu(a)}function Wu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Hu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Bu(e))throw Error(a(200));return Wu(t,e,null,n)}zu.prototype.render=function(t){Iu(t,this._internalRoot,null,null)},zu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Iu(null,t,null,(function(){e[En]=null}))},ge=function(t){if(13===t.tag){var e=Gi(qs(),150,100);Ks(t,e),$u(t,e)}},ve=function(t){13===t.tag&&(Ks(t,3),$u(t,3))},me=function(t){if(13===t.tag){var e=qs();Ks(t,e=Gs(e,t,null)),$u(t,e)}},C=function(t,e,n){switch(e){case"input":if(St(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Tn(r);if(!i)throw Error(a(90));xt(r),St(r,i)}}}break;case"textarea":Rt(t,n);break;case"select":null!=(e=n.value)&&jt(t,!!n.multiple,e,!1)}},L=tu,N=function(t,e,n,r,i){var o=Os;Os|=4;try{return Ui(98,t.bind(null,e,n,r,i))}finally{0===(Os=o)&&Vi()}},I=function(){0===(49&Os)&&(function(){if(null!==Us){var t=Us;Us=null,t.forEach((function(t,e){Nu(e,t),Xs(e)})),Vi()}}(),gu())},F=function(t,e){var n=Os;Os|=2;try{return t(e)}finally{0===(Os=n)&&Vi()}};var Vu={Events:[Cn,jn,Tn,E,O,Fn,function(t){ie(t,In)},R,D,Xe,se,gu,{current:!1}]};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);xu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64===(64&t.current.effectTag))}catch(r){}},_u=function(t){try{e.onCommitFiberUnmount(n,t)}catch(r){}}}catch(r){}})(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:An,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vu,e.createPortal=Hu,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},e.flushSync=function(t,e){if(0!==(48&Os))throw Error(a(187));var n=Os;Os|=1;try{return Ui(99,t.bind(null,e))}finally{Os=n,Vi()}},e.hydrate=function(t,e,n){if(!Bu(e))throw Error(a(200));return Uu(null,t,e,!0,n)},e.render=function(t,e,n){if(!Bu(e))throw Error(a(200));return Uu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Bu(t))throw Error(a(40));return!!t._reactRootContainer&&(eu((function(){Uu(null,null,t,!1,(function(){t._reactRootContainer=null,t[En]=null}))})),!0)},e.unstable_batchedUpdates=tu,e.unstable_createPortal=function(t,e){return Hu(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bu(n))throw Error(a(200));if(null==t||void 0===t._reactInternalFiber)throw Error(a(38));return Uu(t,e,n,!1,r)},e.version="16.13.1"},function(t,e,n){"use strict";t.exports=n(143)},function(t,e,n){"use strict";var r,i,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function t(){if(null!==u)try{var n=e.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(t,0),r}},f=Date.now();e.unstable_now=function(){return Date.now()-f},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(l,0))},i=function(t,e){c=setTimeout(t,e)},o=function(){clearTimeout(c)},a=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,p=window.setTimeout,g=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)e.unstable_now=function(){return h.now()};else{var m=d.now();e.unstable_now=function(){return d.now()-m}}var y=!1,b=null,w=-1,x=5,_=0;a=function(){return e.unstable_now()>=_},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<t?Math.floor(1e3/t):5};var O=new MessageChannel,k=O.port2;O.port1.onmessage=function(){if(null!==b){var t=e.unstable_now();_=t+x;try{b(!0,t)?k.postMessage(null):(y=!1,b=null)}catch(n){throw k.postMessage(null),n}}else y=!1},r=function(t){b=t,y||(y=!0,k.postMessage(null))},i=function(t,n){w=p((function(){t(e.unstable_now())}),n)},o=function(){g(w),w=-1}}function S(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<C(i,e)))break t;t[r]=e,t[n]=i,n=r}}function E(t){return void 0===(t=t[0])?null:t}function A(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>C(a,n))void 0!==u&&0>C(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>C(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function C(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var j=[],T=[],M=1,R=null,D=3,L=!1,N=!1,I=!1;function F(t){for(var e=E(T);null!==e;){if(null===e.callback)A(T);else{if(!(e.startTime<=t))break;A(T),e.sortIndex=e.expirationTime,S(j,e)}e=E(T)}}function P(t){if(I=!1,F(t),!N)if(null!==E(j))N=!0,r($);else{var e=E(T);null!==e&&i(P,e.startTime-t)}}function $(t,n){N=!1,I&&(I=!1,o()),L=!0;var r=D;try{for(F(n),R=E(j);null!==R&&(!(R.expirationTime>n)||t&&!a());){var s=R.callback;if(null!==s){R.callback=null,D=R.priorityLevel;var u=s(R.expirationTime<=n);n=e.unstable_now(),"function"===typeof u?R.callback=u:R===E(j)&&A(j),F(n)}else A(j);R=E(j)}if(null!==R)var c=!0;else{var l=E(T);null!==l&&i(P,l.startTime-n),c=!1}return c}finally{R=null,D=r,L=!1}}function z(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var B=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){N||L||(N=!0,r($))},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return E(j)},e.unstable_next=function(t){switch(D){case 1:case 2:case 3:var e=3;break;default:e=D}var n=D;D=e;try{return t()}finally{D=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=B,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=D;D=t;try{return e()}finally{D=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:z(t)}else a=z(t),u=s;return t={id:M++,callback:n,priorityLevel:t,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(t.sortIndex=u,S(T,t),null===E(j)&&t===E(T)&&(I?o():I=!0,i(P,u-s))):(t.sortIndex=a,S(j,t),N||L||(N=!0,r($))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();F(t);var n=E(j);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<R.expirationTime||a()},e.unstable_wrapCallback=function(t){var e=D;return function(){var n=D;D=e;try{return t.apply(this,arguments)}finally{D=n}}}},,function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n,r){var i=e&&e.prototype instanceof l?e:l,o=Object.create(i.prototype),a=new _(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return k()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=s;var c={};function l(){}function f(){}function h(){}var d={};d[i]=function(){return this};var p=Object.getPrototypeOf,g=p&&p(p(O([])));g&&g!==e&&n.call(g,i)&&(d=g);var v=h.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function y(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var c=u(t[i],t,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"===typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=v.constructor=h,h.constructor=f,h[a]=f.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(y.prototype),y.prototype[o]=function(){return this},t.AsyncIterator=y,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new y(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(v),v[a]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),a=n(2),s=n(100),u=n(101),c=u.getAceInstance(),l=c.require("ace/range").Range,f=function(t){function e(e){var n=t.call(this,e)||this;return u.editorEvents.forEach((function(t){n[t]=n[t].bind(n)})),n.debounce=u.debounce,n}return r(e,t),e.prototype.isInShadow=function(t){for(var e=t&&t.parentNode;e;){if("[object ShadowRoot]"===e.toString())return!0;e=e.parentNode}return!1},e.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.className,r=e.onBeforeLoad,i=e.onValidate,o=e.mode,a=e.focus,s=e.theme,l=e.fontSize,f=e.value,h=e.defaultValue,d=e.showGutter,p=e.wrapEnabled,g=e.showPrintMargin,v=e.scrollMargin,m=void 0===v?[0,0,0,0]:v,y=e.keyboardHandler,b=e.onLoad,w=e.commands,x=e.annotations,_=e.markers,O=e.placeholder;this.editor=c.edit(this.refEditor),r&&r(c);for(var k=Object.keys(this.props.editorProps),S=0;S<k.length;S++)this.editor[k[S]]=this.props.editorProps[k[S]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(m[0],m[1],m[2],m[3]),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.getSession().setMode("ace/mode/"+o),this.editor.setTheme("ace/theme/"+s),this.editor.setFontSize("number"===typeof l?l+"px":l),this.editor.getSession().setValue(h||(f||"")),this.props.navigateToFileEnd&&this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(d),this.editor.getSession().setUseWrapMode(p),this.editor.setShowPrintMargin(g),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),O&&this.updatePlaceholder(),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),i&&this.editor.getSession().on("changeAnnotation",(function(){var e=t.editor.getSession().getAnnotations();t.props.onValidate(e)})),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(x||[]),_&&_.length>0&&this.handleMarkers(_);var E=this.editor.$options;u.editorOptions.forEach((function(e){E.hasOwnProperty(e)?t.editor.setOption(e,t.props[e]):t.props[e]&&console.warn("ReactAce: editor option "+e+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")})),this.handleOptions(this.props),Array.isArray(w)&&w.forEach((function(e){"string"===typeof e.exec?t.editor.commands.bindKey(e.bindKey,e.exec):t.editor.commands.addCommand(e)})),y&&this.editor.setKeyboardHandler("ace/keyboard/"+y),n&&(this.refEditor.className+=" "+n),b&&b(this.editor),this.editor.resize(),a&&this.editor.focus()},e.prototype.componentDidUpdate=function(t){for(var e=t,n=this.props,r=0;r<u.editorOptions.length;r++){var i=u.editorOptions[r];n[i]!==e[i]&&this.editor.setOption(i,n[i])}if(n.className!==e.className){var o=this.refEditor.className.trim().split(" ");e.className.trim().split(" ").forEach((function(t){var e=o.indexOf(t);o.splice(e,1)})),this.refEditor.className=" "+n.className+" "+o.join(" ")}if(this.editor&&n.value&&this.editor.getValue()!==n.value){this.silent=!0;var a=this.editor.session.selection.toJSON();this.editor.setValue(n.value,n.cursorStart),this.editor.session.selection.fromJSON(a),this.silent=!1}n.placeholder!==e.placeholder&&this.updatePlaceholder(),n.mode!==e.mode&&this.editor.getSession().setMode("ace/mode/"+n.mode),n.theme!==e.theme&&this.editor.setTheme("ace/theme/"+n.theme),n.keyboardHandler!==e.keyboardHandler&&(n.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+n.keyboardHandler):this.editor.setKeyboardHandler(null)),n.fontSize!==e.fontSize&&this.editor.setFontSize("number"===typeof n.fontSize?n.fontSize+"px":n.fontSize),n.wrapEnabled!==e.wrapEnabled&&this.editor.getSession().setUseWrapMode(n.wrapEnabled),n.showPrintMargin!==e.showPrintMargin&&this.editor.setShowPrintMargin(n.showPrintMargin),n.showGutter!==e.showGutter&&this.editor.renderer.setShowGutter(n.showGutter),s(n.setOptions,e.setOptions)||this.handleOptions(n),s(n.annotations,e.annotations)||this.editor.getSession().setAnnotations(n.annotations||[]),!s(n.markers,e.markers)&&Array.isArray(n.markers)&&this.handleMarkers(n.markers),s(n.scrollMargin,e.scrollMargin)||this.handleScrollMargins(n.scrollMargin),t.height===this.props.height&&t.width===this.props.width||this.editor.resize(),this.props.focus&&!t.focus&&this.editor.focus()},e.prototype.handleScrollMargins=function(t){void 0===t&&(t=[0,0,0,0]),this.editor.renderer.setScrollMargin(t[0],t[1],t[2],t[3])},e.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},e.prototype.onChange=function(t){if(this.props.onChange&&!this.silent){var e=this.editor.getValue();this.props.onChange(e,t)}},e.prototype.onSelectionChange=function(t){if(this.props.onSelectionChange){var e=this.editor.getSelection();this.props.onSelectionChange(e,t)}},e.prototype.onCursorChange=function(t){if(this.props.onCursorChange){var e=this.editor.getSelection();this.props.onCursorChange(e,t)}},e.prototype.onInput=function(t){this.props.onInput&&this.props.onInput(t),this.props.placeholder&&this.updatePlaceholder()},e.prototype.onFocus=function(t){this.props.onFocus&&this.props.onFocus(t,this.editor)},e.prototype.onBlur=function(t){this.props.onBlur&&this.props.onBlur(t,this.editor)},e.prototype.onCopy=function(t){var e=t.text;this.props.onCopy&&this.props.onCopy(e)},e.prototype.onPaste=function(t){var e=t.text;this.props.onPaste&&this.props.onPaste(e)},e.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},e.prototype.handleOptions=function(t){for(var e=Object.keys(t.setOptions),n=0;n<e.length;n++)this.editor.setOption(e[n],t.setOptions[e[n]])},e.prototype.handleMarkers=function(t){var e=this,n=this.editor.getSession().getMarkers(!0);for(var r in n)n.hasOwnProperty(r)&&this.editor.getSession().removeMarker(n[r].id);for(var r in n=this.editor.getSession().getMarkers(!1))n.hasOwnProperty(r)&&"ace_active-line"!==n[r].clazz&&"ace_selected-word"!==n[r].clazz&&this.editor.getSession().removeMarker(n[r].id);t.forEach((function(t){var n=t.startRow,r=t.startCol,i=t.endRow,o=t.endCol,a=t.className,s=t.type,u=t.inFront,c=void 0!==u&&u,f=new l(n,r,i,o);e.editor.getSession().addMarker(f,a,s,c)}))},e.prototype.updatePlaceholder=function(){var t=this.editor,e=this.props.placeholder,n=!t.session.getValue().length,r=t.renderer.placeholderNode;!n&&r?(t.renderer.scroller.removeChild(t.renderer.placeholderNode),t.renderer.placeholderNode=null):n&&!r?((r=t.renderer.placeholderNode=document.createElement("div")).textContent=e||"",r.className="ace_comment ace_placeholder",r.style.padding="0 9px",r.style.position="absolute",r.style.zIndex="3",t.renderer.scroller.appendChild(r)):n&&r&&(r.textContent=e)},e.prototype.updateRef=function(t){this.refEditor=t},e.prototype.render=function(){var t=this.props,e=t.name,n=t.width,r=t.height,o=t.style,s=i({width:n,height:r},o);return a.createElement("div",{ref:this.updateRef,id:e,style:s})},e.propTypes={mode:o.string,focus:o.bool,theme:o.string,name:o.string,className:o.string,height:o.string,width:o.string,fontSize:o.oneOfType([o.number,o.string]),showGutter:o.bool,onChange:o.func,onCopy:o.func,onPaste:o.func,onFocus:o.func,onInput:o.func,onBlur:o.func,onScroll:o.func,value:o.string,defaultValue:o.string,onLoad:o.func,onSelectionChange:o.func,onCursorChange:o.func,onBeforeLoad:o.func,onValidate:o.func,minLines:o.number,maxLines:o.number,readOnly:o.bool,highlightActiveLine:o.bool,tabSize:o.number,showPrintMargin:o.bool,cursorStart:o.number,debounceChangePeriod:o.number,editorProps:o.object,setOptions:o.object,style:o.object,scrollMargin:o.array,annotations:o.array,markers:o.array,keyboardHandler:o.string,wrapEnabled:o.bool,enableSnippets:o.bool,enableBasicAutocompletion:o.oneOfType([o.bool,o.array]),enableLiveAutocompletion:o.oneOfType([o.bool,o.array]),navigateToFileEnd:o.bool,commands:o.array,placeholder:o.string},e.defaultProps={name:"ace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",fontSize:12,enableSnippets:!1,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,placeholder:null,navigateToFileEnd:!0},e}(a.Component);e.default=f},function(t,e,n){"use strict";var r=n(148);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),o=n(2),a=n(103),s=n(152),u=function(t){function e(e){var n=t.call(this,e)||this;return n.state={value:n.props.value},n.onChange=n.onChange.bind(n),n.diff=n.diff.bind(n),n}return r(e,t),e.prototype.componentDidUpdate=function(){var t=this.props.value;t!==this.state.value&&this.setState({value:t})},e.prototype.onChange=function(t){this.setState({value:t}),this.props.onChange&&this.props.onChange(t)},e.prototype.diff=function(){var t=new s,e=this.state.value[0],n=this.state.value[1];if(0===e.length&&0===n.length)return[];var r=t.diff_main(e,n);t.diff_cleanupSemantic(r);var i=this.generateDiffedLines(r);return this.setCodeMarkers(i)},e.prototype.generateDiffedLines=function(t){var e=0,n=-1,r=1,i={left:[],right:[]},o={left:1,right:1};return t.forEach((function(t){var a=t[0],s=t[1],u=s.split("\n").length-1;if(0!==s.length){var c=s[0],l=s[s.length-1],f=0;switch(a){case e:o.left+=u,o.right+=u;break;case n:"\n"===c&&(o.left++,u--),0===(f=u)&&i.right.push({startLine:o.right,endLine:o.right}),"\n"===l&&(f-=1),i.left.push({startLine:o.left,endLine:o.left+f}),o.left+=u;break;case r:"\n"===c&&(o.right++,u--),0===(f=u)&&i.left.push({startLine:o.left,endLine:o.left}),"\n"===l&&(f-=1),i.right.push({startLine:o.right,endLine:o.right+f}),o.right+=u;break;default:throw new Error("Diff type was not defined.")}}})),i},e.prototype.setCodeMarkers=function(t){void 0===t&&(t={left:[],right:[]});for(var e=[],n={left:[],right:[]},r=0;r<t.left.length;r++){var i={startRow:t.left[r].startLine-1,endRow:t.left[r].endLine,type:"text",className:"codeMarker"};n.left.push(i)}for(r=0;r<t.right.length;r++){i={startRow:t.right[r].startLine-1,endRow:t.right[r].endLine,type:"text",className:"codeMarker"};n.right.push(i)}return e[0]=n.left,e[1]=n.right,e},e.prototype.render=function(){var t=this.diff();return o.createElement(a.default,{name:this.props.name,className:this.props.className,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:t})},e.propTypes={cursorStart:i.number,editorProps:i.object,enableBasicAutocompletion:i.bool,enableLiveAutocompletion:i.bool,focus:i.bool,fontSize:i.number,height:i.string,highlightActiveLine:i.bool,maxLines:i.number,minLines:i.number,mode:i.string,name:i.string,className:i.string,onLoad:i.func,onPaste:i.func,onScroll:i.func,onChange:i.func,orientation:i.string,readOnly:i.bool,scrollMargin:i.array,setOptions:i.object,showGutter:i.bool,showPrintMargin:i.bool,splits:i.number,style:i.object,tabSize:i.number,theme:i.string,value:i.array,width:i.string,wrapEnabled:i.bool},e.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"ace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0},e}(o.Component);e.default=u},function(t,e,n){(function(t){ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],(function(t,e,n){"use strict";var r=t("./lib/oop"),i=(t("./lib/lang"),t("./lib/event_emitter").EventEmitter),o=t("./editor").Editor,a=t("./virtual_renderer").VirtualRenderer,s=t("./edit_session").EditSession,u=function(t,e,n){this.BELOW=1,this.BESIDE=0,this.$container=t,this.$theme=e,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(n||1),this.$cEditor=this.$editors[0],this.on("focus",function(t){this.$cEditor=t}.bind(this))};(function(){r.implement(this,i),this.$createEditor=function(){var t=document.createElement("div");t.className=this.$editorCSS,t.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(t);var e=new o(new a(t,this.$theme));return e.on("focus",function(){this._emit("focus",e)}.bind(this)),this.$editors.push(e),e.setFontSize(this.$fontSize),e},this.setSplits=function(t){var e;if(t<1)throw"The number of splits have to be > 0!";if(t!=this.$splits){if(t>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<t;)e=this.$editors[this.$splits],this.$container.appendChild(e.container),e.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<t;)this.$createEditor(),this.$splits++}else for(;this.$splits>t;)e=this.$editors[this.$splits-1],this.$container.removeChild(e.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(t){return this.$editors[t]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(t){this.$editors.forEach((function(e){e.setTheme(t)}))},this.setKeyboardHandler=function(t){this.$editors.forEach((function(e){e.setKeyboardHandler(t)}))},this.forEach=function(t,e){this.$editors.forEach(t,e)},this.$fontSize="",this.setFontSize=function(t){this.$fontSize=t,this.forEach((function(e){e.setFontSize(t)}))},this.$cloneSession=function(t){var e=new s(t.getDocument(),t.getMode()),n=t.getUndoManager();return e.setUndoManager(n),e.setTabSize(t.getTabSize()),e.setUseSoftTabs(t.getUseSoftTabs()),e.setOverwrite(t.getOverwrite()),e.setBreakpoints(t.getBreakpoints()),e.setUseWrapMode(t.getUseWrapMode()),e.setUseWorker(t.getUseWorker()),e.setWrapLimitRange(t.$wrapLimitRange.min,t.$wrapLimitRange.max),e.$foldData=t.$cloneFoldData(),e},this.setSession=function(t,e){var n;return n=null==e?this.$cEditor:this.$editors[e],this.$editors.some((function(e){return e.session===t}))&&(t=this.$cloneSession(t)),n.setSession(t),t},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(t){this.$orientation!=t&&(this.$orientation=t,this.resize())},this.resize=function(){var t,e=this.$container.clientWidth,n=this.$container.clientHeight;if(this.$orientation==this.BESIDE)for(var r=e/this.$splits,i=0;i<this.$splits;i++)(t=this.$editors[i]).container.style.width=r+"px",t.container.style.top="0px",t.container.style.left=i*r+"px",t.container.style.height=n+"px",t.resize();else{var o=n/this.$splits;for(i=0;i<this.$splits;i++)(t=this.$editors[i]).container.style.width=e+"px",t.container.style.top=i*o+"px",t.container.style.left="0px",t.container.style.height=o+"px",t.resize()}}}).call(u.prototype),e.Split=u})),ace.define("ace/ext/split",["require","exports","module","ace/split"],(function(t,e,n){"use strict";n.exports=t("../split")})),ace.require(["ace/ext/split"],(function(e){t&&(t.exports=e)}))}).call(this,n(58)(t))},function(t,e,n){(function(e){var n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/,i=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=/^\[object .+?Constructor\]$/,u="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,l=u||c||Function("return this")();var f=Array.prototype,h=Function.prototype,d=Object.prototype,p=l["__core-js_shared__"],g=function(){var t=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),v=h.toString,m=d.hasOwnProperty,y=d.toString,b=RegExp("^"+v.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=l.Symbol,x=f.splice,_=D(l,"Map"),O=D(Object,"create"),k=w?w.prototype:void 0,S=k?k.toString:void 0;function E(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function A(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function C(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function j(t,e){for(var n,r,i=t.length;i--;)if((n=t[i][0])===(r=e)||n!==n&&r!==r)return i;return-1}function T(t,e){for(var i,o=0,a=(e=function(t,e){if(F(t))return!1;var i=typeof t;if("number"==i||"symbol"==i||"boolean"==i||null==t||$(t))return!0;return r.test(t)||!n.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:F(i=e)?i:L(i)).length;null!=t&&o<a;)t=t[N(e[o++])];return o&&o==a?t:void 0}function M(t){return!(!P(t)||(e=t,g&&g in e))&&(function(t){var e=P(t)?y.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}(t)?b:s).test(function(t){if(null!=t){try{return v.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t));var e}function R(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function D(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return M(n)?n:void 0}E.prototype.clear=function(){this.__data__=O?O(null):{}},E.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},E.prototype.get=function(t){var e=this.__data__;if(O){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return m.call(e,t)?e[t]:void 0},E.prototype.has=function(t){var e=this.__data__;return O?void 0!==e[t]:m.call(e,t)},E.prototype.set=function(t,e){return this.__data__[t]=O&&void 0===e?"__lodash_hash_undefined__":e,this},A.prototype.clear=function(){this.__data__=[]},A.prototype.delete=function(t){var e=this.__data__,n=j(e,t);return!(n<0)&&(n==e.length-1?e.pop():x.call(e,n,1),!0)},A.prototype.get=function(t){var e=this.__data__,n=j(e,t);return n<0?void 0:e[n][1]},A.prototype.has=function(t){return j(this.__data__,t)>-1},A.prototype.set=function(t,e){var n=this.__data__,r=j(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},C.prototype.clear=function(){this.__data__={hash:new E,map:new(_||A),string:new E}},C.prototype.delete=function(t){return R(this,t).delete(t)},C.prototype.get=function(t){return R(this,t).get(t)},C.prototype.has=function(t){return R(this,t).has(t)},C.prototype.set=function(t,e){return R(this,t).set(t,e),this};var L=I((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if($(t))return S?S.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return i.test(t)&&n.push(""),t.replace(o,(function(t,e,r,i){n.push(r?i.replace(a,"$1"):e||t)})),n}));function N(t){if("string"==typeof t||$(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function I(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(I.Cache||C),n}I.Cache=C;var F=Array.isArray;function P(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function $(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==y.call(t)}t.exports=function(t,e,n){var r=null==t?void 0:T(t,e);return void 0===r?n:r}}).call(this,n(41))},function(t,e){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};n.Diff=function(t,e){return[t,e]},n.prototype.diff_main=function(t,e,r,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[new n.Diff(0,t)]:[];"undefined"==typeof r&&(r=!0);var a=r,s=this.diff_commonPrefix(t,e),u=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var c=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var l=this.diff_compute_(t,e,a,o);return u&&l.unshift(new n.Diff(0,u)),c&&l.push(new n.Diff(0,c)),this.diff_cleanupMerge(l),l},n.prototype.diff_compute_=function(t,e,r,i){var o;if(!t)return[new n.Diff(1,e)];if(!e)return[new n.Diff(-1,t)];var a=t.length>e.length?t:e,s=t.length>e.length?e:t,u=a.indexOf(s);if(-1!=u)return o=[new n.Diff(1,a.substring(0,u)),new n.Diff(0,s),new n.Diff(1,a.substring(u+s.length))],t.length>e.length&&(o[0][0]=o[2][0]=-1),o;if(1==s.length)return[new n.Diff(-1,t),new n.Diff(1,e)];var c=this.diff_halfMatch_(t,e);if(c){var l=c[0],f=c[1],h=c[2],d=c[3],p=c[4],g=this.diff_main(l,h,r,i),v=this.diff_main(f,d,r,i);return g.concat([new n.Diff(0,p)],v)}return r&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)},n.prototype.diff_lineMode_=function(t,e,r){var i=this.diff_linesToChars_(t,e);t=i.chars1,e=i.chars2;var o=i.lineArray,a=this.diff_main(t,e,!1,r);this.diff_charsToLines_(a,o),this.diff_cleanupSemantic(a),a.push(new n.Diff(0,""));for(var s=0,u=0,c=0,l="",f="";s<a.length;){switch(a[s][0]){case 1:c++,f+=a[s][1];break;case-1:u++,l+=a[s][1];break;case 0:if(u>=1&&c>=1){a.splice(s-u-c,u+c),s=s-u-c;for(var h=this.diff_main(l,f,!1,r),d=h.length-1;d>=0;d--)a.splice(s,0,h[d]);s+=h.length}c=0,u=0,l="",f=""}s++}return a.pop(),a},n.prototype.diff_bisect_=function(t,e,r){for(var i=t.length,o=e.length,a=Math.ceil((i+o)/2),s=a,u=2*a,c=new Array(u),l=new Array(u),f=0;f<u;f++)c[f]=-1,l[f]=-1;c[s+1]=0,l[s+1]=0;for(var h=i-o,d=h%2!=0,p=0,g=0,v=0,m=0,y=0;y<a&&!((new Date).getTime()>r);y++){for(var b=-y+p;b<=y-g;b+=2){for(var w=s+b,x=(E=b==-y||b!=y&&c[w-1]<c[w+1]?c[w+1]:c[w-1]+1)-b;E<i&&x<o&&t.charAt(E)==e.charAt(x);)E++,x++;if(c[w]=E,E>i)g+=2;else if(x>o)p+=2;else if(d){if((k=s+h-b)>=0&&k<u&&-1!=l[k])if(E>=(O=i-l[k]))return this.diff_bisectSplit_(t,e,E,x,r)}}for(var _=-y+v;_<=y-m;_+=2){for(var O,k=s+_,S=(O=_==-y||_!=y&&l[k-1]<l[k+1]?l[k+1]:l[k-1]+1)-_;O<i&&S<o&&t.charAt(i-O-1)==e.charAt(o-S-1);)O++,S++;if(l[k]=O,O>i)m+=2;else if(S>o)v+=2;else if(!d){if((w=s+h-_)>=0&&w<u&&-1!=c[w]){var E;x=s+(E=c[w])-w;if(E>=(O=i-O))return this.diff_bisectSplit_(t,e,E,x,r)}}}}return[new n.Diff(-1,t),new n.Diff(1,e)]},n.prototype.diff_bisectSplit_=function(t,e,n,r,i){var o=t.substring(0,n),a=e.substring(0,r),s=t.substring(n),u=e.substring(r),c=this.diff_main(o,a,!1,i),l=this.diff_main(s,u,!1,i);return c.concat(l)},n.prototype.diff_linesToChars_=function(t,e){var n=[],r={};function i(t){for(var e="",i=0,a=-1,s=n.length;a<t.length-1;){-1==(a=t.indexOf("\n",i))&&(a=t.length-1);var u=t.substring(i,a+1);(r.hasOwnProperty?r.hasOwnProperty(u):void 0!==r[u])?e+=String.fromCharCode(r[u]):(s==o&&(u=t.substring(i),a=t.length),e+=String.fromCharCode(s),r[u]=s,n[s++]=u),i=a+1}return e}n[0]="";var o=4e4,a=i(t);return o=65535,{chars1:a,chars2:i(e),lineArray:n}},n.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],o=0;o<r.length;o++)i[o]=e[r.charCodeAt(o)];t[n][1]=i.join("")}},n.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},n.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},n.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var o=0,a=1;;){var s=t.substring(i-a),u=e.indexOf(s);if(-1==u)return o;a+=u,0!=u&&t.substring(i-a)!=e.substring(0,a)||(o=a,a++)}},n.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var i=this;function o(t,e,n){for(var r,o,a,s,u=t.substring(n,n+Math.floor(t.length/4)),c=-1,l="";-1!=(c=e.indexOf(u,c+1));){var f=i.diff_commonPrefix(t.substring(n),e.substring(c)),h=i.diff_commonSuffix(t.substring(0,n),e.substring(0,c));l.length<h+f&&(l=e.substring(c-h,c)+e.substring(c,c+f),r=t.substring(0,n-h),o=t.substring(n+f),a=e.substring(0,c-h),s=e.substring(c+f))}return 2*l.length>=t.length?[r,o,a,s,l]:null}var a,s,u,c,l,f=o(n,r,Math.ceil(n.length/4)),h=o(n,r,Math.ceil(n.length/2));return f||h?(a=h?f&&f[4].length>h[4].length?f:h:f,t.length>e.length?(s=a[0],u=a[1],c=a[2],l=a[3]):(c=a[0],l=a[1],s=a[2],u=a[3]),[s,u,c,l,a[4]]):null},n.prototype.diff_cleanupSemantic=function(t){for(var e=!1,r=[],i=0,o=null,a=0,s=0,u=0,c=0,l=0;a<t.length;)0==t[a][0]?(r[i++]=a,s=c,u=l,c=0,l=0,o=t[a][1]):(1==t[a][0]?c+=t[a][1].length:l+=t[a][1].length,o&&o.length<=Math.max(s,u)&&o.length<=Math.max(c,l)&&(t.splice(r[i-1],0,new n.Diff(-1,o)),t[r[i-1]+1][0]=1,i--,a=--i>0?r[i-1]:-1,s=0,u=0,c=0,l=0,o=null,e=!0)),a++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;){if(-1==t[a-1][0]&&1==t[a][0]){var f=t[a-1][1],h=t[a][1],d=this.diff_commonOverlap_(f,h),p=this.diff_commonOverlap_(h,f);d>=p?(d>=f.length/2||d>=h.length/2)&&(t.splice(a,0,new n.Diff(0,h.substring(0,d))),t[a-1][1]=f.substring(0,f.length-d),t[a+1][1]=h.substring(d),a++):(p>=f.length/2||p>=h.length/2)&&(t.splice(a,0,new n.Diff(0,f.substring(0,p))),t[a-1][0]=1,t[a-1][1]=h.substring(0,h.length-p),t[a+1][0]=-1,t[a+1][1]=f.substring(p),a++),a++}a++}},n.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var r=t.charAt(t.length-1),i=e.charAt(0),o=r.match(n.nonAlphaNumericRegex_),a=i.match(n.nonAlphaNumericRegex_),s=o&&r.match(n.whitespaceRegex_),u=a&&i.match(n.whitespaceRegex_),c=s&&r.match(n.linebreakRegex_),l=u&&i.match(n.linebreakRegex_),f=c&&t.match(n.blanklineEndRegex_),h=l&&e.match(n.blanklineStartRegex_);return f||h?5:c||l?4:o&&!s&&u?3:s||u?2:o||a?1:0}for(var r=1;r<t.length-1;){if(0==t[r-1][0]&&0==t[r+1][0]){var i=t[r-1][1],o=t[r][1],a=t[r+1][1],s=this.diff_commonSuffix(i,o);if(s){var u=o.substring(o.length-s);i=i.substring(0,i.length-s),o=u+o.substring(0,o.length-s),a=u+a}for(var c=i,l=o,f=a,h=e(i,o)+e(o,a);o.charAt(0)===a.charAt(0);){i+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var d=e(i,o)+e(o,a);d>=h&&(h=d,c=i,l=o,f=a)}t[r-1][1]!=c&&(c?t[r-1][1]=c:(t.splice(r-1,1),r--),t[r][1]=l,f?t[r+1][1]=f:(t.splice(r+1,1),r--))}r++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,r=[],i=0,o=null,a=0,s=!1,u=!1,c=!1,l=!1;a<t.length;)0==t[a][0]?(t[a][1].length<this.Diff_EditCost&&(c||l)?(r[i++]=a,s=c,u=l,o=t[a][1]):(i=0,o=null),c=l=!1):(-1==t[a][0]?l=!0:c=!0,o&&(s&&u&&c&&l||o.length<this.Diff_EditCost/2&&s+u+c+l==3)&&(t.splice(r[i-1],0,new n.Diff(-1,o)),t[r[i-1]+1][0]=1,i--,o=null,s&&u?(c=l=!0,i=0):(a=--i>0?r[i-1]:-1,c=l=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},n.prototype.diff_cleanupMerge=function(t){t.push(new n.Diff(0,""));for(var e,r=0,i=0,o=0,a="",s="";r<t.length;)switch(t[r][0]){case 1:o++,s+=t[r][1],r++;break;case-1:i++,a+=t[r][1],r++;break;case 0:i+o>1?(0!==i&&0!==o&&(0!==(e=this.diff_commonPrefix(s,a))&&(r-i-o>0&&0==t[r-i-o-1][0]?t[r-i-o-1][1]+=s.substring(0,e):(t.splice(0,0,new n.Diff(0,s.substring(0,e))),r++),s=s.substring(e),a=a.substring(e)),0!==(e=this.diff_commonSuffix(s,a))&&(t[r][1]=s.substring(s.length-e)+t[r][1],s=s.substring(0,s.length-e),a=a.substring(0,a.length-e))),r-=i+o,t.splice(r,i+o),a.length&&(t.splice(r,0,new n.Diff(-1,a)),r++),s.length&&(t.splice(r,0,new n.Diff(1,s)),r++),r++):0!==r&&0==t[r-1][0]?(t[r-1][1]+=t[r][1],t.splice(r,1)):r++,o=0,i=0,a="",s=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(r=1;r<t.length-1;)0==t[r-1][0]&&0==t[r+1][0]&&(t[r][1].substring(t[r][1].length-t[r-1][1].length)==t[r-1][1]?(t[r][1]=t[r-1][1]+t[r][1].substring(0,t[r][1].length-t[r-1][1].length),t[r+1][1]=t[r-1][1]+t[r+1][1],t.splice(r-1,1),u=!0):t[r][1].substring(0,t[r+1][1].length)==t[r+1][1]&&(t[r-1][1]+=t[r+1][1],t[r][1]=t[r][1].substring(t[r+1][1].length)+t[r+1][1],t.splice(r+1,1),u=!0)),r++;u&&this.diff_cleanupMerge(t)},n.prototype.diff_xIndex=function(t,e){var n,r=0,i=0,o=0,a=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),-1!==t[n][0]&&(i+=t[n][1].length),!(r>e));n++)o=r,a=i;return t.length!=n&&-1===t[n][0]?a:a+(e-o)},n.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,i=/>/g,o=/\n/g,a=0;a<t.length;a++){var s=t[a][0],u=t[a][1].replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"&para;<br>");switch(s){case 1:e[a]='<ins style="background:#e6ffe6;">'+u+"</ins>";break;case-1:e[a]='<del style="background:#ffe6e6;">'+u+"</del>";break;case 0:e[a]="<span>"+u+"</span>"}}return e.join("")},n.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},n.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},n.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var o=t[i][0],a=t[i][1];switch(o){case 1:n+=a.length;break;case-1:r+=a.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+=Math.max(n,r)},n.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(t,e){for(var r=[],i=0,o=0,a=e.split(/\t/g),s=0;s<a.length;s++){var u=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{r[i++]=new n.Diff(1,decodeURI(u))}catch(f){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var c=parseInt(u,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+u);var l=t.substring(o,o+=c);"="==a[s].charAt(0)?r[i++]=new n.Diff(0,l):r[i++]=new n.Diff(-1,l);break;default:if(a[s])throw new Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(o!=t.length)throw new Error("Delta length ("+o+") does not equal source text length ("+t.length+").");return r},n.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},n.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),i=this;function o(t,r){var o=t/e.length,a=Math.abs(n-r);return i.Match_Distance?o+a/i.Match_Distance:a?1:o}var a=this.Match_Threshold,s=t.indexOf(e,n);-1!=s&&(a=Math.min(o(0,s),a),-1!=(s=t.lastIndexOf(e,n+e.length))&&(a=Math.min(o(0,s),a)));var u,c,l=1<<e.length-1;s=-1;for(var f,h=e.length+t.length,d=0;d<e.length;d++){for(u=0,c=h;u<c;)o(d,n+c)<=a?u=c:h=c,c=Math.floor((h-u)/2+u);h=c;var p=Math.max(1,n-c+1),g=Math.min(n+c,t.length)+e.length,v=Array(g+2);v[g+1]=(1<<d)-1;for(var m=g;m>=p;m--){var y=r[t.charAt(m-1)];if(v[m]=0===d?(v[m+1]<<1|1)&y:(v[m+1]<<1|1)&y|(f[m+1]|f[m])<<1|1|f[m+1],v[m]&l){var b=o(d,m-1);if(b<=a){if(a=b,!((s=m-1)>n))break;p=Math.max(1,2*n-s)}}}if(o(d+1,n)>a)break;f=v}return s},n.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},n.prototype.patch_addContext_=function(t,e){if(0!=e.length){if(null===t.start2)throw Error("patch not initialized");for(var r=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(r)!=e.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,r=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var o=e.substring(t.start2-i,t.start2);o&&t.diffs.unshift(new n.Diff(0,o));var a=e.substring(t.start2+t.length1,t.start2+t.length1+i);a&&t.diffs.push(new n.Diff(0,a)),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+a.length,t.length2+=o.length+a.length}},n.prototype.patch_make=function(t,e,r){var i,o;if("string"==typeof t&&"string"==typeof e&&"undefined"==typeof r)i=t,(o=this.diff_main(i,e,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(t&&"object"==typeof t&&"undefined"==typeof e&&"undefined"==typeof r)o=t,i=this.diff_text1(o);else if("string"==typeof t&&e&&"object"==typeof e&&"undefined"==typeof r)i=t,o=e;else{if("string"!=typeof t||"string"!=typeof e||!r||"object"!=typeof r)throw new Error("Unknown call format to patch_make.");i=t,o=r}if(0===o.length)return[];for(var a=[],s=new n.patch_obj,u=0,c=0,l=0,f=i,h=i,d=0;d<o.length;d++){var p=o[d][0],g=o[d][1];switch(u||0===p||(s.start1=c,s.start2=l),p){case 1:s.diffs[u++]=o[d],s.length2+=g.length,h=h.substring(0,l)+g+h.substring(l);break;case-1:s.length1+=g.length,s.diffs[u++]=o[d],h=h.substring(0,l)+h.substring(l+g.length);break;case 0:g.length<=2*this.Patch_Margin&&u&&o.length!=d+1?(s.diffs[u++]=o[d],s.length1+=g.length,s.length2+=g.length):g.length>=2*this.Patch_Margin&&u&&(this.patch_addContext_(s,f),a.push(s),s=new n.patch_obj,u=0,f=h,c=l)}1!==p&&(c+=g.length),-1!==p&&(l+=g.length)}return u&&(this.patch_addContext_(s,f),a.push(s)),a},n.prototype.patch_deepCopy=function(t){for(var e=[],r=0;r<t.length;r++){var i=t[r],o=new n.patch_obj;o.diffs=[];for(var a=0;a<i.diffs.length;a++)o.diffs[a]=new n.Diff(i.diffs[a][0],i.diffs[a][1]);o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,e[r]=o}return e},n.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,i=[],o=0;o<t.length;o++){var a,s,u=t[o].start2+r,c=this.diff_text1(t[o].diffs),l=-1;if(c.length>this.Match_MaxBits?-1!=(a=this.match_main(e,c.substring(0,this.Match_MaxBits),u))&&(-1==(l=this.match_main(e,c.substring(c.length-this.Match_MaxBits),u+c.length-this.Match_MaxBits))||a>=l)&&(a=-1):a=this.match_main(e,c,u),-1==a)i[o]=!1,r-=t[o].length2-t[o].length1;else if(i[o]=!0,r=a-u,c==(s=-1==l?e.substring(a,a+c.length):e.substring(a,l+this.Match_MaxBits)))e=e.substring(0,a)+this.diff_text2(t[o].diffs)+e.substring(a+c.length);else{var f=this.diff_main(c,s,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(f)/c.length>this.Patch_DeleteThreshold)i[o]=!1;else{this.diff_cleanupSemanticLossless(f);for(var h,d=0,p=0;p<t[o].diffs.length;p++){var g=t[o].diffs[p];0!==g[0]&&(h=this.diff_xIndex(f,d)),1===g[0]?e=e.substring(0,a+h)+g[1]+e.substring(a+h):-1===g[0]&&(e=e.substring(0,a+h)+e.substring(a+this.diff_xIndex(f,d+g[1].length))),-1!==g[0]&&(d+=g[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),i]},n.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,r="",i=1;i<=e;i++)r+=String.fromCharCode(i);for(i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var o=t[0],a=o.diffs;if(0==a.length||0!=a[0][0])a.unshift(new n.Diff(0,r)),o.start1-=e,o.start2-=e,o.length1+=e,o.length2+=e;else if(e>a[0][1].length){var s=e-a[0][1].length;a[0][1]=r.substring(a[0][1].length)+a[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}if(0==(a=(o=t[t.length-1]).diffs).length||0!=a[a.length-1][0])a.push(new n.Diff(0,r)),o.length1+=e,o.length2+=e;else if(e>a[a.length-1][1].length){s=e-a[a.length-1][1].length;a[a.length-1][1]+=r.substring(0,s),o.length1+=s,o.length2+=s}return r},n.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,r=0;r<t.length;r++)if(!(t[r].length1<=e)){var i=t[r];t.splice(r--,1);for(var o=i.start1,a=i.start2,s="";0!==i.diffs.length;){var u=new n.patch_obj,c=!0;for(u.start1=o-s.length,u.start2=a-s.length,""!==s&&(u.length1=u.length2=s.length,u.diffs.push(new n.Diff(0,s)));0!==i.diffs.length&&u.length1<e-this.Patch_Margin;){var l=i.diffs[0][0],f=i.diffs[0][1];1===l?(u.length2+=f.length,a+=f.length,u.diffs.push(i.diffs.shift()),c=!1):-1===l&&1==u.diffs.length&&0==u.diffs[0][0]&&f.length>2*e?(u.length1+=f.length,o+=f.length,c=!1,u.diffs.push(new n.Diff(l,f)),i.diffs.shift()):(f=f.substring(0,e-u.length1-this.Patch_Margin),u.length1+=f.length,o+=f.length,0===l?(u.length2+=f.length,a+=f.length):c=!1,u.diffs.push(new n.Diff(l,f)),f==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(f.length))}s=(s=this.diff_text2(u.diffs)).substring(s.length-this.Patch_Margin);var h=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==h&&(u.length1+=h.length,u.length2+=h.length,0!==u.diffs.length&&0===u.diffs[u.diffs.length-1][0]?u.diffs[u.diffs.length-1][1]+=h:u.diffs.push(new n.Diff(0,h))),c||t.splice(++r,0,u)}}},n.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},n.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var r=t.split("\n"),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var a=r[i].match(o);if(!a)throw new Error("Invalid patch string: "+r[i]);var s=new n.patch_obj;for(e.push(s),s.start1=parseInt(a[1],10),""===a[2]?(s.start1--,s.length1=1):"0"==a[2]?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),""===a[4]?(s.start2--,s.length2=1):"0"==a[4]?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),i++;i<r.length;){var u=r[i].charAt(0);try{var c=decodeURI(r[i].substring(1))}catch(l){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==u)s.diffs.push(new n.Diff(-1,c));else if("+"==u)s.diffs.push(new n.Diff(1,c));else if(" "==u)s.diffs.push(new n.Diff(0,c));else{if("@"==u)break;if(""!==u)throw new Error('Invalid patch mode "'+u+'" in: '+c)}i++}}return e},(n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},t.exports=n,t.exports.diff_match_patch=n,t.exports.DIFF_DELETE=-1,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0},function(t,e,n){"use strict";n(154)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(35),o=(r=n(104))&&"object"==typeof r&&"default"in r?r.default:r,a=n(106),s=n(80),u=n(155),c=n(105),l=o.SDK_VERSION,f=new a.Logger("@firebase/firestore");function h(){return f.logLevel}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=a.LogLevel.DEBUG){var r=e.map(g);f.debug.apply(f,i.__spreadArrays(["Firestore ("+l+"): "+t],r))}}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=a.LogLevel.ERROR){var r=e.map(g);f.error.apply(f,i.__spreadArrays(["Firestore ("+l+"): "+t],r))}}function g(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function v(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+l+") INTERNAL ASSERTION FAILED: "+t;throw p(e),new Error(e)}function m(t,e){t||v()}function y(t,e){return t}function b(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var w=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function x(t,e){return t<e?-1:t>e?1:0}function _(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function O(t){return t+"\0"}var k=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},S=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return x(this.projectId,t.projectId)||x(this.database,t.database)},t}();function E(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function A(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function C(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var j=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.u(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){A(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype._=function(){return C(this.l)},t}(),T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},M=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return i.__extends(e,t),e}(Error),R=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new M(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new M(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new M(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new M(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?x(this.nanoseconds,t.nanoseconds):x(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),D=function(){function t(t){this.timestamp=t}return t.I=function(e){return new t(e)},t.min=function(){return new t(new R(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.A=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.R=function(){return this.timestamp},t}(),L=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&v(),void 0===n?n=t.length-e:n>t.length-e&&v(),this.segments=t,this.offset=e,this.m=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.m},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.V(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},t.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.prototype.N=function(){return this.F().join("/")},e.prototype.toString=function(){return this.N()},e.$=function(t){if(t.indexOf("//")>=0)throw new M(T.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e}(L);N.k=new N([]);var I=/^[_a-zA-Z][_a-zA-Z0-9]*$/,F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.M=function(t){return I.test(t)},e.prototype.N=function(){return this.F().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.M(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.N()},e.prototype.L=function(){return 1===this.length&&"__name__"===this.get(0)},e.O=function(){return new e(["__name__"])},e.B=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new M(T.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new M(T.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new M(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new M(T.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e}(L);F.k=new F([]);var P=function(){function t(t){this.path=t}return t.q=function(e){return new t(N.$(e).g(5))},t.prototype.U=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===N.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return N.P(t.path,e.path)},t.W=function(t){return t.length%2==0},t.j=function(e){return new t(new N(e.slice()))},t}();function $(t){return null==t}function z(t){return-0===t&&1/t==-1/0}function B(t){return"number"==typeof t&&Number.isInteger(t)&&!z(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}P.EMPTY=new P(new N([]));var U=function(){function t(t){this.K=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.K,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.K)},t.prototype.G=function(){return 2*this.K.length},t.prototype.o=function(t){return x(this.K,t.K)},t.prototype.isEqual=function(t){return this.K===t.K},t}();U.H=new U("");var W,H,V=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=D.min()),void 0===o&&(o=D.min()),void 0===a&&(a=U.H),this.target=t,this.targetId=e,this.Y=n,this.sequenceNumber=r,this.J=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.X=function(e){return new t(this.target,this.targetId,this.Y,e,this.J,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Z=function(e,n){return new t(this.target,this.targetId,this.Y,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.tt=function(e){return new t(this.target,this.targetId,this.Y,this.sequenceNumber,this.J,e,this.resumeToken)},t}(),q=function(t){this.count=t};function G(t){switch(t){case T.OK:return v();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0;default:return v()}}function K(t){if(void 0===t)return p("GRPC error has no .code"),T.UNKNOWN;switch(t){case W.OK:return T.OK;case W.CANCELLED:return T.CANCELLED;case W.UNKNOWN:return T.UNKNOWN;case W.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case W.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case W.INTERNAL:return T.INTERNAL;case W.UNAVAILABLE:return T.UNAVAILABLE;case W.UNAUTHENTICATED:return T.UNAUTHENTICATED;case W.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case W.NOT_FOUND:return T.NOT_FOUND;case W.ALREADY_EXISTS:return T.ALREADY_EXISTS;case W.PERMISSION_DENIED:return T.PERMISSION_DENIED;case W.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case W.ABORTED:return T.ABORTED;case W.OUT_OF_RANGE:return T.OUT_OF_RANGE;case W.UNIMPLEMENTED:return T.UNIMPLEMENTED;case W.DATA_LOSS:return T.DATA_LOSS;default:return v()}}(H=W||(W={}))[H.OK=0]="OK",H[H.CANCELLED=1]="CANCELLED",H[H.UNKNOWN=2]="UNKNOWN",H[H.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",H[H.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",H[H.NOT_FOUND=5]="NOT_FOUND",H[H.ALREADY_EXISTS=6]="ALREADY_EXISTS",H[H.PERMISSION_DENIED=7]="PERMISSION_DENIED",H[H.UNAUTHENTICATED=16]="UNAUTHENTICATED",H[H.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",H[H.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",H[H.ABORTED=10]="ABORTED",H[H.OUT_OF_RANGE=11]="OUT_OF_RANGE",H[H.UNIMPLEMENTED=12]="UNIMPLEMENTED",H[H.INTERNAL=13]="INTERNAL",H[H.UNAVAILABLE=14]="UNAVAILABLE",H[H.DATA_LOSS=15]="DATA_LOSS";var Y=function(){function t(t,e){this.P=t,this.root=e||X.EMPTY}return t.prototype.et=function(e,n){return new t(this.P,this.root.et(e,n,this.P).st(null,null,X.nt,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).st(null,null,X.nt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.it=function(){return this.root.it()},t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(t){return this.root.ot(t)},t.prototype.forEach=function(t){this.ot((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ot((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.at=function(){return new Q(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new Q(this.root,t,this.P,!1)},t.prototype.ct=function(){return new Q(this.root,null,this.P,!0)},t.prototype.lt=function(t){return new Q(this.root,t,this.P,!0)},t}(),Q=function(){function t(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}return t.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},t.prototype.wt=function(){return this.ft.length>0},t.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},t}(),X=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.st=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype._=function(){return!1},t.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.it=function(){return this.min().key},t.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},t.prototype.et=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.st(null,null,null,r.left.et(t,e,n),null):0===i?r.st(null,e,null,null,null):r.st(null,null,null,null,r.right.et(t,e,n))).Et()},t.prototype.It=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.At()||e.left.left.At()||(e=e.Rt()),(e=e.st(null,null,null,e.left.It(),null)).Et()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left._()||i.left.At()||i.left.left.At()||(i=i.Rt()),i=i.st(null,null,null,i.left.remove(e,n),null);else{if(i.left.At()&&(i=i.Pt()),i.right._()||i.right.At()||i.right.left.At()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t.EMPTY;r=i.right.min(),i=i.st(r.key,r.value,null,null,i.right.It())}i=i.st(null,null,null,null,i.right.remove(e,n))}return i.Et()},t.prototype.At=function(){return this.color},t.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.pt()),t},t.prototype.Rt=function(){var t=this.pt();return t.right.left.At()&&(t=(t=(t=t.st(null,null,null,null,t.right.Pt())).gt()).pt()),t},t.prototype.Vt=function(){var t=this.pt();return t.left.left.At()&&(t=(t=t.Pt()).pt()),t},t.prototype.gt=function(){var e=this.st(null,null,t.RED,null,this.right.left);return this.right.st(null,null,this.color,e,null)},t.prototype.Pt=function(){var e=this.st(null,null,t.RED,this.left.right,null);return this.left.st(null,null,this.color,null,e)},t.prototype.pt=function(){var t=this.left.st(null,null,!this.left.color,null,null),e=this.right.st(null,null,!this.right.color,null,null);return this.st(null,null,!this.color,t,e)},t.prototype.yt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},t.prototype.bt=function(){if(this.At()&&this.left.At())throw v();if(this.right.At())throw v();var t=this.left.bt();if(t!==this.right.bt())throw v();return t+(this.At()?0:1)},t}();X.EMPTY=null,X.RED=!0,X.nt=!1,X.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw v()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw v()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw v()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw v()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw v()},enumerable:!0,configurable:!0}),t.prototype.st=function(t,e,n,r,i){return this},t.prototype.et=function(t,e,n){return new X(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ot=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.it=function(){return null},t.prototype.rt=function(){return null},t.prototype.At=function(){return!1},t.prototype.yt=function(){return!0},t.prototype.bt=function(){return 0},t}());var Z=function(){function t(t){this.P=t,this.data=new Y(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.it()},t.prototype.last=function(){return this.data.rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ot((function(e,n){return t(e),!1}))},t.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(this.P(r.key,t[1])>=0)return;e(r.key)}},t.prototype.St=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},t.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},t.prototype.at=function(){return new J(this.data.at())},t.prototype.ut=function(t){return new J(this.data.ut(t))},t.prototype.add=function(t){return this.st(this.data.remove(t).et(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.st(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.at(),r=e.data.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(0!==this.P(i,o))return!1}return!0},t.prototype.F=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.st=function(e){var n=new t(this.P);return n.data=e,n},t}(),J=function(){function t(t){this.Ft=t}return t.prototype.dt=function(){return this.Ft.dt().key},t.prototype.wt=function(){return this.Ft.wt()},t}(),tt=new Y(P.P);function et(){return tt}function nt(){return et()}var rt=new Y(P.P);function it(){return rt}var ot=new Y(P.P),at=new Z(P.P);function st(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=at,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ut=new Z(x);function ct(){return ut}var lt=function(){function t(t){this.P=t?function(e,n){return t(e,n)||P.P(e.key,n.key)}:function(t,e){return P.P(t.key,e.key)},this.Nt=it(),this.$t=new Y(this.P)}return t.kt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.Nt.get(t)},t.prototype.get=function(t){return this.Nt.get(t)},t.prototype.first=function(){return this.$t.it()},t.prototype.last=function(){return this.$t.rt()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.$t.ot((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.st(e.Nt.et(t.key,t),e.$t.et(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.st(this.Nt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.at(),r=e.$t.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.st=function(e,n){var r=new t;return r.P=this.P,r.Nt=e,r.$t=n,r},t}(),ft=function(){function t(){this.xt=new Y(P.P)}return t.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);n?0!==t.type&&3===n.type?this.xt=this.xt.et(e,t):3===t.type&&1!==n.type?this.xt=this.xt.et(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.et(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.et(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.et(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.et(e,{type:2,doc:t.doc}):v():this.xt=this.xt.et(e,t)},t.prototype.Mt=function(){var t=[];return this.xt.ot((function(e,n){t.push(n)})),t},t}(),ht=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.Lt=n,this.docChanges=r,this.Ot=i,this.fromCache=o,this.Bt=a,this.qt=s}return t.Ut=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,lt.kt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ot._()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Ot.isEqual(t.Ot)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.Lt.isEqual(t.Lt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),dt=function(){function t(t,e,n,r,i){this.J=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}return t.Gt=function(e,n){var r=new Map;return r.set(e,pt.zt(e,n)),new t(D.min(),r,ct(),et(),st())},t}(),pt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}return t.zt=function(e,n){return new t(U.H,n,st(),st(),st())},t}(),gt=function(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r},vt=function(t,e){this.targetId=t,this.ee=e},mt=function(t,e,n,r){void 0===n&&(n=U.H),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},yt=function(){function t(){this.se=0,this.ne=xt(),this.ie=U.H,this.re=!1,this.oe=!0}return Object.defineProperty(t.prototype,"Ht",{get:function(){return this.re},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"he",{get:function(){return 0!==this.se},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return this.oe},enumerable:!0,configurable:!0}),t.prototype.ue=function(t){t.G()>0&&(this.oe=!0,this.ie=t)},t.prototype.ce=function(){var t=st(),e=st(),n=st();return this.ne.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:v()}})),new pt(this.ie,this.re,t,e,n)},t.prototype.le=function(){this.oe=!1,this.ne=xt()},t.prototype._e=function(t,e){this.oe=!0,this.ne=this.ne.et(t,e)},t.prototype.fe=function(t){this.oe=!0,this.ne=this.ne.remove(t)},t.prototype.de=function(){this.se+=1},t.prototype.we=function(){this.se-=1},t.prototype.Te=function(){this.oe=!0,this.re=!0},t}(),bt=function(){function t(t){this.Ee=t,this.Ie=new Map,this.Ae=et(),this.Re=wt(),this.me=new Z(x)}return t.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof Ie?this.Ve(r,t.te):t.te instanceof Fe&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var a=o[i];this.ge(a,t.key,t.te)}},t.prototype.pe=function(t){var e=this;this.ye(t,(function(n){var r=e.be(n);switch(t.state){case 0:e.ve(n)&&r.ue(t.resumeToken);break;case 1:r.we(),r.he||r.le(),r.ue(t.resumeToken);break;case 2:r.we(),r.he||e.removeTarget(n);break;case 3:e.ve(n)&&(r.Te(),r.ue(t.resumeToken));break;case 4:e.ve(n)&&(e.Se(n),r.ue(t.resumeToken));break;default:v()}}))},t.prototype.ye=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.ve(r)&&e(r)}))},t.prototype.De=function(t){var e=t.targetId,n=t.ee.count,r=this.Ce(e);if(r){var i=r.target;if(en(i))if(0===n){var o=new P(i.path);this.ge(e,o,new Fe(o,D.min()))}else m(1===n);else this.Fe(e)!==n&&(this.Se(e),this.me=this.me.add(e))}},t.prototype.Ne=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var o=e.Ce(i);if(o){if(r.Ht&&en(o.target)){var a=new P(o.target.path);null!==e.Ae.get(a)||e.$e(i,a)||e.ge(i,a,new Fe(a,t))}r.ae&&(n.set(i,r.ce()),r.le())}}));var r=st();this.Re.forEach((function(t,n){var i=!0;n.St((function(t){var n=e.Ce(t);return!n||2===n.Y||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new dt(t,n,this.me,this.Ae,r);return this.Ae=et(),this.Re=wt(),this.me=new Z(x),i},t.prototype.Ve=function(t,e){if(this.ve(t)){var n=this.$e(t,e.key)?2:0;this.be(t)._e(e.key,n),this.Ae=this.Ae.et(e.key,e),this.Re=this.Re.et(e.key,this.ke(e.key).add(t))}},t.prototype.ge=function(t,e,n){if(this.ve(t)){var r=this.be(t);this.$e(t,e)?r._e(e,1):r.fe(e),this.Re=this.Re.et(e,this.ke(e).delete(t)),n&&(this.Ae=this.Ae.et(e,n))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},t.prototype.de=function(t){this.be(t).de()},t.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new yt,this.Ie.set(t,e)),e},t.prototype.ke=function(t){var e=this.Re.get(t);return e||(e=new Z(x),this.Re=this.Re.et(t,e)),e},t.prototype.ve=function(t){var e=null!==this.Ce(t);return e||d("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},t.prototype.Se=function(t){var e=this;this.Ie.set(t,new yt),this.Ee.xe(t).forEach((function(n){e.ge(t,n,null)}))},t.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},t}();function wt(){return new Y(P.P)}function xt(){return new Y(P.P)}function _t(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ot(t){var e=Mt(t.mapValue.fields.__local_write_time__.timestampValue);return new R(e.seconds,e.nanos)}var kt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function St(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_t(t)?4:10:v()}function Et(t,e){var n=St(t);if(n!==St(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ot(t).isEqual(Ot(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Mt(t.timestampValue),r=Mt(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Dt(t.bytesValue).isEqual(Dt(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Rt(t.geoPointValue.latitude)===Rt(e.geoPointValue.latitude)&&Rt(t.geoPointValue.longitude)===Rt(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Rt(t.integerValue)===Rt(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Rt(t.doubleValue),r=Rt(e.doubleValue);return n===r?z(n)===z(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return _(t.arrayValue.values||[],e.arrayValue.values||[],Et);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(E(n)!==E(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Et(n[i],r[i])))return!1;return!0}(t,e);default:return v()}}function At(t,e){return void 0!==(t.values||[]).find((function(t){return Et(t,e)}))}function Ct(t,e){var n=St(t),r=St(e);if(n!==r)return x(n,r);switch(n){case 0:return 0;case 1:return x(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Rt(t.integerValue||t.doubleValue),r=Rt(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return jt(t.timestampValue,e.timestampValue);case 4:return jt(Ot(t),Ot(e));case 5:return x(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Dt(t),r=Dt(e);return n.o(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return x(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=x(Rt(t.latitude),Rt(e.latitude));return 0!==n?n:x(Rt(t.longitude),Rt(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ct(n[i],r[i]);if(o)return o}return x(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=x(r[a],o[a]);if(0!==s)return s;var u=Ct(n[r[a]],i[o[a]]);if(0!==u)return u}return x(r.length,o.length)}(t.mapValue,e.mapValue);default:throw v()}}function jt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return x(t,e);var n=Mt(t),r=Mt(e),i=x(n.seconds,r.seconds);return 0!==i?i:x(n.nanos,r.nanos)}function Tt(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Mt(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Dt(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,P.q(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=t(a)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):v();var n,r}(t)}function Mt(t){if(m(!!t),"string"==typeof t){var e=0,n=kt.exec(t);if(m(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(t.seconds),nanos:Rt(t.nanos)}}function Rt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Dt(t){return"string"==typeof t?U.fromBase64String(t):U.fromUint8Array(t)}function Lt(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function Nt(t){return!!t&&"integerValue"in t}function It(t){return!!t&&"arrayValue"in t}function Ft(t){return!!t&&"nullValue"in t}function Pt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $t(t){return!!t&&"mapValue"in t}var zt={asc:"ASCENDING",desc:"DESCENDING"},Bt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ut=function(t,e){this.s=t,this.Le=e};function Wt(t){return{integerValue:""+t}}function Ht(t,e){if(t.Le){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z(e)?"-0":e}}function Vt(t,e){return t.Le?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function qt(t,e){return t.Le?e.toBase64():e.toUint8Array()}function Gt(t,e){return t.Le?(m(void 0===e||"string"==typeof e),U.fromBase64String(e||"")):(m(void 0===e||e instanceof Uint8Array),U.fromUint8Array(e||new Uint8Array))}function Kt(t,e){return Vt(t,e.R())}function Yt(t){return m(!!t),D.I(function(t){var e=Mt(t);return new R(e.seconds,e.nanos)}(t))}function Qt(t,e){return function(t){return new N(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).N()}function Xt(t){var e=N.$(t);return m(ve(e)),e}function Zt(t,e){return Qt(t.s,e.path)}function Jt(t,e){var n=Xt(e);return m(n.get(1)===t.s.projectId),m(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new P(re(n))}function te(t,e){return Qt(t.s,e)}function ee(t){var e=Xt(t);return 4===e.length?N.k:re(e)}function ne(t){return new N(["projects",t.s.projectId,"databases",t.s.database]).N()}function re(t){return m(t.length>4&&"documents"===t.get(4)),t.g(5)}function ie(t,e,n){return{name:Zt(t,e),fields:n.proto.mapValue.fields}}function oe(t,e){var n;if(e instanceof Ae)n={update:ie(t,e.key,e.value)};else if(e instanceof Te)n={delete:Zt(t,e.key)};else if(e instanceof Ce)n={update:ie(t,e.key,e.data),updateMask:ge(e.Oe)};else if(e instanceof je)n={transform:{document:Zt(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof me)return{fieldPath:e.field.N(),setToServerValue:"REQUEST_TIME"};if(n instanceof ye)return{fieldPath:e.field.N(),appendMissingElements:{values:n.elements}};if(n instanceof be)return{fieldPath:e.field.N(),removeAllFromArray:{values:n.elements}};if(n instanceof we)return{fieldPath:e.field.N(),increment:n.Be};throw v()}(0,t)}))}};else{if(!(e instanceof Me))return v();n={verify:Zt(t,e.key)}}return e.Ue.qe||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Kt(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v()}(t,e.Ue)),n}function ae(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Se.updateTime(Yt(t.updateTime)):void 0!==t.exists?Se.exists(t.exists):Se.Qe()}(e.currentDocument):Se.Qe();if(e.update){e.update.name;var r=Jt(t,e.update.name),i=new Re({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new _e(e.map((function(t){return F.B(t)})))}(e.updateMask);return new Ce(r,i,o,n)}return new Ae(r,i,n)}if(e.delete){var a=Jt(t,e.delete);return new Te(a,n)}if(e.transform){var s=Jt(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)m("REQUEST_TIME"===e.setToServerValue),n=me.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ye(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new be(i)}else"increment"in e?n=new we(t,e.increment):v();var o=F.B(e.fieldPath);return new Oe(o,n)}(t,e)}));return m(!0===n.exists),new je(s,u)}if(e.verify){var c=Jt(t,e.verify);return new Me(c,n)}return v()}function se(t,e){return{documents:[te(t,e.path)]}}function ue(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=te(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=te(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return t instanceof ze?function(t){if("=="===t.op){if(Pt(t.value))return{unaryFilter:{field:fe(t.field),op:"IS_NAN"}};if(Ft(t.value))return{unaryFilter:{field:fe(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:fe(t.field),op:(e=t.op,Bt[e]),value:t.value}};var e}(t):v()}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:fe((e=t).field),direction:(n=e.dir,zt[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.Le||$(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=ce(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ce(e.endAt)),n}function ce(t){return{before:t.before,values:t.position}}function le(t){var e=!!t.before,n=t.values||[];return new qe(n,e)}function fe(t){return{fieldPath:t.N()}}function he(t){return F.B(t.fieldPath)}function de(t){return ze.create(he(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return v()}}(t.fieldFilter.op),t.fieldFilter.value)}function pe(t){switch(t.unaryFilter.op){case"IS_NAN":var e=he(t.unaryFilter.field);return ze.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=he(t.unaryFilter.field);return ze.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return v()}}function ge(t){var e=[];return t.fields.forEach((function(t){return e.push(t.N())})),{fieldPaths:e}}function ve(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var me=function(){function t(){}return t.prototype.je=function(t,e){return function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(e,t)},t.prototype.Ke=function(t,e){return e},t.prototype.Ge=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t}();me.instance=new me;var ye=function(){function t(t){this.elements=t}return t.prototype.je=function(t,e){return this.apply(t)},t.prototype.Ke=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=xe(t),n=function(t){e.some((function(e){return Et(e,t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.Ge=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&_(this.elements,e.elements,Et)},t}(),be=function(){function t(t){this.elements=t}return t.prototype.je=function(t,e){return this.apply(t)},t.prototype.Ke=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=xe(t),n=function(t){e=e.filter((function(e){return!Et(e,t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.Ge=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&_(this.elements,e.elements,Et)},t}(),we=function(){function t(t,e){this.serializer=t,this.Be=e}return t.prototype.je=function(t,e){var n=this.Ge(t),r=this.asNumber(n)+this.asNumber(this.Be);return Nt(n)&&Nt(this.Be)?Wt(r):Ht(this.serializer,r)},t.prototype.Ke=function(t,e){return e},t.prototype.Ge=function(t){return Nt(e=t)||function(t){return!!t&&"doubleValue"in t}(e)?t:{integerValue:0};var e},t.prototype.isEqual=function(e){return e instanceof t&&Et(this.Be,e.Be)},t.prototype.asNumber=function(t){return Rt(t.integerValue||t.doubleValue)},t}();function xe(t){return It(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var _e=function(){function t(t){this.fields=t,t.sort(F.P)}return t.prototype.ze=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return _(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Oe=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),ke=function(t,e){this.version=t,this.transformResults=e},Se=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Qe=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.He=function(t){return void 0!==this.updateTime?t instanceof Ie&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof Ie},t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}(),Ee=function(){function t(){}return t.prototype.Ye=function(t){},t.Je=function(t){return t instanceof Ie?t.version:D.min()},t}(),Ae=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ue=r,i.type=0,i}return i.__extends(e,t),e.prototype.Ke=function(t,e){this.Ye(t);var n=e.version;return new Ie(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=Ee.Je(t);return new Ie(this.key,r,this.value,{Xe:!0})},e.prototype.Ze=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Ue.isEqual(t.Ue)},e}(Ee),Ce=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Oe=r,o.Ue=i,o.type=1,o}return i.__extends(e,t),e.prototype.Ke=function(t,e){if(this.Ye(t),!this.Ue.He(t))return new Pe(this.key,e.version);var n=this.ts(t);return new Ie(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=Ee.Je(t),i=this.ts(t);return new Ie(this.key,r,i,{Xe:!0})},e.prototype.Ze=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Oe.isEqual(t.Oe)&&this.Ue.isEqual(t.Ue)},e.prototype.ts=function(t){var e;return e=t instanceof Ie?t.data():Re.empty(),this.es(e)},e.prototype.es=function(t){var e=this,n=new De(t);return this.Oe.fields.forEach((function(t){if(!t._()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.ss()},e}(Ee),je=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ue=Se.exists(!0),r}return i.__extends(e,t),e.prototype.Ke=function(t,e){if(this.Ye(t),m(null!=e.transformResults),!this.Ue.He(t))return new Pe(this.key,e.version);var n=this.ns(t),r=this.rs(t,e.transformResults),i=e.version,o=this.os(n.data(),r);return new Ie(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=this.ns(t),i=this.hs(n,t,e),o=this.os(r.data(),i);return new Ie(this.key,r.version,o,{Xe:!0})},e.prototype.Ze=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Ie?t.field(i.field):void 0,a=i.transform.Ge(o||null);null!=a&&(e=null==e?(new De).set(i.field,a):e.set(i.field,a))}return e?e.ss():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&_(this.fieldTransforms,t.fieldTransforms,(function(t,e){return t.isEqual(e)}))&&this.Ue.isEqual(t.Ue)},e.prototype.ns=function(t){return t},e.prototype.rs=function(t,e){var n=[];m(this.fieldTransforms.length===e.length);for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof Ie&&(a=t.field(i.field)),n.push(o.Ke(a,e[r]))}return n},e.prototype.hs=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;e instanceof Ie&&(u=e.field(a.field)),null===u&&n instanceof Ie&&(u=n.field(a.field)),r.push(s.je(u,t))}return r},e.prototype.os=function(t,e){for(var n=new De(t),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.ss()},e}(Ee),Te=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=3,r}return i.__extends(e,t),e.prototype.Ke=function(t,e){return this.Ye(t),new Fe(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.je=function(t,e,n){return this.Ye(t),this.Ue.He(t)?new Fe(this.key,D.min()):t},e.prototype.Ze=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Ue.isEqual(t.Ue)},e}(Ee),Me=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=4,r}return i.__extends(e,t),e.prototype.Ke=function(t,e){v()},e.prototype.je=function(t,e,n){v()},e.prototype.Ze=function(t){v()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Ue.isEqual(t.Ue)},e}(Ee),Re=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!$t(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return Et(this.proto,t.proto)},t}(),De=function(){function t(t){void 0===t&&(t=Re.empty()),this.as=t,this.us=new Map}return t.prototype.set=function(t,e){return this.cs(t,e),this},t.prototype.delete=function(t){return this.cs(t,null),this},t.prototype.cs=function(t,e){for(var n=this.us,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===St(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.S(),e)},t.prototype.ss=function(){var t=this.ls(F.k,this.us);return null!=t?new Re(t):this.as},t.prototype.ls=function(t,e){var n=this,r=!1,i=this.as.field(t),o=$t(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.ls(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Le(t){var e=[];return A(t.fields||{},(function(t,n){var r=new F([t]);if($t(n)){var i=Le(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new _e(e)}var Ne=function(t,e){this.key=t,this.version=e},Ie=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this)._s=r,o.Xe=!!i.Xe,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return i.__extends(e,t),e.prototype.field=function(t){return this._s.field(t)},e.prototype.data=function(){return this._s},e.prototype.fs=function(){return this._s.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Xe===t.Xe&&this.hasCommittedMutations===t.hasCommittedMutations&&this._s.isEqual(t._s)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this._s.toString()+", {hasLocalMutations: "+this.Xe+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Xe||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e}(Ne),Fe=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return i.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ne),Pe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ne),$e=function(){function t(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.ds=n,this.filters=r,this.limit=i,this.ws=o,this.startAt=a,this.endAt=s,this.Ts=null,this.Es=null,this.startAt&&this.Is(this.startAt),this.endAt&&this.Is(this.endAt)}return t.As=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.Ts){this.Ts=[];var t=this.Rs(),e=this.ms();if(null!==t&&null===e)t.L()||this.Ts.push(new Qe(t)),this.Ts.push(new Qe(F.O(),"asc"));else{for(var n=!1,r=0,i=this.ds;r<i.length;r++){var o=i[r];this.Ts.push(o),o.field.L()&&(n=!0)}if(!n){var a=this.ds.length>0?this.ds[this.ds.length-1].dir:"asc";this.Ts.push(new Qe(F.O(),a))}}}return this.Ts},enumerable:!0,configurable:!0}),t.prototype.Ps=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.ds.slice(),n,this.limit,this.ws,this.startAt,this.endAt)},t.prototype.Vs=function(e){var n=this.ds.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.ws,this.startAt,this.endAt)},t.prototype.gs=function(e){return new t(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.ps=function(e){return new t(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.ys=function(e){return new t(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),this.limit,this.ws,e,this.endAt)},t.prototype.bs=function(e){return new t(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),this.limit,this.ws,this.startAt,e)},t.prototype.vs=function(e){return new t(e,null,this.ds.slice(),this.filters.slice(),this.limit,this.ws,this.startAt,this.endAt)},t.prototype.Ss=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.ds.length||1===this.ds.length&&this.ds[0].field.L())},t.prototype.canonicalId=function(){return Je(this.We())+"|lt:"+this.ws},t.prototype.toString=function(){return"Query(target="+function(t){var e=t.path.N();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.join(", ")+"]"),$(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ge(t.startAt)),t.endAt&&(e+=", endAt: "+Ge(t.endAt)),"Target("+e+")"}(this.We())+"; limitType="+this.ws+")"},t.prototype.isEqual=function(t){return tn(this.We(),t.We())&&this.ws===t.ws},t.prototype.Ds=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.L()}return 0},t.prototype.matches=function(t){return this.Cs(t)&&this.Fs(t)&&this.Ns(t)&&this.$s(t)},t.prototype.ks=function(){return!$(this.limit)&&"F"===this.ws},t.prototype.xs=function(){return!$(this.limit)&&"L"===this.ws},t.prototype.ms=function(){return this.ds.length>0?this.ds[0].field:null},t.prototype.Rs=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof ze&&n.Ms())return n.field}return null},t.prototype.Ls=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof ze&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Os=function(){return en(this.We())},t.prototype.Bs=function(){return null!==this.collectionGroup},t.prototype.We=function(){if(!this.Es)if("F"===this.ws)this.Es=Ze(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new Qe(r.field,i))}var o=this.endAt?new qe(this.endAt.position,!this.endAt.before):null,a=this.startAt?new qe(this.startAt.position,!this.startAt.before):null;this.Es=Ze(this.path,this.collectionGroup,t,this.filters,this.limit,o,a)}return this.Es},t.prototype.Cs=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.U(this.collectionGroup)&&this.path.D(e):P.W(this.path)?this.path.isEqual(e):this.path.C(e)},t.prototype.Fs=function(t){for(var e=0,n=this.ds;e<n.length;e++){var r=n[e];if(!r.field.L()&&null===t.field(r.field))return!1}return!0},t.prototype.Ns=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.$s=function(t){return!(this.startAt&&!Ke(this.startAt,this.orderBy,t)||this.endAt&&Ke(this.endAt,this.orderBy,t))},t.prototype.Is=function(t){},t}(),ze=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return i.__extends(e,t),e.create=function(t,n,r){if(t.L())return"in"===n?new Ue(t,r):new Be(t,n,r);if(Ft(r)){if("=="!==n)throw new M(T.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(Pt(r)){if("=="!==n)throw new M(T.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new We(t,r):"in"===n?new He(t,r):"array-contains-any"===n?new Ve(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&St(this.value)===St(e)&&this.qs(Ct(e,this.value))},e.prototype.qs=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return v()}},e.prototype.Ms=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.N()+this.op.toString()+Tt(this.value)},e.prototype.isEqual=function(t){return t instanceof e&&this.op===t.op&&this.field.isEqual(t.field)&&Et(this.value,t.value)},e.prototype.toString=function(){return this.field.N()+" "+this.op+" "+Tt(this.value)},e}((function(){})),Be=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=P.q(r.referenceValue),i}return i.__extends(e,t),e.prototype.matches=function(t){var e=P.P(t.key,this.key);return this.qs(e)},e}(ze),Ue=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return P.q(t.referenceValue)})),r}return i.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ze),We=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return It(e)&&At(e.arrayValue,this.value)},e}(ze),He=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&At(this.value.arrayValue,e)},e}(ze),Ve=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!It(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return At(e.value.arrayValue,t)}))},e}(ze),qe=function(t,e){this.position=t,this.before=e};function Ge(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Tt(t)})).join(",")}function Ke(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.L()?P.P(P.q(a.referenceValue),n.key):Ct(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ye(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Et(t.position[n],e.position[n]))return!1;return!0}var Qe=function(){function t(t,e){this.field=t,void 0===e&&(e="asc"),this.dir=e,this.Us=t.L()}return t.prototype.compare=function(t,e){var n=this.Us?P.P(t.key,e.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ct(r,i):v()}(this.field,t,e);switch(this.dir){case"asc":return n;case"desc":return-1*n;default:return v()}},t.prototype.canonicalId=function(){return this.field.N()+this.dir.toString()},t.prototype.toString=function(){return this.field.N()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Xe=function(t){function e(e,n,r,i,o,a,s){void 0===n&&(n=null),void 0===r&&(r=[]),void 0===i&&(i=[]),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null);var u=this;return(u=t.call(this,e,n,r,i,o,a,s)||this).Qs=null,u}return i.__extends(e,t),e}((function(t,e,n,r,i,o,a){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a}));function Ze(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Xe(t,e,n,r,i,o,a)}function Je(t){var e=y(t);if(null===e.Qs){var n=e.path.N();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return t.canonicalId()})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return t.canonicalId()})).join(","),$(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ge(e.startAt)),e.endAt&&(n+="|ub:",n+=Ge(e.endAt)),e.Qs=n}return e.Qs}function tn(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!t.orderBy[n].isEqual(e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(!t.filters[r].isEqual(e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ye(t.startAt,e.startAt)&&Ye(t.endAt,e.endAt)}function en(t){return P.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}var nn=function(){function t(t,e,n,r){this.batchId=t,this.Ws=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ke=function(t,e,n){for(var r=n.js,i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.Ke(e,a)}}return e},t.prototype.je=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.je(e,e,this.Ws))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(t)&&(e=u.je(e,o,this.Ws))}return e},t.prototype.Ks=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.je(r.key,t.get(r.key));i&&(n=n.et(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),st())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&_(this.mutations,t.mutations,(function(t,e){return t.isEqual(e)}))&&_(this.baseMutations,t.baseMutations,(function(t,e){return t.isEqual(e)}))},t}(),rn=function(){function t(t,e,n,r){this.batch=t,this.Gs=e,this.js=n,this.zs=r}return t.from=function(e,n,r){m(e.mutations.length===r.length);for(var i=ot,o=e.mutations,a=0;a<o.length;a++)i=i.et(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),on=function(){function t(t){var e=this;this.Hs=null,this.Ys=null,this.result=void 0,this.error=void 0,this.Js=!1,this.Xs=!1,t((function(t){e.Js=!0,e.result=t,e.Hs&&e.Hs(t)}),(function(t){e.Js=!0,e.error=t,e.Ys&&e.Ys(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Xs&&v(),this.Xs=!0,this.Js?this.error?this.Zs(n,this.error):this.tn(e,this.result):new t((function(t,i){r.Hs=function(n){r.tn(e,n).next(t,i)},r.Ys=function(e){r.Zs(n,e).next(t,i)}}))},t.prototype.en=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.sn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.tn=function(e,n){return e?this.sn((function(){return e(n)})):t.resolve(n)},t.prototype.Zs=function(e,n){return e?this.sn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.nn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.rn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.nn(r)},t}(),an=function(){function t(){this.on=new j((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.hn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.an},set:function(t){this.an=t},enumerable:!0,configurable:!0}),t.prototype.un=function(t,e){this.cn(),this.readTime=e,this.on.set(t.key,t)},t.prototype.ln=function(t,e){this.cn(),e&&(this.readTime=e),this.on.set(t,null)},t.prototype._n=function(t,e){this.cn();var n=this.on.get(e);return void 0!==n?on.resolve(n):this.fn(t,e)},t.prototype.getEntries=function(t,e){return this.dn(t,e)},t.prototype.apply=function(t){return this.cn(),this.hn=!0,this.wn(t)},t.prototype.cn=function(){},t}(),sn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",un=function(){function t(){this.Tn=[]}return t.prototype.En=function(t){this.Tn.push(t)},t.prototype.In=function(){this.Tn.forEach((function(t){return t()}))},t}(),cn=function(){function t(t,e,n){this.An=t,this.Rn=e,this.mn=n}return t.prototype.Pn=function(t,e){var n=this;return this.Rn.Vn(t,e).next((function(r){return n.gn(t,e,r)}))},t.prototype.gn=function(t,e,n){return this.An._n(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].je(e,t);return t}))},t.prototype.pn=function(t,e,n){var r=nt();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].je(t,e);r=r.et(t,e)})),r},t.prototype.yn=function(t,e){var n=this;return this.An.getEntries(t,e).next((function(e){return n.bn(t,e)}))},t.prototype.bn=function(t,e){var n=this;return this.Rn.vn(t,e).next((function(r){var i=n.pn(t,e,r),o=et();return i.forEach((function(t,e){e||(e=new Fe(t,D.min())),o=o.et(t,e)})),o}))},t.prototype.Sn=function(t,e,n){return e.Os()?this.Dn(t,e.path):e.Bs()?this.Cn(t,e,n):this.Fn(t,e,n)},t.prototype.Dn=function(t,e){return this.Pn(t,new P(e)).next((function(t){var e=it();return t instanceof Ie&&(e=e.et(t.key,t)),e}))},t.prototype.Cn=function(t,e,n){var r=this,i=e.collectionGroup,o=it();return this.mn.Nn(t,i).next((function(a){return on.forEach(a,(function(a){var s=e.vs(a.child(i));return r.Fn(t,s,n).next((function(t){t.forEach((function(t,e){o=o.et(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Fn=function(t,e,n){var r,i,o=this;return this.An.Sn(t,e,n).next((function(n){return r=n,o.Rn.$n(t,e)})).next((function(e){return i=e,o.kn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),f=u.je(l,l,o.Ws);r=f instanceof Ie?r.et(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.kn=function(t,e,n){for(var r=st(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Ce&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.An.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Ie&&(c=c.et(t,e))})),c}))},t}(),ln=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.xn=n,this.Mn=r}return t.Ln=function(e,n){for(var r=st(),i=st(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),fn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.On=function(t){return n.Bn(t)},this.qn=function(t){return e.Un(t)})}return t.prototype.Bn=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.qn&&this.qn(t),t},t}();fn.Qn=-1;var hn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},dn=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Wn=t,this.jn=e,this.Kn=n,this.Gn=r,this.zn=i,this.Hn=0,this.Yn=null,this.Jn=Date.now(),this.reset()}return t.prototype.reset=function(){this.Hn=0},t.prototype.Xn=function(){this.Hn=this.zn},t.prototype.Zn=function(t){var e=this;this.cancel();var n=Math.floor(this.Hn+this.ti()),r=Math.max(0,Date.now()-this.Jn),i=Math.max(0,n-r);i>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Hn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Yn=this.Wn.ei(this.jn,i,(function(){return e.Jn=Date.now(),t()})),this.Hn*=this.Gn,this.Hn<this.Kn&&(this.Hn=this.Kn),this.Hn>this.zn&&(this.Hn=this.zn)},t.prototype.si=function(){null!==this.Yn&&(this.Yn.ni(),this.Yn=null)},t.prototype.cancel=function(){null!==this.Yn&&(this.Yn.cancel(),this.Yn=null)},t.prototype.ti=function(){return(Math.random()-.5)*this.Hn},t}();function pn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=vn(e)),e=gn(t.get(n),e);return vn(e)}function gn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function vn(t){return t+"\x01\x01"}function mn(t){var e=t.length;if(m(e>=2),2===e)return m("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),N.k;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&v(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:v()}o=a+2}return new N(r)}var yn=function(){function t(){this.ii=new bn}return t.prototype.ri=function(t,e){return this.ii.add(e),on.resolve()},t.prototype.Nn=function(t,e){return on.resolve(this.ii.getEntries(e))},t}(),bn=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new Z(N.P),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Z(N.P)).F()},t}(),wn=function(){function t(){this.oi=new bn}return t.prototype.ri=function(t,e){var n=this;if(!this.oi.has(e)){var r=e.S(),i=e.p();t.En((function(){n.oi.add(e)}));var o={collectionId:r,parent:pn(i)};return xn(t).put(o)}return on.resolve()},t.prototype.Nn=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[O(e),""],!1,!0);return xn(t).hi(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(mn(o.parent))}return n}))},t}();function xn(t){return Hn.ai(t,gr.store)}var _n=function(t){this.ui=t};function On(t,e){if(e.document)return function(t,e,n){var r=Jt(t,e.name),i=Yt(e.updateTime),o=new Re({mapValue:{fields:e.fields}});return new Ie(r,i,o,{hasCommittedMutations:!!n})}(t.ui,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=P.j(e.noDocument.path),r=Cn(e.noDocument.readTime);return new Fe(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=P.j(e.unknownDocument.path),o=Cn(e.unknownDocument.version);return new Pe(i,o)}return v()}function kn(t,e,n){var r=Sn(n),i=e.key.path.p().F();if(e instanceof Ie){var o=function(t,e){return{name:Zt(t,e.key),fields:e.fs().mapValue.fields,updateTime:Vt(t,e.version.R())}}(t.ui,e),a=e.hasCommittedMutations;return new lr(null,null,o,a,r,i)}if(e instanceof Fe){var s=e.key.path.F(),u=An(e.version),c=e.hasCommittedMutations;return new lr(null,new ur(s,u),null,c,r,i)}if(e instanceof Pe){var l=e.key.path.F(),f=An(e.version);return new lr(new cr(l,f),null,null,!0,r,i)}return v()}function Sn(t){var e=t.R();return[e.seconds,e.nanoseconds]}function En(t){var e=new R(t[0],t[1]);return D.I(e)}function An(t){var e=t.R();return new rr(e.seconds,e.nanoseconds)}function Cn(t){var e=new R(t.seconds,t.nanoseconds);return D.I(e)}function jn(t,e){var n=(e.baseMutations||[]).map((function(e){return ae(t.ui,e)})),r=e.mutations.map((function(e){return ae(t.ui,e)})),i=R.fromMillis(e.localWriteTimeMs);return new nn(e.batchId,i,n,r)}function Tn(t){var e,n=Cn(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?Cn(t.lastLimboFreeSnapshotVersion):D.min();return e=void 0!==t.query.documents?function(t){m(1===t.documents.length);var e=t.documents[0];return $e.As(ee(e)).We()}(t.query):function(t){var e=ee(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){m(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[pe(e)]:void 0!==e.fieldFilter?[de(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):v():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return new Qe(he((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u=null;n.limit&&(u=function(t){var e;return $(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=le(n.startAt));var l=null;return n.endAt&&(l=le(n.endAt)),new $e(e,i,s,a,u,"F",c,l).We()}(t.query),new V(e,t.targetId,0,t.lastListenSequenceNumber,n,r,U.fromBase64String(t.resumeToken))}function Mn(t,e){var n,r=An(e.J),i=An(e.lastLimboFreeSnapshotVersion);n=en(e.target)?se(t.ui,e.target):ue(t.ui,e.target);var o=e.resumeToken.toBase64();return new hr(e.targetId,Je(e.target),r,o,e.sequenceNumber,i,n)}var Rn=function(){function t(t,e){this.serializer=t,this.mn=e}return t.prototype.un=function(t,e,n){return Ln(t).put(Nn(e),n)},t.prototype.ln=function(t,e){var n=Ln(t),r=Nn(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.ci(t,r)}))},t.prototype._n=function(t,e){var n=this;return Ln(t).get(Nn(e)).next((function(t){return n.li(t)}))},t.prototype._i=function(t,e){var n=this;return Ln(t).get(Nn(e)).next((function(t){var e=n.li(t);return e?{fi:e,size:In(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=nt();return this.di(t,e,(function(t,e){var i=n.li(e);r=r.et(t,i)})).next((function(){return r}))},t.prototype.wi=function(t,e){var n=this,r=nt(),i=new Y(P.P);return this.di(t,e,(function(t,e){var o=n.li(e);o?(r=r.et(t,o),i=i.et(t,In(e))):(r=r.et(t,null),i=i.et(t,0))})).next((function(){return{Ti:r,Ei:i}}))},t.prototype.di=function(t,e,n){if(e._())return on.resolve();var r=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),i=e.at(),o=i.dt();return Ln(t).Ii({range:r},(function(t,e,r){for(var a=P.j(t);o&&P.P(o,a)<0;)n(o,null),o=i.dt();o&&o.isEqual(a)&&(n(o,e),o=i.wt()?i.dt():null),o?r.Ai(o.path.F()):r.done()})).next((function(){for(;o;)n(o,null),o=i.wt()?i.dt():null}))},t.prototype.Sn=function(t,e,n){var r=this,i=it(),o=e.path.length+1,a={};if(n.isEqual(D.min())){var s=e.path.F();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.F(),c=Sn(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=lr.collectionReadTimeIndex}return Ln(t).Ii(a,(function(t,n,a){if(t.length===o){var s=On(r.serializer,n);e.path.D(s.key.path)?s instanceof Ie&&e.matches(s)&&(i=i.et(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.Ri=function(t,e){var n=this,r=et(),i=Sn(e),o=Ln(t),a=IDBKeyRange.lowerBound(i,!0);return o.Ii({index:lr.readTimeIndex,range:a},(function(t,e){var o=On(n.serializer,e);r=r.et(o.key,o),i=e.readTime})).next((function(){return{mi:r,readTime:En(i)}}))},t.prototype.Pi=function(t){var e=Ln(t),n=D.min();return e.Ii({index:lr.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=En(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.Vi=function(e){return new t.gi(this,!!e&&e.pi)},t.prototype.yi=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Dn(t).get(fr.key).next((function(t){return m(!!t),t}))},t.prototype.ci=function(t,e){return Dn(t).put(fr.key,e)},t.prototype.li=function(t){if(t){var e=On(this.serializer,t);return e instanceof Fe&&e.version.isEqual(D.min())?null:e}return null},t}();function Dn(t){return Hn.ai(t,fr.store)}function Ln(t){return Hn.ai(t,lr.store)}function Nn(t){return t.path.F()}function In(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw v();e=t.noDocument}return JSON.stringify(e).length}Rn.gi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bi=e,r.pi=n,r.vi=new j((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return i.__extends(e,t),e.prototype.wn=function(t){var e=this,n=[],r=0,i=new Z((function(t,e){return x(t.N(),e.N())}));return this.on.forEach((function(o,a){var s=e.vi.get(o);if(a){var u=kn(e.bi.serializer,a,e.readTime);i=i.add(o.path.p());var c=In(u);r+=c-s,n.push(e.bi.un(t,o,u))}else if(r-=s,e.pi){var l=kn(e.bi.serializer,new Fe(o,D.min()),e.readTime);n.push(e.bi.un(t,o,l))}else n.push(e.bi.ln(t,o))})),i.forEach((function(r){n.push(e.bi.mn.ri(t,r))})),n.push(this.bi.updateMetadata(t,r)),on.nn(n)},e.prototype.fn=function(t,e){var n=this;return this.bi._i(t,e).next((function(t){return null===t?(n.vi.set(e,0),null):(n.vi.set(e,t.size),t.fi)}))},e.prototype.dn=function(t,e){var n=this;return this.bi.wi(t,e).next((function(t){var e=t.Ti;return t.Ei.forEach((function(t,e){n.vi.set(t,e)})),e}))},e}(an);var Fn=function(){function t(t){this.Si=t}return t.prototype.next=function(){return this.Si+=2,this.Si},t.Di=function(){return new t(0)},t.Ci=function(){return new t(-1)},t}(),Pn=function(){function t(t,e){this.Fi=t,this.serializer=e}return t.prototype.Ni=function(t){var e=this;return this.$i(t).next((function(n){var r=new Fn(n.highestTargetId);return n.highestTargetId=r.next(),e.ki(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.xi=function(t){return this.$i(t).next((function(t){return D.I(new R(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Mi=function(t){return this.$i(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Li=function(t,e,n){var r=this;return this.$i(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.R()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ki(t,i)}))},t.prototype.Oi=function(t,e){var n=this;return this.Bi(t,e).next((function(){return n.$i(t).next((function(r){return r.targetCount+=1,n.qi(e,r),n.ki(t,r)}))}))},t.prototype.Ui=function(t,e){return this.Bi(t,e)},t.prototype.Qi=function(t,e){var n=this;return this.Wi(t,e.targetId).next((function(){return $n(t).delete(e.targetId)})).next((function(){return n.$i(t)})).next((function(e){return m(e.targetCount>0),e.targetCount-=1,n.ki(t,e)}))},t.prototype.ji=function(t,e,n){var r=this,i=0,o=[];return $n(t).Ii((function(a,s){var u=Tn(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Qi(t,u)))})).next((function(){return on.nn(o)})).next((function(){return i}))},t.prototype.ye=function(t,e){return $n(t).Ii((function(t,n){var r=Tn(n);e(r)}))},t.prototype.$i=function(t){return zn(t).get(pr.key).next((function(t){return m(null!==t),t}))},t.prototype.ki=function(t,e){return zn(t).put(pr.key,e)},t.prototype.Bi=function(t,e){return $n(t).put(Mn(this.serializer,e))},t.prototype.qi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Ki=function(t){return this.$i(t).next((function(t){return t.targetCount}))},t.prototype.Gi=function(t,e){var n=Je(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return $n(t).Ii({range:r,index:hr.queryTargetsIndexName},(function(t,n,r){var o=Tn(n);tn(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.zi=function(t,e,n){var r=this,i=[],o=Bn(t);return e.forEach((function(e){var a=pn(e.path);i.push(o.put(new dr(n,a))),i.push(r.Fi.Hi(t,n,e))})),on.nn(i)},t.prototype.Yi=function(t,e,n){var r=this,i=Bn(t);return on.forEach(e,(function(e){var o=pn(e.path);return on.nn([i.delete([n,o]),r.Fi.Ji(t,n,e)])}))},t.prototype.Wi=function(t,e){var n=Bn(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Xi=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Bn(t),i=st();return r.Ii({range:n,Zi:!0},(function(t,e,n){var r=mn(t[1]),o=new P(r);i=i.add(o)})).next((function(){return i}))},t.prototype.tr=function(t,e){var n=pn(e.path),r=IDBKeyRange.bound([n],[O(n)],!1,!0),i=0;return Bn(t).Ii({index:dr.documentTargetsIndex,Zi:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return $n(t).get(e).next((function(t){return t?Tn(t):null}))},t}();function $n(t){return Hn.ai(t,hr.store)}function zn(t){return Hn.ai(t,pr.store)}function Bn(t){return Hn.ai(t,dr.store)}var Un="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Wn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).er=e,r.sr=n,r}return i.__extends(e,t),e}(un),Hn=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Wn=o,this.window=a,this.document=s,this.nr=c,this.ir=l,this.rr=null,this.or=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hr=null,this.inForeground=!1,this.ar=null,this.ur=null,this.cr=Number.NEGATIVE_INFINITY,this.lr=function(t){return Promise.resolve()},!t._r())throw new M(T.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Fi=new Gn(this,i),this.dr=n+t.wr,this.serializer=new _n(u),this.Tr=new Pn(this.Fi,this.serializer),this.mn=new wn,this.An=new Rn(this.serializer,this.mn),this.window&&this.window.localStorage?this.Er=this.window.localStorage:(this.Er=null,!1===l&&p("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.ai=function(t,e){if(t instanceof Wn)return br.ai(t.er,e);throw v()},t.prototype.start=function(){var t=this;return br.Ir(this.dr,er,new nr(this.serializer)).then((function(e){return t.Ar=e,t.Rr()})).then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new M(T.FAILED_PRECONDITION,Un);return t.mr(),t.Pr(),t.Vr(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Tr.Mi(e)}))})).then((function(e){t.rr=new fn(e,t.nr)})).then((function(){t.or=!0})).catch((function(e){return t.Ar&&t.Ar.close(),Promise.reject(e)}))},t.prototype.gr=function(t){var e=this;return this.lr=function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.pr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.yr=function(t){var e=this;this.Ar.br((function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.vr=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Wn.Sr((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.pr?[4,this.Rr()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Rr=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return qn(e).put(new mr(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Dr(e).next((function(e){e||(t.isPrimary=!1,t.Wn.Cr((function(){return t.lr(!1)})))}))})).next((function(){return t.Fr(e)})).next((function(n){return t.isPrimary&&!n?t.Nr(e).next((function(){return!1})):!!n&&t.$r(e).next((function(){return!0}))}))})).catch((function(e){if(_r(e))return d("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Wn.Cr((function(){return t.lr(e)})),t.isPrimary=e}))},t.prototype.Dr=function(t){var e=this;return Vn(t).get(ir.key).next((function(t){return on.resolve(e.kr(t))}))},t.prototype.xr=function(t){return qn(t).delete(this.clientId)},t.prototype.Mr=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,a=this;return i.__generator(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.Lr(this.cr,18e5)?[3,2]:(this.cr=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.ai(e,mr.store);return n.hi().next((function(t){var e=a.Or(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return on.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=i.sent(),this.Er)for(n=0,r=e;n<r.length;n++)o=r[n],this.Er.removeItem(this.Br(o.clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Vr=function(){var t=this;this.ur=this.Wn.ei("client_metadata_refresh",4e3,(function(){return t.Rr().then((function(){return t.Mr()})).then((function(){return t.Vr()}))}))},t.prototype.kr=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Fr=function(t){var e=this;return this.ir?on.resolve(!0):Vn(t).get(ir.key).next((function(n){if(null!==n&&e.Lr(n.leaseTimestampMs,5e3)&&!e.qr(n.ownerId)){if(e.kr(n)&&e.networkEnabled)return!0;if(!e.kr(n)){if(!n.allowTabSynchronization)throw new M(T.FAILED_PRECONDITION,Un);return!1}}return!(!e.networkEnabled||!e.inForeground)||qn(t).hi().next((function(t){return void 0===e.Or(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&d("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Ur=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){switch(e.label){case 0:return this.or=!1,this.Qr(),this.ur&&(this.ur.cancel(),this.ur=null),this.Wr(),this.jr(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.Nr(e).next((function(){return t.xr(e)}))})).catch((function(t){d("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.Ar.close(),this.Kr(),[2]}}))}))},t.prototype.Or=function(t,e){var n=this;return t.filter((function(t){return n.Lr(t.updateTimeMs,e)&&!n.qr(t.clientId)}))},t.prototype.Gr=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return qn(e).hi().next((function(e){return t.Or(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:return t._r()?(n=e+t.wr,[4,br.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"pr",{get:function(){return this.or},enumerable:!0,configurable:!0}),t.prototype.zr=function(t){return Yn.Hr(t,this.serializer,this.mn,this.Fi)},t.prototype.Yr=function(){return this.Tr},t.prototype.Jr=function(){return this.An},t.prototype.Xr=function(){return this.mn},t.prototype.runTransaction=function(t,e,n){var r=this;d("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Ar.runTransaction(o,yr,(function(o){return i=new Wn(o,r.rr?r.rr.next():fn.Qn),"readwrite-primary"===e?r.Dr(i).next((function(t){return!!t||r.Fr(i)})).next((function(e){if(!e)throw p("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Wn.Cr((function(){return r.lr(!1)})),new M(T.FAILED_PRECONDITION,sn);return n(i)})).next((function(t){return r.$r(i).next((function(){return t}))})):r.Zr(i).next((function(){return n(i)}))})).then((function(t){return i.In(),t}))},t.prototype.Zr=function(t){var e=this;return Vn(t).get(ir.key).next((function(t){if(null!==t&&e.Lr(t.leaseTimestampMs,5e3)&&!e.qr(t.ownerId)&&!e.kr(t)&&!(e.ir||e.allowTabSynchronization&&t.allowTabSynchronization))throw new M(T.FAILED_PRECONDITION,Un)}))},t.prototype.$r=function(t){var e=new ir(this.clientId,this.allowTabSynchronization,Date.now());return Vn(t).put(ir.key,e)},t._r=function(){return br._r()},t.to=function(t){var e=t.s.projectId;return t.s.i||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.Nr=function(t){var e=this,n=Vn(t);return n.get(ir.key).next((function(t){return e.kr(t)?(d("IndexedDbPersistence","Releasing primary lease."),n.delete(ir.key)):on.resolve()}))},t.prototype.Lr=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(p("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ar=function(){t.Wn.Sr((function(){return t.inForeground="visible"===t.document.visibilityState,t.Rr()}))},this.document.addEventListener("visibilitychange",this.ar),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Wr=function(){this.ar&&(this.document.removeEventListener("visibilitychange",this.ar),this.ar=null)},t.prototype.Pr=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.hr=function(){e.Qr(),e.Wn.Sr((function(){return e.Ur()}))},this.window.addEventListener("unload",this.hr))},t.prototype.jr=function(){this.hr&&(this.window.removeEventListener("unload",this.hr),this.hr=null)},t.prototype.qr=function(t){var e;try{var n=null!==(null===(e=this.Er)||void 0===e?void 0:e.getItem(this.Br(t)));return d("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return p("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Qr=function(){if(this.Er)try{this.Er.setItem(this.Br(this.clientId),String(Date.now()))}catch(t){p("Failed to set zombie client id.",t)}},t.prototype.Kr=function(){if(this.Er)try{this.Er.removeItem(this.Br(this.clientId))}catch(t){}},t.prototype.Br=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Vn(t){return Hn.ai(t,ir.store)}function qn(t){return Hn.ai(t,mr.store)}Hn.wr="main";var Gn=function(){function t(t,e){this.db=t,this.eo=new Fr(this,e)}return t.prototype.so=function(t){var e=this.no(t);return this.db.Yr().Ki(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.no=function(t){var e=0;return this.io(t,(function(t){e++})).next((function(){return e}))},t.prototype.ye=function(t,e){return this.db.Yr().ye(t,e)},t.prototype.io=function(t,e){return this.ro(t,(function(t,n){return e(n)}))},t.prototype.Hi=function(t,e,n){return Kn(t,n)},t.prototype.Ji=function(t,e,n){return Kn(t,n)},t.prototype.ji=function(t,e,n){return this.db.Yr().ji(t,e,n)},t.prototype.oo=function(t,e){return Kn(t,e)},t.prototype.ho=function(t,e){return function(t,e){var n=!1;return tr(t).ao((function(r){return Qn(t,r,e).next((function(t){return t&&(n=!0),on.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.uo=function(t,e){var n=this,r=this.db.Jr().Vi(),i=[],o=0;return this.ro(t,(function(a,s){if(s<=e){var u=n.ho(t,a).next((function(e){if(!e)return o++,r._n(t,a).next((function(){return r.ln(a),Bn(t).delete([0,pn(a.path)])}))}));i.push(u)}})).next((function(){return on.nn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.X(t.sr);return this.db.Yr().Ui(t,n)},t.prototype.co=function(t,e){return Kn(t,e)},t.prototype.ro=function(t,e){var n,r=Bn(t),i=fn.Qn;return r.Ii({index:dr.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==fn.Qn&&e(new P(mn(n)),i),i=s,n=a):i=fn.Qn})).next((function(){i!==fn.Qn&&e(new P(mn(n)),i)}))},t.prototype.lo=function(t){return this.db.Jr().yi(t)},t}();function Kn(t,e){return Bn(t).put(function(t,e){return new dr(0,pn(t.path),e)}(e,t.sr))}var Yn=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.mn=n,this.Fi=r,this._o={}}return t.Hr=function(e,n,r,i){return m(""!==e.uid),new t(e.fo()?e.uid:"",n,r,i)},t.prototype.do=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zn(t).Ii({index:ar.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.wo=function(t,e,n,r){var i=this,o=Jn(t),a=Zn(t);return a.add({}).next((function(s){m("number"==typeof s);for(var u=new nn(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return oe(t.ui,e)})),i=n.mutations.map((function(e){return oe(t.ui,e)}));return new ar(e,n.batchId,n.Ws.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],f=new Z((function(t,e){return x(t.N(),e.N())})),h=0,d=r;h<d.length;h++){var p=d[h],g=sr.key(i.userId,p.key.path,s);f=f.add(p.key.path.p()),l.push(a.put(c)),l.push(o.put(g,sr.PLACEHOLDER))}return f.forEach((function(e){l.push(i.mn.ri(t,e))})),t.En((function(){i._o[s]=u.keys()})),on.nn(l).next((function(){return u}))}))},t.prototype.To=function(t,e){var n=this;return Zn(t).get(e).next((function(t){return t?(m(t.userId===n.userId),jn(n.serializer,t)):null}))},t.prototype.Eo=function(t,e){var n=this;return this._o[e]?on.resolve(this._o[e]):this.To(t,e).next((function(t){if(t){var r=t.keys();return n._o[e]=r,r}return null}))},t.prototype.Io=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Zn(t).Ii({index:ar.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(m(e.batchId>=r),o=jn(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Ao=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Zn(t).Ii({index:ar.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Ro=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zn(t).hi(ar.userMutationsIndex,n).next((function(t){return t.map((function(t){return jn(e.serializer,t)}))}))},t.prototype.Vn=function(t,e){var n=this,r=sr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Jn(t).Ii({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=mn(u);if(s===n.userId&&e.path.isEqual(l))return Zn(t).get(c).next((function(t){if(!t)throw v();m(t.userId===n.userId),o.push(jn(n.serializer,t))}));a.done()})).next((function(){return o}))},t.prototype.vn=function(t,e){var n=this,r=new Z(x),i=[];return e.forEach((function(e){var o=sr.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Jn(t).Ii({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=mn(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),on.nn(i).next((function(){return n.mo(t,r)}))},t.prototype.$n=function(t,e){var n=this,r=e.path,i=r.length+1,o=sr.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Z(x);return Jn(t).Ii({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=mn(u);a===n.userId&&r.D(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.mo(t,s)}))},t.prototype.mo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Zn(t).get(e).next((function(t){if(null===t)throw v();m(t.userId===n.userId),r.push(jn(n.serializer,t))})))})),on.nn(i).next((function(){return r}))},t.prototype.Po=function(t,e){var n=this;return Xn(t.er,this.userId,e).next((function(r){return t.En((function(){n.Vo(e.batchId)})),on.forEach(r,(function(e){return n.Fi.oo(t,e)}))}))},t.prototype.Vo=function(t){delete this._o[t]},t.prototype.po=function(t){var e=this;return this.do(t).next((function(n){if(!n)return on.resolve();var r=IDBKeyRange.lowerBound(sr.prefixForUser(e.userId)),i=[];return Jn(t).Ii({range:r},(function(t,n,r){if(t[0]===e.userId){var o=mn(t[1]);i.push(o)}else r.done()})).next((function(){m(0===i.length)}))}))},t.prototype.tr=function(t,e){return Qn(t,this.userId,e)},t.prototype.yo=function(t){var e=this;return tr(t).get(this.userId).next((function(t){return t||new or(e.userId,-1,"")}))},t}();function Qn(t,e,n){var r=sr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Jn(t).Ii({range:o,Zi:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Xn(t,e,n){var r=t.store(ar.store),i=t.store(sr.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ii({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){m(1===s)})));for(var c=[],l=0,f=n.mutations;l<f.length;l++){var h=f[l],d=sr.key(e,h.key.path,n.batchId);o.push(i.delete(d)),c.push(h.key)}return on.nn(o).next((function(){return c}))}function Zn(t){return Hn.ai(t,ar.store)}function Jn(t){return Hn.ai(t,sr.store)}function tr(t){return Hn.ai(t,or.store)}var er=10,nr=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;m(n<r&&n>=0&&r<=er);var o=new Or(e);n<1&&r>=1&&(function(t){t.createObjectStore(ir.store)}(t),function(t){t.createObjectStore(or.store,{keyPath:or.keyPath}),t.createObjectStore(ar.store,{keyPath:ar.keyPath,autoIncrement:!0}).createIndex(ar.userMutationsIndex,ar.userMutationsKeyPath,{unique:!0}),t.createObjectStore(sr.store)}(t),vr(t),function(t){t.createObjectStore(lr.store)}(t));var a=on.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(dr.store),t.deleteObjectStore(hr.store),t.deleteObjectStore(pr.store)}(t),vr(t)),a=a.next((function(){return function(t){var e=t.store(pr.store),n=new pr(0,0,D.min().R(),0);return e.put(pr.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(ar.store).hi().next((function(n){t.deleteObjectStore(ar.store),t.createObjectStore(ar.store,{keyPath:ar.keyPath,autoIncrement:!0}).createIndex(ar.userMutationsIndex,ar.userMutationsKeyPath,{unique:!0});var r=e.store(ar.store),i=n.map((function(t){return r.put(t)}));return on.nn(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(mr.store,{keyPath:mr.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(fr.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(lr.store);e.createIndex(lr.readTimeIndex,lr.readTimeIndexPath,{unique:!1}),e.createIndex(lr.collectionReadTimeIndex,lr.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(lr.store).Ii((function(t,n){e+=In(n)})).next((function(){var n=new fr(e);return t.store(fr.store).put(fr.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(or.store),r=t.store(ar.store);return n.hi().next((function(n){return on.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.hi(ar.userMutationsIndex,i).next((function(r){return on.forEach(r,(function(r){m(r.userId===n.userId);var i=jn(e.serializer,r);return Xn(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(dr.store),n=t.store(lr.store);return t.store(pr.store).get(pr.key).next((function(t){var r=[];return n.Ii((function(n,i){var o=new N(n),a=function(t){return[0,pn(t)]}(o);r.push(e.get(a).next((function(n){return n?on.resolve():function(n){return e.put(new dr(0,pn(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return on.nn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(gr.store,{keyPath:gr.keyPath});var n=e.store(gr.store),r=new bn,i=function(t){if(r.add(t)){var e=t.S(),i=t.p();return n.put({collectionId:e,parent:pn(i)})}};return e.store(lr.store).Ii({Zi:!0},(function(t,e){var n=new N(t);return i(n.p())})).next((function(){return e.store(sr.store).Ii({Zi:!0},(function(t,e){t[0];var n=t[1],r=(t[2],mn(n));return i(r.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(hr.store);return n.Ii((function(t,r){var i=Tn(r),o=Mn(e.serializer,i);return n.put(o)}))},t}(),rr=function(t,e){this.seconds=t,this.nanoseconds=e},ir=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ir.store="owner",ir.key="owner";var or=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};or.store="mutationQueues",or.keyPath="userId";var ar=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ar.store="mutations",ar.keyPath="batchId",ar.userMutationsIndex="userMutationsIndex",ar.userMutationsKeyPath=["userId","batchId"];var sr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,pn(e)]},t.key=function(t,e,n){return[t,pn(e),n]},t}();sr.store="documentMutations",sr.PLACEHOLDER=new sr;var ur=function(t,e){this.path=t,this.readTime=e},cr=function(t,e){this.path=t,this.version=e},lr=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};lr.store="remoteDocuments",lr.readTimeIndex="readTimeIndex",lr.readTimeIndexPath="readTime",lr.collectionReadTimeIndex="collectionReadTimeIndex",lr.collectionReadTimeIndexPath=["parentPath","readTime"];var fr=function(t){this.byteSize=t};fr.store="remoteDocumentGlobal",fr.key="remoteDocumentGlobalKey";var hr=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};hr.store="targets",hr.keyPath="targetId",hr.queryTargetsIndexName="queryTargetsIndex",hr.queryTargetsKeyPath=["canonicalId","targetId"];var dr=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};dr.store="targetDocuments",dr.keyPath=["targetId","path"],dr.documentTargetsIndex="documentTargetsIndex",dr.documentTargetsKeyPath=["path","targetId"];var pr=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};pr.key="targetGlobalKey",pr.store="targetGlobal";var gr=function(t,e){this.collectionId=t,this.parent=e};function vr(t){t.createObjectStore(dr.store,{keyPath:dr.keyPath}).createIndex(dr.documentTargetsIndex,dr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(hr.store,{keyPath:hr.keyPath}).createIndex(hr.queryTargetsIndexName,hr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(pr.store)}gr.store="collectionParents",gr.keyPath=["collectionId","parent"];var mr=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};mr.store="clientMetadata",mr.keyPath="clientId";var yr=i.__spreadArrays(i.__spreadArrays(i.__spreadArrays([or.store,ar.store,sr.store,lr.store,hr.store,ir.store,pr.store,dr.store],[mr.store]),[fr.store]),[gr.store]),br=function(){function t(e){this.db=e,12.2===t.bo(s.getUA())&&p("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.Ir=function(e,n,r){return d("SimpleDb","Opening database:",e),new on((function(i,o){var a=indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new M(T.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new M(T.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},a.onupgradeneeded=function(t){d("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,er).next((function(){d("SimpleDb","Database upgrade to version "+er+" complete")}))}})).en()},t.delete=function(t){return d("SimpleDb","Removing database:",t),Sr(window.indexedDB.deleteDatabase(t)).en()},t._r=function(){if("undefined"==typeof indexedDB)return!1;if(t.vo())return!0;var e=s.getUA(),n=t.bo(e),r=0<n&&n<10,i=t.So(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.vo=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.Do)},t.ai=function(t,e){return t.store(e)},t.bo=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.So=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.br=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,a,s,u;return i.__generator(this,(function(c){switch(c.label){case 0:r="readonly"===t,o=0,a=function(){var t,a,u,c,l;return i.__generator(this,(function(i){switch(i.label){case 0:++o,t=Or.open(s.db,r?"readonly":"readwrite",e),i.label=1;case 1:return i.trys.push([1,3,,4]),a=n(t).catch((function(e){return t.abort(e),on.reject(e)})).en(),u={},a.catch((function(){})),[4,t.Co];case 2:return[2,(u.value=(i.sent(),a),u)];case 3:return c=i.sent(),l="FirebaseError"!==c.name&&o<3,d("SimpleDb","Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),wr=function(){function t(t){this.Fo=t,this.No=!1,this.$o=null}return Object.defineProperty(t.prototype,"Js",{get:function(){return this.No},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ko",{get:function(){return this.$o},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Fo=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.No=!0},t.prototype.Ai=function(t){this.$o=t},t.prototype.delete=function(){return Sr(this.Fo.delete())},t}(),xr=function(t){function e(e){var n=this;return(n=t.call(this,T.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return i.__extends(e,t),e}(M);function _r(t){return"IndexedDbTransactionError"===t.name}var Or=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.xo=new hn,this.transaction.oncomplete=function(){e.xo.resolve()},this.transaction.onabort=function(){t.error?e.xo.reject(new xr(t.error)):e.xo.resolve()},this.transaction.onerror=function(t){var n=Ar(t.target.error);e.xo.reject(new xr(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"Co",{get:function(){return this.xo.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.xo.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new kr(e)},t}(),kr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Sr(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),Sr(this.store.add(t))},t.prototype.get=function(t){var e=this;return Sr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),Sr(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),Sr(this.store.count())},t.prototype.hi=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mo(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Lo=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Zi=!1;var r=this.cursor(n);return this.Mo(r,(function(t,e,n){return n.delete()}))},t.prototype.Ii=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mo(r,e)},t.prototype.ao=function(t){var e=this.cursor({});return new on((function(n,r){e.onerror=function(t){var e=Ar(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Mo=function(t,e){var n=[];return new on((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new wr(i),a=e(i.primaryKey,i.value,o);if(a instanceof on){var s=a.catch((function(t){return o.done(),on.reject(t)}));n.push(s)}o.Js?r():null===o.ko?i.continue():i.continue(o.ko)}else r()}})).next((function(){return on.nn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Zi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Sr(t){return new on((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ar(t.target.error);n(e)}}))}var Er=!1;function Ar(t){var e=br.bo(s.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new M("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Er||(Er=!0,setTimeout((function(){throw r}),0)),r}}return t}function Cr(){return"undefined"!=typeof window?window:null}var jr=function(){function t(t,e,n,r,i){this.Oo=t,this.jn=e,this.Bo=n,this.op=r,this.qo=i,this.Uo=new hn,this.then=this.Uo.promise.then.bind(this.Uo.promise),this.Uo.promise.catch((function(t){}))}return t.Qo=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.Wo=setTimeout((function(){return e.jo()}),t)},t.prototype.ni=function(){return this.jo()},t.prototype.cancel=function(t){null!==this.Wo&&(this.clearTimeout(),this.Uo.reject(new M(T.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.jo=function(){var t=this;this.Oo.Sr((function(){return null!==t.Wo?(t.clearTimeout(),t.op().then((function(e){return t.Uo.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Wo&&(this.qo(this),clearTimeout(this.Wo),this.Wo=null)},t}(),Tr=function(){function t(){var t=this;this.Ko=Promise.resolve(),this.Go=Promise.resolve(),this.zo=!1,this.Ho=[],this.Yo=null,this.Jo=!1,this.Xo=[],this.Zo=new dn(this,"async_queue_retry"),this.th=function(){return t.Zo.si()};var e=Cr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.th)}return Object.defineProperty(t.prototype,"eh",{get:function(){return this.zo},enumerable:!0,configurable:!0}),t.prototype.Sr=function(t){this.enqueue(t)},t.prototype.sh=function(t){this.nh(),this.ih(t)},t.prototype.rh=function(t){return this.nh(),this.ih(t)},t.prototype.oh=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return this.nh(),this.zo?[3,2]:(this.zo=!0,(e=Cr())&&e.removeEventListener("visibilitychange",this.th),[4,this.rh(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.nh(),this.zo?new Promise((function(t){})):this.ih(t)},t.prototype.Cr=function(t){var e=this;this.nh(),this.zo||(this.Go=this.Go.then((function(){var n=new hn;return e.Sr((function r(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t()];case 1:return i.sent(),n.resolve(),this.Zo.reset(),[3,3];case 2:if(!_r(e=i.sent()))throw n.resolve(),e;return d("AsyncQueue","Operation failed with retryable error: "+e),this.Zo.Zn(r),[3,3];case 3:return[2]}}))}))})),n.promise})))},t.prototype.ih=function(t){var e=this,n=this.Ko.then((function(){return e.Jo=!0,t().catch((function(t){throw e.Yo=t,e.Jo=!1,p("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Jo=!1,t}))}));return this.Ko=n,n},t.prototype.ei=function(t,e,n){var r=this;this.nh(),this.Xo.indexOf(t)>-1&&(e=0);var i=jr.Qo(this,t,e,n,(function(t){return r.hh(t)}));return this.Ho.push(i),i},t.prototype.nh=function(){this.Yo&&v()},t.prototype.ah=function(){},t.prototype.uh=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Ko];case 1:e.sent(),e.label=2;case 2:if(t!==this.Ko)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.lh=function(t){for(var e=0,n=this.Ho;e<n.length;e++)if(n[e].jn===t)return!0;return!1},t.prototype._h=function(t){var e=this;return this.uh().then((function(){e.Ho.sort((function(t,e){return t.Bo-e.Bo}));for(var n=0,r=e.Ho;n<r.length;n++){var i=r[n];if(i.ni(),"all"!==t&&i.jn===t)break}return e.uh()}))},t.prototype.fh=function(t){this.Xo.push(t)},t.prototype.hh=function(t){var e=this.Ho.indexOf(t);this.Ho.splice(e,1)},t}();function Mr(t,e){if(p("AsyncQueue",e+": "+t),_r(t))return new M(T.UNAVAILABLE,e+": "+t);throw t}function Rr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=x(n,i);return 0===a?x(r,o):a}var Dr=function(){function t(t){this.dh=t,this.buffer=new Z(Rr),this.wh=0}return t.prototype.Th=function(){return++this.wh},t.prototype.Eh=function(t){var e=[t,this.Th()];if(this.buffer.size<this.dh)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Rr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Lr={Ih:!1,Ah:0,Rh:0,mh:0},Nr=function(){function t(t,e,n){this.Ph=t,this.Vh=e,this.gh=n}return t.ph=function(e){return new t(e,t.yh,t.bh)},t}();Nr.vh=-1,Nr.Sh=1048576,Nr.Dh=41943040,Nr.yh=10,Nr.bh=1e3,Nr.Ch=new Nr(Nr.Dh,Nr.yh,Nr.bh),Nr.DISABLED=new Nr(Nr.vh,0,0);var Ir=function(){function t(t,e){this.eo=t,this.Oo=e,this.Fh=!1,this.Nh=null}return t.prototype.start=function(t){this.eo.$h.Ph!==Nr.vh&&this.kh(t)},t.prototype.stop=function(){this.Nh&&(this.Nh.cancel(),this.Nh=null)},Object.defineProperty(t.prototype,"pr",{get:function(){return null!==this.Nh},enumerable:!0,configurable:!0}),t.prototype.kh=function(t){var e=this,n=this.Fh?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Nh=this.Oo.ei("lru_garbage_collection",n,(function(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:this.Nh=null,this.Fh=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.xh(this.eo)];case 2:return n.sent(),[3,7];case 3:return _r(e=n.sent())?(d("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,zr(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.kh(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Fr=function(){function t(t,e){this.Mh=t,this.$h=e}return t.prototype.Lh=function(t,e){return this.Mh.so(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Oh=function(t,e){var n=this;if(0===e)return on.resolve(fn.Qn);var r=new Dr(e);return this.Mh.ye(t,(function(t){return r.Eh(t.sequenceNumber)})).next((function(){return n.Mh.io(t,(function(t){return r.Eh(t)}))})).next((function(){return r.maxValue}))},t.prototype.ji=function(t,e,n){return this.Mh.ji(t,e,n)},t.prototype.uo=function(t,e){return this.Mh.uo(t,e)},t.prototype.Bh=function(t,e){var n=this;return this.$h.Ph===Nr.vh?(d("LruGarbageCollector","Garbage collection skipped; disabled"),on.resolve(Lr)):this.lo(t).next((function(r){return r<n.$h.Ph?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.$h.Ph),Lr):n.qh(t,e)}))},t.prototype.lo=function(t){return this.Mh.lo(t)},t.prototype.qh=function(t,e){var n,r,i,o,s,u,c,l=this,f=Date.now();return this.Lh(t,this.$h.Vh).next((function(e){return e>l.$h.gh?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.$h.gh+" from "+e),r=l.$h.gh):r=e,o=Date.now(),l.Oh(t,r)})).next((function(r){return n=r,s=Date.now(),l.ji(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.uo(t,n)})).next((function(t){return c=Date.now(),h()<=a.LogLevel.DEBUG&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-f)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-f)+"ms"),on.resolve({Ih:!0,Ah:r,Rh:i,mh:t})}))},t}(),Pr=function(){function t(t,e,n){this.persistence=t,this.Uh=e,this.Qh=new Y(x),this.Wh=new j((function(t){return Je(t)}),tn),this.jh=D.min(),this.Rn=t.zr(n),this.Kh=t.Jr(),this.Tr=t.Yr(),this.Gh=new cn(this.Kh,this.Rn,this.persistence.Xr()),this.Uh.zh(this.Gh)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Hh=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return e=this.Rn,n=this.Gh,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var i;return o.Rn.Ro(r).next((function(a){return i=a,e=o.persistence.zr(t),n=new cn(o.Kh,e,o.persistence.Xr()),e.Ro(r)})).next((function(t){for(var e=[],o=[],a=st(),s=0,u=i;s<u.length;s++){var c=u[s];e.push(c.batchId);for(var l=0,f=c.mutations;l<f.length;l++){var h=f[l];a=a.add(h.key)}}for(var d=0,p=t;d<p.length;d++){var g=p[d];o.push(g.batchId);for(var v=0,m=g.mutations;v<m.length;v++){var y=m[v];a=a.add(y.key)}}return n.yn(r,a).next((function(t){return{Yh:t,Jh:e,Xh:o}}))}))}))];case 1:return r=i.sent(),[2,(this.Rn=e,this.Gh=n,this.Uh.zh(this.Gh),r)]}}))}))},t.prototype.Zh=function(t){var e,n=this,r=R.now(),i=t.reduce((function(t,e){return t.add(e.key)}),st());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.Gh.yn(o,i).next((function(i){e=i;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=c.Ze(e.get(c.key));null!=l&&a.push(new Ce(c.key,l,Le(l.proto.mapValue),Se.exists(!0)))}return n.Rn.wo(o,r,a,t)}))})).then((function(t){var n=t.Ks(e);return{batchId:t.batchId,on:n}}))},t.prototype.ta=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Kh.Vi({pi:!0});return e.ea(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.Rn.po(n)})).next((function(){return e.Gh.yn(n,r)}))}))},t.prototype.sa=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.Rn.To(n,t).next((function(t){return m(null!==t),r=t.keys(),e.Rn.Po(n,t)})).next((function(){return e.Rn.po(n)})).next((function(){return e.Gh.yn(n,r)}))}))},t.prototype.Ao=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Rn.Ao(e)}))},t.prototype.xi=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Tr.xi(e)}))},t.prototype.na=function(e){var n=this,r=e.J,i=this.Qh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var a=n.Kh.Vi({pi:!0});i=n.Qh;var s=[];e.Qt.forEach((function(e,a){var u=i.get(a);if(u){s.push(n.Tr.Yi(o,e.Xt,a).next((function(){return n.Tr.zi(o,e.Yt,a)})));var c=e.resumeToken;if(c.G()>0){var l=u.Z(c,r).X(o.sr);i=i.et(a,l),t.ia(u,l,e)&&s.push(n.Tr.Ui(o,l))}}}));var u=et(),c=st();if(e.jt.forEach((function(t,e){c=c.add(t)})),s.push(a.getEntries(o,c).next((function(t){e.jt.forEach((function(i,c){var l=t.get(i);c instanceof Fe&&c.version.isEqual(D.min())?(a.ln(i,r),u=u.et(i,c)):null==l||c.version.o(l.version)>0||0===c.version.o(l.version)&&l.hasPendingWrites?(a.un(c,r),u=u.et(i,c)):d("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),e.Kt.has(i)&&s.push(n.persistence.Fi.co(o,i))}))}))),!r.isEqual(D.min())){var l=n.Tr.xi(o).next((function(t){return n.Tr.Li(o,o.sr,r)}));s.push(l)}return on.nn(s).next((function(){return a.apply(o)})).next((function(){return n.Gh.bn(o,u)}))})).then((function(t){return n.Qh=i,t}))},t.ia=function(t,e,n){return m(e.resumeToken.G()>0),0===t.resumeToken.G()||e.J.A()-t.J.A()>=this.ra||n.Yt.size+n.Jt.size+n.Xt.size>0},t.prototype.oa=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,a,s,u,c,l=this;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return on.forEach(t,(function(t){return on.forEach(t.xn,(function(n){return l.persistence.Fi.Hi(e,t.targetId,n)})).next((function(){return on.forEach(t.Mn,(function(n){return l.persistence.Fi.Ji(e,t.targetId,n)}))}))}))}))];case 1:return i.sent(),[3,3];case 2:if(!_r(e=i.sent()))throw e;return d("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=t;n<r.length;n++)o=r[n],a=o.targetId,o.fromCache||(s=this.Qh.get(a),u=s.J,c=s.tt(u),this.Qh=this.Qh.et(a,c));return[2]}}))}))},t.prototype.ha=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.Rn.Io(n,t)}))},t.prototype.aa=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.Gh.Pn(n,t)}))},t.prototype.ua=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Tr.Gi(n,t).next((function(i){return i?(r=i,on.resolve(r)):e.Tr.Ni(n).next((function(i){return r=new V(t,i,0,n.sr),e.Tr.Oi(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.Qh.get(n.targetId);return(null===r||n.J.o(r.J)>0)&&(e.Qh=e.Qh.et(n.targetId,n),e.Wh.set(t,n.targetId)),n}))},t.prototype.Gi=function(t,e){var n=this.Wh.get(e);return void 0!==n?on.resolve(this.Qh.get(n)):this.Tr.Gi(t,e)},t.prototype.ca=function(t,e){var n=this,r=this.Qh.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(t){return e?on.resolve():n.persistence.Fi.removeTarget(t,r)})).then((function(){n.Qh=n.Qh.remove(t),n.Wh.delete(r.target)}))},t.prototype.la=function(t,e){var n=this,r=D.min(),i=st();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.Gi(o,t.We()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Tr.Xi(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.Uh.Sn(o,t,e?r:D.min(),e?i:st())})).next((function(t){return{documents:t,_a:i}}))}))},t.prototype.ea=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=on.resolve();return o.forEach((function(r){a=a.next((function(){return n._n(t,r)})).next((function(t){var o=t,a=e.zs.get(r);m(null!==a),(!o||o.version.o(a)<0)&&(o=i.Ke(r,o,e))&&n.un(o,e.Gs)}))})),a.next((function(){return r.Rn.Po(t,i)}))},t.prototype.xh=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Bh(n,e.Qh)}))},t}();Pr.ra=3e8;var $r=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.Rn=e.zr(r),i.Kh=e.Jr(),i.Tr=e.Yr(),i}return i.__extends(e,t),e.prototype.start=function(){return this.fa()},e.prototype.da=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.Rn.Eo(n,t).next((function(t){return t?e.Gh.yn(n,t):on.resolve(null)}))}))},e.prototype.wa=function(t){this.Rn.Vo(t)},e.prototype.vr=function(t){this.persistence.vr(t)},e.prototype.Gr=function(){return this.persistence.Gr()},e.prototype.Ta=function(t){var e=this,n=this.Qh.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Tr.Me(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.Ri=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Kh.Ri(e,t.jh)})).then((function(e){var n=e.mi,r=e.readTime;return t.jh=r,n}))},e.prototype.fa=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Kh.Pi(t)}))];case 1:return t.jh=n.sent(),[2]}}))}))},e}(Pr);function zr(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){if(t.code!==T.FAILED_PRECONDITION||t.message!==sn)throw t;return d("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Br=function(){function t(){this.Ea=new Z(Ur.Ia),this.Aa=new Z(Ur.Ra)}return t.prototype._=function(){return this.Ea._()},t.prototype.Hi=function(t,e){var n=new Ur(t,e);this.Ea=this.Ea.add(n),this.Aa=this.Aa.add(n)},t.prototype.ma=function(t,e){var n=this;t.forEach((function(t){return n.Hi(t,e)}))},t.prototype.Ji=function(t,e){this.Pa(new Ur(t,e))},t.prototype.Va=function(t,e){var n=this;t.forEach((function(t){return n.Ji(t,e)}))},t.prototype.ga=function(t){var e=this,n=P.EMPTY,r=new Ur(n,t),i=new Ur(n,t+1),o=[];return this.Aa.vt([r,i],(function(t){e.Pa(t),o.push(t.key)})),o},t.prototype.pa=function(){var t=this;this.Ea.forEach((function(e){return t.Pa(e)}))},t.prototype.Pa=function(t){this.Ea=this.Ea.delete(t),this.Aa=this.Aa.delete(t)},t.prototype.ya=function(t){var e=P.EMPTY,n=new Ur(e,t),r=new Ur(e,t+1),i=st();return this.Aa.vt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.tr=function(t){var e=new Ur(t,0),n=this.Ea.Dt(e);return null!==n&&t.isEqual(n.key)},t}(),Ur=function(){function t(t,e){this.key=t,this.ba=e}return t.Ia=function(t,e){return P.P(t.key,e.key)||x(t.ba,e.ba)},t.Ra=function(t,e){return x(t.ba,e.ba)||P.P(t.key,e.key)},t}();function Wr(t,e){if(0!==e.length)throw new M(T.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+si(e.length,"argument")+".")}function Hr(t,e,n){if(e.length!==n)throw new M(T.INVALID_ARGUMENT,"Function "+t+"() requires "+si(n,"argument")+", but was called with "+si(e.length,"argument")+".")}function Vr(t,e,n){if(e.length<n)throw new M(T.INVALID_ARGUMENT,"Function "+t+"() requires at least "+si(n,"argument")+", but was called with "+si(e.length,"argument")+".")}function qr(t,e,n,r){if(e.length<n||e.length>r)throw new M(T.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+si(e.length,"argument")+".")}function Gr(t,e,n,r){Jr(t,e,ai(n)+" argument",r)}function Kr(t,e,n,r){void 0!==r&&Gr(t,e,n,r)}function Yr(t,e,n,r){Jr(t,e,n+" option",r)}function Qr(t,e,n,r){void 0!==r&&Yr(t,e,n,r)}function Xr(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(ei(u))}var c=ei(r);throw new M(T.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function Zr(t,e,n,r){if(!e.some((function(t){return t===r})))throw new M(T.INVALID_ARGUMENT,"Invalid value "+ei(r)+" provided to function "+t+"() for its "+ai(n)+" argument. Acceptable values: "+e.join(", "));return r}function Jr(t,e,n,r){if(!("object"===e?ti(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=ei(r);throw new M(T.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function ti(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function ei(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":v()}function ni(t,e,n){if(void 0===n)throw new M(T.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+ai(e)+" argument, but it was undefined.")}function ri(t,e,n){A(e,(function(e,r){if(n.indexOf(e)<0)throw new M(T.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function ii(t,e,n,r){var i=ei(r);return new M(T.INVALID_ARGUMENT,"Function "+t+"() requires its "+ai(n)+" argument to be a "+e+", but it was: "+i)}function oi(t,e,n){if(n<=0)throw new M(T.INVALID_ARGUMENT,"Function "+t+"() requires its "+ai(e)+" argument to be a positive number, but it was: "+n+".")}function ai(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function si(t,e){return t+" "+e+(1===t?"":"s")}function ui(){if("undefined"==typeof Uint8Array)throw new M(T.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ci(){if("undefined"==typeof atob)throw new M(T.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var li=function(){function t(t){ci(),this.va=t}return t.fromBase64String=function(e){Hr("Blob.fromBase64String",arguments,1),Gr("Blob.fromBase64String","string",1,e),ci();try{return new t(U.fromBase64String(e))}catch(e){throw new M(T.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(Hr("Blob.fromUint8Array",arguments,1),ui(),!(e instanceof Uint8Array))throw ii("Blob.fromUint8Array","Uint8Array",1,e);return new t(U.fromUint8Array(e))},t.prototype.toBase64=function(){return Hr("Blob.toBase64",arguments,0),ci(),this.va.toBase64()},t.prototype.toUint8Array=function(){return Hr("Blob.toUint8Array",arguments,0),ui(),this.va.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.va.isEqual(t.va)},t}(),fi=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new M(T.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+si(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(Gr("FieldPath","string",e,t[e]),0===t[e].length)throw new M(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Sa=new F(t)},hi=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return i.__extends(e,t),e.documentId=function(){return e.Da},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ii("isEqual","FieldPath",1,t);return this.Sa.isEqual(t.Sa)},e}(fi);hi.Da=new hi(F.O().N());var di=new RegExp("[~\\*/\\[\\]]"),pi=function(){this.Ca=this},gi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fa=e,n}return i.__extends(e,t),e.prototype.Na=function(t){if(2!==t.$a)throw 1===t.$a?t.ka(this.Fa+"() can only appear at the top level of your update data"):t.ka(this.Fa+"() cannot be used with set() unless you pass {merge:true}");return t.Oe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(pi),vi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fa=e,n}return i.__extends(e,t),e.prototype.Na=function(t){return new Oe(t.path,me.instance)},e.prototype.isEqual=function(t){return t instanceof e},e}(pi),mi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Fa=e,r.xa=n,r}return i.__extends(e,t),e.prototype.Na=function(t){var e=new ji({$a:3,methodName:this.Fa,Ma:!0},t.s,t.serializer,t.ignoreUndefinedProperties),n=this.xa.map((function(t){return Mi(t,e)})),r=new ye(n);return new Oe(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(pi),yi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Fa=e,r.xa=n,r}return i.__extends(e,t),e.prototype.Na=function(t){var e=new ji({$a:3,methodName:this.Fa,Ma:!0},t.s,t.serializer,t.ignoreUndefinedProperties),n=this.xa.map((function(t){return Mi(t,e)})),r=new be(n);return new Oe(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(pi),bi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Fa=e,r.La=n,r}return i.__extends(e,t),e.prototype.Na=function(t){var e=new ji({$a:3,methodName:this.Fa},t.s,t.serializer,t.ignoreUndefinedProperties),n=Mi(this.La,e),r=new we(t.serializer,n);return new Oe(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(pi),wi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.delete=function(){return Wr("FieldValue.delete",arguments),new xi(new gi("FieldValue.delete"))},e.serverTimestamp=function(){return Wr("FieldValue.serverTimestamp",arguments),new xi(new vi("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Vr("FieldValue.arrayUnion",arguments,1),new xi(new mi("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Vr("FieldValue.arrayRemove",arguments,1),new xi(new yi("FieldValue.arrayRemove",t))},e.increment=function(t){return Gr("FieldValue.increment","number",1,t),Hr("FieldValue.increment",arguments,1),new xi(new bi("FieldValue.increment",t))},e}(pi),xi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ca=e,n.Fa=e.Fa,n}return i.__extends(e,t),e.prototype.Na=function(t){return this.Ca.Na(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.Ca.isEqual(t.Ca)},e}(wi),_i=function(){function t(t,e){if(Hr("GeoPoint",arguments,2),Gr("GeoPoint","number",1,t),Gr("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new M(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new M(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Oa=t,this.Ba=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Oa},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.Ba},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.Oa===t.Oa&&this.Ba===t.Ba},t.prototype.T=function(t){return x(this.Oa,t.Oa)||x(this.Ba,t.Ba)},t}();function Oi(t){return new Ut(t,!0)}var ki=/^__.*__$/,Si=function(t,e,n){this.qa=t,this.Ua=e,this.Qa=n},Ei=function(){function t(t,e,n){this.data=t,this.Oe=e,this.fieldTransforms=n}return t.prototype.Wa=function(t,e){var n=[];return null!==this.Oe?n.push(new Ce(t,this.data,this.Oe,e)):n.push(new Ae(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new je(t,this.fieldTransforms)),n},t}(),Ai=function(){function t(t,e,n){this.data=t,this.Oe=e,this.fieldTransforms=n}return t.prototype.Wa=function(t,e){var n=[new Ce(t,this.data,this.Oe,e)];return this.fieldTransforms.length>0&&n.push(new je(t,this.fieldTransforms)),n},t}();function Ci(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v()}}var ji=function(){function t(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ja(),this.fieldTransforms=i||[],this.Oe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$a",{get:function(){return this.settings.$a},enumerable:!0,configurable:!0}),t.prototype.Ka=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Oe)},t.prototype.Ga=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ka({path:n,Ma:!1});return r.za(t),r},t.prototype.Ha=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ka({path:n,Ma:!1});return r.ja(),r},t.prototype.Ya=function(t){return this.Ka({path:void 0,Ma:!0})},t.prototype.ka=function(t){var e=!this.path||this.path._()?"":" (found in field "+this.path.toString()+")";return new M(T.INVALID_ARGUMENT,"Function "+this.settings.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.Oe.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.ja=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.za(this.path.get(t))},t.prototype.za=function(t){if(0===t.length)throw this.ka("Document fields must not be empty");if(Ci(this.$a)&&ki.test(t))throw this.ka('Document fields cannot begin and end with "__"')},t}(),Ti=function(){function t(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||Oi(t)}return t.prototype.Ja=function(t,e,n){void 0===n&&(n={});var r=this.Xa(n.merge||n.mergeFields?2:0,t);Li("Data must be an object, but it was:",r,e);var i,o,a=Ri(e,r);if(n.merge)i=new _e(r.Oe),o=r.fieldTransforms;else if(n.mergeFields){for(var s=[],u=0,c=n.mergeFields;u<c.length;u++){var l=c[u],f=void 0;if(l instanceof fi)f=l.Sa;else{if("string"!=typeof l)throw v();f=Ii(t,l)}if(!r.contains(f))throw new M(T.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Fi(s,f)||s.push(f)}i=new _e(s),o=r.fieldTransforms.filter((function(t){return i.ze(t.field)}))}else i=null,o=r.fieldTransforms;return new Ei(new Re(a),i,o)},t.prototype.Za=function(t,e){var n=this.Xa(1,t);Li("Data must be an object, but it was:",n,e);var r=[],i=new De;A(e,(function(e,o){var a=Ii(t,e),s=n.Ha(a);if(o instanceof pi&&o.Ca instanceof gi)r.push(a);else{var u=Mi(o,s);null!=u&&(r.push(a),i.set(a,u))}}));var o=new _e(r);return new Ai(i.ss(),o,n.fieldTransforms)},t.prototype.tu=function(t,e,n,r){var i=this.Xa(1,t),o=[Ni(t,e)],a=[n];if(r.length%2!=0)throw new M(T.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Ni(t,r[s])),a.push(r[s+1]);for(var u=[],c=new De,l=o.length-1;l>=0;--l)if(!Fi(u,o[l])){var f=o[l],h=a[l],d=i.Ha(f);if(h instanceof pi&&h.Ca instanceof gi)u.push(f);else{var p=Mi(h,d);null!=p&&(u.push(f),c.set(f,p))}}var g=new _e(u);return new Ai(c.ss(),g,i.fieldTransforms)},t.prototype.Xa=function(t,e){return new ji({$a:t,methodName:e,path:F.k,Ma:!1},this.s,this.serializer,this.ignoreUndefinedProperties)},t.prototype.eu=function(t,e,n){return void 0===n&&(n=!1),Mi(e,this.Xa(n?4:3,t))},t}();function Mi(t,e){if(Di(t))return Li("Unsupported field value:",e,t),Ri(t,e);if(t instanceof pi)return function(t,e){if(!Ci(e.$a))throw e.ka(t.Fa+"() can only be used with update() and set()");if(!e.path)throw e.ka(t.Fa+"() is not currently supported inside arrays");var n=t.Na(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Oe.push(e.path),t instanceof Array){if(e.settings.Ma&&4!==e.$a)throw e.ka("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Mi(o[i],e.Ya(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return function(t,e){return B(e)?Wt(e):Ht(t,e)}(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=R.fromDate(t);return{timestampValue:Vt(e.serializer,n)}}if(t instanceof R){var r=new R(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vt(e.serializer,r)}}if(t instanceof _i)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof li)return{bytesValue:qt(e.serializer,t)};if(t instanceof Si){var i=e.s,o=t.qa;if(!o.isEqual(i))throw e.ka("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Qt(t.qa||e.s,t.Ua.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.ka("Unsupported field value: "+ei(t))}(t,e)}function Ri(t,e){var n={};return C(t)?e.path&&e.path.length>0&&e.Oe.push(e.path):A(t,(function(t,r){var i=Mi(r,e.Ga(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Di(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof R||t instanceof _i||t instanceof li||t instanceof Si||t instanceof pi)}function Li(t,e,n){if(!Di(n)||!ti(n)){var r=ei(n);throw"an object"===r?e.ka(t+" a custom object"):e.ka(t+" "+r)}}function Ni(t,e){if(e instanceof fi)return e.Sa;if("string"==typeof e)return Ii(t,e);throw new M(T.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ii(t,e){try{return function(t){if(t.search(di)>=0)throw new M(T.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(hi.bind.apply(hi,i.__spreadArrays([void 0],t.split("."))))}catch(i){throw new M(T.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Sa}catch(e){var n=(r=e)instanceof Error?r.message:r.toString();throw new M(T.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}var r}function Fi(t,e){return t.some((function(t){return t.isEqual(e)}))}var Pi=function(){function t(t){this.uid=t}return t.prototype.fo=function(){return null!=this.uid},t.prototype.su=function(){return this.fo()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Pi.UNAUTHENTICATED=new Pi(null),Pi.nu=new Pi("google-credentials-uid"),Pi.iu=new Pi("first-party-uid");var $i=function(t,e){this.user=e,this.type="OAuth",this.ru={},this.ru.Authorization="Bearer "+t},zi=function(){function t(){this.ou=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.hu=function(){},t.prototype.au=function(t){this.ou=t,t(Pi.UNAUTHENTICATED)},t.prototype.uu=function(){this.ou=null},t}(),Bi=function(){function t(t){var e=this;this.cu=null,this.currentUser=Pi.UNAUTHENTICATED,this.lu=!1,this._u=0,this.ou=null,this.forceRefresh=!1,this.cu=function(){e._u++,e.currentUser=e.fu(),e.lu=!0,e.ou&&e.ou(e.currentUser)},this._u=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.cu):(this.cu(null),t.get().then((function(t){e.auth=t,e.cu&&e.auth.addAuthTokenListener(e.cu)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this._u,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t._u!==e?(d("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(m("string"==typeof n.accessToken),new $i(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.hu=function(){this.forceRefresh=!0},t.prototype.au=function(t){this.ou=t,this.lu&&t(this.currentUser)},t.prototype.uu=function(){this.auth&&this.auth.removeAuthTokenListener(this.cu),this.cu=null,this.ou=null},t.prototype.fu=function(){var t=this.auth&&this.auth.getUid();return m(null===t||"string"==typeof t),new Pi(t)},t}(),Ui=function(){function t(t,e){this.du=t,this.wu=e,this.type="FirstParty",this.user=Pi.iu}return Object.defineProperty(t.prototype,"ru",{get:function(){var t={"X-Goog-AuthUser":this.wu},e=this.du.auth.Tu([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Wi=function(){function t(t,e){this.du=t,this.wu=e}return t.prototype.getToken=function(){return Promise.resolve(new Ui(this.du,this.wu))},t.prototype.au=function(t){t(Pi.iu)},t.prototype.uu=function(){},t.prototype.hu=function(){},t}(),Hi=function(){function t(t,e,n,r,i,o){this.Wn=t,this.Eu=n,this.Iu=r,this.Au=i,this.listener=o,this.state=0,this.Ru=0,this.mu=null,this.stream=null,this.Zo=new dn(t,e)}return t.prototype.Pu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Vu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.gu()},t.prototype.stop=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Pu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.pu=function(){this.state=0,this.Zo.reset()},t.prototype.yu=function(){var t=this;this.Vu()&&null===this.mu&&(this.mu=this.Wn.ei(this.Eu,6e4,(function(){return t.bu()})))},t.prototype.vu=function(t){this.Su(),this.stream.send(t)},t.prototype.bu=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.Vu()?[2,this.close(0)]:[2]}))}))},t.prototype.Su=function(){this.mu&&(this.mu.cancel(),this.mu=null)},t.prototype.close=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.Su(),this.Zo.cancel(),this.Ru++,3!==t?this.Zo.reset():e&&e.code===T.RESOURCE_EXHAUSTED?(p(e.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.Zo.Xn()):e&&e.code===T.UNAUTHENTICATED&&this.Au.hu(),null!==this.stream&&(this.Du(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Cu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Du=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Fu(this.Ru),n=this.Ru;this.Au.getToken().then((function(e){t.Ru===n&&t.Nu(e)}),(function(n){e((function(){var e=new M(T.UNKNOWN,"Fetching auth token failed: "+n.message);return t.$u(e)}))}))},t.prototype.Nu=function(t){var e=this,n=this.Fu(this.Ru);this.stream=this.ku(t),this.stream.xu((function(){n((function(){return e.state=2,e.listener.xu()}))})),this.stream.Cu((function(t){n((function(){return e.$u(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.gu=function(){var t=this;this.state=4,this.Zo.Zn((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.$u=function(t){return d("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Fu=function(t){var e=this;return function(n){e.Wn.Sr((function(){return e.Ru===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Vi=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return i.__extends(e,t),e.prototype.ku=function(t){return this.Iu.Mu("Listen",t)},e.prototype.onMessage=function(t){this.Zo.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:v()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=Gt(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(t){var e=void 0===t.code?T.UNKNOWN:K(t.code);return new M(e,t.message||"")}(a);n=new mt(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=Jt(t,u.document.name),l=Yt(u.document.updateTime),f=new Re({mapValue:{fields:u.document.fields}}),h=new Ie(c,l,f,{}),d=u.targetIds||[],p=u.removedTargetIds||[];n=new gt(d,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;var g=e.documentDelete;g.document;var m=Jt(t,g.document),y=g.readTime?Yt(g.readTime):D.min(),b=new Fe(m,y),w=g.removedTargetIds||[];n=new gt([],w,b.key,b)}else if("documentRemove"in e){e.documentRemove;var x=e.documentRemove;x.document;var _=Jt(t,x.document),O=x.removedTargetIds||[];n=new gt([],O,_,null)}else{if(!("filter"in e))return v();e.filter;var k=e.filter;k.targetId;var S=k.count||0,E=new q(S),A=k.targetId;n=new vt(A,E)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return D.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?D.min():e.readTime?Yt(e.readTime):D.min()}(t);return this.listener.Lu(e,n)},e.prototype.Ou=function(t){var e={};e.database=ne(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=en(r)?{documents:se(t,r)}:{query:ue(t,r)}).targetId=e.targetId,e.resumeToken.G()>0&&(n.resumeToken=qt(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return v()}}(0,e.Y);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.vu(e)},e.prototype.Bu=function(t){var e={};e.database=ne(this.serializer),e.removeTarget=t,this.vu(e)},e}(Hi),qi=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.qu=!1,a.lastStreamToken=U.H,a}return i.__extends(e,t),Object.defineProperty(e.prototype,"Uu",{get:function(){return this.qu},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.qu=!1,this.lastStreamToken=U.H,t.prototype.start.call(this)},e.prototype.Du=function(){this.qu&&this.Qu([])},e.prototype.ku=function(t){return this.Iu.Mu("Write",t)},e.prototype.onMessage=function(t){if(m(!!t.streamToken),this.lastStreamToken=Gt(this.serializer,t.streamToken),this.qu){this.Zo.reset();var e=function(t,e){return t&&t.length>0?(m(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Yt(t.updateTime):Yt(e);n.isEqual(D.min())&&(n=Yt(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new ke(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Yt(t.commitTime);return this.listener.Wu(n,e)}return m(!t.writeResults||0===t.writeResults.length),this.qu=!0,this.listener.ju()},e.prototype.Ku=function(){var t={};t.database=ne(this.serializer),this.vu(t)},e.prototype.Qu=function(t){var e=this,n={streamToken:qt(this.serializer,this.lastStreamToken),writes:t.map((function(t){return oe(e.serializer,t)}))};this.vu(n)},e}(Hi),Gi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Iu=e,i.credentials=n,i.serializer=r,i.zu=!1,i}return i.__extends(e,t),e.prototype.Hu=function(){if(this.zu)throw new M(T.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Yu=function(t,e){var n=this;return this.Hu(),this.credentials.getToken().then((function(r){return n.Iu.Yu(t,e,r)})).catch((function(t){throw t.code===T.UNAUTHENTICATED&&n.credentials.hu(),t}))},e.prototype.Ju=function(t,e){var n=this;return this.Hu(),this.credentials.getToken().then((function(r){return n.Iu.Ju(t,e,r)})).catch((function(t){throw t.code===T.UNAUTHENTICATED&&n.credentials.hu(),t}))},e}((function(){this.Gu=void 0})),Ki=function(){function t(t){this.Xu=t,this.Zu=new Map,this.mutations=[],this.tc=!1,this.ec=null,this.sc=new Set}return t.prototype.nc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(this.ic(),this.mutations.length>0)throw new M(T.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a,s;return i.__generator(this,(function(i){switch(i.label){case 0:return n=y(t),r={database:ne(n.serializer),documents:e.map((function(t){return Zt(n.serializer,t)}))},[4,n.Ju("BatchGetDocuments",r)];case 1:return o=i.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){m(!!e.found),e.found.name,e.found.updateTime;var n=Jt(t,e.found.name),r=Yt(e.found.updateTime),i=new Re({mapValue:{fields:e.found.fields}});return new Ie(n,r,i,{})}(t,e):"missing"in e?function(t,e){m(!!e.missing),m(!!e.readTime);var n=Jt(t,e.missing),r=Yt(e.readTime);return new Fe(n,r)}(t,e):v()}(n.serializer,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());m(!!e),s.push(e)})),s)]}}))}))}(this.Xu,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Fe||t instanceof Ie?n.rc(t):v()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.Wa(t,this.Ue(t))),this.sc.add(t)},t.prototype.update=function(t,e){try{this.write(e.Wa(t,this.oc(t)))}catch(t){this.ec=t}this.sc.add(t)},t.prototype.delete=function(t){this.write([new Te(t,this.Ue(t))]),this.sc.add(t)},t.prototype.commit=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:if(this.ic(),this.ec)throw this.ec;return t=this.Zu,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new P(N.$(n));e.mutations.push(new Me(r,e.Ue(r)))})),[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return n=y(t),r={database:ne(n.serializer),writes:e.map((function(t){return oe(n.serializer,t)}))},[4,n.Yu("Commit",r)];case 1:return i.sent(),[2]}}))}))}(this.Xu,this.mutations)];case 1:return n.sent(),this.tc=!0,[2]}}))}))},t.prototype.rc=function(t){var e;if(t instanceof Ie)e=t.version;else{if(!(t instanceof Fe))throw v();e=D.min()}var n=this.Zu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new M(T.ABORTED,"Document version changed between two reads.")}else this.Zu.set(t.key.toString(),e)},t.prototype.Ue=function(t){var e=this.Zu.get(t.toString());return!this.sc.has(t)&&e?Se.updateTime(e):Se.Qe()},t.prototype.oc=function(t){var e=this.Zu.get(t.toString());if(!this.sc.has(t)&&e){if(e.isEqual(D.min()))throw new M(T.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Se.updateTime(e)}return Se.exists(!0)},t.prototype.write=function(t){this.ic(),this.mutations=this.mutations.concat(t)},t.prototype.ic=function(){},t}(),Yi=function(){function t(t,e){this.Oo=t,this.hc=e,this.state="Unknown",this.ac=0,this.uc=null,this.cc=!0}return t.prototype.lc=function(){var t=this;0===this.ac&&(this._c("Unknown"),this.uc=this.Oo.ei("online_state_timeout",1e4,(function(){return t.uc=null,t.fc("Backend didn't respond within 10 seconds."),t._c("Offline"),Promise.resolve()})))},t.prototype.dc=function(t){"Online"===this.state?this._c("Unknown"):(this.ac++,this.ac>=1&&(this.wc(),this.fc("Connection failed 1 times. Most recent error: "+t.toString()),this._c("Offline")))},t.prototype.set=function(t){this.wc(),this.ac=0,"Online"===t&&(this.cc=!1),this._c(t)},t.prototype._c=function(t){t!==this.state&&(this.state=t,this.hc(t))},t.prototype.fc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.cc?(p(e),this.cc=!1):d("OnlineStateTracker",e)},t.prototype.wc=function(){null!==this.uc&&(this.uc.cancel(),this.uc=null)},t}(),Qi=function(){function t(t,e,n,r,o){var a=this;this.Tc=t,this.Xu=e,this.Oo=n,this.Ec=[],this.Ic=new Map,this.Ac=null,this.Rc=new Set,this.mc=o,this.mc.Pc((function(t){n.Sr((function(){return i.__awaiter(a,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Vc()?(d("RemoteStore","Restarting streams for network reachability change."),[4,this.gc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.pc=new Yi(n,r),this.yc=function(t,e,n){var r=y(t);return new Vi(e,r.Iu,r.credentials,r.serializer,n)}(this.Xu,n,{xu:this.bc.bind(this),Cu:this.vc.bind(this),Lu:this.Sc.bind(this)}),this.Dc=function(t,e,n){var r=y(t);return new qi(e,r.Iu,r.credentials,r.serializer,n)}(this.Xu,n,{xu:this.Cc.bind(this),Cu:this.Fc.bind(this),ju:this.Nc.bind(this),Wu:this.Wu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.Rc.delete(0),this.$c()},t.prototype.$c=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Vc()?(this.kc()?this.xc():this.pc.set("Unknown"),[4,this.Mc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Rc.add(0),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Offline"),[2]}}))}))},t.prototype.Lc=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.Dc.stop()];case 1:return t.sent(),[4,this.yc.stop()];case 2:return t.sent(),this.Ec.length>0&&(d("RemoteStore","Stopping write stream with "+this.Ec.length+" pending writes"),this.Ec=[]),this.Oc(),[2]}}))}))},t.prototype.Ur=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return d("RemoteStore","RemoteStore shutting down."),this.Rc.add(5),[4,this.Lc()];case 1:return t.sent(),this.mc.Ur(),this.pc.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Ic.has(t.targetId)||(this.Ic.set(t.targetId,t),this.kc()?this.xc():this.yc.Vu()&&this.Bc(t))},t.prototype.qc=function(t){this.Ic.delete(t),this.yc.Vu()&&this.Uc(t),0===this.Ic.size&&(this.yc.Vu()?this.yc.yu():this.Vc()&&this.pc.set("Unknown"))},t.prototype.Me=function(t){return this.Ic.get(t)||null},t.prototype.xe=function(t){return this.Qc.xe(t)},t.prototype.Bc=function(t){this.Ac.de(t.targetId),this.yc.Ou(t)},t.prototype.Uc=function(t){this.Ac.de(t),this.yc.Bu(t)},t.prototype.xc=function(){this.Ac=new bt(this),this.yc.start(),this.pc.lc()},t.prototype.kc=function(){return this.Vc()&&!this.yc.Pu()&&this.Ic.size>0},t.prototype.Vc=function(){return 0===this.Rc.size},t.prototype.Oc=function(){this.Ac=null},t.prototype.bc=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){return this.Ic.forEach((function(e,n){t.Bc(e)})),[2]}))}))},t.prototype.vc=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.Oc(),this.kc()?(this.pc.dc(t),this.xc()):this.pc.set("Unknown"),[2]}))}))},t.prototype.Sc=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:if(this.pc.set("Online"),!(t instanceof mt&&2===t.state&&t.cause))return[3,6];i.label=1;case 1:return i.trys.push([1,3,,5]),[4,this.Wc(t)];case 2:return i.sent(),[3,5];case 3:return n=i.sent(),d("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.jc(n)];case 4:return i.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof gt?this.Ac.Pe(t):t instanceof vt?this.Ac.De(t):this.Ac.pe(t),e.isEqual(D.min()))return[3,13];i.label=7;case 7:return i.trys.push([7,11,,13]),[4,this.Tc.xi()];case 8:return r=i.sent(),e.o(r)>=0?[4,this.Kc(e)]:[3,10];case 9:i.sent(),i.label=10;case 10:return[3,13];case 11:return d("RemoteStore","Failed to raise snapshot:",o=i.sent()),[4,this.jc(o)];case 12:return i.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.jc=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(!_r(t))throw t;return this.Rc.add(1),[4,this.Lc()];case 1:return r.sent(),this.pc.set("Offline"),e||(e=function(){return n.Tc.xi()}),this.Oo.Cr((function(){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return d("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.Rc.delete(1),[4,this.$c()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.Gc=function(t){var e=this;return t().catch((function(n){return e.jc(n,t)}))},t.prototype.Kc=function(t){var e=this,n=this.Ac.Ne(t);return n.Qt.forEach((function(n,r){if(n.resumeToken.G()>0){var i=e.Ic.get(r);i&&e.Ic.set(r,i.Z(n.resumeToken,t))}})),n.Wt.forEach((function(t){var n=e.Ic.get(t);if(n){e.Ic.set(t,n.Z(U.H,n.J)),e.Uc(t);var r=new V(n.target,t,1,n.sequenceNumber);e.Bc(r)}})),this.Qc.na(n)},t.prototype.Wc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:e=t.cause,n=0,r=t.targetIds,i.label=1;case 1:return n<r.length?(o=r[n],this.Ic.has(o)?[4,this.Qc.zc(o,e)]:[3,3]):[3,5];case 2:i.sent(),this.Ic.delete(o),this.Ac.removeTarget(o),i.label=3;case 3:i.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.Mc=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n;return i.__generator(this,(function(r){switch(r.label){case 0:t=this.Ec.length>0?this.Ec[this.Ec.length-1].batchId:-1,r.label=1;case 1:if(!this.Hc())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.Tc.ha(t)];case 3:return null===(e=r.sent())?(0===this.Ec.length&&this.Dc.yu(),[3,7]):(t=e.batchId,this.Yc(e),[3,6]);case 4:return n=r.sent(),[4,this.jc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Jc()&&this.Xc(),[2]}}))}))},t.prototype.Hc=function(){return this.Vc()&&this.Ec.length<10},t.prototype.Zc=function(){return this.Ec.length},t.prototype.Yc=function(t){this.Ec.push(t),this.Dc.Vu()&&this.Dc.Uu&&this.Dc.Qu(t.mutations)},t.prototype.Jc=function(){return this.Vc()&&!this.Dc.Pu()&&this.Ec.length>0},t.prototype.Xc=function(){this.Dc.start()},t.prototype.Cc=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.Dc.Ku(),[2]}))}))},t.prototype.Nc=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n;return i.__generator(this,(function(r){for(t=0,e=this.Ec;t<e.length;t++)n=e[t],this.Dc.Qu(n.mutations);return[2]}))}))},t.prototype.Wu=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return n=this.Ec.shift(),r=rn.from(n,t,e),[4,this.Gc((function(){return o.Qc.tl(r)}))];case 1:return i.sent(),[4,this.Mc()];case 2:return i.sent(),[2]}}))}))},t.prototype.Fc=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return t&&this.Dc.Uu?[4,this.el(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Jc()&&this.Xc(),[2]}}))}))},t.prototype.el=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return G(n=t.code)&&n!==T.ABORTED?(e=this.Ec.shift(),this.Dc.pu(),[4,this.Gc((function(){return r.Qc.sl(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.Mc()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.nl=function(){return new Ki(this.Xu)},t.prototype.gc=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Rc.add(4),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Unknown"),this.Rc.delete(4),[4,this.$c()];case 2:return t.sent(),[2]}}))}))},t.prototype.il=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Oo.ah(),d("RemoteStore","RemoteStore received new credentials"),this.Rc.add(3),[4,this.Lc()];case 1:return e.sent(),this.pc.set("Unknown"),[4,this.Qc.il(t)];case 2:return e.sent(),this.Rc.delete(3),[4,this.$c()];case 3:return e.sent(),[2]}}))}))},t.prototype.rl=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return t?(this.Rc.delete(2),[4,this.$c()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.Rc.add(2),[4,this.Lc()]);case 3:e.sent(),this.pc.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();function Xi(t,e){return"firestore_clients_"+t+"_"+e}function Zi(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.fo()&&(r+="_"+e.uid),r}function Ji(t,e){return"firestore_targets_"+t+"_"+e}var to=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ol=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new M(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(p("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.hl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),eo=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ol=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new M(r.error.code,r.error.message)),i?new t(e,r.state,o):(p("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.hl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),no=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ol=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ct(),a=0;i&&a<r.activeTargetIds.length;++a)i=B(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(p("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ro=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ol=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(p("SharedClientState","Failed to parse online state: "+e),null)},t}(),io=function(){function t(){this.activeTargetIds=ct()}return t.prototype.al=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ul=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.hl=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),oo=function(){function t(t,e,n,r,i){this.window=t,this.Wn=e,this.persistenceKey=n,this.cl=r,this.Qc=null,this.hc=null,this.On=null,this.ll=this._l.bind(this),this.fl=new Y(x),this.pr=!1,this.dl=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.wl=Xi(this.persistenceKey,this.cl),this.Tl=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.fl=this.fl.et(this.cl,new io),this.El=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Il=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Al=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Rl=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ll)}return t._r=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,o,a,s,u,c,l,f,h=this;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.Qc.Gr()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.cl&&(o=this.getItem(Xi(this.persistenceKey,r)))&&(a=no.ol(r,o))&&(this.fl=this.fl.et(a.clientId,a));for(this.ml(),(s=this.storage.getItem(this.Rl))&&(u=this.Pl(s))&&this.Vl(u),c=0,l=this.dl;c<l.length;c++)f=l[c],this._l(f);return this.dl=[],this.window.addEventListener("unload",(function(){return h.Ur()})),this.pr=!0,[2]}}))}))},t.prototype.Un=function(t){this.setItem(this.Tl,JSON.stringify(t))},t.prototype.gl=function(){return this.pl(this.fl)},t.prototype.yl=function(t){var e=!1;return this.fl.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.bl=function(t){this.vl(t,"pending")},t.prototype.Sl=function(t,e,n){this.vl(t,e,n),this.Dl(t)},t.prototype.Cl=function(t){var e="not-current";if(this.yl(t)){var n=this.storage.getItem(Ji(this.persistenceKey,t));if(n){var r=eo.ol(t,n);r&&(e=r.state)}}return this.Fl.al(t),this.ml(),e},t.prototype.Nl=function(t){this.Fl.ul(t),this.ml()},t.prototype.$l=function(t){return this.Fl.activeTargetIds.has(t)},t.prototype.kl=function(t){this.removeItem(Ji(this.persistenceKey,t))},t.prototype.xl=function(t,e,n){this.Ml(t,e,n)},t.prototype.Hh=function(t,e,n){var r=this;e.forEach((function(t){r.Dl(t)})),this.currentUser=t,n.forEach((function(t){r.bl(t)}))},t.prototype.Ll=function(t){this.Ol(t)},t.prototype.Ur=function(){this.pr&&(this.window.removeEventListener("storage",this.ll),this.removeItem(this.wl),this.pr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){d("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype._l=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(d("SharedClientState","EVENT",n.key,n.newValue),n.key===this.wl)return void p("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Wn.Cr((function(){return i.__awaiter(e,void 0,void 0,(function(){var t,e,r,o,a,s;return i.__generator(this,(function(i){if(this.pr){if(null!==n.key)if(this.El.test(n.key)){if(null==n.newValue)return t=this.Bl(n.key),[2,this.ql(t,null)];if(e=this.Ul(n.key,n.newValue))return[2,this.ql(e.clientId,e)]}else if(this.Il.test(n.key)){if(null!==n.newValue&&(r=this.Ql(n.key,n.newValue)))return[2,this.Wl(r)]}else if(this.Al.test(n.key)){if(null!==n.newValue&&(o=this.jl(n.key,n.newValue)))return[2,this.Kl(o)]}else if(n.key===this.Rl){if(null!==n.newValue&&(a=this.Pl(n.newValue)))return[2,this.Vl(a)]}else n.key===this.Tl&&(s=function(t){var e=fn.Qn;if(null!=t)try{var n=JSON.parse(t);m("number"==typeof n),e=n}catch(t){p("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==fn.Qn&&this.On(s)}else this.dl.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Fl",{get:function(){return this.fl.get(this.cl)},enumerable:!0,configurable:!0}),t.prototype.ml=function(){this.setItem(this.wl,this.Fl.hl())},t.prototype.vl=function(t,e,n){var r=new to(this.currentUser,t,e,n),i=Zi(this.persistenceKey,this.currentUser,t);this.setItem(i,r.hl())},t.prototype.Dl=function(t){var e=Zi(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ol=function(t){var e={clientId:this.cl,onlineState:t};this.storage.setItem(this.Rl,JSON.stringify(e))},t.prototype.Ml=function(t,e,n){var r=Ji(this.persistenceKey,t),i=new eo(t,e,n);this.setItem(r,i.hl())},t.prototype.Bl=function(t){var e=this.El.exec(t);return e?e[1]:null},t.prototype.Ul=function(t,e){var n=this.Bl(t);return no.ol(n,e)},t.prototype.Ql=function(t,e){var n=this.Il.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return to.ol(new Pi(i),r,e)},t.prototype.jl=function(t,e){var n=this.Al.exec(t),r=Number(n[1]);return eo.ol(r,e)},t.prototype.Pl=function(t){return ro.ol(t)},t.prototype.Wl=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Qc.Gl(t.batchId,t.state,t.error)]:(d("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Kl=function(t){return this.Qc.zl(t.targetId,t.state,t.error)},t.prototype.ql=function(t,e){var n=this,r=e?this.fl.et(t,e):this.fl.remove(t),i=this.pl(this.fl),o=this.pl(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.Qc.Hl(a,s).then((function(){n.fl=r}))},t.prototype.Vl=function(t){this.fl.get(t.clientId)&&this.hc(t.onlineState)},t.prototype.pl=function(t){var e=ct();return t.forEach((function(t,n){e=e.Ct(n.activeTargetIds)})),e},t}(),ao=function(){function t(){this.Yl=new io,this.Jl={},this.Qc=null,this.hc=null,this.On=null}return t.prototype.bl=function(t){},t.prototype.Sl=function(t,e,n){},t.prototype.Cl=function(t){return this.Yl.al(t),this.Jl[t]||"not-current"},t.prototype.xl=function(t,e,n){this.Jl[t]=e},t.prototype.Nl=function(t){this.Yl.ul(t)},t.prototype.$l=function(t){return this.Yl.activeTargetIds.has(t)},t.prototype.kl=function(t){delete this.Jl[t]},t.prototype.gl=function(){return this.Yl.activeTargetIds},t.prototype.yl=function(t){return this.Yl.activeTargetIds.has(t)},t.prototype.start=function(){return this.Yl=new io,Promise.resolve()},t.prototype.Hh=function(t,e,n){},t.prototype.Ll=function(t){},t.prototype.Ur=function(){},t.prototype.Un=function(t){},t}(),so=function(t){this.key=t},uo=function(t){this.key=t},co=function(){function t(t,e){this.query=t,this.Xl=e,this.Zl=null,this.Ht=!1,this.t_=st(),this.Ot=st(),this.e_=new lt(t.Ds.bind(t))}return Object.defineProperty(t.prototype,"s_",{get:function(){return this.Xl},enumerable:!0,configurable:!0}),t.prototype.n_=function(t,e){var n=this,r=e?e.i_:new ft,i=e?e.e_:this.e_,o=e?e.Ot:this.Ot,a=i,s=!1,u=this.query.ks()&&i.size===this.query.limit?i.last():null,c=this.query.xs()&&i.size===this.query.limit?i.first():null;if(t.ot((function(t,e){var l=i.get(t),f=e instanceof Ie?e:null;f&&(f=n.query.matches(f)?f:null);var h=!!l&&n.Ot.has(l.key),d=!!f&&(f.Xe||n.Ot.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data().isEqual(f.data())?h!==d&&(r.track({type:3,doc:f}),p=!0):n.r_(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.query.Ds(f,u)>0||c&&n.query.Ds(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(a=a.add(f),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),this.query.ks()||this.query.xs())for(;a.size>this.query.limit;){var l=this.query.ks()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{e_:a,i_:r,o_:s,Ot:o}},t.prototype.r_=function(t,e){return t.Xe&&e.hasCommittedMutations&&!e.Xe},t.prototype.wn=function(t,e,n){var r=this,i=this.e_;this.e_=t.e_,this.Ot=t.Ot;var o=t.i_.Mt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v()}};return n(t)-n(e)}(t.type,e.type)||r.query.Ds(t.doc,e.doc)})),this.h_(n);var a=e?this.a_():[],s=0===this.t_.size&&this.Ht?1:0,u=s!==this.Zl;return this.Zl=s,0!==o.length||u?{snapshot:new ht(this.query,t.e_,i,o,t.Ot,0===s,u,!1),u_:a}:{u_:a}},t.prototype.c_=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.wn({e_:this.e_,i_:new ft,Ot:this.Ot,o_:!1},!1)):{u_:[]}},t.prototype.l_=function(t){return!this.Xl.has(t)&&!!this.e_.has(t)&&!this.e_.get(t).Xe},t.prototype.h_=function(t){var e=this;t&&(t.Yt.forEach((function(t){return e.Xl=e.Xl.add(t)})),t.Jt.forEach((function(t){})),t.Xt.forEach((function(t){return e.Xl=e.Xl.delete(t)})),this.Ht=t.Ht)},t.prototype.a_=function(){var t=this;if(!this.Ht)return[];var e=this.t_;this.t_=st(),this.e_.forEach((function(e){t.l_(e.key)&&(t.t_=t.t_.add(e.key))}));var n=[];return e.forEach((function(e){t.t_.has(e)||n.push(new uo(e))})),this.t_.forEach((function(t){e.has(t)||n.push(new so(t))})),n},t.prototype.__=function(t){this.Xl=t._a,this.t_=st();var e=this.n_(t.documents);return this.wn(e,!0)},t.prototype.f_=function(){return ht.Ut(this.query,this.e_,this.Ot,0===this.Zl)},t}(),lo=function(){function t(t,e,n,r){this.Oo=t,this.Xu=e,this.updateFunction=n,this.Uo=r,this.d_=5,this.Zo=new dn(this.Oo,"transaction_retry")}return t.prototype.w_=function(){this.T_()},t.prototype.T_=function(){var t=this;this.Zo.Zn((function(){return i.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return i.__generator(this,(function(r){return t=new Ki(this.Xu),(e=this.E_(t))&&e.then((function(e){n.Oo.Sr((function(){return t.commit().then((function(){n.Uo.resolve(e)})).catch((function(t){n.I_(t)}))}))})).catch((function(t){n.I_(t)})),[2]}))}))}))},t.prototype.E_=function(t){try{var e=this.updateFunction(t);return!$(e)&&e.catch&&e.then?e:(this.Uo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Uo.reject(t),null}},t.prototype.I_=function(t){var e=this;this.d_>0&&this.A_(t)?(this.d_-=1,this.Oo.Sr((function(){return e.T_(),Promise.resolve()}))):this.Uo.reject(t)},t.prototype.A_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!G(e)}return!1},t}(),fo=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ho=function(t){this.key=t,this.R_=!1},po=function(){function t(t,e,n,r,i,o){this.Tc=t,this.m_=e,this.Xu=n,this.P_=r,this.currentUser=i,this.V_=o,this.g_=null,this.p_=new j((function(t){return t.canonicalId()}),(function(t,e){return t.isEqual(e)})),this.y_=new Map,this.b_=[],this.v_=new Y(P.P),this.S_=new Map,this.D_=new Br,this.C_={},this.F_=new Map,this.N_=Fn.Ci(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"k_",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){this.g_=t},t.prototype.listen=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return this.x_("listen()"),(r=this.p_.get(t))?(e=r.targetId,this.P_.Cl(e),n=r.view.f_(),[3,4]):[3,1];case 1:return[4,this.Tc.ua(t.We())];case 2:return o=i.sent(),a=this.P_.Cl(o.targetId),e=o.targetId,[4,this.M_(t,e,"current"===a)];case 3:n=i.sent(),this.k_&&this.m_.listen(o),i.label=4;case 4:return[2,n]}}))}))},t.prototype.M_=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,a,s,u,c;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.Tc.la(t,!0)];case 1:return r=i.sent(),o=new co(t,r._a),a=o.n_(r.documents),s=pt.zt(e,n&&"Offline"!==this.onlineState),u=o.wn(a,this.k_,s),this.L_(e,u.u_),c=new fo(t,e,o),[2,(this.p_.set(t,c),this.y_.has(e)?this.y_.get(e).push(t):this.y_.set(e,[t]),u.snapshot)]}}))}))},t.prototype.qc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.x_("unlisten()"),e=this.p_.get(t),(n=this.y_.get(e.targetId)).length>1?[2,(this.y_.set(e.targetId,n.filter((function(e){return!e.isEqual(t)}))),void this.p_.delete(t))]:this.k_?(this.P_.Nl(e.targetId),this.P_.yl(e.targetId)?[3,2]:[4,this.Tc.ca(e.targetId,!1).then((function(){r.P_.kl(e.targetId),r.m_.qc(e.targetId),r.O_(e.targetId)})).catch(zr)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.O_(e.targetId),[4,this.Tc.ca(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:this.x_("write()"),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,this.Tc.Zh(t)];case 2:return n=i.sent(),this.P_.bl(n.batchId),this.B_(n.batchId,e),[4,this.q_(n.on)];case 3:return i.sent(),[4,this.m_.Mc()];case 4:return i.sent(),[3,6];case 5:return r=i.sent(),o=Mr(r,"Failed to persist write"),e.reject(o),[3,6];case 6:return[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new lo(t,this.Xu,e,n).w_()},t.prototype.na=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:this.x_("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Tc.na(t)];case 2:return e=r.sent(),t.Qt.forEach((function(t,e){var r=n.S_.get(e);r&&(m(t.Yt.size+t.Jt.size+t.Xt.size<=1),t.Yt.size>0?r.R_=!0:t.Jt.size>0?m(r.R_):t.Xt.size>0&&(m(r.R_),r.R_=!1))})),[4,this.q_(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,zr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.c_=function(t,e){this.x_("applyOnlineStateChange()");var n=[];this.p_.forEach((function(e,r){var i=r.view.c_(t);i.snapshot&&n.push(i.snapshot)})),this.g_.U_(t),this.g_.Lu(n),this.onlineState=t},t.prototype.zc=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a,s,u=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.x_("rejectListens()"),this.P_.xl(t,"rejected",e),n=this.S_.get(t),(r=n&&n.key)?(o=(o=new Y(P.P)).et(r,new Fe(r,D.min())),a=st().add(r),s=new dt(D.min(),new Map,new Z(x),o,a),[4,this.na(s)]):[3,2];case 1:return i.sent(),this.v_=this.v_.remove(r),this.S_.delete(t),this.Q_(),[3,4];case 2:return[4,this.Tc.ca(t,!1).then((function(){return u.O_(t,e)})).catch(zr)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))},t.prototype.tl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:this.x_("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Tc.ta(t)];case 2:return n=r.sent(),this.W_(e,null),this.j_(e),this.P_.Sl(e,"acknowledged"),[4,this.q_(n)];case 3:return r.sent(),[3,6];case 4:return[4,zr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.sl=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:this.x_("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Tc.sa(t)];case 2:return n=r.sent(),this.W_(t,e),this.j_(t),this.P_.Sl(t,"rejected",e),[4,this.q_(n)];case 3:return r.sent(),[3,6];case 4:return[4,zr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.K_=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:this.m_.Vc()||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.Tc.Ao()];case 2:return-1===(e=i.sent())?[2,void t.resolve()]:((n=this.F_.get(e)||[]).push(t),this.F_.set(e,n),[3,4]);case 3:return r=i.sent(),o=Mr(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(o),[3,4];case 4:return[2]}}))}))},t.prototype.j_=function(t){(this.F_.get(t)||[]).forEach((function(t){t.resolve()})),this.F_.delete(t)},t.prototype.G_=function(t){this.F_.forEach((function(e){e.forEach((function(e){e.reject(new M(T.CANCELLED,t))}))})),this.F_.clear()},t.prototype.B_=function(t,e){var n=this.C_[this.currentUser.su()];n||(n=new Y(x)),n=n.et(t,e),this.C_[this.currentUser.su()]=n},t.prototype.W_=function(t,e){var n=this.C_[this.currentUser.su()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.C_[this.currentUser.su()]=n}},t.prototype.O_=function(t,e){var n=this;void 0===e&&(e=null),this.P_.Nl(t);for(var r=0,i=this.y_.get(t);r<i.length;r++){var o=i[r];this.p_.delete(o),e&&this.g_.z_(o,e)}this.y_.delete(t),this.k_&&this.D_.ga(t).forEach((function(t){n.D_.tr(t)||n.H_(t)}))},t.prototype.H_=function(t){var e=this.v_.get(t);null!==e&&(this.m_.qc(e),this.v_=this.v_.remove(t),this.S_.delete(e),this.Q_())},t.prototype.L_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof so?(this.D_.Hi(i.key,t),this.Y_(i)):i instanceof uo?(d("SyncEngine","Document no longer in limbo: "+i.key),this.D_.Ji(i.key,t),this.D_.tr(i.key)||this.H_(i.key)):v()}},t.prototype.Y_=function(t){var e=t.key;this.v_.get(e)||(d("SyncEngine","New document in limbo: "+e),this.b_.push(e),this.Q_())},t.prototype.Q_=function(){for(;this.b_.length>0&&this.v_.size<this.V_;){var t=this.b_.shift(),e=this.N_.next();this.S_.set(e,new ho(t)),this.v_=this.v_.et(t,e),this.m_.listen(new V($e.As(t.path).We(),e,2,fn.Qn))}},t.prototype.J_=function(){return this.v_},t.prototype.X_=function(){return this.b_},t.prototype.q_=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a=this;return i.__generator(this,(function(i){switch(i.label){case 0:return n=[],r=[],o=[],this.p_.forEach((function(i,s){o.push(Promise.resolve().then((function(){var e=s.view.n_(t);return e.o_?a.Tc.la(s.query,!1).then((function(t){var n=t.documents;return s.view.n_(n,e)})):e})).then((function(t){var i=e&&e.Qt.get(s.targetId),o=s.view.wn(t,a.k_,i);if(a.L_(s.targetId,o.u_),o.snapshot){a.k_&&a.P_.xl(s.targetId,o.snapshot.fromCache?"not-current":"current"),n.push(o.snapshot);var u=ln.Ln(s.targetId,o.snapshot);r.push(u)}})))})),[4,Promise.all(o)];case 1:return i.sent(),this.g_.Lu(n),[4,this.Tc.oa(r)];case 2:return i.sent(),[2]}}))}))},t.prototype.x_=function(t){},t.prototype.il=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(d("SyncEngine","User change. New user:",t.su()),[4,this.Tc.Hh(t)]);case 1:return e=n.sent(),this.currentUser=t,this.G_("'waitForPendingWrites' promise is rejected due to a user change."),this.P_.Hh(t,e.Jh,e.Xh),[4,this.q_(e.Yh)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.m_.enableNetwork()},t.prototype.disableNetwork=function(){return this.m_.disableNetwork()},t.prototype.xe=function(t){var e=this.S_.get(t);if(e&&e.R_)return st().add(e.key);var n=st(),r=this.y_.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.p_.get(a);n=n.Ct(s.view.s_)}return n},t}(),go=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,o,a)||this).Tc=e,s.Z_=void 0,s}return i.__extends(e,t),Object.defineProperty(e.prototype,"k_",{get:function(){return!0===this.Z_},enumerable:!0,configurable:!0}),e.prototype.enableNetwork=function(){return this.Tc.vr(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.Tc.vr(!1),t.prototype.disableNetwork.call(this)},e.prototype.tf=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,this.Tc.la(t.query,!0)];case 1:return e=r.sent(),n=t.view.__(e),[2,(this.Z_&&this.L_(t.targetId,n.u_),n)]}}))}))},e.prototype.c_=function(e,n){this.k_&&0===n&&(t.prototype.c_.call(this,e,n),this.P_.Ll(e)),this.k_||1!==n||t.prototype.c_.call(this,e,n)},e.prototype.Gl=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r;return i.__generator(this,(function(i){switch(i.label){case 0:return this.x_("applyBatchState()"),[4,this.Tc.da(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.m_.Mc()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.W_(t,n||null),this.Tc.wa(t)):v(),i.label=4;case 4:return[4,this.q_(r)];case 5:return i.sent(),[3,7];case 6:d("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.rl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,a,s,u,c=this;return i.__generator(this,(function(i){switch(i.label){case 0:return!0!==t||!0===this.Z_?[3,3]:(e=this.P_.gl(),[4,this.ef(e.F(),!0)]);case 1:return n=i.sent(),this.Z_=!0,[4,this.m_.rl(!0)];case 2:for(i.sent(),r=0,o=n;r<o.length;r++)a=o[r],this.m_.listen(a);return[3,7];case 3:return!1!==t||!1===this.Z_?[3,7]:(s=[],u=Promise.resolve(),this.y_.forEach((function(t,e){c.P_.$l(e)?s.push(e):u=u.then((function(){return c.O_(e),c.Tc.ca(e,!0)})),c.m_.qc(e)})),[4,u]);case 4:return i.sent(),[4,this.ef(s,!1)];case 5:return i.sent(),this.sf(),this.Z_=!1,[4,this.m_.rl(!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},e.prototype.sf=function(){var t=this;this.S_.forEach((function(e,n){t.m_.qc(n)})),this.D_.pa(),this.S_=new Map,this.v_=new Y(P.P)},e.prototype.ef=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,a,s,u,c,l,f,h,d,p;return i.__generator(this,(function(i){switch(i.label){case 0:e=[],n=[],r=0,o=t,i.label=1;case 1:return r<o.length?(a=o[r],s=void 0,(u=this.y_.get(a))&&0!==u.length?[4,this.Tc.ua(u[0].We())]:[3,7]):[3,13];case 2:s=i.sent(),c=0,l=u,i.label=3;case 3:return c<l.length?(f=l[c],h=this.p_.get(f),[4,this.tf(h)]):[3,6];case 4:(d=i.sent()).snapshot&&n.push(d.snapshot),i.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,this.Tc.Ta(a)];case 8:return p=i.sent(),[4,this.Tc.ua(p)];case 9:return s=i.sent(),[4,this.M_(this.nf(p),a,!1)];case 10:i.sent(),i.label=11;case 11:e.push(s),i.label=12;case 12:return r++,[3,1];case 13:return[2,(this.g_.Lu(n),e)]}}))}))},e.prototype.nf=function(t){return new $e(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.Gr=function(){return this.Tc.Gr()},e.prototype.zl=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return this.Z_?(d("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.y_.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Tc.Ri()];case 3:return r=i.sent(),o=dt.Gt(t,"current"===e),[4,this.q_(r,o)];case 4:return i.sent(),[3,8];case 5:return[4,this.Tc.ca(t,!0)];case 6:return i.sent(),this.O_(t,n),[3,8];case 7:v(),i.label=8;case 8:return[2]}}))}))},e.prototype.Hl=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,l,f,h,p=this;return i.__generator(this,(function(g){switch(g.label){case 0:if(!this.Z_)return[3,10];n=0,r=t,g.label=1;case 1:return n<r.length?(o=r[n],this.y_.has(o)?(d("SyncEngine","Adding an already active target "+o),[3,5]):[4,this.Tc.Ta(o)]):[3,6];case 2:return a=g.sent(),[4,this.Tc.ua(a)];case 3:return s=g.sent(),[4,this.M_(this.nf(a),s.targetId,!1)];case 4:g.sent(),this.m_.listen(s),g.label=5;case 5:return n++,[3,1];case 6:u=function(t){return i.__generator(this,(function(e){switch(e.label){case 0:return c.y_.has(t)?[4,c.Tc.ca(t,!1).then((function(){p.m_.qc(t),p.O_(t)})).catch(zr)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},c=this,l=0,f=e,g.label=7;case 7:return l<f.length?(h=f[l],[5,u(h)]):[3,10];case 8:g.sent(),g.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))},e}(po),vo=function(){this.if=void 0,this.rf=[]},mo=function(){function t(t){this.Qc=t,this.hf=new j((function(t){return t.canonicalId()}),(function(t,e){return t.isEqual(e)})),this.onlineState="Unknown",this.af=new Set,this.Qc.subscribe(this)}return t.prototype.listen=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,a,s;return i.__generator(this,(function(i){switch(i.label){case 0:if(e=t.query,n=!1,(r=this.hf.get(e))||(n=!0,r=new vo),!n)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),o=r,[4,this.Qc.listen(e)];case 2:return o.if=i.sent(),[3,4];case 3:return a=i.sent(),s=Mr(a,"Initialization of query '"+t.query+"' failed"),[2,void t.onError(s)];case 4:return this.hf.set(e,r),r.rf.push(t),t.c_(this.onlineState),r.if&&t.uf(r.if)&&this.cf(),[2]}}))}))},t.prototype.qc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){return e=t.query,n=!1,(r=this.hf.get(e))&&(o=r.rf.indexOf(t))>=0&&(r.rf.splice(o,1),n=0===r.rf.length),n?[2,(this.hf.delete(e),this.Qc.qc(e))]:[2]}))}))},t.prototype.Lu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,a=this.hf.get(o);if(a){for(var s=0,u=a.rf;s<u.length;s++)u[s].uf(i)&&(e=!0);a.if=i}}e&&this.cf()},t.prototype.z_=function(t,e){var n=this.hf.get(t);if(n)for(var r=0,i=n.rf;r<i.length;r++)i[r].onError(e);this.hf.delete(t)},t.prototype.U_=function(t){this.onlineState=t;var e=!1;this.hf.forEach((function(n,r){for(var i=0,o=r.rf;i<o.length;i++)o[i].c_(t)&&(e=!0)})),e&&this.cf()},t.prototype.lf=function(t){this.af.add(t),t.next()},t.prototype._f=function(t){this.af.delete(t)},t.prototype.cf=function(){this.af.forEach((function(t){t.next()}))},t}(),yo=function(){function t(t,e,n){this.query=t,this.ff=e,this.df=!1,this.wf=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.uf=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ht(t.query,t.docs,t.Lt,e,t.Ot,t.fromCache,t.Bt,!0)}var o=!1;return this.df?this.Tf(t)&&(this.ff.next(t),o=!0):this.Ef(t,this.onlineState)&&(this.If(t),o=!0),this.wf=t,o},t.prototype.onError=function(t){this.ff.error(t)},t.prototype.c_=function(t){this.onlineState=t;var e=!1;return this.wf&&!this.df&&this.Ef(this.wf,t)&&(this.If(this.wf),e=!0),e},t.prototype.Ef=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Af&&n||t.docs._()&&"Offline"!==e)},t.prototype.Tf=function(t){if(t.docChanges.length>0)return!0;var e=this.wf&&this.wf.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.If=function(t){t=ht.Ut(t.query,t.docs,t.Ot,t.fromCache),this.df=!0,this.ff.next(t)},t}(),bo=function(){function t(){}return t.prototype.zh=function(t){this.Rf=t},t.prototype.Sn=function(t,e,n,r){var i=this;return e.Ss()||n.isEqual(D.min())?this.mf(t,e):this.Rf.yn(t,r).next((function(o){var s=i.Pf(e,o);return(e.ks()||e.xs())&&i.o_(e.ws,s,r,n)?i.mf(t,e):(h()<=a.LogLevel.DEBUG&&d("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.Rf.Sn(t,e,n).next((function(t){return s.forEach((function(e){t=t.et(e.key,e)})),t})))}))},t.prototype.Pf=function(t,e){var n=new Z((function(e,n){return t.Ds(e,n)}));return e.forEach((function(e,r){r instanceof Ie&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.o_=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},t.prototype.mf=function(t,e){return h()<=a.LogLevel.DEBUG&&d("IndexFreeQueryEngine","Using full collection scan to execute query:",e.toString()),this.Rf.Sn(t,e,D.min())},t}(),wo=function(){function t(t,e){this.mn=t,this.Fi=e,this.Rn=[],this.Vf=1,this.gf=new Z(Ur.Ia)}return t.prototype.do=function(t){return on.resolve(0===this.Rn.length)},t.prototype.wo=function(t,e,n,r){var i=this.Vf;this.Vf++,this.Rn.length>0&&this.Rn[this.Rn.length-1];var o=new nn(i,e,n,r);this.Rn.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.gf=this.gf.add(new Ur(u.key,i)),this.mn.ri(t,u.key.path.p())}return on.resolve(o)},t.prototype.To=function(t,e){return on.resolve(this.pf(e))},t.prototype.Io=function(t,e){var n=e+1,r=this.yf(n),i=r<0?0:r;return on.resolve(this.Rn.length>i?this.Rn[i]:null)},t.prototype.Ao=function(){return on.resolve(0===this.Rn.length?-1:this.Vf-1)},t.prototype.Ro=function(t){return on.resolve(this.Rn.slice())},t.prototype.Vn=function(t,e){var n=this,r=new Ur(e,0),i=new Ur(e,Number.POSITIVE_INFINITY),o=[];return this.gf.vt([r,i],(function(t){var e=n.pf(t.ba);o.push(e)})),on.resolve(o)},t.prototype.vn=function(t,e){var n=this,r=new Z(x);return e.forEach((function(t){var e=new Ur(t,0),i=new Ur(t,Number.POSITIVE_INFINITY);n.gf.vt([e,i],(function(t){r=r.add(t.ba)}))})),on.resolve(this.bf(r))},t.prototype.$n=function(t,e){var n=e.path,r=n.length+1,i=n;P.W(i)||(i=i.child(""));var o=new Ur(new P(i),0),a=new Z(x);return this.gf.St((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(a=a.add(t.ba)),!0)}),o),on.resolve(this.bf(a))},t.prototype.bf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.pf(t);null!==r&&n.push(r)})),n},t.prototype.Po=function(t,e){var n=this;m(0===this.vf(e.batchId,"removed")),this.Rn.shift();var r=this.gf;return on.forEach(e.mutations,(function(i){var o=new Ur(i.key,e.batchId);return r=r.delete(o),n.Fi.oo(t,i.key)})).next((function(){n.gf=r}))},t.prototype.Vo=function(t){},t.prototype.tr=function(t,e){var n=new Ur(e,0),r=this.gf.Dt(n);return on.resolve(e.isEqual(r&&r.key))},t.prototype.po=function(t){return this.Rn.length,on.resolve()},t.prototype.vf=function(t,e){return this.yf(t)},t.prototype.yf=function(t){return 0===this.Rn.length?0:t-this.Rn[0].batchId},t.prototype.pf=function(t){var e=this.yf(t);return e<0||e>=this.Rn.length?null:this.Rn[e]},t}(),xo=function(){function t(t,e){this.mn=t,this.Sf=e,this.docs=new Y(P.P),this.size=0}return t.prototype.un=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.Sf(e);return this.docs=this.docs.et(r,{fi:e,size:a,readTime:n}),this.size+=a-o,this.mn.ri(t,r.path.p())},t.prototype.ln=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._n=function(t,e){var n=this.docs.get(e);return on.resolve(n?n.fi:null)},t.prototype.getEntries=function(t,e){var n=this,r=nt();return e.forEach((function(t){var e=n.docs.get(t);r=r.et(t,e?e.fi:null)})),on.resolve(r)},t.prototype.Sn=function(t,e,n){for(var r=it(),i=new P(e.path.child("")),o=this.docs.ut(i);o.wt();){var a=o.dt(),s=a.key,u=a.value,c=u.fi,l=u.readTime;if(!e.path.D(s.path))break;l.o(n)<=0||c instanceof Ie&&e.matches(c)&&(r=r.et(c.key,c))}return on.resolve(r)},t.prototype.Df=function(t,e){return on.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Vi=function(e){return new t.gi(this)},t.prototype.yi=function(t){return on.resolve(this.size)},t}();xo.gi=function(t){function e(e){var n=this;return(n=t.call(this)||this).bi=e,n}return i.__extends(e,t),e.prototype.wn=function(t){var e=this,n=[];return this.on.forEach((function(r,i){i?n.push(e.bi.un(t,i,e.readTime)):e.bi.ln(r)})),on.nn(n)},e.prototype.fn=function(t,e){return this.bi._n(t,e)},e.prototype.dn=function(t,e){return this.bi.getEntries(t,e)},e}(an);var _o=function(){function t(t){this.persistence=t,this.Cf=new j((function(t){return Je(t)}),tn),this.lastRemoteSnapshotVersion=D.min(),this.highestTargetId=0,this.Ff=0,this.Nf=new Br,this.targetCount=0,this.$f=Fn.Di()}return t.prototype.ye=function(t,e){return this.Cf.forEach((function(t,n){return e(n)})),on.resolve()},t.prototype.xi=function(t){return on.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Mi=function(t){return on.resolve(this.Ff)},t.prototype.Ni=function(t){return this.highestTargetId=this.$f.next(),on.resolve(this.highestTargetId)},t.prototype.Li=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ff&&(this.Ff=e),on.resolve()},t.prototype.Bi=function(t){this.Cf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.$f=new Fn(e),this.highestTargetId=e),t.sequenceNumber>this.Ff&&(this.Ff=t.sequenceNumber)},t.prototype.Oi=function(t,e){return this.Bi(e),this.targetCount+=1,on.resolve()},t.prototype.Ui=function(t,e){return this.Bi(e),on.resolve()},t.prototype.Qi=function(t,e){return this.Cf.delete(e.target),this.Nf.ga(e.targetId),this.targetCount-=1,on.resolve()},t.prototype.ji=function(t,e,n){var r=this,i=0,o=[];return this.Cf.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.Cf.delete(a),o.push(r.Wi(t,s.targetId)),i++)})),on.nn(o).next((function(){return i}))},t.prototype.Ki=function(t){return on.resolve(this.targetCount)},t.prototype.Gi=function(t,e){var n=this.Cf.get(e)||null;return on.resolve(n)},t.prototype.zi=function(t,e,n){return this.Nf.ma(e,n),on.resolve()},t.prototype.Yi=function(t,e,n){this.Nf.Va(e,n);var r=this.persistence.Fi,i=[];return r&&e.forEach((function(e){i.push(r.oo(t,e))})),on.nn(i)},t.prototype.Wi=function(t,e){return this.Nf.ga(e),on.resolve()},t.prototype.Xi=function(t,e){var n=this.Nf.ya(e);return on.resolve(n)},t.prototype.tr=function(t,e){return on.resolve(this.Nf.tr(e))},t}(),Oo=function(){function t(t){var e=this;this.kf={},this.rr=new fn(0),this.or=!1,this.or=!0,this.Fi=t(this),this.Tr=new _o(this),this.mn=new yn,this.An=new xo(this.mn,(function(t){return e.Fi.xf(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Ur=function(){return this.or=!1,Promise.resolve()},Object.defineProperty(t.prototype,"pr",{get:function(){return this.or},enumerable:!0,configurable:!0}),t.prototype.yr=function(){},t.prototype.Xr=function(){return this.mn},t.prototype.zr=function(t){var e=this.kf[t.su()];return e||(e=new wo(this.mn,this.Fi),this.kf[t.su()]=e),e},t.prototype.Yr=function(){return this.Tr},t.prototype.Jr=function(){return this.An},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new ko(this.rr.next());return this.Fi.Mf(),n(i).next((function(t){return r.Fi.Lf(i).next((function(){return t}))})).en().then((function(t){return i.In(),t}))},t.prototype.Of=function(t,e){return on.rn(Object.values(this.kf).map((function(n){return function(){return n.tr(t,e)}})))},t}(),ko=function(t){function e(e){var n=this;return(n=t.call(this)||this).sr=e,n}return i.__extends(e,t),e}(un),So=function(){function t(t){this.persistence=t,this.Bf=new Br,this.qf=null}return t.Uf=function(e){return new t(e)},Object.defineProperty(t.prototype,"Qf",{get:function(){if(this.qf)return this.qf;throw v()},enumerable:!0,configurable:!0}),t.prototype.Hi=function(t,e,n){return this.Bf.Hi(n,e),this.Qf.delete(n),on.resolve()},t.prototype.Ji=function(t,e,n){return this.Bf.Ji(n,e),this.Qf.add(n),on.resolve()},t.prototype.oo=function(t,e){return this.Qf.add(e),on.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Bf.ga(e.targetId).forEach((function(t){return n.Qf.add(t)}));var r=this.persistence.Yr();return r.Xi(t,e.targetId).next((function(t){t.forEach((function(t){return n.Qf.add(t)}))})).next((function(){return r.Qi(t,e)}))},t.prototype.Mf=function(){this.qf=new Set},t.prototype.Lf=function(t){var e=this,n=this.persistence.Jr().Vi();return on.forEach(this.Qf,(function(r){return e.Wf(t,r).next((function(t){t||n.ln(r)}))})).next((function(){return e.qf=null,n.apply(t)}))},t.prototype.co=function(t,e){var n=this;return this.Wf(t,e).next((function(t){t?n.Qf.delete(e):n.Qf.add(e)}))},t.prototype.xf=function(t){return 0},t.prototype.Wf=function(t,e){var n=this;return on.rn([function(){return on.resolve(n.Bf.tr(e))},function(){return n.persistence.Yr().tr(t,e)},function(){return n.persistence.Of(t,e)}])},t}(),Eo=function(){function t(t){this.jf=t.jf,this.Kf=t.Kf}return t.prototype.xu=function(t){this.Gf=t},t.prototype.Cu=function(t){this.zf=t},t.prototype.onMessage=function(t){this.Hf=t},t.prototype.close=function(){this.Kf()},t.prototype.send=function(t){this.jf(t)},t.prototype.Yf=function(){this.Gf()},t.prototype.Jf=function(t){this.zf(t)},t.prototype.Xf=function(t){this.Hf(t)},t}(),Ao={BatchGetDocuments:"batchGet",Commit:"commit"},Co="gl-js/ fire/"+l,jo=function(){function t(t){this.s=t.s;var e=t.ssl?"https":"http";this.Zf=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.td=function(t,e){if(e)for(var n in e.ru)e.ru.hasOwnProperty(n)&&(t[n]=e.ru[n]);t["X-Goog-Api-Client"]=Co},t.prototype.Yu=function(t,e,n){var r=this,i=this.ed(t);return new Promise((function(o,a){var s=new u.XhrIo;s.listenOnce(u.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var e=s.getResponseJson();d("Connection","XHR received:",JSON.stringify(e)),o(e);break;case u.ErrorCode.TIMEOUT:d("Connection",'RPC "'+t+'" timed out'),a(new M(T.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(d("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(T).indexOf(e)>=0?e:T.UNKNOWN}(r.status);a(new M(i,r.message))}else a(new M(T.UNKNOWN,"Server responded with status "+s.getStatus()))}else d("Connection",'RPC "'+t+'" failed'),a(new M(T.UNAVAILABLE,"Connection failed."));break;default:v()}}finally{d("Connection",'RPC "'+t+'" completed.')}}));var c=Object.assign({},e);delete c.database;var l=JSON.stringify(c);d("Connection","XHR sending: ",i+" "+l);var f={"Content-Type":"text/plain"};r.td(f,n),s.send(i,"POST",l,f,15)}))},t.prototype.Ju=function(t,e,n){return this.Yu(t,e,n)},t.prototype.Mu=function(t,e){var n=[this.Zf,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=u.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.td(o.initMessageHeaders,e),s.isMobileCordova()||s.isReactNative()||s.isElectron()||s.isIE()||s.isUWP()||s.isBrowserExtension()||(o.httpHeadersOverwriteParam="$httpHeaders");var c=n.join("");d("Connection","Creating WebChannel: "+c+" "+o);var h=r.createWebChannel(c,o),p=!1,v=!1,y=new Eo({jf:function(t){v?d("Connection","Not sending because WebChannel is closed:",t):(p||(d("Connection","Opening WebChannel transport."),h.open(),p=!0),d("Connection","WebChannel sending:",t),h.send(t))},Kf:function(){return h.close()}}),b=function(t,e){h.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return b(u.WebChannel.EventType.OPEN,(function(){v||d("Connection","WebChannel transport opened.")})),b(u.WebChannel.EventType.CLOSE,(function(){v||(v=!0,d("Connection","WebChannel transport closed"),y.Jf())})),b(u.WebChannel.EventType.ERROR,(function(t){v||(v=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=a.LogLevel.WARN){var r=e.map(g);f.warn.apply(f,i.__spreadArrays(["Firestore ("+l+"): "+t],r))}}("Connection","WebChannel transport errored:",t),y.Jf(new M(T.UNAVAILABLE,"The operation could not be completed")))})),b(u.WebChannel.EventType.MESSAGE,(function(t){var e;if(!v){var n=t.data[0];m(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){d("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=W[t];if(void 0!==e)return K(e)}(o),s=i.message;void 0===a&&(a=T.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),v=!0,y.Jf(new M(a,s)),h.close()}else d("Connection","WebChannel received:",n),y.Xf(n)}})),setTimeout((function(){y.Yf()}),0),y},t.prototype.ed=function(t){var e=Ao[t];return this.Zf+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),To=function(){function t(){var t=this;this.sd=function(){return t.nd()},this.rd=function(){return t.od()},this.hd=[],this.ad()}return t.prototype.Pc=function(t){this.hd.push(t)},t.prototype.Ur=function(){window.removeEventListener("online",this.sd),window.removeEventListener("offline",this.rd)},t.prototype.ad=function(){window.addEventListener("online",this.sd),window.addEventListener("offline",this.rd)},t.prototype.nd=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.hd;t<e.length;t++)(0,e[t])(0)},t.prototype.od=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.hd;t<e.length;t++)(0,e[t])(1)},t._r=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Mo=function(){function t(){}return t.prototype.Pc=function(t){},t.prototype.Ur=function(){},t}(),Ro="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Do=function(){function t(){}return t.prototype.initialize=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e=this;return i.__generator(this,(function(n){switch(n.label){case 0:return this.P_=this.ud(t),this.persistence=this.ld(t),[4,this.persistence.start()];case 1:return n.sent(),this._d=this.fd(t),this.Tc=this.dd(t),this.m_=this.wd(t),this.Qc=this.Td(t),this.Ed=this.Id(t),this.P_.hc=function(t){return e.Qc.c_(t,1)},this.m_.Qc=this.Qc,[4,this.Tc.start()];case 2:return n.sent(),[4,this.P_.start()];case 3:return n.sent(),[4,this.m_.start()];case 4:return n.sent(),[4,this.m_.rl(this.Qc.k_)];case 5:return n.sent(),[2]}}))}))},t.prototype.Id=function(t){return new mo(this.Qc)},t.prototype.fd=function(t){return null},t.prototype.dd=function(t){return new Pr(this.persistence,new bo,t.Ad)},t.prototype.ld=function(t){if(t.md.Rd)throw new M(T.FAILED_PRECONDITION,Ro);return new Oo(So.Uf)},t.prototype.wd=function(t){var e=this;return new Qi(this.Tc,t.Xu,t.Oo,(function(t){return e.Qc.c_(t,0)}),To._r()?new To:new Mo)},t.prototype.ud=function(t){return new ao},t.prototype.Td=function(t){return new po(this.Tc,this.m_,t.Xu,this.P_,t.Ad,t.V_)},t.prototype.clearPersistence=function(t){throw new M(T.FAILED_PRECONDITION,Ro)},t}(),Lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.initialize=function(e){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.gr((function(t){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,this.Qc.rl(t)];case 1:return e.sent(),this._d&&(t&&!this._d.pr?this._d.start(this.Tc):t||this._d.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.dd=function(t){return new $r(this.persistence,new bo,t.Ad)},e.prototype.Td=function(t){var e=new go(this.Tc,this.m_,t.Xu,this.P_,t.Ad,t.V_);return this.P_ instanceof oo&&(this.P_.Qc=e),e},e.prototype.fd=function(t){var e=this.persistence.Fi.eo;return new Ir(e,t.Oo)},e.prototype.ld=function(t){var e=Hn.to(t.Pd),n=Oi(t.Pd.s);return new Hn(t.md.synchronizeTabs,e,t.clientId,Nr.ph(t.md.cacheSizeBytes),t.Oo,Cr(),"undefined"!=typeof document?document:null,n,this.P_,t.md.ir)},e.prototype.ud=function(t){if(t.md.Rd&&t.md.synchronizeTabs){var e=Cr();if(!oo._r(e))throw new M(T.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Hn.to(t.Pd);return new oo(e,t.Oo,n,t.clientId,t.Ad)}return new ao},e.prototype.clearPersistence=function(t){var e=Hn.to(t);return Hn.clearPersistence(e)},e}(Do),No=function(){function t(t,e,n){this.Pd=t,this.credentials=e,this.Oo=n,this.clientId=w.t()}return t.prototype.start=function(t,e){var n=this;this.Hu();var r=new hn,i=new hn,o=!1;return this.credentials.au((function(a){if(!o)return o=!0,d("FirestoreClient","Initializing. user=",a.uid),n.Vd(t,e,a,i).then(r.resolve,r.reject);n.Oo.Cr((function(){return n.m_.il(a)}))})),this.Oo.Sr((function(){return r.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.Hu(),this.Oo.enqueue((function(){return t.Qc.enableNetwork()}))},t.prototype.Vd=function(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,a,s,u,c,l=this;return i.__generator(this,(function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),[4,(c=this.Pd,Promise.resolve(new jo(c)))];case 1:return o=f.sent(),a=Oi(this.Pd.s),s=function(t,e,n){return new Gi(t,e,n)}(o,this.credentials,a),[4,t.initialize({Oo:this.Oo,Pd:this.Pd,Xu:s,clientId:this.clientId,Ad:n,V_:100,md:e})];case 2:return f.sent(),this.persistence=t.persistence,this.P_=t.P_,this.Tc=t.Tc,this.m_=t.m_,this.Qc=t.Qc,this._d=t._d,this.gd=t.Ed,this.persistence.yr((function(){return i.__awaiter(l,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(u=f.sent(),r.reject(u),!this.pd(u))throw u;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),this.Vd(new Do,{Rd:!1},n,r))];case 4:return[2]}}))}))},t.prototype.pd=function(t){return"FirebaseError"===t.name?t.code===T.FAILED_PRECONDITION||t.code===T.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Hu=function(){if(this.Oo.eh)throw new M(T.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Hu(),this.Oo.enqueue((function(){return t.Qc.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Oo.oh((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this._d&&this._d.stop(),[4,this.m_.Ur()];case 1:return t.sent(),[4,this.P_.Ur()];case 2:return t.sent(),[4,this.persistence.Ur()];case 3:return t.sent(),this.credentials.uu(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Hu();var e=new hn;return this.Oo.Sr((function(){return t.Qc.K_(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Hu();var i=new yo(t,e,n);return this.Oo.Sr((function(){return r.gd.listen(i)})),i},t.prototype.qc=function(t){var e=this;this.yd||this.Oo.Sr((function(){return e.gd.qc(t)}))},t.prototype.bd=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return this.Hu(),e=new hn,[4,this.Oo.enqueue((function(){return i.__awaiter(n,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.Tc.aa(t)];case 1:return(n=i.sent())instanceof Ie?e.resolve(n):n instanceof Fe?e.resolve(null):e.reject(new M(T.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=i.sent(),o=Mr(r,"Failed to get document '"+t+" from cache"),e.reject(o),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.vd=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return this.Hu(),e=new hn,[4,this.Oo.enqueue((function(){return i.__awaiter(n,void 0,void 0,(function(){var n,r,o,a,s,u;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.Tc.la(t,!0)];case 1:return n=i.sent(),r=new co(t,n._a),o=r.n_(n.documents),a=r.wn(o,!1),e.resolve(a.snapshot),[3,3];case 2:return s=i.sent(),u=Mr(s,"Failed to execute query '"+t+" against cache"),e.reject(u),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.Hu();var n=new hn;return this.Oo.Sr((function(){return e.Qc.write(t,n)})),n.promise},t.prototype.s=function(){return this.Pd.s},t.prototype.lf=function(t){var e=this;this.Hu(),this.Oo.Sr((function(){return e.gd.lf(t),Promise.resolve()}))},t.prototype._f=function(t){var e=this;this.yd||this.Oo.Sr((function(){return e.gd._f(t),Promise.resolve()}))},Object.defineProperty(t.prototype,"yd",{get:function(){return this.Oo.eh},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Hu();var n=new hn;return this.Oo.Sr((function(){return e.Qc.runTransaction(e.Oo,t,n),Promise.resolve()})),n.promise},t}(),Io=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.Sd(this.observer.next,t)},t.prototype.error=function(t){this.Sd(this.observer.error,t)},t.prototype.Dd=function(){this.muted=!0},t.prototype.Sd=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Fo(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Po=function(){function t(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.Cd=n,this.Fd=r}return t.prototype.Nd=function(t){switch(St(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rt(t.integerValue||t.doubleValue);case 3:return this.$d(t.timestampValue);case 4:return this.kd(t);case 5:return t.stringValue;case 6:return new li(Dt(t.bytesValue));case 7:return this.xd(t.referenceValue);case 8:return this.Md(t.geoPointValue);case 9:return this.Ld(t.arrayValue);case 10:return this.Od(t.mapValue);default:throw v()}},t.prototype.Od=function(t){var e=this,n={};return A(t.fields||{},(function(t,r){n[t]=e.Nd(r)})),n},t.prototype.Md=function(t){return new _i(Rt(t.latitude),Rt(t.longitude))},t.prototype.Ld=function(t){var e=this;return(t.values||[]).map((function(t){return e.Nd(t)}))},t.prototype.kd=function(t){switch(this.Cd){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return _t(n)?t(n):n}(t);return null==e?null:this.Nd(e);case"estimate":return this.$d(Ot(t));default:return null}},t.prototype.$d=function(t){var e=Mt(t),n=new R(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.xd=function(t){var e=N.$(t);m(ve(e));var n=new S(e.get(1),e.get(3)),r=new P(e.g(5));return n.isEqual(this.s)||p("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.Fd(r)},t}(),$o=Nr.vh,zo=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new M(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Yr("settings","non-empty string","host",t.host),this.host=t.host,Qr("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(ri("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Qr("settings","object","credentials",t.credentials),this.credentials=t.credentials,Qr("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Qr("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?p("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&p("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,Qr("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Nr.Dh;else{if(t.cacheSizeBytes!==$o&&t.cacheSizeBytes<Nr.Sh)throw new M(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Nr.Sh);this.cacheSizeBytes=t.cacheSizeBytes}Qr("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Bo=function(){function t(e,n,r){var o=this;if(void 0===r&&(r=new Do),this.Bd=null,this.qd=new Tr,this.INTERNAL={delete:function(){return i.__awaiter(o,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Ud(),[4,this.Qd.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var a=e;this.Bd=a,this.qa=t.Wd(a),this.jd=a.name,this.Kd=new Bi(n)}else{var s=e;if(!s.projectId)throw new M(T.INVALID_ARGUMENT,"Must provide projectId");this.qa=new S(s.projectId,s.database),this.jd="[DEFAULT]",this.Kd=new zi}this.Gd=r,this.zd=new zo({})}return Object.defineProperty(t.prototype,"Hd",{get:function(){return this.Yd||(this.Yd=new Ti(this.qa,this.zd.ignoreUndefinedProperties)),this.Yd},enumerable:!0,configurable:!0}),t.prototype.settings=function(t){Hr("Firestore.settings",arguments,1),Gr("Firestore.settings","object",1,t);var e=new zo(t);if(this.Qd&&!this.zd.isEqual(e))throw new M(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.zd=e,void 0!==e.credentials&&(this.Kd=function(t){if(!t)return new zi;switch(t.type){case"gapi":var e=t.Jd;return m(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Wi(e,t.wu||"0");case"provider":return t.Jd;default:throw new M(T.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Ud(),this.Qd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Ud(),this.Qd.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Qd)throw new M(T.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&p("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new M(T.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Xd(this.Gd,{Rd:!0,cacheSizeBytes:this.zd.cacheSizeBytes,synchronizeTabs:r,ir:i})},t.prototype.clearPersistence=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){if(void 0!==this.Qd&&!this.Qd.yd)throw new M(T.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return t=new hn,[2,(this.qd.sh((function(){return i.__awaiter(e,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.Zd(),[4,this.Gd.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"tw",{get:function(){return this.Ud(),this.Qd.yd},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Ud(),this.Qd.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Ud(),Fo(t))return this.ew(t);Gr("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.ew(e)},t.prototype.ew=function(t){var e=this,n=new Io({next:function(){t.next&&t.next()},error:function(t){throw v()}});return this.Qd.lf(n),function(){n.Dd(),e.Qd._f(n)}},t.prototype.Ud=function(){return this.Qd||this.Xd(new Do,{Rd:!1}),this.Qd},t.prototype.Zd=function(){return new k(this.qa,this.jd,this.zd.host,this.zd.ssl,this.zd.forceLongPolling)},t.prototype.Xd=function(t,e){var n=this.Zd();return this.Qd=new No(n,this.Kd,this.qd),this.Qd.start(t,e)},t.Wd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new M(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new M(T.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new S(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Bd)throw new M(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Bd},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return Hr("Firestore.collection",arguments,1),Gr("Firestore.collection","non-empty string",1,t),this.Ud(),new Qo(N.$(t),this,null)},t.prototype.doc=function(t){return Hr("Firestore.doc",arguments,1),Gr("Firestore.doc","non-empty string",1,t),this.Ud(),Ho.sw(N.$(t),this,null)},t.prototype.collectionGroup=function(t){if(Hr("Firestore.collectionGroup",arguments,1),Gr("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new M(T.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Ud(),new Ko(new $e(N.k,t),this,null)},t.prototype.runTransaction=function(t){var e=this;return Hr("Firestore.runTransaction",arguments,1),Gr("Firestore.runTransaction","function",1,t),this.Ud().transaction((function(n){return t(new Uo(e,n))}))},t.prototype.batch=function(){return this.Ud(),new Wo(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(h()){case a.LogLevel.DEBUG:return"debug";case a.LogLevel.ERROR:return"error";case a.LogLevel.SILENT:return"silent";case a.LogLevel.WARN:return"warn";case a.LogLevel.INFO:return"info";case a.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){var e;Hr("Firestore.setLogLevel",arguments,1),Zr("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,f.setLogLevel(e)},t.prototype.nw=function(){return this.zd.timestampsInSnapshots},t}(),Uo=function(){function t(t,e){this.iw=t,this.rw=e}return t.prototype.get=function(t){var e=this;Hr("Transaction.get",arguments,1);var n=ta("Transaction.get",t,this.iw);return this.rw.nc([n.Ua]).then((function(t){if(!t||1!==t.length)return v();var r=t[0];if(r instanceof Fe)return new qo(e.iw,n.Ua,null,!1,!1,n.Qa);if(r instanceof Ie)return new qo(e.iw,n.Ua,r,!1,!1,n.Qa);throw v()}))},t.prototype.set=function(t,e,n){qr("Transaction.set",arguments,2,3);var r=ta("Transaction.set",t,this.iw);n=Xo("Transaction.set",n);var i=na(r.Qa,e,"Transaction.set"),o=i[0],a=i[1],s=this.iw.Hd.Ja(a,o,n);return this.rw.set(r.Ua,s),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof hi?(Vr("Transaction.update",arguments,3),r=ta("Transaction.update",t,this.iw),i=this.iw.Hd.tu("Transaction.update",e,n,o)):(Hr("Transaction.update",arguments,2),r=ta("Transaction.update",t,this.iw),i=this.iw.Hd.Za("Transaction.update",e)),this.rw.update(r.Ua,i),this},t.prototype.delete=function(t){Hr("Transaction.delete",arguments,1);var e=ta("Transaction.delete",t,this.iw);return this.rw.delete(e.Ua),this},t}(),Wo=function(){function t(t){this.iw=t,this.ow=[],this.hw=!1}return t.prototype.set=function(t,e,n){qr("WriteBatch.set",arguments,2,3),this.aw();var r=ta("WriteBatch.set",t,this.iw);n=Xo("WriteBatch.set",n);var i=na(r.Qa,e,"WriteBatch.set"),o=i[0],a=i[1],s=this.iw.Hd.Ja(a,o,n);return this.ow=this.ow.concat(s.Wa(r.Ua,Se.Qe())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.aw(),"string"==typeof e||e instanceof hi?(Vr("WriteBatch.update",arguments,3),r=ta("WriteBatch.update",t,this.iw),i=this.iw.Hd.tu("WriteBatch.update",e,n,o)):(Hr("WriteBatch.update",arguments,2),r=ta("WriteBatch.update",t,this.iw),i=this.iw.Hd.Za("WriteBatch.update",e)),this.ow=this.ow.concat(i.Wa(r.Ua,Se.exists(!0))),this},t.prototype.delete=function(t){Hr("WriteBatch.delete",arguments,1),this.aw();var e=ta("WriteBatch.delete",t,this.iw);return this.ow=this.ow.concat(new Te(e.Ua,Se.Qe())),this},t.prototype.commit=function(){return this.aw(),this.hw=!0,this.ow.length>0?this.iw.Ud().write(this.ow):Promise.resolve()},t.prototype.aw=function(){if(this.hw)throw new M(T.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ho=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.qa,e,r)||this).Ua=e,i.firestore=n,i.Qa=r,i.Qd=i.firestore.Ud(),i}return i.__extends(e,t),e.sw=function(t,n,r){if(t.length%2!=0)throw new M(T.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new e(new P(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.Ua.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Qo(this.Ua.path.p(),this.firestore,this.Qa)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Ua.path.N()},enumerable:!0,configurable:!0}),e.prototype.collection=function(t){if(Hr("DocumentReference.collection",arguments,1),Gr("DocumentReference.collection","non-empty string",1,t),!t)throw new M(T.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=N.$(t);return new Qo(this.Ua.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ii("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Ua.isEqual(t.Ua)&&this.Qa===t.Qa},e.prototype.set=function(t,e){qr("DocumentReference.set",arguments,1,2),e=Xo("DocumentReference.set",e);var n=na(this.Qa,t,"DocumentReference.set"),r=n[0],i=n[1],o=this.firestore.Hd.Ja(i,r,e);return this.Qd.write(o.Wa(this.Ua,Se.Qe()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof hi?(Vr("DocumentReference.update",arguments,2),n=this.firestore.Hd.tu("DocumentReference.update",t,e,r)):(Hr("DocumentReference.update",arguments,1),n=this.firestore.Hd.Za("DocumentReference.update",t)),this.Qd.write(n.Wa(this.Ua,Se.exists(!0)))},e.prototype.delete=function(){return Hr("DocumentReference.delete",arguments,0),this.Qd.write([new Te(this.Ua,Se.Qe())])},e.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];qr("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Fo(t[i])||(ri("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Qr("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Fo(t[i])?n=t[i]:(Gr("DocumentReference.onSnapshot","function",i,t[i]),Kr("DocumentReference.onSnapshot","function",i+1,t[i+1]),Kr("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.uw(o,n)},e.prototype.uw=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Io({next:function(t){if(e.next){var r=t.docs.get(n.Ua);e.next(new qo(n.firestore,n.Ua,r,t.fromCache,t.hasPendingWrites,n.Qa))}},error:r}),o=this.Qd.listen($e.As(this.Ua.path),i,t);return function(){i.Dd(),n.Qd.qc(o)}},e.prototype.get=function(t){var e=this;return qr("DocumentReference.get",arguments,0,1),Jo("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.Ud().bd(e.Ua).then((function(t){n(new qo(e.firestore,e.Ua,t,!0,t instanceof Ie&&t.Xe,e.Qa))}),r):e.cw(n,r,t)}))},e.prototype.cw=function(t,e,n){var r=this.uw({includeMetadataChanges:!0,Af:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new M(T.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new M(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},e.prototype.withConverter=function(t){return new e(this.Ua,this.firestore,t)},e}(Si),Vo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),qo=function(){function t(t,e,n,r,i,o){this.iw=t,this.Ua=e,this.lw=n,this._w=r,this.fw=i,this.Qa=o}return t.prototype.data=function(t){var e=this;if(qr("DocumentSnapshot.data",arguments,0,1),t=Zo("DocumentSnapshot.data",t),this.lw){if(this.Qa){var n=new Go(this.iw,this.Ua,this.lw,this._w,this.fw,null);return this.Qa.fromFirestore(n,t)}return new Po(this.iw.qa,this.iw.nw(),t.serverTimestamps||"none",(function(t){return new Ho(t,e.iw,null)})).Nd(this.lw.fs())}},t.prototype.get=function(t,e){var n=this;if(qr("DocumentSnapshot.get",arguments,1,2),e=Zo("DocumentSnapshot.get",e),this.lw){var r=this.lw.data().field(Ni("DocumentSnapshot.get",t));if(null!==r)return new Po(this.iw.qa,this.iw.nw(),e.serverTimestamps||"none",(function(t){return new Ho(t,n.iw,n.Qa)})).Nd(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.Ua.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ho(this.Ua,this.iw,this.Qa)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.lw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Vo(this.fw,this._w)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw ii("isEqual","DocumentSnapshot",1,e);return this.iw===e.iw&&this._w===e._w&&this.Ua.isEqual(e.Ua)&&(null===this.lw?null===e.lw:this.lw.isEqual(e.lw))&&this.Qa===e.Qa},t}(),Go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(qo),Ko=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.qa,n.Hd,e)||this).dw=e,i.firestore=n,i.Qa=r,i}return i.__extends(e,t),e.prototype.where=function(t,n,r){Hr("Query.where",arguments,3),ni("Query.where",3,r);var i=Zr("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),o=Ni("Query.where",t),a=this.ww(o,i,r);return new e(this.dw.Ps(a),this.firestore,this.Qa)},e.prototype.orderBy=function(t,n){var r;if(qr("Query.orderBy",arguments,1,2),Kr("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new M(T.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Ni("Query.orderBy",t),o=this.Aw(i,r);return new e(this.dw.Vs(o),this.firestore,this.Qa)},e.prototype.limit=function(t){return Hr("Query.limit",arguments,1),Gr("Query.limit","number",1,t),oi("Query.limit",1,t),new e(this.dw.gs(t),this.firestore,this.Qa)},e.prototype.limitToLast=function(t){return Hr("Query.limitToLast",arguments,1),Gr("Query.limitToLast","number",1,t),oi("Query.limitToLast",1,t),new e(this.dw.ps(t),this.firestore,this.Qa)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vr("Query.startAt",arguments,1);var i=this.pw("Query.startAt",t,n,!0);return new e(this.dw.ys(i),this.firestore,this.Qa)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vr("Query.startAfter",arguments,1);var i=this.pw("Query.startAfter",t,n,!1);return new e(this.dw.ys(i),this.firestore,this.Qa)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vr("Query.endBefore",arguments,1);var i=this.pw("Query.endBefore",t,n,!0);return new e(this.dw.bs(i),this.firestore,this.Qa)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vr("Query.endAt",arguments,1);var i=this.pw("Query.endAt",t,n,!1);return new e(this.dw.bs(i),this.firestore,this.Qa)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ii("isEqual","Query",1,t);return this.firestore===t.firestore&&this.dw.isEqual(t.dw)&&this.Qa===t.Qa},e.prototype.withConverter=function(t){return new e(this.dw,this.firestore,t)},e.prototype.pw=function(t,e,n,r){if(ni(t,1,e),e instanceof qo)return Hr(t,i.__spreadArrays([e],n),1),this.mw(t,e.lw,r);var o=[e].concat(n);return this.Pw(t,o,r)},e.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];qr("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Fo(t[i])||(ri("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Qr("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Fo(t[i])?n=t[i]:(Gr("Query.onSnapshot","function",i,t[i]),Kr("Query.onSnapshot","function",i+1,t[i+1]),Kr("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.Vw(this.dw),this.uw(r,n)},e.prototype.uw=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Io({next:function(t){e.next&&e.next(new Yo(n.firestore,n.dw,t,n.Qa))},error:r}),o=this.firestore.Ud(),a=o.listen(this.dw,i,t);return function(){i.Dd(),o.qc(a)}},e.prototype.get=function(t){var e=this;return qr("Query.get",arguments,0,1),Jo("Query.get",t),this.Vw(this.dw),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.Ud().vd(e.dw).then((function(t){n(new Yo(e.firestore,e.dw,t,e.Qa))}),r):e.cw(n,r,t)}))},e.prototype.cw=function(t,e,n){var r=this.uw({includeMetadataChanges:!0,Af:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new M(T.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},e}(function(){function t(t,e,n){this.qa=t,this.Hd=e,this.dw=n}return t.prototype.ww=function(t,e,n){var r;if(t.L()){if("array-contains"===e||"array-contains-any"===e)throw new M(T.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.Tw(n,e);for(var i=[],o=0,a=n;o<a.length;o++){var s=a[o];i.push(this.Ew(s))}r={arrayValue:{values:i}}}else r=this.Ew(n)}else"in"!==e&&"array-contains-any"!==e||this.Tw(n,e),r=this.Hd.eu("Query.where",n,"in"===e);var u=ze.create(t,e,r);return this.Iw(u),u},t.prototype.Aw=function(t,e){if(null!==this.dw.startAt)throw new M(T.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.dw.endAt)throw new M(T.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new Qe(t,e);return this.Rw(n),n},t.prototype.mw=function(t,e,n){if(!e)throw new M(T.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.dw.orderBy;i<o.length;i++){var a=o[i];if(a.field.L())r.push(Lt(this.qa,e.key));else{var s=e.field(a.field);if(_t(s))throw new M(T.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.N();throw new M(T.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new qe(r,n)},t.prototype.Pw=function(t,e,n){var r=this.dw.ds;if(e.length>r.length)throw new M(T.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.L()){if("string"!=typeof a)throw new M(T.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this.dw.Bs()&&-1!==a.indexOf("/"))throw new M(T.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this.dw.path.child(N.$(a));if(!P.W(s))throw new M(T.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new P(s);i.push(Lt(this.qa,u))}else{var c=this.Hd.eu(t,a);i.push(c)}}return new qe(i,n)},t.prototype.Vw=function(t){if(t.xs()&&0===t.ds.length)throw new M(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.Ew=function(t){if("string"==typeof t){if(""===t)throw new M(T.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.dw.Bs()&&-1!==t.indexOf("/"))throw new M(T.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.dw.path.child(N.$(t));if(!P.W(e))throw new M(T.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Lt(this.qa,new P(e))}if(t instanceof Si)return Lt(this.qa,t.Ua);throw new M(T.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ei(t)+".")},t.prototype.Tw=function(t,e){if(!Array.isArray(t)||0===t.length)throw new M(T.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new M(T.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new M(T.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new M(T.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Iw=function(t){if(t instanceof ze){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.Ms()){var o=this.dw.Rs();if(null!==o&&!o.isEqual(t.field))throw new M(T.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this.dw.ms();null!==a&&this.gw(t.field,a)}else if(i||r){var s=null;if(i&&(s=this.dw.Ls(n)),null===s&&r&&(s=this.dw.Ls(e)),null!=s)throw s===t.op?new M(T.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new M(T.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},t.prototype.Rw=function(t){if(null===this.dw.ms()){var e=this.dw.Rs();null!==e&&this.gw(e,t.field)}},t.prototype.gw=function(t,e){if(!e.isEqual(t))throw new M(T.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}()),Yo=function(){function t(t,e,n,r){this.iw=t,this.yw=e,this.bw=n,this.Qa=r,this.vw=null,this.Sw=null,this.metadata=new Vo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.bw.docs._()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.bw.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;qr("QuerySnapshot.forEach",arguments,1,2),Gr("QuerySnapshot.forEach","function",1,t),this.bw.docs.forEach((function(r){t.call(e,n.Dw(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Ko(this.yw,this.iw,this.Qa)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(ri("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Qr("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.bw.qt)throw new M(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.vw&&this.Sw===e||(this.vw=function(t,e,n,r){if(n.Lt._()){var i=0;return n.docChanges.map((function(e){var o=new Go(t,e.doc.key,e.doc,n.fromCache,n.Ot.has(e.doc.key),r);return e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}}))}var o=n.Lt;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new Go(t,e.doc.key,e.doc,n.fromCache,n.Ot.has(e.doc.key),r),a=-1,s=-1;return 0!==e.type&&(a=o.indexOf(e.doc.key),o=o.delete(e.doc.key)),1!==e.type&&(s=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:ea(e.type),doc:i,oldIndex:a,newIndex:s}}))}(this.iw,e,this.bw,this.Qa),this.Sw=e),this.vw},t.prototype.isEqual=function(e){if(!(e instanceof t))throw ii("isEqual","QuerySnapshot",1,e);return this.iw===e.iw&&this.yw.isEqual(e.yw)&&this.bw.isEqual(e.bw)&&this.Qa===e.Qa},t.prototype.Dw=function(t){return new Go(this.iw,t.key,t,this.metadata.fromCache,this.bw.Ot.has(t.key),this.Qa)},t}(),Qo=function(t){function e(e,n,r){var i=this;if((i=t.call(this,$e.As(e),n,r)||this).Cw=e,e.length%2!=1)throw new M(T.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.N()+" has "+e.length);return i}return i.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.dw.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.dw.path.p();return t._()?null:new Ho(new P(t),this.firestore,null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.dw.path.N()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){qr("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=w.t()),Gr("CollectionReference.doc","non-empty string",1,t);var e=N.$(t);return Ho.sw(this.dw.path.child(e),this.firestore,this.Qa)},e.prototype.add=function(t){Hr("CollectionReference.add",arguments,1),Gr("CollectionReference.add","object",1,this.Qa?this.Qa.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.Cw,this.firestore,t)},e}(Ko);function Xo(t,e){if(void 0===e)return{merge:!1};if(ri(t,e,["merge","mergeFields"]),Qr(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new M(T.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+ei(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new M(T.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+ei(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof hi}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new M(T.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Zo(t,e){return void 0===e?{}:(ri(t,e,["serverTimestamps"]),Xr(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Jo(t,e){Kr(t,"object",1,e),e&&(ri(t,e,["source"]),Xr(t,0,"source",e.source,["default","server","cache"]))}function ta(t,e,n){if(e instanceof Si){if(e.firestore!==n)throw new M(T.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw ii(t,"DocumentReference",1,e)}function ea(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v()}}function na(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var ra=["length","name"];function ia(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new M(T.INVALID_ARGUMENT,t)}for(var r=0,i=Object.getOwnPropertyNames(t);r<i.length;r++){var o=i[r];-1===ra.indexOf(o)&&(n[o]=t[o])}return n}var oa=ia(Bo,"Use firebase.firestore() instead."),aa=ia(Uo,"Use firebase.firestore().runTransaction() instead."),sa=ia(Wo,"Use firebase.firestore().batch() instead."),ua=ia(Ho,"Use firebase.firestore().doc() instead."),ca=ia(qo),la=ia(Go),fa=ia(Ko),ha=ia(Yo),da=ia(Qo,"Use firebase.firestore().collection() instead."),pa=ia(wi,"Use FieldValue.<field>() instead."),ga=ia(li,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),va={Firestore:oa,GeoPoint:_i,Timestamp:R,Blob:ga,Transaction:aa,WriteBatch:sa,DocumentReference:ua,DocumentSnapshot:ca,Query:fa,QueryDocumentSnapshot:la,QuerySnapshot:ha,CollectionReference:da,FieldPath:hi,FieldValue:pa,setLogLevel:Bo.setLogLevel,CACHE_SIZE_UNLIMITED:$o};function ma(t){!function(t,e){t.INTERNAL.registerComponent(new c.Component("firestore",(function(t){return function(t,e){return new Bo(t,e,new Lo)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},va)))}(t),t.registerVersion("@firebase/firestore","1.15.5")}ma(o),e.__PRIVATE_registerFirestore=ma},function(t,e,n){"use strict";n.r(e),function(t){function r(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}n.d(e,"ErrorCode",(function(){return Qn})),n.d(e,"EventType",(function(){return Xn})),n.d(e,"WebChannel",(function(){return Zn})),n.d(e,"XhrIo",(function(){return Jn})),n.d(e,"createWebChannelTransport",(function(){return Yn}));var i,o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},a=a||{},s=o||self;function u(){}function c(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function l(t){var e=c(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var h="closure_uid_"+(1e9*Math.random()>>>0),d=0;function p(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function v(t,e,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:g).apply(null,arguments)}function m(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var y=Date.now||function(){return+new Date};function b(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.da=function(){if(!this.j&&(this.j=!0,this.C(),0))(function(t){Object.prototype.hasOwnProperty.call(t,h)&&t[h]||(t[h]=++d)})(this)},w.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var x=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},_=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function O(t){return Array.prototype.concat.apply([],arguments)}function k(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function S(t){return/^[\s\xa0]*$/.test(t)}var E,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function C(t,e){return-1!=t.indexOf(e)}function j(t,e){return t<e?-1:t>e?1:0}t:{var T=s.navigator;if(T){var M=T.userAgent;if(M){E=M;break t}}E=""}function R(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function D(t){var e={};for(var n in t)e[n]=t[n];return e}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<L.length;o++)n=L[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function I(t){return I[" "](t),t}I[" "]=u;var F,P=C(E,"Opera"),$=C(E,"Trident")||C(E,"MSIE"),z=C(E,"Edge"),B=z||$,U=C(E,"Gecko")&&!(C(E.toLowerCase(),"webkit")&&!C(E,"Edge"))&&!(C(E,"Trident")||C(E,"MSIE"))&&!C(E,"Edge"),W=C(E.toLowerCase(),"webkit")&&!C(E,"Edge");function H(){var t=s.document;return t?t.documentMode:void 0}t:{var V="",q=function(){var t=E;return U?/rv:([^\);]+)(\)|;)/.exec(t):z?/Edge\/([\d\.]+)/.exec(t):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):W?/WebKit\/(\S+)/.exec(t):P?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(q&&(V=q?q[1]:""),$){var G=H();if(null!=G&&G>parseFloat(V)){F=String(G);break t}}F=V}var K,Y={};function Q(t){return function(t,e){var n=Y;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=A(String(F)).split("."),r=A(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=j(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||j(0==a[2].length,0==s[2].length)||j(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(s.document&&$){var X=H();K=X||(parseInt(F,10)||void 0)}else K=void 0;var Z=K,J=!$||9<=Number(Z),tt=$&&!Q("9"),et=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",u,e),s.removeEventListener("test",u,e)}catch(n){}return t}();function nt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function rt(t,e){if(nt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(U){t:{try{I(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:it[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}nt.prototype.b=function(){this.defaultPrevented=!0},b(rt,nt);var it={2:"touch",3:"pen",4:"mouse"};rt.prototype.b=function(){rt.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,tt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ot="closure_listenable_"+(1e6*Math.random()|0),at=0;function st(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++at,this.V=this.X=!1}function ut(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function ct(t){this.src=t,this.a={},this.b=0}function lt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=x(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ut(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ft(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}ct.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ft(t,e,r,i);return-1<a?(e=t[a],n||(e.X=!1)):((e=new st(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var ht="closure_lm_"+(1e6*Math.random()|0),dt={};function pt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=_t(r),e&&e[ot]?e.sa(n,r,f(i)?!!i.capture:!!i,o):gt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)pt(t,e[o],n,r,i);return null}return n=_t(n),t&&t[ot]?t.ra(e,n,f(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i;if(a&&!J)return null;var s=wt(t);if(s||(t[ht]=s=new ct(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=bt,e=J?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)et||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function vt(t){if("number"!==typeof t&&t&&!t.V){var e=t.src;if(e&&e[ot])lt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wt(e))?(lt(n,t),0==n.b&&(n.src=null,e[ht]=null)):ut(t)}}}function mt(t){return t in dt?dt[t]:dt[t]="on"+t}function yt(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&vt(t),n.call(r,e)}function bt(t,e){if(t.V)return!0;if(!J){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return yt(t,e=new rt(e,this))}return yt(t,new rt(e,this))}function wt(t){return(t=t[ht])instanceof ct?t:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(t){return"function"==c(t)?t:(t[xt]||(t[xt]=function(e){return t.handleEvent(e)}),t[xt])}function Ot(){w.call(this),this.c=new ct(this),this.J=this,this.A=null}function kt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.V&&a.capture==n){var s=a.listener,u=a.aa||a.src;a.X&&lt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}b(Ot,w),Ot.prototype[ot]=!0,(i=Ot.prototype).addEventListener=function(t,e,n,r){pt(this,t,e,n,r)},i.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=f(i)?!!i.capture:!!i,r=_t(r),e&&e[ot]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=ft(a=e.a[n],r,i,o))&&(ut(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--)))):e&&(e=wt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ft(n,r,i,o)),(r=-1<e?n[e]:null)&&vt(r))}(this,t,e,n,r)},i.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"===typeof t)t=new nt(t,n);else if(t instanceof nt)t.target=t.target||n;else{var i=t;N(t=new nt(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=kt(a,r,!0,t)&&i}if(i=kt(a=t.a=n,r,!0,t)&&i,i=kt(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kt(a=t.a=e[o],r,!1,t)&&i;return i},i.C=function(){if(Ot.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ut(n[r]);delete e.a[t],e.b--}}this.A=null},i.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},i.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var St=s.JSON.stringify;function Et(){this.b=this.a=null}var At,Ct=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Tt}),(function(t){t.reset()}),100);function jt(){var t=Lt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Tt(){this.next=this.b=this.a=null}function Mt(t){s.setTimeout((function(){throw t}),0)}function Rt(t,e){At||function(){var t=s.Promise.resolve(void 0);At=function(){t.then(Nt)}}(),Dt||(At(),Dt=!0),Lt.add(t,e)}Et.prototype.add=function(t,e){var n=Ct.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Tt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Tt.prototype.reset=function(){this.next=this.b=this.a=null};var Dt=!1,Lt=new Et;function Nt(){for(var t;t=jt();){try{t.a.call(t.b)}catch(n){Mt(n)}var e=Ct;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Dt=!1}function It(t,e){Ot.call(this),this.b=t||1,this.a=e||s,this.f=v(this.Ua,this),this.g=y()}function Ft(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Pt(t,e,n){if("function"==c(t))n&&(t=v(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=v(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function $t(t,e,n){w.call(this),this.f=null!=n?v(t,n):t,this.c=e,this.b=v(this.Pa,this),this.a=[]}function zt(t){t.T=Pt(t.b,t.c),t.f.apply(null,t.a)}function Bt(t){w.call(this),this.b=t,this.a={}}b(It,Ot),(i=It.prototype).Z=!1,i.L=null,i.Ua=function(){if(this.Z){var t=y()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(Ft(this),this.start()))}},i.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=y())},i.C=function(){It.M.C.call(this),Ft(this),delete this.a},b($t,w),(i=$t.prototype).ba=!1,i.T=null,i.Ia=function(t){this.a=arguments,this.T?this.ba=!0:zt(this)},i.C=function(){$t.M.C.call(this),this.T&&(s.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},i.Pa=function(){this.T=null,this.ba&&(this.ba=!1,zt(this))},b(Bt,w);var Ut=[];function Wt(t,e,n,r){Array.isArray(n)||(n&&(Ut[0]=n.toString()),n=Ut);for(var i=0;i<n.length;i++){var o=pt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ht(t){R(t.a,(function(t,e){this.a.hasOwnProperty(e)&&vt(t)}),t),t.a={}}function Vt(){}Bt.prototype.C=function(){Bt.M.C.call(this),Ht(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qt=null;function Gt(){return qt=qt||new Ot}function Kt(t){nt.call(this,"serverreachability",t)}function Yt(t){var e=Gt();e.dispatchEvent(new Kt(e,t))}function Qt(t){nt.call(this,"statevent",t)}function Xt(t){var e=Gt();e.dispatchEvent(new Qt(e,t))}function Zt(t){nt.call(this,"timingevent",t)}function Jt(t,e){if("function"!=c(t))throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){t()}),e)}b(Kt,nt),b(Qt,nt),b(Zt,nt);var te={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},ee={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function ne(){}function re(t){var e;return(e=t.a)||(e=t.a={}),e}function ie(){}ne.prototype.a=null;var oe,ae={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function se(){nt.call(this,"d")}function ue(){nt.call(this,"c")}function ce(){}function le(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new Bt(this),this.N=fe,t=B?125:void 0,this.O=new It(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}b(se,nt),b(ue,nt),b(ce,ne),oe=new ce;var fe=45e3,he={},de={};function pe(t,e,n){t.B=1,t.f=Ie(Te(e)),t.j=n,t.F=!0,ge(t,null)}function ge(t,e){t.s=y(),ye(t),t.A=Te(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Ye(n.b,"t",r),t.w=0,t.a=Bn(t.g,t.g.w?e:null),0<t.J&&(t.D=new $t(v(t.ya,t,t.a),t.J)),Wt(t.G,t.a,"readystatechange",t.Sa),e=t.m?D(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),Yt(1)}function ve(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=me(t,n);if(i==de){4==e&&(t.c=4,Xt(14),r=!1);break}if(i==he){t.c=4,Xt(15),r=!1;break}Oe(t,i)}4==e&&0==n.length&&(t.c=1,Xt(16),r=!1),t.b=t.b&&r,r||(_e(t),xe(t))}function me(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?de:(n=Number(e.substring(n,r)),isNaN(n)?he:(r+=1)+n>e.length?de:(e=e.substr(r,n),t.w=r+n,e))}function ye(t){t.P=y()+t.N,be(t,t.N)}function be(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=Jt(v(t.Qa,t),e)}function we(t){t.h&&(s.clearTimeout(t.h),t.h=null)}function xe(t){0==t.g.u||t.l||In(t.g,t)}function _e(t){we(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,Ft(t.O),Ht(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function Oe(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||nn(n.b,t)))if(n.A=t.H,!t.o&&nn(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;Nn(n),n.a.cancel(),n.a=null}Ln(n),Xt(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=Jt(v(n.Na,n),6e3));if(1>=en(n.b)&&n.O){try{n.O()}catch(g){}n.O=void 0}}else Pn(n,11)}else if((t.o||n.a==t)&&Nn(n),!S(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var a=i[5];null!=a&&"number"===typeof a&&0<a&&(n.D=1.5*a);var s=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var l=s.b;!l.a&&(C(c,"spdy")||C(c,"quic")||C(c,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(rn(l,l.b),l.b=null))}if(s.s){var f=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(s.ha=f,Ne(s.v,s.s,f))}}n.u=3,n.c&&n.c.na();var h=t;if((s=n).ea=zn(s,s.w?s.R:null,s.P),h.o){on(s.b,h);var d=h,p=s.D;p&&d.setTimeout(p),d.h&&(we(d),ye(d)),s.a=h}else Dn(s);0<n.f.length&&jn(n)}else"stop"!=i[0]&&"close"!=i[0]||Pn(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Pn(n,7):En(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);Yt(4)}catch(g){}}function ke(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"===typeof t)_(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(l(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"===typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Se(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Se)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ee(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ae(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ae(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(i=le.prototype).setTimeout=function(t){this.N=t},i.Sa=function(t){t=t.target;var e=this.D;e&&3==_n(t)?e.Ia():this.ya(t)},i.ya=function(t){try{if(t==this.a)t:{var e=_n(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!B&&!this.a.Y())){this.l||4!=e||7==n||Yt(8==n||0>=r?3:2),we(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.c=3,Xt(12),_e(this),xe(this);break t}this.o=!0,Oe(this,u)}this.F?(ve(this,e,o),B&&this.b&&3==e&&(Wt(this.G,this.O,"tick",this.Ra),this.O.start())):Oe(this,o),4==e&&_e(this),this.b&&!this.l&&(4==e?In(this.g,this):(this.b=!1,ye(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Xt(12)):(this.c=0,Xt(13)),_e(this),xe(this)}}}catch(c){}},i.Ra=function(){if(this.a){var t=_n(this.a),e=this.a.Y();this.w<e.length&&(we(this),ve(this,t,e),this.b&&4!=t&&ye(this))}},i.cancel=function(){this.l=!0,_e(this)},i.Qa=function(){this.h=null;var t=y();0<=t-this.P?(2!=this.B&&(Yt(3),Xt(17)),_e(this),this.c=2,xe(this)):be(this,this.P-t)},(i=Se.prototype).I=function(){Ee(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},i.K=function(){return Ee(this),this.a.concat()},i.get=function(t,e){return Ae(this.b,t)?this.b[t]:e},i.set=function(t,e){Ae(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},i.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ce=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function je(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof je){this.a=void 0!==e?e:t.a,Me(this,t.f),this.j=t.j,Re(this,t.c),De(this,t.h),this.g=t.g,e=t.b;var n=new Ve;n.c=e.c,e.a&&(n.a=new Se(e.a),n.b=e.b),Le(this,n),this.i=t.i}else t&&(n=String(t).match(Ce))?(this.a=!!e,Me(this,n[1]||"",!0),this.j=Fe(n[2]||""),Re(this,n[3]||"",!0),De(this,n[4]),this.g=Fe(n[5]||"",!0),Le(this,n[6]||"",!0),this.i=Fe(n[7]||"")):(this.a=!!e,this.b=new Ve(null,this.a))}function Te(t){return new je(t)}function Me(t,e,n){t.f=n?Fe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Re(t,e,n){t.c=n?Fe(e,!0):e}function De(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Le(t,e,n){e instanceof Ve?(t.b=e,function(t,e){e&&!t.f&&(qe(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ge(this,e),Ye(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Pe(e,We)),t.b=new Ve(e,t.a))}function Ne(t,e,n){t.b.set(e,n)}function Ie(t){return Ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^y()).toString(36)),t}function Fe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pe(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,$e),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $e(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}je.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Pe(e,ze,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Pe(e,ze,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Pe(n,"/"==n.charAt(0)?Ue:Be,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Pe(n,He)),t.join("")};var ze=/[#\/\?@]/g,Be=/[#\?:]/g,Ue=/[#\?]/g,We=/[#\?@]/g,He=/#/g;function Ve(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qe(t){t.a||(t.a=new Se,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ge(t,e){qe(t),e=Qe(t,e),Ae(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ee(t)))}function Ke(t,e){return qe(t),e=Qe(t,e),Ae(t.a.b,e)}function Ye(t,e,n){Ge(t,e),0<n.length&&(t.c=null,t.a.set(Qe(t,e),k(n)),t.b+=n.length)}function Qe(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Xe(t,e){this.b=t,this.a=e}function Ze(t){this.g=t||Je,s.PerformanceNavigationTiming?t=0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(s.ca&&s.ca.ua&&s.ca.ua()&&s.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(i=Ve.prototype).add=function(t,e){qe(this),this.c=null,t=Qe(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},i.forEach=function(t,e){qe(this),this.a.forEach((function(n,r){_(n,(function(n){t.call(e,n,r,this)}),this)}),this)},i.K=function(){qe(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},i.I=function(t){qe(this);var e=[];if("string"===typeof t)Ke(this,t)&&(e=O(e,this.a.get(Qe(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=O(e,t[n])}return e},i.set=function(t,e){return qe(this),this.c=null,Ke(this,t=Qe(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},i.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},i.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Je=10;function tn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function en(t){return t.b?1:t.a?t.a.size:0}function nn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function rn(t,e){t.a?t.a.add(e):t.b=e}function on(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function an(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var i=t.c;try{for(var o=r(t.a.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i.concat(s.i)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}return k(t.c)}function sn(){}function un(){this.a=new sn}function cn(t,e,n){var r=n||"";try{ke(t,(function(t,n){var i=t;f(t)&&(i=St(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ln(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Ze.prototype.cancel=function(){var t,e;if(this.c=an(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=r(this.a.values()),i=n.next();!i.done;i=n.next()){i.value.cancel()}}catch(o){t={error:o}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},sn.prototype.stringify=function(t){return s.JSON.stringify(t,void 0)},sn.prototype.parse=function(t){return s.JSON.parse(t,void 0)};var fn=s.JSON.parse;function hn(t){Ot.call(this),this.headers=new Se,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=dn,this.B=this.F=!1}b(hn,Ot);var dn="",pn=/^https?$/i,gn=["POST","PUT"];function vn(t){return"content-type"==t.toLowerCase()}function mn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,yn(t),wn(t)}function yn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function bn(t){if(t.b&&"undefined"!=typeof a&&(!t.s[1]||4!=_n(t)||2!=t.S()))if(t.l&&4==_n(t))Pt(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==_n(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(Ce)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!pn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<_n(t)?t.a.statusText:""}catch(l){c=""}t.f=c+" ["+t.S()+"]",yn(t)}}finally{wn(t)}}}function wn(t,e){if(t.a){xn(t);var n=t.a,r=t.s[0]?u:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function xn(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(s.clearTimeout(t.m),t.m=null)}function _n(t){return t.a?t.a.readyState:0}function On(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return R(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Ne(t,e,n))}function kn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sn(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=kn("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=kn("baseRetryDelayMs",5e3,t),this.Ga=kn("retryDelaySeedMs",1e4,t),this.Da=kn("forwardChannelMaxRetries",2,t),this.ga=kn("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Ze(t&&t.concurrentRequestLimit),this.ja=new un,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function En(t){if(An(t),3==t.u){var e=t.H++,n=Te(t.v);Ne(n,"SID",t.B),Ne(n,"RID",e),Ne(n,"TYPE","terminate"),Mn(t,n),(e=new le(t,e,void 0)).B=2,e.f=Ie(Te(n)),n=!1,s.navigator&&s.navigator.sendBeacon&&(n=s.navigator.sendBeacon(e.f.toString(),"")),!n&&s.Image&&((new Image).src=e.f,n=!0),n||(e.a=Bn(e.g,null),e.a.$(e.f)),e.s=y(),ye(e)}$n(t)}function An(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(s.clearTimeout(t.i),t.i=null),Nn(t),t.b.cancel(),t.g&&("number"===typeof t.g&&s.clearTimeout(t.g),t.g=null)}function Cn(t,e){t.f.push(new Xe(t.Fa++,e)),3==t.u&&jn(t)}function jn(t){tn(t.b)||t.g||(t.g=!0,Rt(t.xa,t),t.o=0)}function Tn(t,e){var n;n=e?e.W:t.H++;var r=Te(t.v);Ne(r,"SID",t.B),Ne(r,"RID",n),Ne(r,"AID",t.G),Mn(t,r),t.h&&t.j&&On(r,t.h,t.j),n=new le(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=Rn(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),rn(t.b,n),pe(n,r,e)}function Mn(t,e){t.c&&ke({},(function(t,n){Ne(e,n,t)}))}function Rn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?v(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{cn(l,a,"req"+c+"_")}catch(f){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function Dn(t){t.a||t.i||(t.J=1,Rt(t.wa,t),t.m=0)}function Ln(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=Jt(v(t.wa,t),Fn(t,t.m)),t.m++,!0)}function Nn(t){null!=t.l&&(s.clearTimeout(t.l),t.l=null)}function In(t,e){var n=null;if(t.a==e){Nn(t),t.a=null;var r=2}else{if(!nn(t.b,e))return;n=e.i,on(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=y()-e.s;var i=t.o;(r=Gt()).dispatchEvent(new Zt(r,n,e,i)),jn(t)}else Dn(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(en(t.b)>=t.b.f-(t.g?1:0))&&(t.g?(t.f=e.i.concat(t.f),!0):!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da))&&(t.g=Jt(v(t.xa,t,e),Fn(t,t.o)),t.o++,!0))}(t,e)||2==r&&Ln(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Pn(t,5);break;case 4:Pn(t,10);break;case 3:Pn(t,6);break;default:Pn(t,2)}}function Fn(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function Pn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=v(t.Ta,t);n||(n=new je("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||Me(n,"https"),Ie(n)),function(t,e){var n=new Vt;if(s.Image){var r=new Image;r.onload=m(ln,n,r,"TestLoadImage: loaded",!0,e),r.onerror=m(ln,n,r,"TestLoadImage: error",!1,e),r.onabort=m(ln,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=m(ln,n,r,"TestLoadImage: timeout",!1,e),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Xt(2);t.u=0,t.c&&t.c.la(e),$n(t),An(t)}function $n(t){t.u=0,t.A=-1,t.c&&(0==an(t.b).length&&0==t.f.length||(t.b.c.length=0,k(t.f),t.f.length=0),t.c.ka())}function zn(t,e,n){var r=function(t){return t instanceof je?Te(t):new je(t,void 0)}(n);if(""!=r.c)e&&Re(r,e+"."+r.c),De(r,r.h);else{var i=s.location;r=function(t,e,n,r){var i=new je(null,void 0);return t&&Me(i,t),e&&Re(i,e),n&&De(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&R(t.N,(function(t,e){Ne(r,e,t)})),e=t.s,n=t.ha,e&&n&&Ne(r,e,n),Ne(r,"VER",t.oa),Mn(t,r),r}function Bn(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hn(t.Ea)).F=t.w,e}function Un(){}function Wn(){if($&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function Hn(t,e){Ot.call(this),this.a=new Sn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!S(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!S(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Gn(this)}function Vn(t){se.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function qn(){ue.call(this),this.status=1}function Gn(t){this.a=t}(i=hn.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?re(this.G):re(oe),this.a.onreadystatechange=v(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void mn(this,o)}t=n||"";var i=new Se(this.headers);r&&ke(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=vn,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.K()),n=s.FormData&&t instanceof s.FormData,!(0<=x(gn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.B=function(t){return $&&Q(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=v(this.ta,this)):this.m=Pt(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){mn(this,o)}},i.ta=function(){"undefined"!=typeof a&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},i.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),wn(this))},i.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),wn(this,!0)),hn.M.C.call(this)},i.va=function(){this.j||(this.w||this.l||this.g?bn(this):this.Oa())},i.Oa=function(){bn(this)},i.S=function(){try{return 2<_n(this)?this.a.status:-1}catch(t){return-1}},i.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},i.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),fn(e)}},i.qa=function(){return this.h},i.Ma=function(){return"string"===typeof this.f?this.f:String(this.f)},(i=Sn.prototype).oa=8,i.u=1,i.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new le(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?N(r=D(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"===typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Rn(this,n,e),Ne(i=Te(this.v),"RID",t),Ne(i,"CVER",22),this.s&&Ne(i,"X-HTTP-Session-Id",this.s),Mn(this,i),this.h&&r&&On(i,this.h,r),rn(this.b,n),this.fa?(Ne(i,"$req",e),Ne(i,"SID","null"),n.R=!0,pe(n,i,null)):pe(n,i,e),this.u=2}}else 3==this.u&&(t?Tn(this,t):0==this.f.length||tn(this.b)||Tn(this))},i.wa=function(){this.i=null,this.a=new le(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=Te(this.ea);Ne(t,"RID","rpc"),Ne(t,"SID",this.B),Ne(t,"CI",this.U?"0":"1"),Ne(t,"AID",this.G),Mn(this,t),Ne(t,"TYPE","xmlhttp"),this.h&&this.j&&On(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=Ie(Te(t)),e.j=null,e.F=!0,ge(e,n)},i.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,Ln(this),Xt(19))},i.Ta=function(t){Xt(t?2:1)},(i=Un.prototype).na=function(){},i.ma=function(){},i.la=function(){},i.ka=function(){},i.Ha=function(){},Wn.prototype.a=function(t,e){return new Hn(t,e)},b(Hn,Ot),(i=Hn.prototype).addEventListener=function(t,e,n,r){Hn.M.addEventListener.call(this,t,e,n,r)},i.removeEventListener=function(t,e,n,r){Hn.M.removeEventListener.call(this,t,e,n,r)},i.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Xt(0),t.P=e,t.N=n||{},t.U=t.W,t.v=zn(t,null,t.P),jn(t)},i.close=function(){En(this.a)},i.La=function(t){if("string"===typeof t){var e={};e.__data__=t,Cn(this.a,e)}else this.g?((e={}).__data__=St(t),Cn(this.a,e)):Cn(this.a,t)},i.C=function(){this.a.c=null,delete this.f,En(this.a),delete this.a,Hn.M.C.call(this)},b(Vn,se),b(qn,ue),b(Gn,Un),Gn.prototype.na=function(){this.a.dispatchEvent("a")},Gn.prototype.ma=function(t){this.a.dispatchEvent(new Vn(t))},Gn.prototype.la=function(t){this.a.dispatchEvent(new qn(t))},Gn.prototype.ka=function(){this.a.dispatchEvent("b")},Wn.prototype.createWebChannel=Wn.prototype.a,Hn.prototype.send=Hn.prototype.La,Hn.prototype.open=Hn.prototype.Ka,Hn.prototype.close=Hn.prototype.close,te.NO_ERROR=0,te.TIMEOUT=8,te.HTTP_ERROR=6,ee.COMPLETE="complete",ie.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",Ot.prototype.listen=Ot.prototype.ra,hn.prototype.listenOnce=hn.prototype.sa,hn.prototype.getLastError=hn.prototype.Ma,hn.prototype.getLastErrorCode=hn.prototype.qa,hn.prototype.getStatus=hn.prototype.S,hn.prototype.getResponseJson=hn.prototype.Ja,hn.prototype.getResponseText=hn.prototype.Y,hn.prototype.send=hn.prototype.$;var Kn={createWebChannelTransport:function(){return new Wn},ErrorCode:te,EventType:ee,WebChannel:ie,XhrIo:hn},Yn=Kn.createWebChannelTransport,Qn=Kn.ErrorCode,Xn=Kn.EventType,Zn=Kn.WebChannel,Jn=Kn.XhrIo;e.default=Kn}.call(this,n(41))},function(t,e,n){(function(t){ace.define("ace/theme/github",["require","exports","module","ace/lib/dom"],(function(t,e,n){e.isDark=!1,e.cssClass="ace-github",e.cssText='.ace-github .ace_gutter {background: #e8e8e8;color: #AAA;}.ace-github  {background: #fff;color: #000;}.ace-github .ace_keyword {font-weight: bold;}.ace-github .ace_string {color: #D14;}.ace-github .ace_variable.ace_class {color: teal;}.ace-github .ace_constant.ace_numeric {color: #099;}.ace-github .ace_constant.ace_buildin {color: #0086B3;}.ace-github .ace_support.ace_function {color: #0086B3;}.ace-github .ace_comment {color: #998;font-style: italic;}.ace-github .ace_variable.ace_language  {color: #0086B3;}.ace-github .ace_paren {font-weight: bold;}.ace-github .ace_boolean {font-weight: bold;}.ace-github .ace_string.ace_regexp {color: #009926;font-weight: normal;}.ace-github .ace_variable.ace_instance {color: teal;}.ace-github .ace_constant.ace_language {font-weight: bold;}.ace-github .ace_cursor {color: black;}.ace-github.ace_focus .ace_marker-layer .ace_active-line {background: rgb(255, 255, 204);}.ace-github .ace_marker-layer .ace_active-line {background: rgb(245, 245, 245);}.ace-github .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-github.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-github.ace_nobold .ace_line > span {font-weight: normal !important;}.ace-github .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-github .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-github .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-github .ace_gutter-active-line {background-color : rgba(0, 0, 0, 0.07);}.ace-github .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-github .ace_invisible {color: #BFBFBF}.ace-github .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-github .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t("../lib/dom").importCssString(e.cssText,e.cssClass)})),ace.require(["ace/theme/github"],(function(e){t&&(t.exports=e)}))}).call(this,n(58)(t))},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function _(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case f:case h:case a:case u:case s:case p:return t;default:switch(t=t&&t.$$typeof){case l:case d:case m:case v:case c:return t;default:return e}}case o:return e}}}function O(t){return _(t)===h}e.AsyncMode=f,e.ConcurrentMode=h,e.ContextConsumer=l,e.ContextProvider=c,e.Element=i,e.ForwardRef=d,e.Fragment=a,e.Lazy=m,e.Memo=v,e.Portal=o,e.Profiler=u,e.StrictMode=s,e.Suspense=p,e.isAsyncMode=function(t){return O(t)||_(t)===f},e.isConcurrentMode=O,e.isContextConsumer=function(t){return _(t)===l},e.isContextProvider=function(t){return _(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return _(t)===d},e.isFragment=function(t){return _(t)===a},e.isLazy=function(t){return _(t)===m},e.isMemo=function(t){return _(t)===v},e.isPortal=function(t){return _(t)===o},e.isProfiler=function(t){return _(t)===u},e.isStrictMode=function(t){return _(t)===s},e.isSuspense=function(t){return _(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===a||t===h||t===u||t===s||t===p||t===g||"object"===typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===v||t.$$typeof===c||t.$$typeof===l||t.$$typeof===d||t.$$typeof===b||t.$$typeof===w||t.$$typeof===x||t.$$typeof===y)},e.typeOf=_},function(t,e,n){"use strict";var r=n(108);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=o.default.memo(o.default.forwardRef((function(e,n){return o.default.createElement(a.default,(0,i.default)({ref:n},e),t)})));0;return n.muiName=a.default.muiName,n};var i=r(n(160)),o=r(n(2)),a=r(n(194))},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}t.exports=n},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=n(46);t.exports=function(t,e){var n=r(t,e);return n?n.version:null}},function(t,e,n){var r=n(46);t.exports=function(t,e){var n=r(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null}},function(t,e,n){var r=n(26);t.exports=function(t,e,n,i){"string"===typeof n&&(i=n,n=void 0);try{return new r(t,n).inc(e,i).version}catch(o){return null}}},function(t,e,n){var r=n(46),i=n(84);t.exports=function(t,e){if(i(t,e))return null;var n=r(t),o=r(e),a=n.prerelease.length||o.prerelease.length,s=a?"pre":"",u=a?"prerelease":"";for(var c in n)if(("major"===c||"minor"===c||"patch"===c)&&n[c]!==o[c])return s+c;return u}},function(t,e,n){var r=n(26);t.exports=function(t,e){return new r(t,e).major}},function(t,e,n){var r=n(26);t.exports=function(t,e){return new r(t,e).minor}},function(t,e,n){var r=n(26);t.exports=function(t,e){return new r(t,e).patch}},function(t,e,n){var r=n(46);t.exports=function(t,e){var n=r(t,e);return n&&n.prerelease.length?n.prerelease:null}},function(t,e,n){var r=n(32);t.exports=function(t,e,n){return r(e,t,n)}},function(t,e,n){var r=n(32);t.exports=function(t,e){return r(t,e,!0)}},function(t,e,n){var r=n(85);t.exports=function(t,e){return t.sort((function(t,n){return r(t,n,e)}))}},function(t,e,n){var r=n(85);t.exports=function(t,e){return t.sort((function(t,n){return r(n,t,e)}))}},function(t,e,n){var r=n(26),i=n(46),o=n(45),a=o.re,s=o.t;t.exports=function(t,e){if(t instanceof r)return t;if("number"===typeof t&&(t=String(t)),"string"!==typeof t)return null;var n=null;if((e=e||{}).rtl){for(var o;(o=a[s.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)n&&o.index+o[0].length===n.index+n[0].length||(n=o),a[s.COERCERTL].lastIndex=o.index+o[1].length+o[2].length;a[s.COERCERTL].lastIndex=-1}else n=t.match(a[s.COERCE]);return null===n?null:i("".concat(n[2],".").concat(n[3]||"0",".").concat(n[4]||"0"),e)}},function(t,e,n){var r=n(33);t.exports=function(t,e){return new r(t,e).set.map((function(t){return t.map((function(t){return t.value})).join(" ").trim().split(" ")}))}},function(t,e,n){var r=n(26),i=n(33);t.exports=function(t,e,n){var o=null,a=null,s=null;try{s=new i(e,n)}catch(u){return null}return t.forEach((function(t){s.test(t)&&(o&&-1!==a.compare(t)||(a=new r(o=t,n)))})),o}},function(t,e,n){var r=n(26),i=n(33);t.exports=function(t,e,n){var o=null,a=null,s=null;try{s=new i(e,n)}catch(u){return null}return t.forEach((function(t){s.test(t)&&(o&&1!==a.compare(t)||(a=new r(o=t,n)))})),o}},function(t,e,n){var r=n(26),i=n(33),o=n(61);t.exports=function(t,e){t=new i(t,e);var n=new r("0.0.0");if(t.test(n))return n;if(n=new r("0.0.0-0"),t.test(n))return n;n=null;for(var a=0;a<t.set.length;++a){t.set[a].forEach((function(t){var e=new r(t.semver.version);switch(t.operator){case">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case"":case">=":n&&!o(n,e)||(n=e);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(t.operator))}}))}return n&&t.test(n)?n:null}},function(t,e,n){var r=n(33);t.exports=function(t,e){try{return new r(t,e).range||"*"}catch(n){return null}}},function(t,e,n){var r=n(89);t.exports=function(t,e,n){return r(t,e,">",n)}},function(t,e,n){var r=n(89);t.exports=function(t,e,n){return r(t,e,"<",n)}},function(t,e,n){var r=n(33);t.exports=function(t,e,n){return t=new r(t,n),e=new r(e,n),t.intersects(e)}},function(t,e,n){var r=n(184),i=n(112),o=n(63),a=n(32);t.exports=function(t,e,n){var s,u=[],c=null,l=null,f=t.sort((function(t,e){return a(t,e,n)})),h=i(f);try{for(h.s();!(s=h.n()).done;){var d=s.value;o(d,e,n)?(l=d,c||(c=d)):(l&&u.push([c,l]),l=null,c=null)}}catch(_){h.e(_)}finally{h.f()}c&&u.push([c,null]);for(var p=[],g=0,v=u;g<v.length;g++){var m=r(v[g],2),y=m[0],b=m[1];y===b?p.push(y):b||y!==f[0]?b?y===f[0]?p.push("<=".concat(b)):p.push("".concat(y," - ").concat(b)):p.push(">=".concat(y)):p.push("*")}var w=p.join(" || "),x="string"===typeof e.raw?e.raw:String(e);return w.length<x.length?w:e}},function(t,e,n){var r=n(185),i=n(186),o=n(111),a=n(188);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=n(112),i=n(33),o=n(62).ANY,a=n(63),s=n(32),u=function(t,e,n){if(1===t.length&&t[0].semver===o)return 1===e.length&&e[0].semver===o;var i,u,f,h,d=new Set,p=r(t);try{for(p.s();!(f=p.n()).done;){var g=f.value;">"===g.operator||">="===g.operator?i=c(i,g,n):"<"===g.operator||"<="===g.operator?u=l(u,g,n):d.add(g.semver)}}catch(A){p.e(A)}finally{p.f()}if(d.size>1)return null;if(i&&u){if((h=s(i.semver,u.semver,n))>0)return null;if(0===h&&(">="!==i.operator||"<="!==u.operator))return null}var v,m,y,b=r(d);try{for(b.s();!(v=b.n()).done;){var w=v.value;if(i&&!a(w,String(i),n))return null;if(u&&!a(w,String(u),n))return null;var x,_=r(e);try{for(_.s();!(x=_.n()).done;){var O=x.value;if(!a(w,String(O),n))return!1}}catch(A){_.e(A)}finally{_.f()}return!0}}catch(A){b.e(A)}finally{b.f()}var k,S=r(e);try{for(S.s();!(k=S.n()).done;){var E=k.value;if(y=y||">"===E.operator||">="===E.operator,m=m||"<"===E.operator||"<="===E.operator,i)if(">"===E.operator||">="===E.operator){if(c(i,E,n)===E)return!1}else if(">="===i.operator&&!a(i.semver,String(E),n))return!1;if(u)if("<"===E.operator||"<="===E.operator){if(l(u,E,n)===E)return!1}else if("<="===u.operator&&!a(u.semver,String(E),n))return!1;if(!E.operator&&(u||i)&&0!==h)return!1}}catch(A){S.e(A)}finally{S.f()}return!(i&&m&&!u&&0!==h)&&!(u&&y&&!i&&0!==h)},c=function(t,e,n){if(!t)return e;var r=s(t.semver,e.semver,n);return r>0?t:r<0||">"===e.operator&&">="===t.operator?e:t},l=function(t,e,n){if(!t)return e;var r=s(t.semver,e.semver,n);return r<0?t:r>0||"<"===e.operator&&"<="===t.operator?e:t};t.exports=function(t,e,n){t=new i(t,n),e=new i(e,n);var o,a=!1,s=r(t.set);try{t:for(s.s();!(o=s.n()).done;){var c,l=o.value,f=r(e.set);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=u(l,h,n);if(a=a||null!==d,d)continue t}}catch(p){f.e(p)}finally{f.f()}if(a)return!1}}catch(p){s.e(p)}finally{s.f()}return!0}},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},,function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var r=n(9),i=n(12),o=n(2),a=(n(15),n(17)),s=n(22),u=n(25),c=o.forwardRef((function(t,e){var n=t.children,s=t.classes,c=t.className,l=t.color,f=void 0===l?"inherit":l,h=t.component,d=void 0===h?"svg":h,p=t.fontSize,g=void 0===p?"default":p,v=t.htmlColor,m=t.titleAccess,y=t.viewBox,b=void 0===y?"0 0 24 24":y,w=Object(i.a)(t,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return o.createElement(d,Object(r.a)({className:Object(a.a)(s.root,c,"inherit"!==f&&s["color".concat(Object(u.a)(f))],"default"!==g&&s["fontSize".concat(Object(u.a)(g))]),focusable:"false",viewBox:b,color:v,"aria-hidden":!m||void 0,role:m?"img":void 0,ref:e},w),n,m?o.createElement("title",null,m):null)}));c.muiName="SvgIcon";var l=Object(s.a)((function(t){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:t.typography.pxToRem(24),transition:t.transitions.create("fill",{duration:t.transitions.duration.shorter})},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},colorAction:{color:t.palette.action.active},colorError:{color:t.palette.error.main},colorDisabled:{color:t.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:t.typography.pxToRem(20)},fontSizeLarge:{fontSize:t.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(c)},function(t,e,n){"use strict";var r=n(12),i=n(9),o=n(2),a=(n(15),n(17)),s=n(22),u=o.forwardRef((function(t,e){var n=t.classes,s=t.className,u=t.component,c=void 0===u?"div":u,l=t.square,f=void 0!==l&&l,h=t.elevation,d=void 0===h?1:h,p=t.variant,g=void 0===p?"elevation":p,v=Object(r.a)(t,["classes","className","component","square","elevation","variant"]);return o.createElement(c,Object(i.a)({className:Object(a.a)(n.root,s,"outlined"===g?n.outlined:n["elevation".concat(d)],!f&&n.rounded),ref:e},v))}));e.a=Object(s.a)((function(t){var e={};return t.shadows.forEach((function(t,n){e["elevation".concat(n)]={boxShadow:t}})),Object(i.a)({root:{backgroundColor:t.palette.background.paper,color:t.palette.text.primary,transition:t.transitions.create("box-shadow")},rounded:{borderRadius:t.shape.borderRadius},outlined:{border:"1px solid ".concat(t.palette.divider)}},e)}),{name:"MuiPaper"})(u)},function(t,e,n){"use strict";n.d(e,"a",(function(){return dn}));var r=n(12),i=n(9),o=n(2),a=n.n(o),s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u="object"===("undefined"===typeof window?"undefined":s(window))&&"object"===("undefined"===typeof document?"undefined":s(document))&&9===document.nodeType;n(34);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var f=n(39),h=n(54),d=n(48),p={}.constructor;function g(t){if(null==t||"object"!==typeof t)return t;if(Array.isArray(t))return t.map(g);if(t.constructor!==p)return t;var e={};for(var n in t)e[n]=g(t[n]);return e}function v(t,e,n){void 0===t&&(t="unnamed");var r=n.jss,i=g(e),o=r.plugins.onCreateRule(t,i,n);return o||(t[0],null)}var m=function(t,e){for(var n="",r=0;r<t.length&&"!important"!==t[r];r++)n&&(n+=e),n+=t[r];return n};function y(t,e){if(void 0===e&&(e=!1),!Array.isArray(t))return t;var n="";if(Array.isArray(t[0]))for(var r=0;r<t.length&&"!important"!==t[r];r++)n&&(n+=", "),n+=m(t[r]," ");else n=m(t,", ");return e||"!important"!==t[t.length-1]||(n+=" !important"),n}function b(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function w(t,e,n){void 0===n&&(n={});var r="";if(!e)return r;var i=n.indent,o=void 0===i?0:i,a=e.fallbacks;if(t&&o++,a)if(Array.isArray(a))for(var s=0;s<a.length;s++){var u=a[s];for(var c in u){var l=u[c];null!=l&&(r&&(r+="\n"),r+=""+b(c+": "+y(l)+";",o))}}else for(var f in a){var h=a[f];null!=h&&(r&&(r+="\n"),r+=""+b(f+": "+y(h)+";",o))}for(var d in e){var p=e[d];null!=p&&"fallbacks"!==d&&(r&&(r+="\n"),r+=""+b(d+": "+y(p)+";",o))}return(r||n.allowEmpty)&&t?(r&&(r="\n"+r+"\n"),b(t+" {"+r,--o)+b("}",o)):r}var x=/([[\].#*$><+~=|^:(),"'`\s])/g,_="undefined"!==typeof CSS&&CSS.escape,O=function(t){return _?_(t):t.replace(x,"\\$1")},k=function(){function t(t,e,n){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var r=n.sheet,i=n.Renderer;this.key=t,this.options=n,this.style=e,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return t.prototype.prop=function(t,e,n){if(void 0===e)return this.style[t];var r=!!n&&n.force;if(!r&&this.style[t]===e)return this;var i=e;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(e,t,this));var o=null==i||!1===i,a=t in this.style;if(o&&!a&&!r)return this;var s=o&&a;if(s?delete this.style[t]:this.style[t]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,t):this.renderer.setProperty(this.renderable,t,i),this;var u=this.options.sheet;return u&&u.attached,this},t}(),S=function(t){function e(e,n,r){var i;(i=t.call(this,e,n,r)||this).selectorText=void 0,i.id=void 0,i.renderable=void 0;var o=r.selector,a=r.scoped,s=r.sheet,u=r.generateId;return o?i.selectorText=o:!1!==a&&(i.id=u(Object(h.a)(Object(h.a)(i)),s),i.selectorText="."+O(i.id)),i}Object(f.a)(e,t);var n=e.prototype;return n.applyTo=function(t){var e=this.renderer;if(e){var n=this.toJSON();for(var r in n)e.setProperty(t,r,n[r])}return this},n.toJSON=function(){var t={};for(var e in this.style){var n=this.style[e];"object"!==typeof n?t[e]=n:Array.isArray(n)&&(t[e]=y(n))}return t},n.toString=function(t){var e=this.options.sheet,n=!!e&&e.options.link?Object(i.a)({},t,{allowEmpty:!0}):t;return w(this.selectorText,this.style,n)},l(e,[{key:"selector",set:function(t){if(t!==this.selectorText){this.selectorText=t;var e=this.renderer,n=this.renderable;if(n&&e)e.setSelector(n,t)||e.replaceRule(n,this)}},get:function(){return this.selectorText}}]),e}(k),E={onCreateRule:function(t,e,n){return"@"===t[0]||n.parent&&"keyframes"===n.parent.type?null:new S(t,e,n)}},A={indent:1,children:!0},C=/@([\w-]+)/,j=function(){function t(t,e,n){this.type="conditional",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=t,this.query=n.name;var r=t.match(C);for(var o in this.at=r?r[1]:"unknown",this.options=n,this.rules=new Z(Object(i.a)({},n,{parent:this})),e)this.rules.add(o,e[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(t){return this.rules.get(t)},e.indexOf=function(t){return this.rules.indexOf(t)},e.addRule=function(t,e,n){var r=this.rules.add(t,e,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},e.toString=function(t){if(void 0===t&&(t=A),null==t.indent&&(t.indent=A.indent),null==t.children&&(t.children=A.children),!1===t.children)return this.query+" {}";var e=this.rules.toString(t);return e?this.query+" {\n"+e+"\n}":""},t}(),T=/@media|@supports\s+/,M={onCreateRule:function(t,e,n){return T.test(t)?new j(t,e,n):null}},R={indent:1,children:!0},D=/@keyframes\s+([\w-]+)/,L=function(){function t(t,e,n){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var r=t.match(D);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var o=n.scoped,a=n.sheet,s=n.generateId;for(var u in this.id=!1===o?this.name:O(s(this,a)),this.rules=new Z(Object(i.a)({},n,{parent:this})),e)this.rules.add(u,e[u],Object(i.a)({},n,{parent:this}));this.rules.process()}return t.prototype.toString=function(t){if(void 0===t&&(t=R),null==t.indent&&(t.indent=R.indent),null==t.children&&(t.children=R.children),!1===t.children)return this.at+" "+this.id+" {}";var e=this.rules.toString(t);return e&&(e="\n"+e+"\n"),this.at+" "+this.id+" {"+e+"}"},t}(),N=/@keyframes\s+/,I=/\$([\w-]+)/g,F=function(t,e){return"string"===typeof t?t.replace(I,(function(t,n){return n in e?e[n]:t})):t},P=function(t,e,n){var r=t[e],i=F(r,n);i!==r&&(t[e]=i)},$={onCreateRule:function(t,e,n){return"string"===typeof t&&N.test(t)?new L(t,e,n):null},onProcessStyle:function(t,e,n){return"style"===e.type&&n?("animation-name"in t&&P(t,"animation-name",n.keyframes),"animation"in t&&P(t,"animation",n.keyframes),t):t},onChangeValue:function(t,e,n){var r=n.options.sheet;if(!r)return t;switch(e){case"animation":case"animation-name":return F(t,r.keyframes);default:return t}}},z=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).renderable=void 0,e}return Object(f.a)(e,t),e.prototype.toString=function(t){var e=this.options.sheet,n=!!e&&e.options.link?Object(i.a)({},t,{allowEmpty:!0}):t;return w(this.key,this.style,n)},e}(k),B={onCreateRule:function(t,e,n){return n.parent&&"keyframes"===n.parent.type?new z(t,e,n):null}},U=function(){function t(t,e,n){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=t,this.style=e,this.options=n}return t.prototype.toString=function(t){if(Array.isArray(this.style)){for(var e="",n=0;n<this.style.length;n++)e+=w(this.at,this.style[n]),this.style[n+1]&&(e+="\n");return e}return w(this.at,this.style,t)},t}(),W=/@font-face/,H={onCreateRule:function(t,e,n){return W.test(t)?new U(t,e,n):null}},V=function(){function t(t,e,n){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=t,this.style=e,this.options=n}return t.prototype.toString=function(t){return w(this.key,this.style,t)},t}(),q={onCreateRule:function(t,e,n){return"@viewport"===t||"@-ms-viewport"===t?new V(t,e,n):null}},G=function(){function t(t,e,n){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=t,this.value=e,this.options=n}return t.prototype.toString=function(t){if(Array.isArray(this.value)){for(var e="",n=0;n<this.value.length;n++)e+=this.key+" "+this.value[n]+";",this.value[n+1]&&(e+="\n");return e}return this.key+" "+this.value+";"},t}(),K={"@charset":!0,"@import":!0,"@namespace":!0},Y=[E,M,$,B,H,q,{onCreateRule:function(t,e,n){return t in K?new G(t,e,n):null}}],Q={process:!0},X={force:!0,process:!0},Z=function(){function t(t){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=t,this.classes=t.classes,this.keyframes=t.keyframes}var e=t.prototype;return e.add=function(t,e,n){var r=this.options,o=r.parent,a=r.sheet,s=r.jss,u=r.Renderer,c=r.generateId,l=r.scoped,f=Object(i.a)({classes:this.classes,parent:o,sheet:a,jss:s,Renderer:u,generateId:c,scoped:l,name:t},n),h=t;t in this.raw&&(h=t+"-d"+this.counter++),this.raw[h]=e,h in this.classes&&(f.selector="."+O(this.classes[h]));var d=v(h,e,f);if(!d)return null;this.register(d);var p=void 0===f.index?this.index.length:f.index;return this.index.splice(p,0,d),d},e.get=function(t){return this.map[t]},e.remove=function(t){this.unregister(t),delete this.raw[t.key],this.index.splice(this.index.indexOf(t),1)},e.indexOf=function(t){return this.index.indexOf(t)},e.process=function(){var t=this.options.jss.plugins;this.index.slice(0).forEach(t.onProcessRule,t)},e.register=function(t){this.map[t.key]=t,t instanceof S?(this.map[t.selector]=t,t.id&&(this.classes[t.key]=t.id)):t instanceof L&&this.keyframes&&(this.keyframes[t.name]=t.id)},e.unregister=function(t){delete this.map[t.key],t instanceof S?(delete this.map[t.selector],delete this.classes[t.key]):t instanceof L&&delete this.keyframes[t.name]},e.update=function(){var t,e,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],t=null),t)this.updateOne(this.map[t],e,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],e,n)},e.updateOne=function(e,n,r){void 0===r&&(r=Q);var i=this.options,o=i.jss.plugins,a=i.sheet;if(e.rules instanceof t)e.rules.update(n,r);else{var s=e,u=s.style;if(o.onUpdate(n,e,a,r),r.process&&u&&u!==s.style){for(var c in o.onProcessStyle(s.style,s,a),s.style){var l=s.style[c];l!==u[c]&&s.prop(c,l,X)}for(var f in u){var h=s.style[f],d=u[f];null==h&&h!==d&&s.prop(f,null,X)}}}},e.toString=function(t){for(var e="",n=this.options.sheet,r=!!n&&n.options.link,i=0;i<this.index.length;i++){var o=this.index[i].toString(t);(o||r)&&(e&&(e+="\n"),e+=o)}return e},t}(),J=function(){function t(t,e){for(var n in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Object(i.a)({},e,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),e.Renderer&&(this.renderer=new e.Renderer(this)),this.rules=new Z(this.options),t)this.rules.add(n,t[n]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(t,e,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(t,e,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},e.insertRule=function(t){this.renderer&&this.renderer.insertRule(t)},e.addRules=function(t,e){var n=[];for(var r in t){var i=this.addRule(r,t[r],e);i&&n.push(i)}return n},e.getRule=function(t){return this.rules.get(t)},e.deleteRule=function(t){var e="object"===typeof t?t:this.rules.get(t);return!!e&&(this.rules.remove(e),!(this.attached&&e.renderable&&this.renderer)||this.renderer.deleteRule(e.renderable))},e.indexOf=function(t){return this.rules.indexOf(t)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var t;return(t=this.rules).update.apply(t,arguments),this},e.updateOne=function(t,e,n){return this.rules.updateOne(t,e,n),this},e.toString=function(t){return this.rules.toString(t)},t}(),tt=function(){function t(){this.plugins={internal:[],external:[]},this.registry=void 0}var e=t.prototype;return e.onCreateRule=function(t,e,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](t,e,n);if(i)return i}return null},e.onProcessRule=function(t){if(!t.isProcessed){for(var e=t.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](t,e);t.style&&this.onProcessStyle(t.style,t,e),t.isProcessed=!0}},e.onProcessStyle=function(t,e,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)e.style=this.registry.onProcessStyle[r](e.style,e,n)},e.onProcessSheet=function(t){for(var e=0;e<this.registry.onProcessSheet.length;e++)this.registry.onProcessSheet[e](t)},e.onUpdate=function(t,e,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](t,e,n,r)},e.onChangeValue=function(t,e,n){for(var r=t,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,e,n);return r},e.use=function(t,e){void 0===e&&(e={queue:"external"});var n=this.plugins[e.queue];-1===n.indexOf(t)&&(n.push(t),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(t,e){for(var n in e)n in t&&t[n].push(e[n]);return t}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),et=new(function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(t){var e=this.registry,n=t.options.index;if(-1===e.indexOf(t))if(0===e.length||n>=this.index)e.push(t);else for(var r=0;r<e.length;r++)if(e[r].options.index>n)return void e.splice(r,0,t)},e.reset=function(){this.registry=[]},e.remove=function(t){var e=this.registry.indexOf(t);this.registry.splice(e,1)},e.toString=function(t){for(var e=void 0===t?{}:t,n=e.attached,r=Object(d.a)(e,["attached"]),i="",o=0;o<this.registry.length;o++){var a=this.registry[o];null!=n&&a.attached!==n||(i&&(i+="\n"),i+=a.toString(r))}return i},l(t,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),t}()),nt="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),rt="2f1acc6c3a606b082e5eef5e54414ffb";null==nt[rt]&&(nt[rt]=0);var it=nt[rt]++,ot=function(t){void 0===t&&(t={});var e=0;return function(n,r){e+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),t.minify?""+(o||"c")+it+i+e:o+n.key+"-"+it+(i?"-"+i:"")+"-"+e}},at=function(t){var e;return function(){return e||(e=t()),e}};function st(t,e){try{return t.attributeStyleMap?t.attributeStyleMap.get(e):t.style.getPropertyValue(e)}catch(n){return""}}function ut(t,e,n){try{var r=n;if(Array.isArray(n)&&(r=y(n,!0),"!important"===n[n.length-1]))return t.style.setProperty(e,r,"important"),!0;t.attributeStyleMap?t.attributeStyleMap.set(e,r):t.style.setProperty(e,r)}catch(i){return!1}return!0}function ct(t,e){try{t.attributeStyleMap?t.attributeStyleMap.delete(e):t.style.removeProperty(e)}catch(n){}}function lt(t,e){return t.selectorText=e,t.selectorText===e}var ft=at((function(){return document.querySelector("head")}));function ht(t){var e=et.registry;if(e.length>0){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if((n=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}(e,t))&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&"string"===typeof r){var i=function(t){for(var e=ft(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===t)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var dt=at((function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null})),pt=function(t,e,n){var r=t.cssRules.length;(void 0===n||n>r)&&(n=r);try{if("insertRule"in t)t.insertRule(e,n);else if("appendRule"in t){t.appendRule(e)}}catch(i){return!1}return t.cssRules[n]},gt=function(){function t(t){this.getPropertyValue=st,this.setProperty=ut,this.removeProperty=ct,this.setSelector=lt,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,t&&et.add(t),this.sheet=t;var e=this.sheet?this.sheet.options:{},n=e.media,r=e.meta,i=e.element;this.element=i||function(){var t=document.createElement("style");return t.textContent="\n",t}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var o=dt();o&&this.element.setAttribute("nonce",o)}var e=t.prototype;return e.attach=function(){if(!this.element.parentNode&&this.sheet){!function(t,e){var n=e.insertionPoint,r=ht(e);if(!1!==r&&r.parent)r.parent.insertBefore(t,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(t,i.nextSibling)}else ft().appendChild(t)}(this.element,this.sheet.options);var t=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&t&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){var t=this.element.parentNode;t&&t.removeChild(this.element)},e.deploy=function(){var t=this.sheet;t&&(t.options.link?this.insertRules(t.rules):this.element.textContent="\n"+t.toString()+"\n")},e.insertRules=function(t,e){for(var n=0;n<t.index.length;n++)this.insertRule(t.index[n],n,e)},e.insertRule=function(t,e,n){if(void 0===n&&(n=this.element.sheet),t.rules){var r=t,i=n;return("conditional"!==t.type&&"keyframes"!==t.type||!1!==(i=pt(n,r.toString({children:!1}),e)))&&(this.insertRules(r.rules,i),i)}if(t.renderable&&t.renderable.parentStyleSheet===this.element.sheet)return t.renderable;var o=t.toString();if(!o)return!1;var a=pt(n,o,e);return!1!==a&&(this.hasInsertedRules=!0,t.renderable=a,a)},e.deleteRule=function(t){var e=this.element.sheet,n=this.indexOf(t);return-1!==n&&(e.deleteRule(n),!0)},e.indexOf=function(t){for(var e=this.element.sheet.cssRules,n=0;n<e.length;n++)if(t===e[n])return n;return-1},e.replaceRule=function(t,e){var n=this.indexOf(t);return-1!==n&&(this.element.sheet.deleteRule(n),this.insertRule(e,n))},e.getRules=function(){return this.element.sheet.cssRules},t}(),vt=0,mt=function(){function t(t){this.id=vt++,this.version="10.3.0",this.plugins=new tt,this.options={id:{minify:!1},createGenerateId:ot,Renderer:u?gt:null,plugins:[]},this.generateId=ot({minify:!1});for(var e=0;e<Y.length;e++)this.plugins.use(Y[e],{queue:"internal"});this.setup(t)}var e=t.prototype;return e.setup=function(t){return void 0===t&&(t={}),t.createGenerateId&&(this.options.createGenerateId=t.createGenerateId),t.id&&(this.options.id=Object(i.a)({},this.options.id,t.id)),(t.createGenerateId||t.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=t.insertionPoint&&(this.options.insertionPoint=t.insertionPoint),"Renderer"in t&&(this.options.Renderer=t.Renderer),t.plugins&&this.use.apply(this,t.plugins),this},e.createStyleSheet=function(t,e){void 0===e&&(e={});var n=e.index;"number"!==typeof n&&(n=0===et.index?0:et.index+1);var r=new J(t,Object(i.a)({},e,{jss:this,generateId:e.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},e.removeStyleSheet=function(t){return t.detach(),et.remove(t),this},e.createRule=function(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),"object"===typeof t)return this.createRule(void 0,t,e);var r=Object(i.a)({},n,{name:t,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var o=v(t,e,r);return o&&this.plugins.onProcessRule(o),o},e.use=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){t.plugins.use(e)})),this},t}();var yt="undefined"!==typeof CSS&&CSS&&"number"in CSS,bt=function(t){return new mt(t)};bt();function wt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.baseClasses,n=t.newClasses;t.Component;if(!n)return e;var r=Object(i.a)({},e);return Object.keys(n).forEach((function(t){n[t]&&(r[t]="".concat(e[t]," ").concat(n[t]))})),r}var xt={set:function(t,e,n,r){var i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(n,r)},get:function(t,e,n){var r=t.get(e);return r?r.get(n):void 0},delete:function(t,e,n){t.get(e).delete(n)}},_t=n(232),Ot=(n(15),"function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__"),kt=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var St=Date.now(),Et="fnValues"+St,At="fnStyle"+ ++St;var Ct=function(){return{onCreateRule:function(t,e,n){if("function"!==typeof e)return null;var r=v(t,{},n);return r[At]=e,r},onProcessStyle:function(t,e){if(Et in e||At in e)return t;var n={};for(var r in t){var i=t[r];"function"===typeof i&&(delete t[r],n[r]=i)}return e[Et]=n,t},onUpdate:function(t,e,n,r){var i=e,o=i[At];o&&(i.style=o(t)||{});var a=i[Et];if(a)for(var s in a)i.prop(s,a[s](t),r)}}},jt="@global",Tt=function(){function t(t,e,n){for(var r in this.type="global",this.at=jt,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=t,this.options=n,this.rules=new Z(Object(i.a)({},n,{parent:this})),e)this.rules.add(r,e[r]);this.rules.process()}var e=t.prototype;return e.getRule=function(t){return this.rules.get(t)},e.addRule=function(t,e,n){var r=this.rules.add(t,e,n);return this.options.jss.plugins.onProcessRule(r),r},e.indexOf=function(t){return this.rules.indexOf(t)},e.toString=function(){return this.rules.toString()},t}(),Mt=function(){function t(t,e,n){this.type="global",this.at=jt,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=t,this.options=n;var r=t.substr("@global ".length);this.rule=n.jss.createRule(r,e,Object(i.a)({},n,{parent:this}))}return t.prototype.toString=function(t){return this.rule?this.rule.toString(t):""},t}(),Rt=/\s*,\s*/g;function Dt(t,e){for(var n=t.split(Rt),r="",i=0;i<n.length;i++)r+=e+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var Lt=function(){return{onCreateRule:function(t,e,n){if(!t)return null;if(t===jt)return new Tt(t,e,n);if("@"===t[0]&&"@global "===t.substr(0,"@global ".length))return new Mt(t,e,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),!1===n.scoped&&(n.selector=t),null},onProcessRule:function(t){"style"===t.type&&(function(t){var e=t.options,n=t.style,r=n?n[jt]:null;if(r){for(var o in r)e.sheet.addRule(o,r[o],Object(i.a)({},e,{selector:Dt(o,t.selector)}));delete n[jt]}}(t),function(t){var e=t.options,n=t.style;for(var r in n)if("@"===r[0]&&r.substr(0,jt.length)===jt){var o=Dt(r.substr(jt.length),t.selector);e.sheet.addRule(o,n[r],Object(i.a)({},e,{selector:o})),delete n[r]}}(t))}}},Nt=/\s*,\s*/g,It=/&/g,Ft=/\$([\w-]+)/g;var Pt=function(){function t(t,e){return function(n,r){var i=t.getRule(r)||e&&e.getRule(r);return i?(i=i).selector:r}}function e(t,e){for(var n=e.split(Nt),r=t.split(Nt),i="",o=0;o<n.length;o++)for(var a=n[o],s=0;s<r.length;s++){var u=r[s];i&&(i+=", "),i+=-1!==u.indexOf("&")?u.replace(It,a):a+" "+u}return i}function n(t,e,n){if(n)return Object(i.a)({},n,{index:n.index+1});var r=t.options.nestingLevel;r=void 0===r?1:r+1;var o=Object(i.a)({},t.options,{nestingLevel:r,index:e.indexOf(t)+1});return delete o.name,o}return{onProcessStyle:function(r,o,a){if("style"!==o.type)return r;var s,u,c=o,l=c.options.parent;for(var f in r){var h=-1!==f.indexOf("&"),d="@"===f[0];if(h||d){if(s=n(c,l,s),h){var p=e(f,c.selector);u||(u=t(l,a)),p=p.replace(Ft,u),l.addRule(p,r[f],Object(i.a)({},s,{selector:p}))}else d&&l.addRule(f,{},s).addRule(c.key,r[f],{selector:c.selector});delete r[f]}}return r}}},$t=/[A-Z]/g,zt=/^ms-/,Bt={};function Ut(t){return"-"+t.toLowerCase()}var Wt=function(t){if(Bt.hasOwnProperty(t))return Bt[t];var e=t.replace($t,Ut);return Bt[t]=zt.test(e)?"-"+e:e};function Ht(t){var e={};for(var n in t){e[0===n.indexOf("--")?n:Wt(n)]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Ht):e.fallbacks=Ht(t.fallbacks)),e}var Vt=function(){return{onProcessStyle:function(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++)t[e]=Ht(t[e]);return t}return Ht(t)},onChangeValue:function(t,e,n){if(0===e.indexOf("--"))return t;var r=Wt(e);return e===r?t:(n.prop(r,t),null)}}},qt=yt&&CSS?CSS.px:"px",Gt=yt&&CSS?CSS.ms:"ms",Kt=yt&&CSS?CSS.percent:"%";function Yt(t){var e=/(-[a-z])/g,n=function(t){return t[1].toUpperCase()},r={};for(var i in t)r[i]=t[i],r[i.replace(e,n)]=t[i];return r}var Qt=Yt({"animation-delay":Gt,"animation-duration":Gt,"background-position":qt,"background-position-x":qt,"background-position-y":qt,"background-size":qt,border:qt,"border-bottom":qt,"border-bottom-left-radius":qt,"border-bottom-right-radius":qt,"border-bottom-width":qt,"border-left":qt,"border-left-width":qt,"border-radius":qt,"border-right":qt,"border-right-width":qt,"border-top":qt,"border-top-left-radius":qt,"border-top-right-radius":qt,"border-top-width":qt,"border-width":qt,margin:qt,"margin-bottom":qt,"margin-left":qt,"margin-right":qt,"margin-top":qt,padding:qt,"padding-bottom":qt,"padding-left":qt,"padding-right":qt,"padding-top":qt,"mask-position-x":qt,"mask-position-y":qt,"mask-size":qt,height:qt,width:qt,"min-height":qt,"max-height":qt,"min-width":qt,"max-width":qt,bottom:qt,left:qt,top:qt,right:qt,"box-shadow":qt,"text-shadow":qt,"column-gap":qt,"column-rule":qt,"column-rule-width":qt,"column-width":qt,"font-size":qt,"font-size-delta":qt,"letter-spacing":qt,"text-indent":qt,"text-stroke":qt,"text-stroke-width":qt,"word-spacing":qt,motion:qt,"motion-offset":qt,outline:qt,"outline-offset":qt,"outline-width":qt,perspective:qt,"perspective-origin-x":Kt,"perspective-origin-y":Kt,"transform-origin":Kt,"transform-origin-x":Kt,"transform-origin-y":Kt,"transform-origin-z":Kt,"transition-delay":Gt,"transition-duration":Gt,"vertical-align":qt,"flex-basis":qt,"shape-margin":qt,size:qt,grid:qt,"grid-gap":qt,"grid-row-gap":qt,"grid-column-gap":qt,"grid-template-rows":qt,"grid-template-columns":qt,"grid-auto-rows":qt,"grid-auto-columns":qt,"box-shadow-x":qt,"box-shadow-y":qt,"box-shadow-blur":qt,"box-shadow-spread":qt,"font-line-height":qt,"text-shadow-x":qt,"text-shadow-y":qt,"text-shadow-blur":qt});function Xt(t,e,n){if(!e)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=Xt(t,e[r],n);else if("object"===typeof e)if("fallbacks"===t)for(var i in e)e[i]=Xt(i,e[i],n);else for(var o in e)e[o]=Xt(t+"-"+o,e[o],n);else if("number"===typeof e){var a=n[t]||Qt[t];return a?"function"===typeof a?a(e).toString():""+e+a:e.toString()}return e}var Zt=function(t){void 0===t&&(t={});var e=Yt(t);return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r in t)t[r]=Xt(r,t[r],e);return t},onChangeValue:function(t,n){return Xt(n,t,e)}}},Jt=n(49),te="",ee="",ne="",re="",ie=u&&"ontouchstart"in document.documentElement;if(u){var oe={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},ae=document.createElement("p").style;for(var se in oe)if(se+"Transform"in ae){te=se,ee=oe[se];break}"Webkit"===te&&"msHyphens"in ae&&(te="ms",ee=oe.ms,re="edge"),"Webkit"===te&&"-apple-trailing-word"in ae&&(ne="apple")}var ue=te,ce=ee,le=ne,fe=re,he=ie;var de={noPrefill:["appearance"],supportedProperty:function(t){return"appearance"===t&&("ms"===ue?"-webkit-"+t:ce+t)}},pe={noPrefill:["color-adjust"],supportedProperty:function(t){return"color-adjust"===t&&("Webkit"===ue?ce+"print-"+t:t)}},ge=/[-\s]+(.)?/g;function ve(t,e){return e?e.toUpperCase():""}function me(t){return t.replace(ge,ve)}function ye(t){return me("-"+t)}var be,we={noPrefill:["mask"],supportedProperty:function(t,e){if(!/^mask/.test(t))return!1;if("Webkit"===ue){if(me("mask-image")in e)return t;if(ue+ye("mask-image")in e)return ce+t}return t}},xe={noPrefill:["text-orientation"],supportedProperty:function(t){return"text-orientation"===t&&("apple"!==le||he?t:ce+t)}},_e={noPrefill:["transform"],supportedProperty:function(t,e,n){return"transform"===t&&(n.transform?t:ce+t)}},Oe={noPrefill:["transition"],supportedProperty:function(t,e,n){return"transition"===t&&(n.transition?t:ce+t)}},ke={noPrefill:["writing-mode"],supportedProperty:function(t){return"writing-mode"===t&&("Webkit"===ue||"ms"===ue&&"edge"!==fe?ce+t:t)}},Se={noPrefill:["user-select"],supportedProperty:function(t){return"user-select"===t&&("Moz"===ue||"ms"===ue||"apple"===le?ce+t:t)}},Ee={supportedProperty:function(t,e){return!!/^break-/.test(t)&&("Webkit"===ue?"WebkitColumn"+ye(t)in e&&ce+"column-"+t:"Moz"===ue&&("page"+ye(t)in e&&"page-"+t))}},Ae={supportedProperty:function(t,e){if(!/^(border|margin|padding)-inline/.test(t))return!1;if("Moz"===ue)return t;var n=t.replace("-inline","");return ue+ye(n)in e&&ce+n}},Ce={supportedProperty:function(t,e){return me(t)in e&&t}},je={supportedProperty:function(t,e){var n=ye(t);return"-"===t[0]||"-"===t[0]&&"-"===t[1]?t:ue+n in e?ce+t:"Webkit"!==ue&&"Webkit"+n in e&&"-webkit-"+t}},Te={supportedProperty:function(t){return"scroll-snap"===t.substring(0,11)&&("ms"===ue?""+ce+t:t)}},Me={supportedProperty:function(t){return"overscroll-behavior"===t&&("ms"===ue?ce+"scroll-chaining":t)}},Re={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},De={supportedProperty:function(t,e){var n=Re[t];return!!n&&(ue+ye(n)in e&&ce+n)}},Le={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Ne=Object.keys(Le),Ie=function(t){return ce+t},Fe=[de,pe,we,xe,_e,Oe,ke,Se,Ee,Ae,Ce,je,Te,Me,De,{supportedProperty:function(t,e,n){var r=n.multiple;if(Ne.indexOf(t)>-1){var i=Le[t];if(!Array.isArray(i))return ue+ye(i)in e&&ce+i;if(!r)return!1;for(var o=0;o<i.length;o++)if(!(ue+ye(i[0])in e))return!1;return i.map(Ie)}return!1}}],Pe=Fe.filter((function(t){return t.supportedProperty})).map((function(t){return t.supportedProperty})),$e=Fe.filter((function(t){return t.noPrefill})).reduce((function(t,e){return t.push.apply(t,Object(Jt.a)(e.noPrefill)),t}),[]),ze={};if(u){be=document.createElement("p");var Be=window.getComputedStyle(document.documentElement,"");for(var Ue in Be)isNaN(Ue)||(ze[Be[Ue]]=Be[Ue]);$e.forEach((function(t){return delete ze[t]}))}function We(t,e){if(void 0===e&&(e={}),!be)return t;if(null!=ze[t])return ze[t];"transition"!==t&&"transform"!==t||(e[t]=t in be.style);for(var n=0;n<Pe.length&&(ze[t]=Pe[n](t,be.style,e),!ze[t]);n++);try{be.style[t]=""}catch(r){return!1}return ze[t]}var He,Ve={},qe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Ge=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Ke(t,e,n){if("var"===e)return"var";if("all"===e)return"all";if("all"===n)return", all";var r=e?We(e):", "+We(n);return r||(e||n)}function Ye(t,e){var n=e;if(!He||"content"===t)return e;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=t+n;if(null!=Ve[r])return Ve[r];try{He.style[t]=n}catch(i){return Ve[r]=!1,!1}if(qe[t])n=n.replace(Ge,Ke);else if(""===He.style[t]&&("-ms-flex"===(n=ce+n)&&(He.style[t]="-ms-flexbox"),He.style[t]=n,""===He.style[t]))return Ve[r]=!1,!1;return He.style[t]="",Ve[r]=n,Ve[r]}u&&(He=document.createElement("p"));var Qe=function(){function t(e){for(var n in e){var r=e[n];if("fallbacks"===n&&Array.isArray(r))e[n]=r.map(t);else{var i=!1,o=We(n);o&&o!==n&&(i=!0);var a=!1,s=Ye(o,y(r));s&&s!==r&&(a=!0),(i||a)&&(i&&delete e[n],e[o||n]=s||r)}}return e}return{onProcessRule:function(t){if("keyframes"===t.type){var e=t;e.at="-"===(n=e.at)[1]||"ms"===ue?n:"@"+ce+"keyframes"+n.substr(10)}var n},onProcessStyle:function(e,n){return"style"!==n.type?e:t(e)},onChangeValue:function(t,e){return Ye(e,y(t))||t}}};var Xe=function(){var t=function(t,e){return t.length===e.length?t>e?1:-1:t.length-e.length};return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r={},i=Object.keys(e).sort(t),o=0;o<i.length;o++)r[i[o]]=e[i[o]];return r}}};function Ze(){return{plugins:[Ct(),Lt(),Pt(),Vt(),Zt(),"undefined"===typeof window?null:Qe(),Xe()]}}var Je=bt(Ze()),tn={disableGeneration:!1,generateClassName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.disableGlobal,n=void 0!==e&&e,r=t.productionPrefix,i=void 0===r?"jss":r,o=t.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),u=0,c=function(){return u+=1};return function(t,e){var r=e.options.name;if(r&&0===r.indexOf("Mui")&&!e.options.link&&!n){if(-1!==kt.indexOf(t.key))return"Mui-".concat(t.key);var o="".concat(s).concat(r,"-").concat(t.key);return e.options.theme[Ot]&&""===a?"".concat(o,"-").concat(c()):o}return"".concat(s).concat(i).concat(c())}}(),jss:Je,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},en=a.a.createContext(tn);var nn=-1e9;function rn(){return nn+=1}n(52);var on=n(221);function an(t){var e="function"===typeof t;return{create:function(n,r){var o;try{o=e?t(n):t}catch(u){throw u}if(!r||!n.overrides||!n.overrides[r])return o;var a=n.overrides[r],s=Object(i.a)({},o);return Object.keys(a).forEach((function(t){s[t]=Object(on.a)(s[t],a[t])})),s},options:{}}}var sn={};function un(t,e,n){var r=t.state;if(t.stylesOptions.disableGeneration)return e||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),e!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=e,i=!0),i&&(r.cacheClasses.value=wt({baseClasses:r.cacheClasses.lastJSS,newClasses:e,Component:n})),r.cacheClasses.value}function cn(t,e){var n=t.state,r=t.theme,o=t.stylesOptions,a=t.stylesCreator,s=t.name;if(!o.disableGeneration){var u=xt.get(o.sheetsManager,a,r);u||(u={refs:0,staticSheet:null,dynamicStyles:null},xt.set(o.sheetsManager,a,r,u));var c=Object(i.a)(Object(i.a)(Object(i.a)({},a.options),o),{},{theme:r,flip:"boolean"===typeof o.flip?o.flip:"rtl"===r.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var l=o.sheetsRegistry;if(0===u.refs){var f;o.sheetsCache&&(f=xt.get(o.sheetsCache,a,r));var h=a.create(r,s);f||((f=o.jss.createStyleSheet(h,Object(i.a)({link:!1},c))).attach(),o.sheetsCache&&xt.set(o.sheetsCache,a,r,f)),l&&l.add(f),u.staticSheet=f,u.dynamicStyles=function t(e){var n=null;for(var r in e){var i=e[r],o=typeof i;if("function"===o)n||(n={}),n[r]=i;else if("object"===o&&null!==i&&!Array.isArray(i)){var a=t(i);a&&(n||(n={}),n[r]=a)}}return n}(h)}if(u.dynamicStyles){var d=o.jss.createStyleSheet(u.dynamicStyles,Object(i.a)({link:!0},c));d.update(e),d.attach(),n.dynamicSheet=d,n.classes=wt({baseClasses:u.staticSheet.classes,newClasses:d.classes}),l&&l.add(d)}else n.classes=u.staticSheet.classes;u.refs+=1}}function ln(t,e){var n=t.state;n.dynamicSheet&&n.dynamicSheet.update(e)}function fn(t){var e=t.state,n=t.theme,r=t.stylesOptions,i=t.stylesCreator;if(!r.disableGeneration){var o=xt.get(r.sheetsManager,i,n);o.refs-=1;var a=r.sheetsRegistry;0===o.refs&&(xt.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),e.dynamicSheet&&(r.jss.removeStyleSheet(e.dynamicSheet),a&&a.remove(e.dynamicSheet))}}function hn(t,e){var n,r=a.a.useRef([]),i=a.a.useMemo((function(){return{}}),e);r.current!==i&&(r.current=i,n=t()),a.a.useEffect((function(){return function(){n&&n()}}),[i])}function dn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.name,o=e.classNamePrefix,s=e.Component,u=e.defaultTheme,c=void 0===u?sn:u,l=Object(r.a)(e,["name","classNamePrefix","Component","defaultTheme"]),f=an(t),h=n||o||"makeStyles";f.options={index:rn(),name:n,meta:h,classNamePrefix:h};var d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(_t.a)()||c,r=Object(i.a)(Object(i.a)({},a.a.useContext(en)),l),o=a.a.useRef(),u=a.a.useRef();hn((function(){var i={name:n,state:{},stylesCreator:f,stylesOptions:r,theme:e};return cn(i,t),u.current=!1,o.current=i,function(){fn(i)}}),[e,f]),a.a.useEffect((function(){u.current&&ln(o.current,t),u.current=!0}));var h=un(o.current,t.classes,s);return h};return d}},,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(18),i=Object(r.a)((function(t,e){for(var n=[],r=0,i=Math.min(t.length,e.length);r<i;)n[r]=[t[r],e[r]],r+=1;return n}));e.a=i},function(t,e,n){"use strict";var r=n(9),i=n(196),o=n(74);e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(t,Object(r.a)({defaultTheme:o.a},e))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(9),i=n(52);function o(t){return t&&"object"===Object(i.a)(t)&&t.constructor===Object}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},i=n.clone?Object(r.a)({},t):t;return o(t)&&o(e)&&Object.keys(e).forEach((function(r){"__proto__"!==r&&(o(e[r])&&r in t?i[r]=a(t[r],e[r],n):i[r]=e[r])})),i}},function(t,e,n){"use strict";var r=n(12),i=n(9),o=n(2),a=(n(15),n(17)),s=n(22),u=[0,1,2,3,4,5,6,7,8,9,10],c=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(t);return"".concat(n/e).concat(String(t).replace(String(n),"")||"px")}var f=o.forwardRef((function(t,e){var n=t.alignContent,s=void 0===n?"stretch":n,u=t.alignItems,c=void 0===u?"stretch":u,l=t.classes,f=t.className,h=t.component,d=void 0===h?"div":h,p=t.container,g=void 0!==p&&p,v=t.direction,m=void 0===v?"row":v,y=t.item,b=void 0!==y&&y,w=t.justify,x=void 0===w?"flex-start":w,_=t.lg,O=void 0!==_&&_,k=t.md,S=void 0!==k&&k,E=t.sm,A=void 0!==E&&E,C=t.spacing,j=void 0===C?0:C,T=t.wrap,M=void 0===T?"wrap":T,R=t.xl,D=void 0!==R&&R,L=t.xs,N=void 0!==L&&L,I=t.zeroMinWidth,F=void 0!==I&&I,P=Object(r.a)(t,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),$=Object(a.a)(l.root,f,g&&[l.container,0!==j&&l["spacing-xs-".concat(String(j))]],b&&l.item,F&&l.zeroMinWidth,"row"!==m&&l["direction-xs-".concat(String(m))],"wrap"!==M&&l["wrap-xs-".concat(String(M))],"stretch"!==c&&l["align-items-xs-".concat(String(c))],"stretch"!==s&&l["align-content-xs-".concat(String(s))],"flex-start"!==x&&l["justify-xs-".concat(String(x))],!1!==N&&l["grid-xs-".concat(String(N))],!1!==A&&l["grid-sm-".concat(String(A))],!1!==S&&l["grid-md-".concat(String(S))],!1!==O&&l["grid-lg-".concat(String(O))],!1!==D&&l["grid-xl-".concat(String(D))]);return o.createElement(d,Object(i.a)({className:$,ref:e},P))})),h=Object(s.a)((function(t){return Object(i.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(t,e){var n={};return u.forEach((function(r){var i=t.spacing(r);0!==i&&(n["spacing-".concat(e,"-").concat(r)]={margin:"-".concat(l(i,2)),width:"calc(100% + ".concat(l(i),")"),"& > $item":{padding:l(i,2)}})})),n}(t,"xs"),t.breakpoints.keys.reduce((function(e,n){return function(t,e,n){var r={};c.forEach((function(t){var e="grid-".concat(n,"-").concat(t);if(!0!==t)if("auto"!==t){var i="".concat(Math.round(t/12*1e8)/1e6,"%");r[e]={flexBasis:i,flexGrow:0,maxWidth:i}}else r[e]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[e]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?Object(i.a)(t,r):t[e.breakpoints.up(n)]=r}(e,t,n),e}),{}))}),{name:"MuiGrid"})(f);e.a=h},function(t,e,n){"use strict";var r=n(9),i=n(12),o=n(2),a=(n(15),n(17)),s=n(22),u=n(25),c=n(195),l=o.forwardRef((function(t,e){var n=t.classes,s=t.className,l=t.color,f=void 0===l?"primary":l,h=t.position,d=void 0===h?"fixed":h,p=Object(i.a)(t,["classes","className","color","position"]);return o.createElement(c.a,Object(r.a)({square:!0,component:"header",elevation:4,className:Object(a.a)(n.root,n["position".concat(Object(u.a)(d))],n["color".concat(Object(u.a)(f))],s,"fixed"===d&&"mui-fixed"),ref:e},p))}));e.a=Object(s.a)((function(t){var e="light"===t.palette.type?t.palette.grey[100]:t.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:t.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:e,color:t.palette.getContrastText(e)},colorPrimary:{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText},colorSecondary:{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(l)},function(t,e,n){"use strict";var r=n(9),i=n(12),o=n(43),a=n(2),s=(n(15),n(17)),u=n(22),c=a.forwardRef((function(t,e){var n=t.classes,o=t.className,u=t.component,c=void 0===u?"div":u,l=t.disableGutters,f=void 0!==l&&l,h=t.variant,d=void 0===h?"regular":h,p=Object(i.a)(t,["classes","className","component","disableGutters","variant"]);return a.createElement(c,Object(r.a)({className:Object(s.a)(n.root,n[d],o,!f&&n.gutters),ref:e},p))}));e.a=Object(u.a)((function(t){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:Object(o.a)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}),regular:t.mixins.toolbar,dense:{minHeight:48}}}),{name:"MuiToolbar"})(c)},function(t,e,n){"use strict";var r=n(9),i=n(12),o=n(2),a=(n(15),n(17)),s=n(22),u=n(25),c={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},l=o.forwardRef((function(t,e){var n=t.align,s=void 0===n?"inherit":n,l=t.classes,f=t.className,h=t.color,d=void 0===h?"initial":h,p=t.component,g=t.display,v=void 0===g?"initial":g,m=t.gutterBottom,y=void 0!==m&&m,b=t.noWrap,w=void 0!==b&&b,x=t.paragraph,_=void 0!==x&&x,O=t.variant,k=void 0===O?"body1":O,S=t.variantMapping,E=void 0===S?c:S,A=Object(i.a)(t,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),C=p||(_?"p":E[k]||c[k])||"span";return o.createElement(C,Object(r.a)({className:Object(a.a)(l.root,f,"inherit"!==k&&l[k],"initial"!==d&&l["color".concat(Object(u.a)(d))],w&&l.noWrap,y&&l.gutterBottom,_&&l.paragraph,"inherit"!==s&&l["align".concat(Object(u.a)(s))],"initial"!==v&&l["display".concat(Object(u.a)(v))]),ref:e},A))}));e.a=Object(s.a)((function(t){return{root:{margin:0},body2:t.typography.body2,body1:t.typography.body1,caption:t.typography.caption,button:t.typography.button,h1:t.typography.h1,h2:t.typography.h2,h3:t.typography.h3,h4:t.typography.h4,h5:t.typography.h5,h6:t.typography.h6,subtitle1:t.typography.subtitle1,subtitle2:t.typography.subtitle2,overline:t.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},colorTextPrimary:{color:t.palette.text.primary},colorTextSecondary:{color:t.palette.text.secondary},colorError:{color:t.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(l)},function(t,e,n){"use strict";var r=n(18),i=n(36);function o(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e}function a(t){return"[object String]"===Object.prototype.toString.call(t)}var s=n(20),u=n(56);function c(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i}function l(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var f=function(t){return(t<10?"0":"")+t},h="function"===typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},d=n(40);function p(t){return null!=t&&"function"===typeof t["@@transducer/step"]}function g(t,e,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!Object(i.a)(o)){for(var a=0;a<t.length;){if("function"===typeof o[t[a]])return o[t[a]].apply(o,r);a+=1}if(p(o)){var s=e.apply(null,r);return s(o)}}return n.apply(this,arguments)}}var v=Object(s.a)((function(t){return!!Object(i.a)(t)||!!t&&("object"===typeof t&&(!a(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),m=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();var y=Object(r.a)((function(t,e){return function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,a){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,a,s){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,a,s,u){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,a,s,u,c){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,a,s,u,c,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}(t.length,(function(){return t.apply(e,arguments)}))}));function b(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function w(t,e,n,r){return t["@@transducer/result"](n[r](y(t["@@transducer/step"],t),e))}var x="undefined"!==typeof Symbol?Symbol.iterator:"@@iterator";function _(t,e,n){if("function"===typeof t&&(t=function(t){return new m(t)}(t)),v(n))return function(t,e,n){for(var r=0,i=n.length;r<i;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"===typeof n["fantasy-land/reduce"])return w(t,e,n,"fantasy-land/reduce");if(null!=n[x])return b(t,e,n[x]());if("function"===typeof n.next)return b(t,e,n);if("function"===typeof n.reduce)return w(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var O=function(){return this.xf["@@transducer/init"]()},k=function(t){return this.xf["@@transducer/result"](t)},S=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=O,t.prototype["@@transducer/result"]=k,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),E=Object(r.a)((function(t,e){return new S(t,e)})),A=Object(r.a)(g(["filter"],E,(function(t,e){return n=e,"[object Object]"===Object.prototype.toString.call(n)?_((function(n,r){return t(e[r])&&(n[r]=e[r]),n}),{},Object(d.a)(e)):function(t,e){for(var n=0,r=e.length,i=[];n<r;)t(e[n])&&(i[i.length]=e[n]),n+=1;return i}(t,e);var n}))),C=Object(r.a)((function(t,e){return A((n=t,function(){return!n.apply(this,arguments)}),e);var n}));var j=Object(s.a)((function(t){return function t(e,n){var r=function(r){var i=n.concat([e]);return Object(u.a)(r,i)?"<Circular>":t(r,i)},i=function(t,e){return c((function(e){return l(e)+": "+r(t[e])}),e.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+c(r,e).join(", ")+"))";case"[object Array]":return"["+c(r,e).concat(i(e,C((function(t){return/^\d+$/.test(t)}),Object(d.a)(e)))).join(", ")+"]";case"[object Boolean]":return"object"===typeof e?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):l(h(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"===typeof e?"new Number("+r(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object String]":return"object"===typeof e?"new String("+r(e.valueOf())+")":l(e);case"[object Undefined]":return"undefined";default:if("function"===typeof e.toString){var o=e.toString();if("[object Object]"!==o)return o}return"{"+i(e,Object(d.a)(e)).join(", ")+"}"}}(t,[])})),T=Object(r.a)((function(t,e){if(Object(i.a)(t)){if(Object(i.a)(e))return t.concat(e);throw new TypeError(j(e)+" is not an array")}if(a(t)){if(a(e))return t+e;throw new TypeError(j(e)+" is not a string")}if(null!=t&&o(t["fantasy-land/concat"]))return t["fantasy-land/concat"](e);if(null!=t&&o(t.concat))return t.concat(e);throw new TypeError(j(t)+' does not have a method named "concat" or "fantasy-land/concat"')}));e.a=T},function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var r=n(5),i=n(6),o=n(21),a=n(8),s=n(7),u=n(15),c=n.n(u),l=n(2),f=n.n(l),h={};function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=Object.keys(t),r=Object.keys(e);return t===e||n.length===r.length&&n.every((function(n){return t[n]===e[n]}))}var p=n(70);function g(t,e){Object.keys(e).forEach((function(n){!function(t,e,n){var r;n&&((r=n)&&"[object Function]"==={}.toString.call(r)?n(t.data(e)):t.change(e,p.vega.changeset().remove((function(){return!0})).insert(n)))}(t,n,e[n])}))}function v(t){var e=new Set;return t.forEach((function(t){Object.keys(t).forEach((function(t){e.add(t)}))})),e}var m=function(){};function y(t,e){var n=Object.keys(e);return n.forEach((function(n){try{t.addSignalListener(n,e[n])}catch(r){console.warn("Cannot add invalid signal listener.",r)}})),n.length>0}var b=n(3),w=n(128),x=n.n(w);function _(t,e){var n=Object.keys(e);return n.forEach((function(n){try{t.removeSignalListener(n,e[n])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}})),n.length>0}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(){return(k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function S(t){var e=t.spec,n=t.width,r=t.height;return"undefined"!==typeof n&&"undefined"!==typeof r?k({},e,{width:n,height:r}):"undefined"!==typeof n?k({},e,{width:n}):"undefined"!==typeof r?k({},e,{height:r}):e}var E=function(t){Object(s.a)(n,t);var e=Object(a.a)(n);function n(){var t;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a)),O(Object(o.a)(t),"containerRef",f.a.createRef()),O(Object(o.a)(t),"viewPromise",void 0),O(Object(o.a)(t),"handleError",(function(e){var n=t.props.onError;(void 0===n?m:n)(e),console.warn(e)})),O(Object(o.a)(t),"modifyView",(function(e){t.viewPromise&&t.viewPromise.then((function(t){return t&&e(t),!0})).catch(t.handleError)})),t}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.createView()}},{key:"componentDidUpdate",value:function(t){var e=this,n=v([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),!this.viewPromise||Array.from(n).some((function(n){return e.props[n]!==t[n]})))this.clearView(),this.createView();else{var r=function(t,e){if(t===e)return!1;var n={width:!1,height:!1,isExpensive:!1},r=v([t,e]);return!r.has("width")||"width"in t&&"width"in e&&t.width===e.width||("width"in t&&"number"===typeof t.width?n.width=t.width:n.isExpensive=!0),!r.has("height")||"height"in t&&"height"in e&&t.height===e.height||("height"in t&&"number"===typeof t.height?n.height=t.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),Object(b.a)(r).some((function(n){return!(n in t)||!(n in e)||!x()(t[n],e[n])}))&&(n.isExpensive=!0),!(!1===n.width&&!1===n.height&&!n.isExpensive)&&n}(S(this.props),S(t)),i=this.props.signalListeners,o=t.signalListeners;if(r)if(r.isExpensive)this.clearView(),this.createView();else{var a=!d(i,o);this.modifyView((function(t){!1!==r.width&&t.width(r.width),!1!==r.height&&t.height(r.height),a&&(o&&_(t,o),i&&y(t,i)),t.run()}))}else d(i,o)||this.modifyView((function(t){o&&_(t,o),i&&y(t,i),t.run()}))}}},{key:"componentWillUnmount",value:function(){this.clearView()}},{key:"createView",value:function(){var t=this.props,e=t.onNewView,n=t.signalListeners,r=void 0===n?{}:n,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["spec","onNewView","signalListeners"]);if(this.containerRef.current){var o=S(this.props);this.viewPromise=Object(p.default)(this.containerRef.current,o,i).then((function(t){var e=t.view;return y(e,r)&&e.run(),e})).catch(this.handleError),e&&this.modifyView(e)}}},{key:"clearView",value:function(){return this.modifyView((function(t){t.finalize()})),this.viewPromise=void 0,this}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.style;return f.a.createElement("div",{ref:this.containerRef,className:e,style:n})}}]),n}(f.a.PureComponent);function A(){return(A=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}O(E,"propTypes",{className:c.a.string,onError:c.a.func});var j=function(t){Object(s.a)(n,t);var e=Object(a.a)(n);function n(){var t;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a)),C(Object(o.a)(t),"vegaEmbed",f.a.createRef()),C(Object(o.a)(t),"handleNewView",(function(e){t.update();var n=t.props.onNewView;(void 0===n?m:n)(e)})),t}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(t){d(this.props.data,t.data)||this.update()}},{key:"update",value:function(){var t=this.props.data;t&&this.vegaEmbed.current&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView((function(e){g(e,t),e.resize().run()}))}},{key:"render",value:function(){var t=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(this.props,["data"]);return f.a.createElement(E,A({ref:this.vegaEmbed},t,{onNewView:this.handleNewView}))}}]),n}(f.a.PureComponent);C(j,"defaultProps",{data:{}})},function(t,e,n){"use strict";var r=n(12),i=n(9),o=n(2),a=n.n(o),s=(n(15),n(17)),u=n(22),c=n(30),l=n(47);function f(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function h(t,e){return o.useMemo((function(){return null==t&&null==e?null:function(n){f(t,n),f(e,n)}}),[t,e])}var d="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;function p(t){var e=o.useRef(t);return d((function(){e.current=t})),o.useCallback((function(){return e.current.apply(void 0,arguments)}),[])}var g=!0,v=!1,m=null,y={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function b(t){t.metaKey||t.altKey||t.ctrlKey||(g=!0)}function w(){g=!1}function x(){"hidden"===this.visibilityState&&v&&(g=!0)}function _(t){var e=t.target;try{return e.matches(":focus-visible")}catch(n){}return g||function(t){var e=t.type,n=t.tagName;return!("INPUT"!==n||!y[e]||t.readOnly)||("TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable)}(e)}function O(){v=!0,window.clearTimeout(m),m=window.setTimeout((function(){v=!1}),100)}function k(){return{isFocusVisible:_,onBlurVisible:O,ref:o.useCallback((function(t){var e,n=l.findDOMNode(t);null!=n&&((e=n.ownerDocument).addEventListener("keydown",b,!0),e.addEventListener("mousedown",w,!0),e.addEventListener("pointerdown",w,!0),e.addEventListener("touchstart",w,!0),e.addEventListener("visibilitychange",x,!0))}),[])}}var S=n(49),E=n(48),A=n(54),C=n(39),j=a.a.createContext(null);function T(t,e){var n=Object.create(null);return t&&o.Children.map(t,(function(t){return t})).forEach((function(t){n[t.key]=function(t){return e&&Object(o.isValidElement)(t)?e(t):t}(t)})),n}function M(t,e,n){return null!=n[e]?n[e]:t.props[e]}function R(t,e,n){var r=T(t.children),i=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var a in t)a in e?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in e){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(e,r);return Object.keys(i).forEach((function(a){var s=i[a];if(Object(o.isValidElement)(s)){var u=a in e,c=a in r,l=e[a],f=Object(o.isValidElement)(l)&&!l.props.in;!c||u&&!f?c||!u||f?c&&u&&Object(o.isValidElement)(l)&&(i[a]=Object(o.cloneElement)(s,{onExited:n.bind(null,s),in:l.props.in,exit:M(s,"exit",t),enter:M(s,"enter",t)})):i[a]=Object(o.cloneElement)(s,{in:!1}):i[a]=Object(o.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:M(s,"exit",t),enter:M(s,"enter",t)})}})),i}var D=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},L=function(t){function e(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(Object(A.a)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Object(C.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(t,e){var n,r,i=e.children,a=e.handleExited;return{children:e.firstRender?(n=t,r=a,T(n.children,(function(t){return Object(o.cloneElement)(t,{onExited:r.bind(null,t),in:!0,appear:M(t,"appear",n),enter:M(t,"enter",n),exit:M(t,"exit",n)})}))):R(t,i,a),firstRender:!1}},n.handleExited=function(t,e){var n=T(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=Object(i.a)({},e.children);return delete n[t.key],{children:n}})))},n.render=function(){var t=this.props,e=t.component,n=t.childFactory,r=Object(E.a)(t,["component","childFactory"]),i=this.state.contextValue,o=D(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===e?a.a.createElement(j.Provider,{value:i},o):a.a.createElement(j.Provider,{value:i},a.a.createElement(e,r,o))},e}(a.a.Component);L.propTypes={},L.defaultProps={component:"div",childFactory:function(t){return t}};var N=L,I="undefined"===typeof window?o.useEffect:o.useLayoutEffect;var F=function(t){var e=t.classes,n=t.pulsate,r=void 0!==n&&n,i=t.rippleX,a=t.rippleY,u=t.rippleSize,c=t.in,l=t.onExited,f=void 0===l?function(){}:l,h=t.timeout,d=o.useState(!1),g=d[0],v=d[1],m=Object(s.a)(e.ripple,e.rippleVisible,r&&e.ripplePulsate),y={width:u,height:u,top:-u/2+a,left:-u/2+i},b=Object(s.a)(e.child,g&&e.childLeaving,r&&e.childPulsate),w=p(f);return I((function(){if(!c){v(!0);var t=setTimeout(w,h);return function(){clearTimeout(t)}}}),[w,c,h]),o.createElement("span",{className:m,style:y},o.createElement("span",{className:b}))},P=o.forwardRef((function(t,e){var n=t.center,a=void 0!==n&&n,u=t.classes,c=t.className,l=Object(r.a)(t,["center","classes","className"]),f=o.useState([]),h=f[0],d=f[1],p=o.useRef(0),g=o.useRef(null);o.useEffect((function(){g.current&&(g.current(),g.current=null)}),[h]);var v=o.useRef(!1),m=o.useRef(null),y=o.useRef(null),b=o.useRef(null);o.useEffect((function(){return function(){clearTimeout(m.current)}}),[]);var w=o.useCallback((function(t){var e=t.pulsate,n=t.rippleX,r=t.rippleY,i=t.rippleSize,a=t.cb;d((function(t){return[].concat(Object(S.a)(t),[o.createElement(F,{key:p.current,classes:u,timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:i})])})),p.current+=1,g.current=a}),[u]),x=o.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.pulsate,i=void 0!==r&&r,o=e.center,s=void 0===o?a||e.pulsate:o,u=e.fakeElement,c=void 0!==u&&u;if("mousedown"===t.type&&v.current)v.current=!1;else{"touchstart"===t.type&&(v.current=!0);var l,f,h,d=c?null:b.current,p=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)l=Math.round(p.width/2),f=Math.round(p.height/2);else{var g=t.touches?t.touches[0]:t,x=g.clientX,_=g.clientY;l=Math.round(x-p.left),f=Math.round(_-p.top)}if(s)(h=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(h+=1);else{var O=2*Math.max(Math.abs((d?d.clientWidth:0)-l),l)+2,k=2*Math.max(Math.abs((d?d.clientHeight:0)-f),f)+2;h=Math.sqrt(Math.pow(O,2)+Math.pow(k,2))}t.touches?null===y.current&&(y.current=function(){w({pulsate:i,rippleX:l,rippleY:f,rippleSize:h,cb:n})},m.current=setTimeout((function(){y.current&&(y.current(),y.current=null)}),80)):w({pulsate:i,rippleX:l,rippleY:f,rippleSize:h,cb:n})}}),[a,w]),_=o.useCallback((function(){x({},{pulsate:!0})}),[x]),O=o.useCallback((function(t,e){if(clearTimeout(m.current),"touchend"===t.type&&y.current)return t.persist(),y.current(),y.current=null,void(m.current=setTimeout((function(){O(t,e)})));y.current=null,d((function(t){return t.length>0?t.slice(1):t})),g.current=e}),[]);return o.useImperativeHandle(e,(function(){return{pulsate:_,start:x,stop:O}}),[_,x,O]),o.createElement("span",Object(i.a)({className:Object(s.a)(u.root,c),ref:b},l),o.createElement(N,{component:null,exit:!0},h))})),$=Object(u.a)((function(t){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(t.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(t.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(t.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(t.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(o.memo(P)),z=o.forwardRef((function(t,e){var n=t.action,a=t.buttonRef,u=t.centerRipple,c=void 0!==u&&u,f=t.children,d=t.classes,g=t.className,v=t.component,m=void 0===v?"button":v,y=t.disabled,b=void 0!==y&&y,w=t.disableRipple,x=void 0!==w&&w,_=t.disableTouchRipple,O=void 0!==_&&_,S=t.focusRipple,E=void 0!==S&&S,A=t.focusVisibleClassName,C=t.onBlur,j=t.onClick,T=t.onFocus,M=t.onFocusVisible,R=t.onKeyDown,D=t.onKeyUp,L=t.onMouseDown,N=t.onMouseLeave,I=t.onMouseUp,F=t.onTouchEnd,P=t.onTouchMove,z=t.onTouchStart,B=t.onDragLeave,U=t.tabIndex,W=void 0===U?0:U,H=t.TouchRippleProps,V=t.type,q=void 0===V?"button":V,G=Object(r.a)(t,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),K=o.useRef(null);var Y=o.useRef(null),Q=o.useState(!1),X=Q[0],Z=Q[1];b&&X&&Z(!1);var J=k(),tt=J.isFocusVisible,et=J.onBlurVisible,nt=J.ref;function rt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;return p((function(r){return e&&e(r),!n&&Y.current&&Y.current[t](r),!0}))}o.useImperativeHandle(n,(function(){return{focusVisible:function(){Z(!0),K.current.focus()}}}),[]),o.useEffect((function(){X&&E&&!x&&Y.current.pulsate()}),[x,E,X]);var it=rt("start",L),ot=rt("stop",B),at=rt("stop",I),st=rt("stop",(function(t){X&&t.preventDefault(),N&&N(t)})),ut=rt("start",z),ct=rt("stop",F),lt=rt("stop",P),ft=rt("stop",(function(t){X&&(et(t),Z(!1)),C&&C(t)}),!1),ht=p((function(t){K.current||(K.current=t.currentTarget),tt(t)&&(Z(!0),M&&M(t)),T&&T(t)})),dt=function(){var t=l.findDOMNode(K.current);return m&&"button"!==m&&!("A"===t.tagName&&t.href)},pt=o.useRef(!1),gt=p((function(t){E&&!pt.current&&X&&Y.current&&" "===t.key&&(pt.current=!0,t.persist(),Y.current.stop(t,(function(){Y.current.start(t)}))),t.target===t.currentTarget&&dt()&&" "===t.key&&t.preventDefault(),R&&R(t),t.target===t.currentTarget&&dt()&&"Enter"===t.key&&!b&&(t.preventDefault(),j&&j(t))})),vt=p((function(t){E&&" "===t.key&&Y.current&&X&&!t.defaultPrevented&&(pt.current=!1,t.persist(),Y.current.stop(t,(function(){Y.current.pulsate(t)}))),D&&D(t),j&&t.target===t.currentTarget&&dt()&&" "===t.key&&!t.defaultPrevented&&j(t)})),mt=m;"button"===mt&&G.href&&(mt="a");var yt={};"button"===mt?(yt.type=q,yt.disabled=b):("a"===mt&&G.href||(yt.role="button"),yt["aria-disabled"]=b);var bt=h(a,e),wt=h(nt,K),xt=h(bt,wt),_t=o.useState(!1),Ot=_t[0],kt=_t[1];o.useEffect((function(){kt(!0)}),[]);var St=Ot&&!x&&!b;return o.createElement(mt,Object(i.a)({className:Object(s.a)(d.root,g,X&&[d.focusVisible,A],b&&d.disabled),onBlur:ft,onClick:j,onFocus:ht,onKeyDown:gt,onKeyUp:vt,onMouseDown:it,onMouseLeave:st,onMouseUp:at,onDragLeave:ot,onTouchEnd:ct,onTouchMove:lt,onTouchStart:ut,ref:xt,tabIndex:b?-1:W},yt,G),f,St?o.createElement($,Object(i.a)({ref:Y,center:c},H)):null)})),B=Object(u.a)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(z),U=n(25),W=o.forwardRef((function(t,e){var n=t.children,a=t.classes,u=t.className,c=t.color,l=void 0===c?"default":c,f=t.component,h=void 0===f?"button":f,d=t.disabled,p=void 0!==d&&d,g=t.disableElevation,v=void 0!==g&&g,m=t.disableFocusRipple,y=void 0!==m&&m,b=t.endIcon,w=t.focusVisibleClassName,x=t.fullWidth,_=void 0!==x&&x,O=t.size,k=void 0===O?"medium":O,S=t.startIcon,E=t.type,A=void 0===E?"button":E,C=t.variant,j=void 0===C?"text":C,T=Object(r.a)(t,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),M=S&&o.createElement("span",{className:Object(s.a)(a.startIcon,a["iconSize".concat(Object(U.a)(k))])},S),R=b&&o.createElement("span",{className:Object(s.a)(a.endIcon,a["iconSize".concat(Object(U.a)(k))])},b);return o.createElement(B,Object(i.a)({className:Object(s.a)(a.root,a[j],u,"inherit"===l?a.colorInherit:"default"!==l&&a["".concat(j).concat(Object(U.a)(l))],"medium"!==k&&[a["".concat(j,"Size").concat(Object(U.a)(k))],a["size".concat(Object(U.a)(k))]],v&&a.disableElevation,p&&a.disabled,_&&a.fullWidth),component:h,disabled:p,focusRipple:!y,focusVisibleClassName:Object(s.a)(a.focusVisible,w),ref:e,type:A},T),o.createElement("span",{className:a.label},M,n,R))}));e.a=Object(u.a)((function(t){return{root:Object(i.a)({},t.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:t.shape.borderRadius,color:t.palette.text.primary,transition:t.transitions.create(["background-color","box-shadow","border"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:Object(c.b)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:t.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:t.palette.primary.main,"&:hover":{backgroundColor:Object(c.b)(t.palette.primary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:t.palette.secondary.main,"&:hover":{backgroundColor:Object(c.b)(t.palette.secondary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===t.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(t.palette.action.disabledBackground)}},outlinedPrimary:{color:t.palette.primary.main,border:"1px solid ".concat(Object(c.b)(t.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(t.palette.primary.main),backgroundColor:Object(c.b)(t.palette.primary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:t.palette.secondary.main,border:"1px solid ".concat(Object(c.b)(t.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(t.palette.secondary.main),backgroundColor:Object(c.b)(t.palette.secondary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(t.palette.action.disabled)}},contained:{color:t.palette.getContrastText(t.palette.grey[300]),backgroundColor:t.palette.grey[300],boxShadow:t.shadows[2],"&:hover":{backgroundColor:t.palette.grey.A100,boxShadow:t.shadows[4],"@media (hover: none)":{boxShadow:t.shadows[2],backgroundColor:t.palette.grey[300]},"&$disabled":{backgroundColor:t.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:t.shadows[6]},"&:active":{boxShadow:t.shadows[8]},"&$disabled":{color:t.palette.action.disabled,boxShadow:t.shadows[0],backgroundColor:t.palette.action.disabledBackground}},containedPrimary:{color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.main,"&:hover":{backgroundColor:t.palette.primary.dark,"@media (hover: none)":{backgroundColor:t.palette.primary.main}}},containedSecondary:{color:t.palette.secondary.contrastText,backgroundColor:t.palette.secondary.main,"&:hover":{backgroundColor:t.palette.secondary.dark,"@media (hover: none)":{backgroundColor:t.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(W)},function(t,e,n){"use strict";var r=n(20);function i(t){return t}var o=Object(r.a)(i),a=n(56);function s(t,e,n){var r,i=typeof t;switch(i){case"string":case"number":return 0===t&&1/t===-1/0?!!n._items["-0"]||(e&&(n._items["-0"]=!0),!1):null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?t in n._items[i]||(e&&(n._items[i][t]=!0),!1):(e&&(n._items[i]={},n._items[i][t]=!0),!1);case"boolean":if(i in n._items){var o=t?1:0;return!!n._items[i][o]||(e&&(n._items[i][o]=!0),!1)}return e&&(n._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?!!Object(a.a)(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1);case"undefined":return!!n._items[i]||(e&&(n._items[i]=!0),!1);case"object":if(null===t)return!!n._items.null||(e&&(n._items.null=!0),!1);default:return(i=Object.prototype.toString.call(t))in n._items?!!Object(a.a)(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1)}}var u=function(){function t(){this._nativeSet="function"===typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!s(t,!0,this)},t.prototype.has=function(t){return s(t,!1,this)},t}(),c=n(18),l=Object(c.a)((function(t,e){for(var n,r,i=new u,o=[],a=0;a<e.length;)n=t(r=e[a]),i.add(n)&&o.push(r),a+=1;return o}))(o);e.a=l},function(t,e,n){"use strict";var r=n(36);function i(t,e){return function(){var n=arguments.length;if(0===n)return e();var i=arguments[n-1];return Object(r.a)(i)||"function"!==typeof i[t]?e.apply(this,arguments):i[t].apply(i,Array.prototype.slice.call(arguments,0,n-1))}}var o=n(20),a=n(18),s=n(16);function u(t){return function e(n,r,i){switch(arguments.length){case 0:return e;case 1:return Object(s.a)(n)?e:Object(a.a)((function(e,r){return t(n,e,r)}));case 2:return Object(s.a)(n)&&Object(s.a)(r)?e:Object(s.a)(n)?Object(a.a)((function(e,n){return t(e,r,n)})):Object(s.a)(r)?Object(a.a)((function(e,r){return t(n,e,r)})):Object(o.a)((function(e){return t(n,r,e)}));default:return Object(s.a)(n)&&Object(s.a)(r)&&Object(s.a)(i)?e:Object(s.a)(n)&&Object(s.a)(r)?Object(a.a)((function(e,n){return t(e,n,i)})):Object(s.a)(n)&&Object(s.a)(i)?Object(a.a)((function(e,n){return t(e,r,n)})):Object(s.a)(r)&&Object(s.a)(i)?Object(a.a)((function(e,r){return t(n,e,r)})):Object(s.a)(n)?Object(o.a)((function(e){return t(e,r,i)})):Object(s.a)(r)?Object(o.a)((function(e){return t(n,e,i)})):Object(s.a)(i)?Object(o.a)((function(e){return t(n,r,e)})):t(n,r,i)}}}var c=u(i("slice",(function(t,e,n){return Array.prototype.slice.call(n,t,e)})));e.a=c},function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(2),i=n.n(r);var o=i.a.createContext(null);function a(){return i.a.useContext(o)}}]]);
//# sourceMappingURL=2.71296018.chunk.js.map